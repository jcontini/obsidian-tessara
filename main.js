/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => TesseraPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// node_modules/@anthropic-ai/sdk/version.mjs
var VERSION = "0.31.0";

// node_modules/@anthropic-ai/sdk/_shims/registry.mjs
var auto = false;
var kind = void 0;
var fetch2 = void 0;
var Request2 = void 0;
var Response2 = void 0;
var Headers2 = void 0;
var FormData2 = void 0;
var Blob2 = void 0;
var File2 = void 0;
var ReadableStream2 = void 0;
var getMultipartRequestOptions = void 0;
var getDefaultAgent = void 0;
var fileFromPath = void 0;
var isFsReadStream = void 0;
function setShims(shims, options = { auto: false }) {
  if (auto) {
    throw new Error(`you must \`import '@anthropic-ai/sdk/shims/${shims.kind}'\` before importing anything else from @anthropic-ai/sdk`);
  }
  if (kind) {
    throw new Error(`can't \`import '@anthropic-ai/sdk/shims/${shims.kind}'\` after \`import '@anthropic-ai/sdk/shims/${kind}'\``);
  }
  auto = options.auto;
  kind = shims.kind;
  fetch2 = shims.fetch;
  Request2 = shims.Request;
  Response2 = shims.Response;
  Headers2 = shims.Headers;
  FormData2 = shims.FormData;
  Blob2 = shims.Blob;
  File2 = shims.File;
  ReadableStream2 = shims.ReadableStream;
  getMultipartRequestOptions = shims.getMultipartRequestOptions;
  getDefaultAgent = shims.getDefaultAgent;
  fileFromPath = shims.fileFromPath;
  isFsReadStream = shims.isFsReadStream;
}

// node_modules/@anthropic-ai/sdk/_shims/MultipartBody.mjs
var MultipartBody = class {
  constructor(body) {
    this.body = body;
  }
  get [Symbol.toStringTag]() {
    return "MultipartBody";
  }
};

// node_modules/@anthropic-ai/sdk/_shims/web-runtime.mjs
function getRuntime({ manuallyImported } = {}) {
  const recommendation = manuallyImported ? `You may need to use polyfills` : `Add one of these imports before your first \`import \u2026 from '@anthropic-ai/sdk'\`:
- \`import '@anthropic-ai/sdk/shims/node'\` (if you're running on Node)
- \`import '@anthropic-ai/sdk/shims/web'\` (otherwise)
`;
  let _fetch, _Request, _Response, _Headers;
  try {
    _fetch = fetch;
    _Request = Request;
    _Response = Response;
    _Headers = Headers;
  } catch (error) {
    throw new Error(`this environment is missing the following Web Fetch API type: ${error.message}. ${recommendation}`);
  }
  return {
    kind: "web",
    fetch: _fetch,
    Request: _Request,
    Response: _Response,
    Headers: _Headers,
    FormData: (
      // @ts-ignore
      typeof FormData !== "undefined" ? FormData : class FormData {
        // @ts-ignore
        constructor() {
          throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${recommendation}`);
        }
      }
    ),
    Blob: typeof Blob !== "undefined" ? Blob : class Blob {
      constructor() {
        throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${recommendation}`);
      }
    },
    File: (
      // @ts-ignore
      typeof File !== "undefined" ? File : class File {
        // @ts-ignore
        constructor() {
          throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${recommendation}`);
        }
      }
    ),
    ReadableStream: (
      // @ts-ignore
      typeof ReadableStream !== "undefined" ? ReadableStream : class ReadableStream {
        // @ts-ignore
        constructor() {
          throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${recommendation}`);
        }
      }
    ),
    getMultipartRequestOptions: async (form, opts) => ({
      ...opts,
      body: new MultipartBody(form)
    }),
    getDefaultAgent: (url) => void 0,
    fileFromPath: () => {
      throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/anthropics/anthropic-sdk-typescript#file-uploads");
    },
    isFsReadStream: (value) => false
  };
}

// node_modules/@anthropic-ai/sdk/_shims/index.mjs
if (!kind)
  setShims(getRuntime(), { auto: true });

// node_modules/@anthropic-ai/sdk/error.mjs
var AnthropicError = class extends Error {
};
var APIError = class extends AnthropicError {
  constructor(status, error, message, headers) {
    super(`${APIError.makeMessage(status, error, message)}`);
    this.status = status;
    this.headers = headers;
    this.request_id = headers == null ? void 0 : headers["request-id"];
    this.error = error;
  }
  static makeMessage(status, error, message) {
    const msg = (error == null ? void 0 : error.message) ? typeof error.message === "string" ? error.message : JSON.stringify(error.message) : error ? JSON.stringify(error) : message;
    if (status && msg) {
      return `${status} ${msg}`;
    }
    if (status) {
      return `${status} status code (no body)`;
    }
    if (msg) {
      return msg;
    }
    return "(no status code or body)";
  }
  static generate(status, errorResponse, message, headers) {
    if (!status) {
      return new APIConnectionError({ message, cause: castToError(errorResponse) });
    }
    const error = errorResponse;
    if (status === 400) {
      return new BadRequestError(status, error, message, headers);
    }
    if (status === 401) {
      return new AuthenticationError(status, error, message, headers);
    }
    if (status === 403) {
      return new PermissionDeniedError(status, error, message, headers);
    }
    if (status === 404) {
      return new NotFoundError(status, error, message, headers);
    }
    if (status === 409) {
      return new ConflictError(status, error, message, headers);
    }
    if (status === 422) {
      return new UnprocessableEntityError(status, error, message, headers);
    }
    if (status === 429) {
      return new RateLimitError(status, error, message, headers);
    }
    if (status >= 500) {
      return new InternalServerError(status, error, message, headers);
    }
    return new APIError(status, error, message, headers);
  }
};
var APIUserAbortError = class extends APIError {
  constructor({ message } = {}) {
    super(void 0, void 0, message || "Request was aborted.", void 0);
    this.status = void 0;
  }
};
var APIConnectionError = class extends APIError {
  constructor({ message, cause }) {
    super(void 0, void 0, message || "Connection error.", void 0);
    this.status = void 0;
    if (cause)
      this.cause = cause;
  }
};
var APIConnectionTimeoutError = class extends APIConnectionError {
  constructor({ message } = {}) {
    super({ message: message != null ? message : "Request timed out." });
  }
};
var BadRequestError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 400;
  }
};
var AuthenticationError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 401;
  }
};
var PermissionDeniedError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 403;
  }
};
var NotFoundError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 404;
  }
};
var ConflictError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 409;
  }
};
var UnprocessableEntityError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 422;
  }
};
var RateLimitError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 429;
  }
};
var InternalServerError = class extends APIError {
};

// node_modules/@anthropic-ai/sdk/internal/decoders/line.mjs
var LineDecoder = class {
  constructor() {
    this.buffer = [];
    this.trailingCR = false;
  }
  decode(chunk) {
    let text = this.decodeText(chunk);
    if (this.trailingCR) {
      text = "\r" + text;
      this.trailingCR = false;
    }
    if (text.endsWith("\r")) {
      this.trailingCR = true;
      text = text.slice(0, -1);
    }
    if (!text) {
      return [];
    }
    const trailingNewline = LineDecoder.NEWLINE_CHARS.has(text[text.length - 1] || "");
    let lines = text.split(LineDecoder.NEWLINE_REGEXP);
    if (trailingNewline) {
      lines.pop();
    }
    if (lines.length === 1 && !trailingNewline) {
      this.buffer.push(lines[0]);
      return [];
    }
    if (this.buffer.length > 0) {
      lines = [this.buffer.join("") + lines[0], ...lines.slice(1)];
      this.buffer = [];
    }
    if (!trailingNewline) {
      this.buffer = [lines.pop() || ""];
    }
    return lines;
  }
  decodeText(bytes) {
    var _a2;
    if (bytes == null)
      return "";
    if (typeof bytes === "string")
      return bytes;
    if (typeof Buffer !== "undefined") {
      if (bytes instanceof Buffer) {
        return bytes.toString();
      }
      if (bytes instanceof Uint8Array) {
        return Buffer.from(bytes).toString();
      }
      throw new AnthropicError(`Unexpected: received non-Uint8Array (${bytes.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`);
    }
    if (typeof TextDecoder !== "undefined") {
      if (bytes instanceof Uint8Array || bytes instanceof ArrayBuffer) {
        (_a2 = this.textDecoder) != null ? _a2 : this.textDecoder = new TextDecoder("utf8");
        return this.textDecoder.decode(bytes);
      }
      throw new AnthropicError(`Unexpected: received non-Uint8Array/ArrayBuffer (${bytes.constructor.name}) in a web platform. Please report this error.`);
    }
    throw new AnthropicError(`Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.`);
  }
  flush() {
    if (!this.buffer.length && !this.trailingCR) {
      return [];
    }
    const lines = [this.buffer.join("")];
    this.buffer = [];
    this.trailingCR = false;
    return lines;
  }
};
LineDecoder.NEWLINE_CHARS = /* @__PURE__ */ new Set(["\n", "\r"]);
LineDecoder.NEWLINE_REGEXP = /\r\n|[\n\r]/g;

// node_modules/@anthropic-ai/sdk/streaming.mjs
var Stream = class {
  constructor(iterator, controller) {
    this.iterator = iterator;
    this.controller = controller;
  }
  static fromSSEResponse(response, controller) {
    let consumed = false;
    async function* iterator() {
      if (consumed) {
        throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");
      }
      consumed = true;
      let done = false;
      try {
        for await (const sse of _iterSSEMessages(response, controller)) {
          if (sse.event === "completion") {
            try {
              yield JSON.parse(sse.data);
            } catch (e) {
              console.error(`Could not parse message into JSON:`, sse.data);
              console.error(`From chunk:`, sse.raw);
              throw e;
            }
          }
          if (sse.event === "message_start" || sse.event === "message_delta" || sse.event === "message_stop" || sse.event === "content_block_start" || sse.event === "content_block_delta" || sse.event === "content_block_stop") {
            try {
              yield JSON.parse(sse.data);
            } catch (e) {
              console.error(`Could not parse message into JSON:`, sse.data);
              console.error(`From chunk:`, sse.raw);
              throw e;
            }
          }
          if (sse.event === "ping") {
            continue;
          }
          if (sse.event === "error") {
            throw APIError.generate(void 0, `SSE Error: ${sse.data}`, sse.data, createResponseHeaders(response.headers));
          }
        }
        done = true;
      } catch (e) {
        if (e instanceof Error && e.name === "AbortError")
          return;
        throw e;
      } finally {
        if (!done)
          controller.abort();
      }
    }
    return new Stream(iterator, controller);
  }
  /**
   * Generates a Stream from a newline-separated ReadableStream
   * where each item is a JSON value.
   */
  static fromReadableStream(readableStream, controller) {
    let consumed = false;
    async function* iterLines() {
      const lineDecoder = new LineDecoder();
      const iter = readableStreamAsyncIterable(readableStream);
      for await (const chunk of iter) {
        for (const line of lineDecoder.decode(chunk)) {
          yield line;
        }
      }
      for (const line of lineDecoder.flush()) {
        yield line;
      }
    }
    async function* iterator() {
      if (consumed) {
        throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");
      }
      consumed = true;
      let done = false;
      try {
        for await (const line of iterLines()) {
          if (done)
            continue;
          if (line)
            yield JSON.parse(line);
        }
        done = true;
      } catch (e) {
        if (e instanceof Error && e.name === "AbortError")
          return;
        throw e;
      } finally {
        if (!done)
          controller.abort();
      }
    }
    return new Stream(iterator, controller);
  }
  [Symbol.asyncIterator]() {
    return this.iterator();
  }
  /**
   * Splits the stream into two streams which can be
   * independently read from at different speeds.
   */
  tee() {
    const left = [];
    const right = [];
    const iterator = this.iterator();
    const teeIterator = (queue) => {
      return {
        next: () => {
          if (queue.length === 0) {
            const result = iterator.next();
            left.push(result);
            right.push(result);
          }
          return queue.shift();
        }
      };
    };
    return [
      new Stream(() => teeIterator(left), this.controller),
      new Stream(() => teeIterator(right), this.controller)
    ];
  }
  /**
   * Converts this stream to a newline-separated ReadableStream of
   * JSON stringified values in the stream
   * which can be turned back into a Stream with `Stream.fromReadableStream()`.
   */
  toReadableStream() {
    const self = this;
    let iter;
    const encoder = new TextEncoder();
    return new ReadableStream2({
      async start() {
        iter = self[Symbol.asyncIterator]();
      },
      async pull(ctrl) {
        try {
          const { value, done } = await iter.next();
          if (done)
            return ctrl.close();
          const bytes = encoder.encode(JSON.stringify(value) + "\n");
          ctrl.enqueue(bytes);
        } catch (err) {
          ctrl.error(err);
        }
      },
      async cancel() {
        var _a2;
        await ((_a2 = iter.return) == null ? void 0 : _a2.call(iter));
      }
    });
  }
};
async function* _iterSSEMessages(response, controller) {
  if (!response.body) {
    controller.abort();
    throw new AnthropicError(`Attempted to iterate over a response with no body`);
  }
  const sseDecoder = new SSEDecoder();
  const lineDecoder = new LineDecoder();
  const iter = readableStreamAsyncIterable(response.body);
  for await (const sseChunk of iterSSEChunks(iter)) {
    for (const line of lineDecoder.decode(sseChunk)) {
      const sse = sseDecoder.decode(line);
      if (sse)
        yield sse;
    }
  }
  for (const line of lineDecoder.flush()) {
    const sse = sseDecoder.decode(line);
    if (sse)
      yield sse;
  }
}
async function* iterSSEChunks(iterator) {
  let data = new Uint8Array();
  for await (const chunk of iterator) {
    if (chunk == null) {
      continue;
    }
    const binaryChunk = chunk instanceof ArrayBuffer ? new Uint8Array(chunk) : typeof chunk === "string" ? new TextEncoder().encode(chunk) : chunk;
    let newData = new Uint8Array(data.length + binaryChunk.length);
    newData.set(data);
    newData.set(binaryChunk, data.length);
    data = newData;
    let patternIndex;
    while ((patternIndex = findDoubleNewlineIndex(data)) !== -1) {
      yield data.slice(0, patternIndex);
      data = data.slice(patternIndex);
    }
  }
  if (data.length > 0) {
    yield data;
  }
}
function findDoubleNewlineIndex(buffer) {
  const newline = 10;
  const carriage = 13;
  for (let i = 0; i < buffer.length - 2; i++) {
    if (buffer[i] === newline && buffer[i + 1] === newline) {
      return i + 2;
    }
    if (buffer[i] === carriage && buffer[i + 1] === carriage) {
      return i + 2;
    }
    if (buffer[i] === carriage && buffer[i + 1] === newline && i + 3 < buffer.length && buffer[i + 2] === carriage && buffer[i + 3] === newline) {
      return i + 4;
    }
  }
  return -1;
}
var SSEDecoder = class {
  constructor() {
    this.event = null;
    this.data = [];
    this.chunks = [];
  }
  decode(line) {
    if (line.endsWith("\r")) {
      line = line.substring(0, line.length - 1);
    }
    if (!line) {
      if (!this.event && !this.data.length)
        return null;
      const sse = {
        event: this.event,
        data: this.data.join("\n"),
        raw: this.chunks
      };
      this.event = null;
      this.data = [];
      this.chunks = [];
      return sse;
    }
    this.chunks.push(line);
    if (line.startsWith(":")) {
      return null;
    }
    let [fieldname, _, value] = partition(line, ":");
    if (value.startsWith(" ")) {
      value = value.substring(1);
    }
    if (fieldname === "event") {
      this.event = value;
    } else if (fieldname === "data") {
      this.data.push(value);
    }
    return null;
  }
};
function partition(str, delimiter) {
  const index = str.indexOf(delimiter);
  if (index !== -1) {
    return [str.substring(0, index), delimiter, str.substring(index + delimiter.length)];
  }
  return [str, "", ""];
}
function readableStreamAsyncIterable(stream) {
  if (stream[Symbol.asyncIterator])
    return stream;
  const reader = stream.getReader();
  return {
    async next() {
      try {
        const result = await reader.read();
        if (result == null ? void 0 : result.done)
          reader.releaseLock();
        return result;
      } catch (e) {
        reader.releaseLock();
        throw e;
      }
    },
    async return() {
      const cancelPromise = reader.cancel();
      reader.releaseLock();
      await cancelPromise;
      return { done: true, value: void 0 };
    },
    [Symbol.asyncIterator]() {
      return this;
    }
  };
}

// node_modules/@anthropic-ai/sdk/uploads.mjs
var isResponseLike = (value) => value != null && typeof value === "object" && typeof value.url === "string" && typeof value.blob === "function";
var isFileLike = (value) => value != null && typeof value === "object" && typeof value.name === "string" && typeof value.lastModified === "number" && isBlobLike(value);
var isBlobLike = (value) => value != null && typeof value === "object" && typeof value.size === "number" && typeof value.type === "string" && typeof value.text === "function" && typeof value.slice === "function" && typeof value.arrayBuffer === "function";
async function toFile(value, name, options) {
  var _a2, _b, _c;
  value = await value;
  if (isFileLike(value)) {
    return value;
  }
  if (isResponseLike(value)) {
    const blob = await value.blob();
    name || (name = (_a2 = new URL(value.url).pathname.split(/[\\/]/).pop()) != null ? _a2 : "unknown_file");
    const data = isBlobLike(blob) ? [await blob.arrayBuffer()] : [blob];
    return new File2(data, name, options);
  }
  const bits = await getBytes(value);
  name || (name = (_b = getName(value)) != null ? _b : "unknown_file");
  if (!(options == null ? void 0 : options.type)) {
    const type = (_c = bits[0]) == null ? void 0 : _c.type;
    if (typeof type === "string") {
      options = { ...options, type };
    }
  }
  return new File2(bits, name, options);
}
async function getBytes(value) {
  var _a2;
  let parts = [];
  if (typeof value === "string" || ArrayBuffer.isView(value) || // includes Uint8Array, Buffer, etc.
  value instanceof ArrayBuffer) {
    parts.push(value);
  } else if (isBlobLike(value)) {
    parts.push(await value.arrayBuffer());
  } else if (isAsyncIterableIterator(value)) {
    for await (const chunk of value) {
      parts.push(chunk);
    }
  } else {
    throw new Error(`Unexpected data type: ${typeof value}; constructor: ${(_a2 = value == null ? void 0 : value.constructor) == null ? void 0 : _a2.name}; props: ${propsForError(value)}`);
  }
  return parts;
}
function propsForError(value) {
  const props = Object.getOwnPropertyNames(value);
  return `[${props.map((p) => `"${p}"`).join(", ")}]`;
}
function getName(value) {
  var _a2;
  return getStringFromMaybeBuffer(value.name) || getStringFromMaybeBuffer(value.filename) || // For fs.ReadStream
  ((_a2 = getStringFromMaybeBuffer(value.path)) == null ? void 0 : _a2.split(/[\\/]/).pop());
}
var getStringFromMaybeBuffer = (x) => {
  if (typeof x === "string")
    return x;
  if (typeof Buffer !== "undefined" && x instanceof Buffer)
    return String(x);
  return void 0;
};
var isAsyncIterableIterator = (value) => value != null && typeof value === "object" && typeof value[Symbol.asyncIterator] === "function";
var isMultipartBody = (body) => body && typeof body === "object" && body.body && body[Symbol.toStringTag] === "MultipartBody";

// node_modules/@anthropic-ai/sdk/core.mjs
var __classPrivateFieldSet = function(receiver, state, value, kind2, f) {
  if (kind2 === "m")
    throw new TypeError("Private method is not writable");
  if (kind2 === "a" && !f)
    throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
    throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind2 === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var __classPrivateFieldGet = function(receiver, state, kind2, f) {
  if (kind2 === "a" && !f)
    throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
    throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind2 === "m" ? f : kind2 === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _AbstractPage_client;
async function defaultParseResponse(props) {
  const { response } = props;
  if (props.options.stream) {
    debug("response", response.status, response.url, response.headers, response.body);
    if (props.options.__streamClass) {
      return props.options.__streamClass.fromSSEResponse(response, props.controller);
    }
    return Stream.fromSSEResponse(response, props.controller);
  }
  if (response.status === 204) {
    return null;
  }
  if (props.options.__binaryResponse) {
    return response;
  }
  const contentType = response.headers.get("content-type");
  const isJSON = (contentType == null ? void 0 : contentType.includes("application/json")) || (contentType == null ? void 0 : contentType.includes("application/vnd.api+json"));
  if (isJSON) {
    const json = await response.json();
    debug("response", response.status, response.url, response.headers, json);
    return json;
  }
  const text = await response.text();
  debug("response", response.status, response.url, response.headers, text);
  return text;
}
var APIPromise = class extends Promise {
  constructor(responsePromise, parseResponse = defaultParseResponse) {
    super((resolve) => {
      resolve(null);
    });
    this.responsePromise = responsePromise;
    this.parseResponse = parseResponse;
  }
  _thenUnwrap(transform) {
    return new APIPromise(this.responsePromise, async (props) => transform(await this.parseResponse(props), props));
  }
  /**
   * Gets the raw `Response` instance instead of parsing the response
   * data.
   *
   * If you want to parse the response body but still get the `Response`
   * instance, you can use {@link withResponse()}.
   *
   * ðŸ‘‹ Getting the wrong TypeScript type for `Response`?
   * Try setting `"moduleResolution": "NodeNext"` if you can,
   * or add one of these imports before your first `import â€¦ from '@anthropic-ai/sdk'`:
   * - `import '@anthropic-ai/sdk/shims/node'` (if you're running on Node)
   * - `import '@anthropic-ai/sdk/shims/web'` (otherwise)
   */
  asResponse() {
    return this.responsePromise.then((p) => p.response);
  }
  /**
   * Gets the parsed response data and the raw `Response` instance.
   *
   * If you just want to get the raw `Response` instance without parsing it,
   * you can use {@link asResponse()}.
   *
   *
   * ðŸ‘‹ Getting the wrong TypeScript type for `Response`?
   * Try setting `"moduleResolution": "NodeNext"` if you can,
   * or add one of these imports before your first `import â€¦ from '@anthropic-ai/sdk'`:
   * - `import '@anthropic-ai/sdk/shims/node'` (if you're running on Node)
   * - `import '@anthropic-ai/sdk/shims/web'` (otherwise)
   */
  async withResponse() {
    const [data, response] = await Promise.all([this.parse(), this.asResponse()]);
    return { data, response };
  }
  parse() {
    if (!this.parsedPromise) {
      this.parsedPromise = this.responsePromise.then(this.parseResponse);
    }
    return this.parsedPromise;
  }
  then(onfulfilled, onrejected) {
    return this.parse().then(onfulfilled, onrejected);
  }
  catch(onrejected) {
    return this.parse().catch(onrejected);
  }
  finally(onfinally) {
    return this.parse().finally(onfinally);
  }
};
var APIClient = class {
  constructor({
    baseURL,
    maxRetries = 2,
    timeout = 6e5,
    // 10 minutes
    httpAgent,
    fetch: overridenFetch
  }) {
    this.baseURL = baseURL;
    this.maxRetries = validatePositiveInteger("maxRetries", maxRetries);
    this.timeout = validatePositiveInteger("timeout", timeout);
    this.httpAgent = httpAgent;
    this.fetch = overridenFetch != null ? overridenFetch : fetch2;
  }
  authHeaders(opts) {
    return {};
  }
  /**
   * Override this to add your own default headers, for example:
   *
   *  {
   *    ...super.defaultHeaders(),
   *    Authorization: 'Bearer 123',
   *  }
   */
  defaultHeaders(opts) {
    return {
      Accept: "application/json",
      "Content-Type": "application/json",
      "User-Agent": this.getUserAgent(),
      ...getPlatformHeaders(),
      ...this.authHeaders(opts)
    };
  }
  /**
   * Override this to add your own headers validation:
   */
  validateHeaders(headers, customHeaders) {
  }
  defaultIdempotencyKey() {
    return `stainless-node-retry-${uuid4()}`;
  }
  get(path, opts) {
    return this.methodRequest("get", path, opts);
  }
  post(path, opts) {
    return this.methodRequest("post", path, opts);
  }
  patch(path, opts) {
    return this.methodRequest("patch", path, opts);
  }
  put(path, opts) {
    return this.methodRequest("put", path, opts);
  }
  delete(path, opts) {
    return this.methodRequest("delete", path, opts);
  }
  methodRequest(method, path, opts) {
    return this.request(Promise.resolve(opts).then(async (opts2) => {
      const body = opts2 && isBlobLike(opts2 == null ? void 0 : opts2.body) ? new DataView(await opts2.body.arrayBuffer()) : (opts2 == null ? void 0 : opts2.body) instanceof DataView ? opts2.body : (opts2 == null ? void 0 : opts2.body) instanceof ArrayBuffer ? new DataView(opts2.body) : opts2 && ArrayBuffer.isView(opts2 == null ? void 0 : opts2.body) ? new DataView(opts2.body.buffer) : opts2 == null ? void 0 : opts2.body;
      return { method, path, ...opts2, body };
    }));
  }
  getAPIList(path, Page2, opts) {
    return this.requestAPIList(Page2, { method: "get", path, ...opts });
  }
  calculateContentLength(body) {
    if (typeof body === "string") {
      if (typeof Buffer !== "undefined") {
        return Buffer.byteLength(body, "utf8").toString();
      }
      if (typeof TextEncoder !== "undefined") {
        const encoder = new TextEncoder();
        const encoded = encoder.encode(body);
        return encoded.length.toString();
      }
    } else if (ArrayBuffer.isView(body)) {
      return body.byteLength.toString();
    }
    return null;
  }
  buildRequest(options, { retryCount = 0 } = {}) {
    var _a2, _b, _c, _d, _e, _f;
    const { method, path, query, headers = {} } = options;
    const body = ArrayBuffer.isView(options.body) || options.__binaryRequest && typeof options.body === "string" ? options.body : isMultipartBody(options.body) ? options.body.body : options.body ? JSON.stringify(options.body, null, 2) : null;
    const contentLength = this.calculateContentLength(body);
    const url = this.buildURL(path, query);
    if ("timeout" in options)
      validatePositiveInteger("timeout", options.timeout);
    const timeout = (_a2 = options.timeout) != null ? _a2 : this.timeout;
    const httpAgent = (_c = (_b = options.httpAgent) != null ? _b : this.httpAgent) != null ? _c : getDefaultAgent(url);
    const minAgentTimeout = timeout + 1e3;
    if (typeof ((_d = httpAgent == null ? void 0 : httpAgent.options) == null ? void 0 : _d.timeout) === "number" && minAgentTimeout > ((_e = httpAgent.options.timeout) != null ? _e : 0)) {
      httpAgent.options.timeout = minAgentTimeout;
    }
    if (this.idempotencyHeader && method !== "get") {
      if (!options.idempotencyKey)
        options.idempotencyKey = this.defaultIdempotencyKey();
      headers[this.idempotencyHeader] = options.idempotencyKey;
    }
    const reqHeaders = this.buildHeaders({ options, headers, contentLength, retryCount });
    const req = {
      method,
      ...body && { body },
      headers: reqHeaders,
      ...httpAgent && { agent: httpAgent },
      // @ts-ignore node-fetch uses a custom AbortSignal type that is
      // not compatible with standard web types
      signal: (_f = options.signal) != null ? _f : null
    };
    return { req, url, timeout };
  }
  buildHeaders({ options, headers, contentLength, retryCount }) {
    const reqHeaders = {};
    if (contentLength) {
      reqHeaders["content-length"] = contentLength;
    }
    const defaultHeaders = this.defaultHeaders(options);
    applyHeadersMut(reqHeaders, defaultHeaders);
    applyHeadersMut(reqHeaders, headers);
    if (isMultipartBody(options.body) && kind !== "node") {
      delete reqHeaders["content-type"];
    }
    if (getHeader(defaultHeaders, "x-stainless-retry-count") === void 0 && getHeader(headers, "x-stainless-retry-count") === void 0) {
      reqHeaders["x-stainless-retry-count"] = String(retryCount);
    }
    this.validateHeaders(reqHeaders, headers);
    return reqHeaders;
  }
  /**
   * Used as a callback for mutating the given `FinalRequestOptions` object.
   */
  async prepareOptions(options) {
  }
  /**
   * Used as a callback for mutating the given `RequestInit` object.
   *
   * This is useful for cases where you want to add certain headers based off of
   * the request properties, e.g. `method` or `url`.
   */
  async prepareRequest(request, { url, options }) {
  }
  parseHeaders(headers) {
    return !headers ? {} : Symbol.iterator in headers ? Object.fromEntries(Array.from(headers).map((header) => [...header])) : { ...headers };
  }
  makeStatusError(status, error, message, headers) {
    return APIError.generate(status, error, message, headers);
  }
  request(options, remainingRetries = null) {
    return new APIPromise(this.makeRequest(options, remainingRetries));
  }
  async makeRequest(optionsInput, retriesRemaining) {
    var _a2, _b, _c;
    const options = await optionsInput;
    const maxRetries = (_a2 = options.maxRetries) != null ? _a2 : this.maxRetries;
    if (retriesRemaining == null) {
      retriesRemaining = maxRetries;
    }
    await this.prepareOptions(options);
    const { req, url, timeout } = this.buildRequest(options, { retryCount: maxRetries - retriesRemaining });
    await this.prepareRequest(req, { url, options });
    debug("request", url, options, req.headers);
    if ((_b = options.signal) == null ? void 0 : _b.aborted) {
      throw new APIUserAbortError();
    }
    const controller = new AbortController();
    const response = await this.fetchWithTimeout(url, req, timeout, controller).catch(castToError);
    if (response instanceof Error) {
      if ((_c = options.signal) == null ? void 0 : _c.aborted) {
        throw new APIUserAbortError();
      }
      if (retriesRemaining) {
        return this.retryRequest(options, retriesRemaining);
      }
      if (response.name === "AbortError") {
        throw new APIConnectionTimeoutError();
      }
      throw new APIConnectionError({ cause: response });
    }
    const responseHeaders = createResponseHeaders(response.headers);
    if (!response.ok) {
      if (retriesRemaining && this.shouldRetry(response)) {
        const retryMessage2 = `retrying, ${retriesRemaining} attempts remaining`;
        debug(`response (error; ${retryMessage2})`, response.status, url, responseHeaders);
        return this.retryRequest(options, retriesRemaining, responseHeaders);
      }
      const errText = await response.text().catch((e) => castToError(e).message);
      const errJSON = safeJSON(errText);
      const errMessage = errJSON ? void 0 : errText;
      const retryMessage = retriesRemaining ? `(error; no more retries left)` : `(error; not retryable)`;
      debug(`response (error; ${retryMessage})`, response.status, url, responseHeaders, errMessage);
      const err = this.makeStatusError(response.status, errJSON, errMessage, responseHeaders);
      throw err;
    }
    return { response, options, controller };
  }
  requestAPIList(Page2, options) {
    const request = this.makeRequest(options, null);
    return new PagePromise(this, request, Page2);
  }
  buildURL(path, query) {
    const url = isAbsoluteURL(path) ? new URL(path) : new URL(this.baseURL + (this.baseURL.endsWith("/") && path.startsWith("/") ? path.slice(1) : path));
    const defaultQuery = this.defaultQuery();
    if (!isEmptyObj(defaultQuery)) {
      query = { ...defaultQuery, ...query };
    }
    if (typeof query === "object" && query && !Array.isArray(query)) {
      url.search = this.stringifyQuery(query);
    }
    return url.toString();
  }
  stringifyQuery(query) {
    return Object.entries(query).filter(([_, value]) => typeof value !== "undefined").map(([key, value]) => {
      if (typeof value === "string" || typeof value === "number" || typeof value === "boolean") {
        return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;
      }
      if (value === null) {
        return `${encodeURIComponent(key)}=`;
      }
      throw new AnthropicError(`Cannot stringify type ${typeof value}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`);
    }).join("&");
  }
  async fetchWithTimeout(url, init, ms, controller) {
    const { signal, ...options } = init || {};
    if (signal)
      signal.addEventListener("abort", () => controller.abort());
    const timeout = setTimeout(() => controller.abort(), ms);
    return this.getRequestClient().fetch.call(void 0, url, { signal: controller.signal, ...options }).finally(() => {
      clearTimeout(timeout);
    });
  }
  getRequestClient() {
    return { fetch: this.fetch };
  }
  shouldRetry(response) {
    const shouldRetryHeader = response.headers.get("x-should-retry");
    if (shouldRetryHeader === "true")
      return true;
    if (shouldRetryHeader === "false")
      return false;
    if (response.status === 408)
      return true;
    if (response.status === 409)
      return true;
    if (response.status === 429)
      return true;
    if (response.status >= 500)
      return true;
    return false;
  }
  async retryRequest(options, retriesRemaining, responseHeaders) {
    var _a2;
    let timeoutMillis;
    const retryAfterMillisHeader = responseHeaders == null ? void 0 : responseHeaders["retry-after-ms"];
    if (retryAfterMillisHeader) {
      const timeoutMs = parseFloat(retryAfterMillisHeader);
      if (!Number.isNaN(timeoutMs)) {
        timeoutMillis = timeoutMs;
      }
    }
    const retryAfterHeader = responseHeaders == null ? void 0 : responseHeaders["retry-after"];
    if (retryAfterHeader && !timeoutMillis) {
      const timeoutSeconds = parseFloat(retryAfterHeader);
      if (!Number.isNaN(timeoutSeconds)) {
        timeoutMillis = timeoutSeconds * 1e3;
      } else {
        timeoutMillis = Date.parse(retryAfterHeader) - Date.now();
      }
    }
    if (!(timeoutMillis && 0 <= timeoutMillis && timeoutMillis < 60 * 1e3)) {
      const maxRetries = (_a2 = options.maxRetries) != null ? _a2 : this.maxRetries;
      timeoutMillis = this.calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries);
    }
    await sleep(timeoutMillis);
    return this.makeRequest(options, retriesRemaining - 1);
  }
  calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries) {
    const initialRetryDelay = 0.5;
    const maxRetryDelay = 8;
    const numRetries = maxRetries - retriesRemaining;
    const sleepSeconds = Math.min(initialRetryDelay * Math.pow(2, numRetries), maxRetryDelay);
    const jitter = 1 - Math.random() * 0.25;
    return sleepSeconds * jitter * 1e3;
  }
  getUserAgent() {
    return `${this.constructor.name}/JS ${VERSION}`;
  }
};
var AbstractPage = class {
  constructor(client, response, body, options) {
    _AbstractPage_client.set(this, void 0);
    __classPrivateFieldSet(this, _AbstractPage_client, client, "f");
    this.options = options;
    this.response = response;
    this.body = body;
  }
  hasNextPage() {
    const items = this.getPaginatedItems();
    if (!items.length)
      return false;
    return this.nextPageInfo() != null;
  }
  async getNextPage() {
    const nextInfo = this.nextPageInfo();
    if (!nextInfo) {
      throw new AnthropicError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");
    }
    const nextOptions = { ...this.options };
    if ("params" in nextInfo && typeof nextOptions.query === "object") {
      nextOptions.query = { ...nextOptions.query, ...nextInfo.params };
    } else if ("url" in nextInfo) {
      const params = [...Object.entries(nextOptions.query || {}), ...nextInfo.url.searchParams.entries()];
      for (const [key, value] of params) {
        nextInfo.url.searchParams.set(key, value);
      }
      nextOptions.query = void 0;
      nextOptions.path = nextInfo.url.toString();
    }
    return await __classPrivateFieldGet(this, _AbstractPage_client, "f").requestAPIList(this.constructor, nextOptions);
  }
  async *iterPages() {
    let page = this;
    yield page;
    while (page.hasNextPage()) {
      page = await page.getNextPage();
      yield page;
    }
  }
  async *[(_AbstractPage_client = /* @__PURE__ */ new WeakMap(), Symbol.asyncIterator)]() {
    for await (const page of this.iterPages()) {
      for (const item of page.getPaginatedItems()) {
        yield item;
      }
    }
  }
};
var PagePromise = class extends APIPromise {
  constructor(client, request, Page2) {
    super(request, async (props) => new Page2(client, props.response, await defaultParseResponse(props), props.options));
  }
  /**
   * Allow auto-paginating iteration on an unawaited list call, eg:
   *
   *    for await (const item of client.items.list()) {
   *      console.log(item)
   *    }
   */
  async *[Symbol.asyncIterator]() {
    const page = await this;
    for await (const item of page) {
      yield item;
    }
  }
};
var createResponseHeaders = (headers) => {
  return new Proxy(Object.fromEntries(
    // @ts-ignore
    headers.entries()
  ), {
    get(target, name) {
      const key = name.toString();
      return target[key.toLowerCase()] || target[key];
    }
  });
};
var requestOptionsKeys = {
  method: true,
  path: true,
  query: true,
  body: true,
  headers: true,
  maxRetries: true,
  stream: true,
  timeout: true,
  httpAgent: true,
  signal: true,
  idempotencyKey: true,
  __binaryRequest: true,
  __binaryResponse: true,
  __streamClass: true
};
var isRequestOptions = (obj) => {
  return typeof obj === "object" && obj !== null && !isEmptyObj(obj) && Object.keys(obj).every((k) => hasOwn(requestOptionsKeys, k));
};
var getPlatformProperties = () => {
  var _a2, _b;
  if (typeof Deno !== "undefined" && Deno.build != null) {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": normalizePlatform(Deno.build.os),
      "X-Stainless-Arch": normalizeArch(Deno.build.arch),
      "X-Stainless-Runtime": "deno",
      "X-Stainless-Runtime-Version": typeof Deno.version === "string" ? Deno.version : (_b = (_a2 = Deno.version) == null ? void 0 : _a2.deno) != null ? _b : "unknown"
    };
  }
  if (typeof EdgeRuntime !== "undefined") {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": "Unknown",
      "X-Stainless-Arch": `other:${EdgeRuntime}`,
      "X-Stainless-Runtime": "edge",
      "X-Stainless-Runtime-Version": process.version
    };
  }
  if (Object.prototype.toString.call(typeof process !== "undefined" ? process : 0) === "[object process]") {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": normalizePlatform(process.platform),
      "X-Stainless-Arch": normalizeArch(process.arch),
      "X-Stainless-Runtime": "node",
      "X-Stainless-Runtime-Version": process.version
    };
  }
  const browserInfo = getBrowserInfo();
  if (browserInfo) {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": "Unknown",
      "X-Stainless-Arch": "unknown",
      "X-Stainless-Runtime": `browser:${browserInfo.browser}`,
      "X-Stainless-Runtime-Version": browserInfo.version
    };
  }
  return {
    "X-Stainless-Lang": "js",
    "X-Stainless-Package-Version": VERSION,
    "X-Stainless-OS": "Unknown",
    "X-Stainless-Arch": "unknown",
    "X-Stainless-Runtime": "unknown",
    "X-Stainless-Runtime-Version": "unknown"
  };
};
function getBrowserInfo() {
  if (typeof navigator === "undefined" || !navigator) {
    return null;
  }
  const browserPatterns = [
    { key: "edge", pattern: /Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "ie", pattern: /MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "ie", pattern: /Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "chrome", pattern: /Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "firefox", pattern: /Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "safari", pattern: /(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/ }
  ];
  for (const { key, pattern } of browserPatterns) {
    const match = pattern.exec(navigator.userAgent);
    if (match) {
      const major = match[1] || 0;
      const minor = match[2] || 0;
      const patch = match[3] || 0;
      return { browser: key, version: `${major}.${minor}.${patch}` };
    }
  }
  return null;
}
var normalizeArch = (arch) => {
  if (arch === "x32")
    return "x32";
  if (arch === "x86_64" || arch === "x64")
    return "x64";
  if (arch === "arm")
    return "arm";
  if (arch === "aarch64" || arch === "arm64")
    return "arm64";
  if (arch)
    return `other:${arch}`;
  return "unknown";
};
var normalizePlatform = (platform) => {
  platform = platform.toLowerCase();
  if (platform.includes("ios"))
    return "iOS";
  if (platform === "android")
    return "Android";
  if (platform === "darwin")
    return "MacOS";
  if (platform === "win32")
    return "Windows";
  if (platform === "freebsd")
    return "FreeBSD";
  if (platform === "openbsd")
    return "OpenBSD";
  if (platform === "linux")
    return "Linux";
  if (platform)
    return `Other:${platform}`;
  return "Unknown";
};
var _platformHeaders;
var getPlatformHeaders = () => {
  return _platformHeaders != null ? _platformHeaders : _platformHeaders = getPlatformProperties();
};
var safeJSON = (text) => {
  try {
    return JSON.parse(text);
  } catch (err) {
    return void 0;
  }
};
var startsWithSchemeRegexp = new RegExp("^(?:[a-z]+:)?//", "i");
var isAbsoluteURL = (url) => {
  return startsWithSchemeRegexp.test(url);
};
var sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));
var validatePositiveInteger = (name, n) => {
  if (typeof n !== "number" || !Number.isInteger(n)) {
    throw new AnthropicError(`${name} must be an integer`);
  }
  if (n < 0) {
    throw new AnthropicError(`${name} must be a positive integer`);
  }
  return n;
};
var castToError = (err) => {
  if (err instanceof Error)
    return err;
  if (typeof err === "object" && err !== null) {
    try {
      return new Error(JSON.stringify(err));
    } catch (e) {
    }
  }
  return new Error(String(err));
};
var readEnv = (env) => {
  var _a2, _b, _c, _d, _e, _f;
  if (typeof process !== "undefined") {
    return (_c = (_b = (_a2 = process.env) == null ? void 0 : _a2[env]) == null ? void 0 : _b.trim()) != null ? _c : void 0;
  }
  if (typeof Deno !== "undefined") {
    return (_f = (_e = (_d = Deno.env) == null ? void 0 : _d.get) == null ? void 0 : _e.call(_d, env)) == null ? void 0 : _f.trim();
  }
  return void 0;
};
function isEmptyObj(obj) {
  if (!obj)
    return true;
  for (const _k in obj)
    return false;
  return true;
}
function hasOwn(obj, key) {
  return Object.prototype.hasOwnProperty.call(obj, key);
}
function applyHeadersMut(targetHeaders, newHeaders) {
  for (const k in newHeaders) {
    if (!hasOwn(newHeaders, k))
      continue;
    const lowerKey = k.toLowerCase();
    if (!lowerKey)
      continue;
    const val = newHeaders[k];
    if (val === null) {
      delete targetHeaders[lowerKey];
    } else if (val !== void 0) {
      targetHeaders[lowerKey] = val;
    }
  }
}
function debug(action, ...args) {
  var _a2;
  if (typeof process !== "undefined" && ((_a2 = process == null ? void 0 : process.env) == null ? void 0 : _a2["DEBUG"]) === "true") {
    console.log(`Anthropic:DEBUG:${action}`, ...args);
  }
}
var uuid4 = () => {
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c) => {
    const r = Math.random() * 16 | 0;
    const v = c === "x" ? r : r & 3 | 8;
    return v.toString(16);
  });
};
var isRunningInBrowser = () => {
  return (
    // @ts-ignore
    typeof window !== "undefined" && // @ts-ignore
    typeof window.document !== "undefined" && // @ts-ignore
    typeof navigator !== "undefined"
  );
};
var isHeadersProtocol = (headers) => {
  return typeof (headers == null ? void 0 : headers.get) === "function";
};
var getHeader = (headers, header) => {
  var _a2;
  const lowerCasedHeader = header.toLowerCase();
  if (isHeadersProtocol(headers)) {
    const intercapsHeader = ((_a2 = header[0]) == null ? void 0 : _a2.toUpperCase()) + header.substring(1).replace(/([^\w])(\w)/g, (_m, g1, g2) => g1 + g2.toUpperCase());
    for (const key of [header, lowerCasedHeader, header.toUpperCase(), intercapsHeader]) {
      const value = headers.get(key);
      if (value) {
        return value;
      }
    }
  }
  for (const [key, value] of Object.entries(headers)) {
    if (key.toLowerCase() === lowerCasedHeader) {
      if (Array.isArray(value)) {
        if (value.length <= 1)
          return value[0];
        console.warn(`Received ${value.length} entries for the ${header} header, using the first entry.`);
        return value[0];
      }
      return value;
    }
  }
  return void 0;
};

// node_modules/@anthropic-ai/sdk/pagination.mjs
var Page = class extends AbstractPage {
  constructor(client, response, body, options) {
    super(client, response, body, options);
    this.data = body.data || [];
    this.has_more = body.has_more || false;
    this.first_id = body.first_id || null;
    this.last_id = body.last_id || null;
  }
  getPaginatedItems() {
    var _a2;
    return (_a2 = this.data) != null ? _a2 : [];
  }
  // @deprecated Please use `nextPageInfo()` instead
  nextPageParams() {
    const info = this.nextPageInfo();
    if (!info)
      return null;
    if ("params" in info)
      return info.params;
    const params = Object.fromEntries(info.url.searchParams);
    if (!Object.keys(params).length)
      return null;
    return params;
  }
  nextPageInfo() {
    var _a2;
    if ((_a2 = this.options.query) == null ? void 0 : _a2["before_id"]) {
      const firstId = this.first_id;
      if (!firstId) {
        return null;
      }
      return {
        params: {
          before_id: firstId
        }
      };
    }
    const cursor = this.last_id;
    if (!cursor) {
      return null;
    }
    return {
      params: {
        after_id: cursor
      }
    };
  }
};

// node_modules/@anthropic-ai/sdk/resource.mjs
var APIResource = class {
  constructor(client) {
    this._client = client;
  }
};

// node_modules/@anthropic-ai/sdk/internal/decoders/jsonl.mjs
var JSONLDecoder = class {
  constructor(iterator, controller) {
    this.iterator = iterator;
    this.controller = controller;
  }
  async *decoder() {
    const lineDecoder = new LineDecoder();
    for await (const chunk of this.iterator) {
      for (const line of lineDecoder.decode(chunk)) {
        yield JSON.parse(line);
      }
    }
    for (const line of lineDecoder.flush()) {
      yield JSON.parse(line);
    }
  }
  [Symbol.asyncIterator]() {
    return this.decoder();
  }
  static fromResponse(response, controller) {
    if (!response.body) {
      controller.abort();
      throw new AnthropicError(`Attempted to iterate over a response with no body`);
    }
    return new JSONLDecoder(readableStreamAsyncIterable(response.body), controller);
  }
};

// node_modules/@anthropic-ai/sdk/resources/beta/messages/batches.mjs
var Batches = class extends APIResource {
  /**
   * Send a batch of Message creation requests.
   *
   * The Message Batches API can be used to process multiple Messages API requests at
   * once. Once a Message Batch is created, it begins processing immediately. Batches
   * can take up to 24 hours to complete.
   */
  create(params, options) {
    const { betas, ...body } = params;
    return this._client.post("/v1/messages/batches?beta=true", {
      body,
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
  retrieve(messageBatchId, params = {}, options) {
    if (isRequestOptions(params)) {
      return this.retrieve(messageBatchId, {}, params);
    }
    const { betas } = params;
    return this._client.get(`/v1/messages/batches/${messageBatchId}?beta=true`, {
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
  list(params = {}, options) {
    if (isRequestOptions(params)) {
      return this.list({}, params);
    }
    const { betas, ...query } = params;
    return this._client.getAPIList("/v1/messages/batches?beta=true", BetaMessageBatchesPage, {
      query,
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
  cancel(messageBatchId, params = {}, options) {
    if (isRequestOptions(params)) {
      return this.cancel(messageBatchId, {}, params);
    }
    const { betas } = params;
    return this._client.post(`/v1/messages/batches/${messageBatchId}/cancel?beta=true`, {
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
  async results(messageBatchId, params = {}, options) {
    if (isRequestOptions(params)) {
      return this.results(messageBatchId, {}, params);
    }
    const batch = await this.retrieve(messageBatchId);
    if (!batch.results_url) {
      throw new AnthropicError(`No batch \`results_url\`; Has it finished processing? ${batch.processing_status} - ${batch.id}`);
    }
    const { betas } = params;
    return this._client.get(batch.results_url, {
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        ...options == null ? void 0 : options.headers
      },
      __binaryResponse: true
    })._thenUnwrap((_, props) => JSONLDecoder.fromResponse(props.response, props.controller));
  }
};
var BetaMessageBatchesPage = class extends Page {
};
Batches.BetaMessageBatchesPage = BetaMessageBatchesPage;

// node_modules/@anthropic-ai/sdk/resources/beta/messages/messages.mjs
var Messages = class extends APIResource {
  constructor() {
    super(...arguments);
    this.batches = new Batches(this._client);
  }
  create(params, options) {
    var _a2, _b;
    const { betas, ...body } = params;
    return this._client.post("/v1/messages?beta=true", {
      body,
      timeout: (_a2 = this._client._options.timeout) != null ? _a2 : 6e5,
      ...options,
      headers: {
        ...(betas == null ? void 0 : betas.toString()) != null ? { "anthropic-beta": betas == null ? void 0 : betas.toString() } : void 0,
        ...options == null ? void 0 : options.headers
      },
      stream: (_b = params.stream) != null ? _b : false
    });
  }
  /**
   * Count the number of tokens in a Message.
   *
   * The Token Count API can be used to count the number of tokens in a Message,
   * including tools, images, and documents, without creating it.
   */
  countTokens(params, options) {
    const { betas, ...body } = params;
    return this._client.post("/v1/messages/count_tokens?beta=true", {
      body,
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "token-counting-2024-11-01"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
};
Messages.Batches = Batches;
Messages.BetaMessageBatchesPage = BetaMessageBatchesPage;

// node_modules/@anthropic-ai/sdk/_vendor/partial-json-parser/parser.mjs
var tokenize = (input) => {
  let current = 0;
  let tokens = [];
  while (current < input.length) {
    let char = input[current];
    if (char === "\\") {
      current++;
      continue;
    }
    if (char === "{") {
      tokens.push({
        type: "brace",
        value: "{"
      });
      current++;
      continue;
    }
    if (char === "}") {
      tokens.push({
        type: "brace",
        value: "}"
      });
      current++;
      continue;
    }
    if (char === "[") {
      tokens.push({
        type: "paren",
        value: "["
      });
      current++;
      continue;
    }
    if (char === "]") {
      tokens.push({
        type: "paren",
        value: "]"
      });
      current++;
      continue;
    }
    if (char === ":") {
      tokens.push({
        type: "separator",
        value: ":"
      });
      current++;
      continue;
    }
    if (char === ",") {
      tokens.push({
        type: "delimiter",
        value: ","
      });
      current++;
      continue;
    }
    if (char === '"') {
      let value = "";
      let danglingQuote = false;
      char = input[++current];
      while (char !== '"') {
        if (current === input.length) {
          danglingQuote = true;
          break;
        }
        if (char === "\\") {
          current++;
          if (current === input.length) {
            danglingQuote = true;
            break;
          }
          value += char + input[current];
          char = input[++current];
        } else {
          value += char;
          char = input[++current];
        }
      }
      char = input[++current];
      if (!danglingQuote) {
        tokens.push({
          type: "string",
          value
        });
      }
      continue;
    }
    let WHITESPACE = /\s/;
    if (char && WHITESPACE.test(char)) {
      current++;
      continue;
    }
    let NUMBERS = /[0-9]/;
    if (char && NUMBERS.test(char) || char === "-" || char === ".") {
      let value = "";
      if (char === "-") {
        value += char;
        char = input[++current];
      }
      while (char && NUMBERS.test(char) || char === ".") {
        value += char;
        char = input[++current];
      }
      tokens.push({
        type: "number",
        value
      });
      continue;
    }
    let LETTERS = /[a-z]/i;
    if (char && LETTERS.test(char)) {
      let value = "";
      while (char && LETTERS.test(char)) {
        if (current === input.length) {
          break;
        }
        value += char;
        char = input[++current];
      }
      if (value == "true" || value == "false" || value === "null") {
        tokens.push({
          type: "name",
          value
        });
      } else {
        current++;
        continue;
      }
      continue;
    }
    current++;
  }
  return tokens;
};
var strip = (tokens) => {
  if (tokens.length === 0) {
    return tokens;
  }
  let lastToken = tokens[tokens.length - 1];
  switch (lastToken.type) {
    case "separator":
      tokens = tokens.slice(0, tokens.length - 1);
      return strip(tokens);
      break;
    case "number":
      let lastCharacterOfLastToken = lastToken.value[lastToken.value.length - 1];
      if (lastCharacterOfLastToken === "." || lastCharacterOfLastToken === "-") {
        tokens = tokens.slice(0, tokens.length - 1);
        return strip(tokens);
      }
    case "string":
      let tokenBeforeTheLastToken = tokens[tokens.length - 2];
      if ((tokenBeforeTheLastToken == null ? void 0 : tokenBeforeTheLastToken.type) === "delimiter") {
        tokens = tokens.slice(0, tokens.length - 1);
        return strip(tokens);
      } else if ((tokenBeforeTheLastToken == null ? void 0 : tokenBeforeTheLastToken.type) === "brace" && tokenBeforeTheLastToken.value === "{") {
        tokens = tokens.slice(0, tokens.length - 1);
        return strip(tokens);
      }
      break;
    case "delimiter":
      tokens = tokens.slice(0, tokens.length - 1);
      return strip(tokens);
      break;
  }
  return tokens;
};
var unstrip = (tokens) => {
  let tail = [];
  tokens.map((token) => {
    if (token.type === "brace") {
      if (token.value === "{") {
        tail.push("}");
      } else {
        tail.splice(tail.lastIndexOf("}"), 1);
      }
    }
    if (token.type === "paren") {
      if (token.value === "[") {
        tail.push("]");
      } else {
        tail.splice(tail.lastIndexOf("]"), 1);
      }
    }
  });
  if (tail.length > 0) {
    tail.reverse().map((item) => {
      if (item === "}") {
        tokens.push({
          type: "brace",
          value: "}"
        });
      } else if (item === "]") {
        tokens.push({
          type: "paren",
          value: "]"
        });
      }
    });
  }
  return tokens;
};
var generate = (tokens) => {
  let output = "";
  tokens.map((token) => {
    switch (token.type) {
      case "string":
        output += '"' + token.value + '"';
        break;
      default:
        output += token.value;
        break;
    }
  });
  return output;
};
var partialParse = (input) => JSON.parse(generate(unstrip(strip(tokenize(input)))));

// node_modules/@anthropic-ai/sdk/lib/PromptCachingBetaMessageStream.mjs
var __classPrivateFieldSet2 = function(receiver, state, value, kind2, f) {
  if (kind2 === "m")
    throw new TypeError("Private method is not writable");
  if (kind2 === "a" && !f)
    throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
    throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind2 === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var __classPrivateFieldGet2 = function(receiver, state, kind2, f) {
  if (kind2 === "a" && !f)
    throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
    throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind2 === "m" ? f : kind2 === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _PromptCachingBetaMessageStream_instances;
var _PromptCachingBetaMessageStream_currentMessageSnapshot;
var _PromptCachingBetaMessageStream_connectedPromise;
var _PromptCachingBetaMessageStream_resolveConnectedPromise;
var _PromptCachingBetaMessageStream_rejectConnectedPromise;
var _PromptCachingBetaMessageStream_endPromise;
var _PromptCachingBetaMessageStream_resolveEndPromise;
var _PromptCachingBetaMessageStream_rejectEndPromise;
var _PromptCachingBetaMessageStream_listeners;
var _PromptCachingBetaMessageStream_ended;
var _PromptCachingBetaMessageStream_errored;
var _PromptCachingBetaMessageStream_aborted;
var _PromptCachingBetaMessageStream_catchingPromiseCreated;
var _PromptCachingBetaMessageStream_getFinalMessage;
var _PromptCachingBetaMessageStream_getFinalText;
var _PromptCachingBetaMessageStream_handleError;
var _PromptCachingBetaMessageStream_beginRequest;
var _PromptCachingBetaMessageStream_addStreamEvent;
var _PromptCachingBetaMessageStream_endRequest;
var _PromptCachingBetaMessageStream_accumulateMessage;
var JSON_BUF_PROPERTY = "__json_buf";
var PromptCachingBetaMessageStream = class {
  constructor() {
    _PromptCachingBetaMessageStream_instances.add(this);
    this.messages = [];
    this.receivedMessages = [];
    _PromptCachingBetaMessageStream_currentMessageSnapshot.set(this, void 0);
    this.controller = new AbortController();
    _PromptCachingBetaMessageStream_connectedPromise.set(this, void 0);
    _PromptCachingBetaMessageStream_resolveConnectedPromise.set(this, () => {
    });
    _PromptCachingBetaMessageStream_rejectConnectedPromise.set(this, () => {
    });
    _PromptCachingBetaMessageStream_endPromise.set(this, void 0);
    _PromptCachingBetaMessageStream_resolveEndPromise.set(this, () => {
    });
    _PromptCachingBetaMessageStream_rejectEndPromise.set(this, () => {
    });
    _PromptCachingBetaMessageStream_listeners.set(this, {});
    _PromptCachingBetaMessageStream_ended.set(this, false);
    _PromptCachingBetaMessageStream_errored.set(this, false);
    _PromptCachingBetaMessageStream_aborted.set(this, false);
    _PromptCachingBetaMessageStream_catchingPromiseCreated.set(this, false);
    _PromptCachingBetaMessageStream_handleError.set(this, (error) => {
      __classPrivateFieldSet2(this, _PromptCachingBetaMessageStream_errored, true, "f");
      if (error instanceof Error && error.name === "AbortError") {
        error = new APIUserAbortError();
      }
      if (error instanceof APIUserAbortError) {
        __classPrivateFieldSet2(this, _PromptCachingBetaMessageStream_aborted, true, "f");
        return this._emit("abort", error);
      }
      if (error instanceof AnthropicError) {
        return this._emit("error", error);
      }
      if (error instanceof Error) {
        const anthropicError = new AnthropicError(error.message);
        anthropicError.cause = error;
        return this._emit("error", anthropicError);
      }
      return this._emit("error", new AnthropicError(String(error)));
    });
    __classPrivateFieldSet2(this, _PromptCachingBetaMessageStream_connectedPromise, new Promise((resolve, reject) => {
      __classPrivateFieldSet2(this, _PromptCachingBetaMessageStream_resolveConnectedPromise, resolve, "f");
      __classPrivateFieldSet2(this, _PromptCachingBetaMessageStream_rejectConnectedPromise, reject, "f");
    }), "f");
    __classPrivateFieldSet2(this, _PromptCachingBetaMessageStream_endPromise, new Promise((resolve, reject) => {
      __classPrivateFieldSet2(this, _PromptCachingBetaMessageStream_resolveEndPromise, resolve, "f");
      __classPrivateFieldSet2(this, _PromptCachingBetaMessageStream_rejectEndPromise, reject, "f");
    }), "f");
    __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_connectedPromise, "f").catch(() => {
    });
    __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_endPromise, "f").catch(() => {
    });
  }
  /**
   * Intended for use on the frontend, consuming a stream produced with
   * `.toReadableStream()` on the backend.
   *
   * Note that messages sent to the model do not appear in `.on('message')`
   * in this context.
   */
  static fromReadableStream(stream) {
    const runner = new PromptCachingBetaMessageStream();
    runner._run(() => runner._fromReadableStream(stream));
    return runner;
  }
  static createMessage(messages, params, options) {
    const runner = new PromptCachingBetaMessageStream();
    for (const message of params.messages) {
      runner._addPromptCachingBetaMessageParam(message);
    }
    runner._run(() => runner._createPromptCachingBetaMessage(messages, { ...params, stream: true }, { ...options, headers: { ...options == null ? void 0 : options.headers, "X-Stainless-Helper-Method": "stream" } }));
    return runner;
  }
  _run(executor) {
    executor().then(() => {
      this._emitFinal();
      this._emit("end");
    }, __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_handleError, "f"));
  }
  _addPromptCachingBetaMessageParam(message) {
    this.messages.push(message);
  }
  _addPromptCachingBetaMessage(message, emit = true) {
    this.receivedMessages.push(message);
    if (emit) {
      this._emit("message", message);
    }
  }
  async _createPromptCachingBetaMessage(messages, params, options) {
    var _a2;
    const signal = options == null ? void 0 : options.signal;
    if (signal) {
      if (signal.aborted)
        this.controller.abort();
      signal.addEventListener("abort", () => this.controller.abort());
    }
    __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_instances, "m", _PromptCachingBetaMessageStream_beginRequest).call(this);
    const stream = await messages.create({ ...params, stream: true }, { ...options, signal: this.controller.signal });
    this._connected();
    for await (const event of stream) {
      __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_instances, "m", _PromptCachingBetaMessageStream_addStreamEvent).call(this, event);
    }
    if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
      throw new APIUserAbortError();
    }
    __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_instances, "m", _PromptCachingBetaMessageStream_endRequest).call(this);
  }
  _connected() {
    if (this.ended)
      return;
    __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_resolveConnectedPromise, "f").call(this);
    this._emit("connect");
  }
  get ended() {
    return __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_ended, "f");
  }
  get errored() {
    return __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_errored, "f");
  }
  get aborted() {
    return __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_aborted, "f");
  }
  abort() {
    this.controller.abort();
  }
  /**
   * Adds the listener function to the end of the listeners array for the event.
   * No checks are made to see if the listener has already been added. Multiple calls passing
   * the same combination of event and listener will result in the listener being added, and
   * called, multiple times.
   * @returns this PromptCachingBetaMessageStream, so that calls can be chained
   */
  on(event, listener) {
    const listeners = __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_listeners, "f")[event] || (__classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_listeners, "f")[event] = []);
    listeners.push({ listener });
    return this;
  }
  /**
   * Removes the specified listener from the listener array for the event.
   * off() will remove, at most, one instance of a listener from the listener array. If any single
   * listener has been added multiple times to the listener array for the specified event, then
   * off() must be called multiple times to remove each instance.
   * @returns this PromptCachingBetaMessageStream, so that calls can be chained
   */
  off(event, listener) {
    const listeners = __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_listeners, "f")[event];
    if (!listeners)
      return this;
    const index = listeners.findIndex((l) => l.listener === listener);
    if (index >= 0)
      listeners.splice(index, 1);
    return this;
  }
  /**
   * Adds a one-time listener function for the event. The next time the event is triggered,
   * this listener is removed and then invoked.
   * @returns this PromptCachingBetaMessageStream, so that calls can be chained
   */
  once(event, listener) {
    const listeners = __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_listeners, "f")[event] || (__classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_listeners, "f")[event] = []);
    listeners.push({ listener, once: true });
    return this;
  }
  /**
   * This is similar to `.once()`, but returns a Promise that resolves the next time
   * the event is triggered, instead of calling a listener callback.
   * @returns a Promise that resolves the next time given event is triggered,
   * or rejects if an error is emitted.  (If you request the 'error' event,
   * returns a promise that resolves with the error).
   *
   * Example:
   *
   *   const message = await stream.emitted('message') // rejects if the stream errors
   */
  emitted(event) {
    return new Promise((resolve, reject) => {
      __classPrivateFieldSet2(this, _PromptCachingBetaMessageStream_catchingPromiseCreated, true, "f");
      if (event !== "error")
        this.once("error", reject);
      this.once(event, resolve);
    });
  }
  async done() {
    __classPrivateFieldSet2(this, _PromptCachingBetaMessageStream_catchingPromiseCreated, true, "f");
    await __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_endPromise, "f");
  }
  get currentMessage() {
    return __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_currentMessageSnapshot, "f");
  }
  /**
   * @returns a promise that resolves with the the final assistant PromptCachingBetaMessage response,
   * or rejects if an error occurred or the stream ended prematurely without producing a PromptCachingBetaMessage.
   */
  async finalMessage() {
    await this.done();
    return __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_instances, "m", _PromptCachingBetaMessageStream_getFinalMessage).call(this);
  }
  /**
   * @returns a promise that resolves with the the final assistant PromptCachingBetaMessage's text response, concatenated
   * together if there are more than one text blocks.
   * Rejects if an error occurred or the stream ended prematurely without producing a PromptCachingBetaMessage.
   */
  async finalText() {
    await this.done();
    return __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_instances, "m", _PromptCachingBetaMessageStream_getFinalText).call(this);
  }
  _emit(event, ...args) {
    if (__classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_ended, "f"))
      return;
    if (event === "end") {
      __classPrivateFieldSet2(this, _PromptCachingBetaMessageStream_ended, true, "f");
      __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_resolveEndPromise, "f").call(this);
    }
    const listeners = __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_listeners, "f")[event];
    if (listeners) {
      __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_listeners, "f")[event] = listeners.filter((l) => !l.once);
      listeners.forEach(({ listener }) => listener(...args));
    }
    if (event === "abort") {
      const error = args[0];
      if (!__classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
        Promise.reject(error);
      }
      __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_rejectConnectedPromise, "f").call(this, error);
      __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_rejectEndPromise, "f").call(this, error);
      this._emit("end");
      return;
    }
    if (event === "error") {
      const error = args[0];
      if (!__classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
        Promise.reject(error);
      }
      __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_rejectConnectedPromise, "f").call(this, error);
      __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_rejectEndPromise, "f").call(this, error);
      this._emit("end");
    }
  }
  _emitFinal() {
    const finalPromptCachingBetaMessage = this.receivedMessages.at(-1);
    if (finalPromptCachingBetaMessage) {
      this._emit("finalPromptCachingBetaMessage", __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_instances, "m", _PromptCachingBetaMessageStream_getFinalMessage).call(this));
    }
  }
  async _fromReadableStream(readableStream, options) {
    var _a2;
    const signal = options == null ? void 0 : options.signal;
    if (signal) {
      if (signal.aborted)
        this.controller.abort();
      signal.addEventListener("abort", () => this.controller.abort());
    }
    __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_instances, "m", _PromptCachingBetaMessageStream_beginRequest).call(this);
    this._connected();
    const stream = Stream.fromReadableStream(readableStream, this.controller);
    for await (const event of stream) {
      __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_instances, "m", _PromptCachingBetaMessageStream_addStreamEvent).call(this, event);
    }
    if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
      throw new APIUserAbortError();
    }
    __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_instances, "m", _PromptCachingBetaMessageStream_endRequest).call(this);
  }
  [(_PromptCachingBetaMessageStream_currentMessageSnapshot = /* @__PURE__ */ new WeakMap(), _PromptCachingBetaMessageStream_connectedPromise = /* @__PURE__ */ new WeakMap(), _PromptCachingBetaMessageStream_resolveConnectedPromise = /* @__PURE__ */ new WeakMap(), _PromptCachingBetaMessageStream_rejectConnectedPromise = /* @__PURE__ */ new WeakMap(), _PromptCachingBetaMessageStream_endPromise = /* @__PURE__ */ new WeakMap(), _PromptCachingBetaMessageStream_resolveEndPromise = /* @__PURE__ */ new WeakMap(), _PromptCachingBetaMessageStream_rejectEndPromise = /* @__PURE__ */ new WeakMap(), _PromptCachingBetaMessageStream_listeners = /* @__PURE__ */ new WeakMap(), _PromptCachingBetaMessageStream_ended = /* @__PURE__ */ new WeakMap(), _PromptCachingBetaMessageStream_errored = /* @__PURE__ */ new WeakMap(), _PromptCachingBetaMessageStream_aborted = /* @__PURE__ */ new WeakMap(), _PromptCachingBetaMessageStream_catchingPromiseCreated = /* @__PURE__ */ new WeakMap(), _PromptCachingBetaMessageStream_handleError = /* @__PURE__ */ new WeakMap(), _PromptCachingBetaMessageStream_instances = /* @__PURE__ */ new WeakSet(), _PromptCachingBetaMessageStream_getFinalMessage = function _PromptCachingBetaMessageStream_getFinalMessage2() {
    if (this.receivedMessages.length === 0) {
      throw new AnthropicError("stream ended without producing a PromptCachingBetaMessage with role=assistant");
    }
    return this.receivedMessages.at(-1);
  }, _PromptCachingBetaMessageStream_getFinalText = function _PromptCachingBetaMessageStream_getFinalText2() {
    if (this.receivedMessages.length === 0) {
      throw new AnthropicError("stream ended without producing a PromptCachingBetaMessage with role=assistant");
    }
    const textBlocks = this.receivedMessages.at(-1).content.filter((block) => block.type === "text").map((block) => block.text);
    if (textBlocks.length === 0) {
      throw new AnthropicError("stream ended without producing a content block with type=text");
    }
    return textBlocks.join(" ");
  }, _PromptCachingBetaMessageStream_beginRequest = function _PromptCachingBetaMessageStream_beginRequest2() {
    if (this.ended)
      return;
    __classPrivateFieldSet2(this, _PromptCachingBetaMessageStream_currentMessageSnapshot, void 0, "f");
  }, _PromptCachingBetaMessageStream_addStreamEvent = function _PromptCachingBetaMessageStream_addStreamEvent2(event) {
    if (this.ended)
      return;
    const messageSnapshot = __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_instances, "m", _PromptCachingBetaMessageStream_accumulateMessage).call(this, event);
    this._emit("streamEvent", event, messageSnapshot);
    switch (event.type) {
      case "content_block_delta": {
        const content = messageSnapshot.content.at(-1);
        if (event.delta.type === "text_delta" && content.type === "text") {
          this._emit("text", event.delta.text, content.text || "");
        } else if (event.delta.type === "input_json_delta" && content.type === "tool_use") {
          if (content.input) {
            this._emit("inputJson", event.delta.partial_json, content.input);
          }
        }
        break;
      }
      case "message_stop": {
        this._addPromptCachingBetaMessageParam(messageSnapshot);
        this._addPromptCachingBetaMessage(messageSnapshot, true);
        break;
      }
      case "content_block_stop": {
        this._emit("contentBlock", messageSnapshot.content.at(-1));
        break;
      }
      case "message_start": {
        __classPrivateFieldSet2(this, _PromptCachingBetaMessageStream_currentMessageSnapshot, messageSnapshot, "f");
        break;
      }
      case "content_block_start":
      case "message_delta":
        break;
    }
  }, _PromptCachingBetaMessageStream_endRequest = function _PromptCachingBetaMessageStream_endRequest2() {
    if (this.ended) {
      throw new AnthropicError(`stream has ended, this shouldn't happen`);
    }
    const snapshot = __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_currentMessageSnapshot, "f");
    if (!snapshot) {
      throw new AnthropicError(`request ended without sending any chunks`);
    }
    __classPrivateFieldSet2(this, _PromptCachingBetaMessageStream_currentMessageSnapshot, void 0, "f");
    return snapshot;
  }, _PromptCachingBetaMessageStream_accumulateMessage = function _PromptCachingBetaMessageStream_accumulateMessage2(event) {
    let snapshot = __classPrivateFieldGet2(this, _PromptCachingBetaMessageStream_currentMessageSnapshot, "f");
    if (event.type === "message_start") {
      if (snapshot) {
        throw new AnthropicError(`Unexpected event order, got ${event.type} before receiving "message_stop"`);
      }
      return event.message;
    }
    if (!snapshot) {
      throw new AnthropicError(`Unexpected event order, got ${event.type} before "message_start"`);
    }
    switch (event.type) {
      case "message_stop":
        return snapshot;
      case "message_delta":
        snapshot.stop_reason = event.delta.stop_reason;
        snapshot.stop_sequence = event.delta.stop_sequence;
        snapshot.usage.output_tokens = event.usage.output_tokens;
        return snapshot;
      case "content_block_start":
        snapshot.content.push(event.content_block);
        return snapshot;
      case "content_block_delta": {
        const snapshotContent = snapshot.content.at(event.index);
        if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text" && event.delta.type === "text_delta") {
          snapshotContent.text += event.delta.text;
        } else if ((snapshotContent == null ? void 0 : snapshotContent.type) === "tool_use" && event.delta.type === "input_json_delta") {
          let jsonBuf = snapshotContent[JSON_BUF_PROPERTY] || "";
          jsonBuf += event.delta.partial_json;
          Object.defineProperty(snapshotContent, JSON_BUF_PROPERTY, {
            value: jsonBuf,
            enumerable: false,
            writable: true
          });
          if (jsonBuf) {
            snapshotContent.input = partialParse(jsonBuf);
          }
        }
        return snapshot;
      }
      case "content_block_stop":
        return snapshot;
    }
  }, Symbol.asyncIterator)]() {
    const pushQueue = [];
    const readQueue = [];
    let done = false;
    this.on("streamEvent", (event) => {
      const reader = readQueue.shift();
      if (reader) {
        reader.resolve(event);
      } else {
        pushQueue.push(event);
      }
    });
    this.on("end", () => {
      done = true;
      for (const reader of readQueue) {
        reader.resolve(void 0);
      }
      readQueue.length = 0;
    });
    this.on("abort", (err) => {
      done = true;
      for (const reader of readQueue) {
        reader.reject(err);
      }
      readQueue.length = 0;
    });
    this.on("error", (err) => {
      done = true;
      for (const reader of readQueue) {
        reader.reject(err);
      }
      readQueue.length = 0;
    });
    return {
      next: async () => {
        if (!pushQueue.length) {
          if (done) {
            return { value: void 0, done: true };
          }
          return new Promise((resolve, reject) => readQueue.push({ resolve, reject })).then((chunk2) => chunk2 ? { value: chunk2, done: false } : { value: void 0, done: true });
        }
        const chunk = pushQueue.shift();
        return { value: chunk, done: false };
      },
      return: async () => {
        this.abort();
        return { value: void 0, done: true };
      }
    };
  }
  toReadableStream() {
    const stream = new Stream(this[Symbol.asyncIterator].bind(this), this.controller);
    return stream.toReadableStream();
  }
};

// node_modules/@anthropic-ai/sdk/resources/beta/prompt-caching/messages.mjs
var Messages2 = class extends APIResource {
  create(params, options) {
    var _a2, _b;
    const { betas, ...body } = params;
    return this._client.post("/v1/messages?beta=prompt_caching", {
      body,
      timeout: (_a2 = this._client._options.timeout) != null ? _a2 : 6e5,
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "prompt-caching-2024-07-31"].toString(),
        ...options == null ? void 0 : options.headers
      },
      stream: (_b = params.stream) != null ? _b : false
    });
  }
  /**
   * Create a Message stream
   */
  stream(body, options) {
    return PromptCachingBetaMessageStream.createMessage(this, body, options);
  }
};

// node_modules/@anthropic-ai/sdk/resources/beta/prompt-caching/prompt-caching.mjs
var PromptCaching = class extends APIResource {
  constructor() {
    super(...arguments);
    this.messages = new Messages2(this._client);
  }
};
PromptCaching.Messages = Messages2;

// node_modules/@anthropic-ai/sdk/resources/beta/beta.mjs
var Beta = class extends APIResource {
  constructor() {
    super(...arguments);
    this.messages = new Messages(this._client);
    this.promptCaching = new PromptCaching(this._client);
  }
};
Beta.Messages = Messages;
Beta.PromptCaching = PromptCaching;

// node_modules/@anthropic-ai/sdk/resources/completions.mjs
var Completions = class extends APIResource {
  create(body, options) {
    var _a2, _b;
    return this._client.post("/v1/complete", {
      body,
      timeout: (_a2 = this._client._options.timeout) != null ? _a2 : 6e5,
      ...options,
      stream: (_b = body.stream) != null ? _b : false
    });
  }
};

// node_modules/@anthropic-ai/sdk/lib/MessageStream.mjs
var __classPrivateFieldSet3 = function(receiver, state, value, kind2, f) {
  if (kind2 === "m")
    throw new TypeError("Private method is not writable");
  if (kind2 === "a" && !f)
    throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
    throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind2 === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var __classPrivateFieldGet3 = function(receiver, state, kind2, f) {
  if (kind2 === "a" && !f)
    throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
    throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind2 === "m" ? f : kind2 === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _MessageStream_instances;
var _MessageStream_currentMessageSnapshot;
var _MessageStream_connectedPromise;
var _MessageStream_resolveConnectedPromise;
var _MessageStream_rejectConnectedPromise;
var _MessageStream_endPromise;
var _MessageStream_resolveEndPromise;
var _MessageStream_rejectEndPromise;
var _MessageStream_listeners;
var _MessageStream_ended;
var _MessageStream_errored;
var _MessageStream_aborted;
var _MessageStream_catchingPromiseCreated;
var _MessageStream_getFinalMessage;
var _MessageStream_getFinalText;
var _MessageStream_handleError;
var _MessageStream_beginRequest;
var _MessageStream_addStreamEvent;
var _MessageStream_endRequest;
var _MessageStream_accumulateMessage;
var JSON_BUF_PROPERTY2 = "__json_buf";
var MessageStream = class {
  constructor() {
    _MessageStream_instances.add(this);
    this.messages = [];
    this.receivedMessages = [];
    _MessageStream_currentMessageSnapshot.set(this, void 0);
    this.controller = new AbortController();
    _MessageStream_connectedPromise.set(this, void 0);
    _MessageStream_resolveConnectedPromise.set(this, () => {
    });
    _MessageStream_rejectConnectedPromise.set(this, () => {
    });
    _MessageStream_endPromise.set(this, void 0);
    _MessageStream_resolveEndPromise.set(this, () => {
    });
    _MessageStream_rejectEndPromise.set(this, () => {
    });
    _MessageStream_listeners.set(this, {});
    _MessageStream_ended.set(this, false);
    _MessageStream_errored.set(this, false);
    _MessageStream_aborted.set(this, false);
    _MessageStream_catchingPromiseCreated.set(this, false);
    _MessageStream_handleError.set(this, (error) => {
      __classPrivateFieldSet3(this, _MessageStream_errored, true, "f");
      if (error instanceof Error && error.name === "AbortError") {
        error = new APIUserAbortError();
      }
      if (error instanceof APIUserAbortError) {
        __classPrivateFieldSet3(this, _MessageStream_aborted, true, "f");
        return this._emit("abort", error);
      }
      if (error instanceof AnthropicError) {
        return this._emit("error", error);
      }
      if (error instanceof Error) {
        const anthropicError = new AnthropicError(error.message);
        anthropicError.cause = error;
        return this._emit("error", anthropicError);
      }
      return this._emit("error", new AnthropicError(String(error)));
    });
    __classPrivateFieldSet3(this, _MessageStream_connectedPromise, new Promise((resolve, reject) => {
      __classPrivateFieldSet3(this, _MessageStream_resolveConnectedPromise, resolve, "f");
      __classPrivateFieldSet3(this, _MessageStream_rejectConnectedPromise, reject, "f");
    }), "f");
    __classPrivateFieldSet3(this, _MessageStream_endPromise, new Promise((resolve, reject) => {
      __classPrivateFieldSet3(this, _MessageStream_resolveEndPromise, resolve, "f");
      __classPrivateFieldSet3(this, _MessageStream_rejectEndPromise, reject, "f");
    }), "f");
    __classPrivateFieldGet3(this, _MessageStream_connectedPromise, "f").catch(() => {
    });
    __classPrivateFieldGet3(this, _MessageStream_endPromise, "f").catch(() => {
    });
  }
  /**
   * Intended for use on the frontend, consuming a stream produced with
   * `.toReadableStream()` on the backend.
   *
   * Note that messages sent to the model do not appear in `.on('message')`
   * in this context.
   */
  static fromReadableStream(stream) {
    const runner = new MessageStream();
    runner._run(() => runner._fromReadableStream(stream));
    return runner;
  }
  static createMessage(messages, params, options) {
    const runner = new MessageStream();
    for (const message of params.messages) {
      runner._addMessageParam(message);
    }
    runner._run(() => runner._createMessage(messages, { ...params, stream: true }, { ...options, headers: { ...options == null ? void 0 : options.headers, "X-Stainless-Helper-Method": "stream" } }));
    return runner;
  }
  _run(executor) {
    executor().then(() => {
      this._emitFinal();
      this._emit("end");
    }, __classPrivateFieldGet3(this, _MessageStream_handleError, "f"));
  }
  _addMessageParam(message) {
    this.messages.push(message);
  }
  _addMessage(message, emit = true) {
    this.receivedMessages.push(message);
    if (emit) {
      this._emit("message", message);
    }
  }
  async _createMessage(messages, params, options) {
    var _a2;
    const signal = options == null ? void 0 : options.signal;
    if (signal) {
      if (signal.aborted)
        this.controller.abort();
      signal.addEventListener("abort", () => this.controller.abort());
    }
    __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_beginRequest).call(this);
    const stream = await messages.create({ ...params, stream: true }, { ...options, signal: this.controller.signal });
    this._connected();
    for await (const event of stream) {
      __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_addStreamEvent).call(this, event);
    }
    if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
      throw new APIUserAbortError();
    }
    __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_endRequest).call(this);
  }
  _connected() {
    if (this.ended)
      return;
    __classPrivateFieldGet3(this, _MessageStream_resolveConnectedPromise, "f").call(this);
    this._emit("connect");
  }
  get ended() {
    return __classPrivateFieldGet3(this, _MessageStream_ended, "f");
  }
  get errored() {
    return __classPrivateFieldGet3(this, _MessageStream_errored, "f");
  }
  get aborted() {
    return __classPrivateFieldGet3(this, _MessageStream_aborted, "f");
  }
  abort() {
    this.controller.abort();
  }
  /**
   * Adds the listener function to the end of the listeners array for the event.
   * No checks are made to see if the listener has already been added. Multiple calls passing
   * the same combination of event and listener will result in the listener being added, and
   * called, multiple times.
   * @returns this MessageStream, so that calls can be chained
   */
  on(event, listener) {
    const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] || (__classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] = []);
    listeners.push({ listener });
    return this;
  }
  /**
   * Removes the specified listener from the listener array for the event.
   * off() will remove, at most, one instance of a listener from the listener array. If any single
   * listener has been added multiple times to the listener array for the specified event, then
   * off() must be called multiple times to remove each instance.
   * @returns this MessageStream, so that calls can be chained
   */
  off(event, listener) {
    const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event];
    if (!listeners)
      return this;
    const index = listeners.findIndex((l) => l.listener === listener);
    if (index >= 0)
      listeners.splice(index, 1);
    return this;
  }
  /**
   * Adds a one-time listener function for the event. The next time the event is triggered,
   * this listener is removed and then invoked.
   * @returns this MessageStream, so that calls can be chained
   */
  once(event, listener) {
    const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] || (__classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] = []);
    listeners.push({ listener, once: true });
    return this;
  }
  /**
   * This is similar to `.once()`, but returns a Promise that resolves the next time
   * the event is triggered, instead of calling a listener callback.
   * @returns a Promise that resolves the next time given event is triggered,
   * or rejects if an error is emitted.  (If you request the 'error' event,
   * returns a promise that resolves with the error).
   *
   * Example:
   *
   *   const message = await stream.emitted('message') // rejects if the stream errors
   */
  emitted(event) {
    return new Promise((resolve, reject) => {
      __classPrivateFieldSet3(this, _MessageStream_catchingPromiseCreated, true, "f");
      if (event !== "error")
        this.once("error", reject);
      this.once(event, resolve);
    });
  }
  async done() {
    __classPrivateFieldSet3(this, _MessageStream_catchingPromiseCreated, true, "f");
    await __classPrivateFieldGet3(this, _MessageStream_endPromise, "f");
  }
  get currentMessage() {
    return __classPrivateFieldGet3(this, _MessageStream_currentMessageSnapshot, "f");
  }
  /**
   * @returns a promise that resolves with the the final assistant Message response,
   * or rejects if an error occurred or the stream ended prematurely without producing a Message.
   */
  async finalMessage() {
    await this.done();
    return __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_getFinalMessage).call(this);
  }
  /**
   * @returns a promise that resolves with the the final assistant Message's text response, concatenated
   * together if there are more than one text blocks.
   * Rejects if an error occurred or the stream ended prematurely without producing a Message.
   */
  async finalText() {
    await this.done();
    return __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_getFinalText).call(this);
  }
  _emit(event, ...args) {
    if (__classPrivateFieldGet3(this, _MessageStream_ended, "f"))
      return;
    if (event === "end") {
      __classPrivateFieldSet3(this, _MessageStream_ended, true, "f");
      __classPrivateFieldGet3(this, _MessageStream_resolveEndPromise, "f").call(this);
    }
    const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event];
    if (listeners) {
      __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] = listeners.filter((l) => !l.once);
      listeners.forEach(({ listener }) => listener(...args));
    }
    if (event === "abort") {
      const error = args[0];
      if (!__classPrivateFieldGet3(this, _MessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
        Promise.reject(error);
      }
      __classPrivateFieldGet3(this, _MessageStream_rejectConnectedPromise, "f").call(this, error);
      __classPrivateFieldGet3(this, _MessageStream_rejectEndPromise, "f").call(this, error);
      this._emit("end");
      return;
    }
    if (event === "error") {
      const error = args[0];
      if (!__classPrivateFieldGet3(this, _MessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
        Promise.reject(error);
      }
      __classPrivateFieldGet3(this, _MessageStream_rejectConnectedPromise, "f").call(this, error);
      __classPrivateFieldGet3(this, _MessageStream_rejectEndPromise, "f").call(this, error);
      this._emit("end");
    }
  }
  _emitFinal() {
    const finalMessage = this.receivedMessages.at(-1);
    if (finalMessage) {
      this._emit("finalMessage", __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_getFinalMessage).call(this));
    }
  }
  async _fromReadableStream(readableStream, options) {
    var _a2;
    const signal = options == null ? void 0 : options.signal;
    if (signal) {
      if (signal.aborted)
        this.controller.abort();
      signal.addEventListener("abort", () => this.controller.abort());
    }
    __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_beginRequest).call(this);
    this._connected();
    const stream = Stream.fromReadableStream(readableStream, this.controller);
    for await (const event of stream) {
      __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_addStreamEvent).call(this, event);
    }
    if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
      throw new APIUserAbortError();
    }
    __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_endRequest).call(this);
  }
  [(_MessageStream_currentMessageSnapshot = /* @__PURE__ */ new WeakMap(), _MessageStream_connectedPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_resolveConnectedPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_rejectConnectedPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_endPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_resolveEndPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_rejectEndPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_listeners = /* @__PURE__ */ new WeakMap(), _MessageStream_ended = /* @__PURE__ */ new WeakMap(), _MessageStream_errored = /* @__PURE__ */ new WeakMap(), _MessageStream_aborted = /* @__PURE__ */ new WeakMap(), _MessageStream_catchingPromiseCreated = /* @__PURE__ */ new WeakMap(), _MessageStream_handleError = /* @__PURE__ */ new WeakMap(), _MessageStream_instances = /* @__PURE__ */ new WeakSet(), _MessageStream_getFinalMessage = function _MessageStream_getFinalMessage2() {
    if (this.receivedMessages.length === 0) {
      throw new AnthropicError("stream ended without producing a Message with role=assistant");
    }
    return this.receivedMessages.at(-1);
  }, _MessageStream_getFinalText = function _MessageStream_getFinalText2() {
    if (this.receivedMessages.length === 0) {
      throw new AnthropicError("stream ended without producing a Message with role=assistant");
    }
    const textBlocks = this.receivedMessages.at(-1).content.filter((block) => block.type === "text").map((block) => block.text);
    if (textBlocks.length === 0) {
      throw new AnthropicError("stream ended without producing a content block with type=text");
    }
    return textBlocks.join(" ");
  }, _MessageStream_beginRequest = function _MessageStream_beginRequest2() {
    if (this.ended)
      return;
    __classPrivateFieldSet3(this, _MessageStream_currentMessageSnapshot, void 0, "f");
  }, _MessageStream_addStreamEvent = function _MessageStream_addStreamEvent2(event) {
    if (this.ended)
      return;
    const messageSnapshot = __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_accumulateMessage).call(this, event);
    this._emit("streamEvent", event, messageSnapshot);
    switch (event.type) {
      case "content_block_delta": {
        const content = messageSnapshot.content.at(-1);
        if (event.delta.type === "text_delta" && content.type === "text") {
          this._emit("text", event.delta.text, content.text || "");
        } else if (event.delta.type === "input_json_delta" && content.type === "tool_use") {
          if (content.input) {
            this._emit("inputJson", event.delta.partial_json, content.input);
          }
        }
        break;
      }
      case "message_stop": {
        this._addMessageParam(messageSnapshot);
        this._addMessage(messageSnapshot, true);
        break;
      }
      case "content_block_stop": {
        this._emit("contentBlock", messageSnapshot.content.at(-1));
        break;
      }
      case "message_start": {
        __classPrivateFieldSet3(this, _MessageStream_currentMessageSnapshot, messageSnapshot, "f");
        break;
      }
      case "content_block_start":
      case "message_delta":
        break;
    }
  }, _MessageStream_endRequest = function _MessageStream_endRequest2() {
    if (this.ended) {
      throw new AnthropicError(`stream has ended, this shouldn't happen`);
    }
    const snapshot = __classPrivateFieldGet3(this, _MessageStream_currentMessageSnapshot, "f");
    if (!snapshot) {
      throw new AnthropicError(`request ended without sending any chunks`);
    }
    __classPrivateFieldSet3(this, _MessageStream_currentMessageSnapshot, void 0, "f");
    return snapshot;
  }, _MessageStream_accumulateMessage = function _MessageStream_accumulateMessage2(event) {
    let snapshot = __classPrivateFieldGet3(this, _MessageStream_currentMessageSnapshot, "f");
    if (event.type === "message_start") {
      if (snapshot) {
        throw new AnthropicError(`Unexpected event order, got ${event.type} before receiving "message_stop"`);
      }
      return event.message;
    }
    if (!snapshot) {
      throw new AnthropicError(`Unexpected event order, got ${event.type} before "message_start"`);
    }
    switch (event.type) {
      case "message_stop":
        return snapshot;
      case "message_delta":
        snapshot.stop_reason = event.delta.stop_reason;
        snapshot.stop_sequence = event.delta.stop_sequence;
        snapshot.usage.output_tokens = event.usage.output_tokens;
        return snapshot;
      case "content_block_start":
        snapshot.content.push(event.content_block);
        return snapshot;
      case "content_block_delta": {
        const snapshotContent = snapshot.content.at(event.index);
        if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text" && event.delta.type === "text_delta") {
          snapshotContent.text += event.delta.text;
        } else if ((snapshotContent == null ? void 0 : snapshotContent.type) === "tool_use" && event.delta.type === "input_json_delta") {
          let jsonBuf = snapshotContent[JSON_BUF_PROPERTY2] || "";
          jsonBuf += event.delta.partial_json;
          Object.defineProperty(snapshotContent, JSON_BUF_PROPERTY2, {
            value: jsonBuf,
            enumerable: false,
            writable: true
          });
          if (jsonBuf) {
            snapshotContent.input = partialParse(jsonBuf);
          }
        }
        return snapshot;
      }
      case "content_block_stop":
        return snapshot;
    }
  }, Symbol.asyncIterator)]() {
    const pushQueue = [];
    const readQueue = [];
    let done = false;
    this.on("streamEvent", (event) => {
      const reader = readQueue.shift();
      if (reader) {
        reader.resolve(event);
      } else {
        pushQueue.push(event);
      }
    });
    this.on("end", () => {
      done = true;
      for (const reader of readQueue) {
        reader.resolve(void 0);
      }
      readQueue.length = 0;
    });
    this.on("abort", (err) => {
      done = true;
      for (const reader of readQueue) {
        reader.reject(err);
      }
      readQueue.length = 0;
    });
    this.on("error", (err) => {
      done = true;
      for (const reader of readQueue) {
        reader.reject(err);
      }
      readQueue.length = 0;
    });
    return {
      next: async () => {
        if (!pushQueue.length) {
          if (done) {
            return { value: void 0, done: true };
          }
          return new Promise((resolve, reject) => readQueue.push({ resolve, reject })).then((chunk2) => chunk2 ? { value: chunk2, done: false } : { value: void 0, done: true });
        }
        const chunk = pushQueue.shift();
        return { value: chunk, done: false };
      },
      return: async () => {
        this.abort();
        return { value: void 0, done: true };
      }
    };
  }
  toReadableStream() {
    const stream = new Stream(this[Symbol.asyncIterator].bind(this), this.controller);
    return stream.toReadableStream();
  }
};

// node_modules/@anthropic-ai/sdk/resources/messages.mjs
var Messages3 = class extends APIResource {
  create(body, options) {
    var _a2, _b;
    if (body.model in DEPRECATED_MODELS) {
      console.warn(`The model '${body.model}' is deprecated and will reach end-of-life on ${DEPRECATED_MODELS[body.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);
    }
    return this._client.post("/v1/messages", {
      body,
      timeout: (_a2 = this._client._options.timeout) != null ? _a2 : 6e5,
      ...options,
      stream: (_b = body.stream) != null ? _b : false
    });
  }
  /**
   * Create a Message stream
   */
  stream(body, options) {
    return MessageStream.createMessage(this, body, options);
  }
};
var DEPRECATED_MODELS = {
  "claude-1.3": "November 6th, 2024",
  "claude-1.3-100k": "November 6th, 2024",
  "claude-instant-1.1": "November 6th, 2024",
  "claude-instant-1.1-100k": "November 6th, 2024",
  "claude-instant-1.2": "November 6th, 2024"
};

// node_modules/@anthropic-ai/sdk/index.mjs
var _a;
var Anthropic = class extends APIClient {
  /**
   * API Client for interfacing with the Anthropic API.
   *
   * @param {string | null | undefined} [opts.apiKey=process.env['ANTHROPIC_API_KEY'] ?? null]
   * @param {string | null | undefined} [opts.authToken=process.env['ANTHROPIC_AUTH_TOKEN'] ?? null]
   * @param {string} [opts.baseURL=process.env['ANTHROPIC_BASE_URL'] ?? https://api.anthropic.com] - Override the default base URL for the API.
   * @param {number} [opts.timeout=10 minutes] - The maximum amount of time (in milliseconds) the client will wait for a response before timing out.
   * @param {number} [opts.httpAgent] - An HTTP agent used to manage HTTP(s) connections.
   * @param {Core.Fetch} [opts.fetch] - Specify a custom `fetch` function implementation.
   * @param {number} [opts.maxRetries=2] - The maximum number of times the client will retry a request.
   * @param {Core.Headers} opts.defaultHeaders - Default headers to include with every request to the API.
   * @param {Core.DefaultQuery} opts.defaultQuery - Default query parameters to include with every request to the API.
   * @param {boolean} [opts.dangerouslyAllowBrowser=false] - By default, client-side use of this library is not allowed, as it risks exposing your secret API credentials to attackers.
   */
  constructor({ baseURL = readEnv("ANTHROPIC_BASE_URL"), apiKey = ((_a2) => (_a2 = readEnv("ANTHROPIC_API_KEY")) != null ? _a2 : null)(), authToken = ((_b) => (_b = readEnv("ANTHROPIC_AUTH_TOKEN")) != null ? _b : null)(), ...opts } = {}) {
    var _a3;
    const options = {
      apiKey,
      authToken,
      ...opts,
      baseURL: baseURL || `https://api.anthropic.com`
    };
    if (!options.dangerouslyAllowBrowser && isRunningInBrowser()) {
      throw new AnthropicError("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\n\nTODO: link!\n");
    }
    super({
      baseURL: options.baseURL,
      timeout: (_a3 = options.timeout) != null ? _a3 : 6e5,
      httpAgent: options.httpAgent,
      maxRetries: options.maxRetries,
      fetch: options.fetch
    });
    this.completions = new Completions(this);
    this.messages = new Messages3(this);
    this.beta = new Beta(this);
    this._options = options;
    this.apiKey = apiKey;
    this.authToken = authToken;
  }
  defaultQuery() {
    return this._options.defaultQuery;
  }
  defaultHeaders(opts) {
    return {
      ...super.defaultHeaders(opts),
      ...this._options.dangerouslyAllowBrowser ? { "anthropic-dangerous-direct-browser-access": "true" } : void 0,
      "anthropic-version": "2023-06-01",
      ...this._options.defaultHeaders
    };
  }
  validateHeaders(headers, customHeaders) {
    if (this.apiKey && headers["x-api-key"]) {
      return;
    }
    if (customHeaders["x-api-key"] === null) {
      return;
    }
    if (this.authToken && headers["authorization"]) {
      return;
    }
    if (customHeaders["authorization"] === null) {
      return;
    }
    throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted');
  }
  authHeaders(opts) {
    const apiKeyAuth = this.apiKeyAuth(opts);
    const bearerAuth = this.bearerAuth(opts);
    if (apiKeyAuth != null && !isEmptyObj(apiKeyAuth)) {
      return apiKeyAuth;
    }
    if (bearerAuth != null && !isEmptyObj(bearerAuth)) {
      return bearerAuth;
    }
    return {};
  }
  apiKeyAuth(opts) {
    if (this.apiKey == null) {
      return {};
    }
    return { "X-Api-Key": this.apiKey };
  }
  bearerAuth(opts) {
    if (this.authToken == null) {
      return {};
    }
    return { Authorization: `Bearer ${this.authToken}` };
  }
};
_a = Anthropic;
Anthropic.Anthropic = _a;
Anthropic.HUMAN_PROMPT = "\n\nHuman:";
Anthropic.AI_PROMPT = "\n\nAssistant:";
Anthropic.DEFAULT_TIMEOUT = 6e5;
Anthropic.AnthropicError = AnthropicError;
Anthropic.APIError = APIError;
Anthropic.APIConnectionError = APIConnectionError;
Anthropic.APIConnectionTimeoutError = APIConnectionTimeoutError;
Anthropic.APIUserAbortError = APIUserAbortError;
Anthropic.NotFoundError = NotFoundError;
Anthropic.ConflictError = ConflictError;
Anthropic.RateLimitError = RateLimitError;
Anthropic.BadRequestError = BadRequestError;
Anthropic.AuthenticationError = AuthenticationError;
Anthropic.InternalServerError = InternalServerError;
Anthropic.PermissionDeniedError = PermissionDeniedError;
Anthropic.UnprocessableEntityError = UnprocessableEntityError;
Anthropic.toFile = toFile;
Anthropic.fileFromPath = fileFromPath;
var { HUMAN_PROMPT, AI_PROMPT } = Anthropic;
Anthropic.Completions = Completions;
Anthropic.Messages = Messages3;
Anthropic.Beta = Beta;

// src/views/ConversationView.ts
var import_obsidian2 = require("obsidian");

// src/components/RetryButton.ts
var import_obsidian = require("obsidian");
var RetryButton = class extends import_obsidian.ButtonComponent {
  constructor(containerEl, onClick) {
    super(containerEl);
    this.setButtonText("Retry").setClass("retry-button").setClass("button-primary").onClick(onClick);
  }
};

// src/views/ConversationView.ts
var ConversationView = class extends import_obsidian2.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
    this.messages = [];
    this.chatName = null;
    this.lastFailedMessage = null;
  }
  getViewType() {
    return "tessera-chat";
  }
  getDisplayText() {
    return "Tessera Chat";
  }
  async onOpen() {
    const container = this.containerEl.children[1];
    container.empty();
    const chatContainer = container.createDiv("tessera-chat-container");
    const header = chatContainer.createDiv("tessera-chat-header");
    const headerButtons = header.createDiv("tessera-header-buttons");
    const newChatButton = headerButtons.createEl("button", {
      cls: "tessera-header-button",
      attr: {
        "aria-label": "New chat"
      }
    });
    newChatButton.innerHTML = `<svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none">
            <path d="M12 5v14M5 12h14"/>
        </svg>`;
    const copyAllButton = headerButtons.createEl("button", {
      cls: "tessera-header-button",
      attr: {
        "aria-label": "Copy conversation"
      }
    });
    copyAllButton.innerHTML = `<svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
        </svg>`;
    const saveButton = headerButtons.createEl("button", {
      cls: "tessera-header-button",
      attr: {
        "aria-label": "Save conversation"
      }
    });
    saveButton.innerHTML = `<svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none">
            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
            <polyline points="17 21 17 13 7 13 7 21"></polyline>
            <polyline points="7 3 7 8 15 8"></polyline>
        </svg>`;
    newChatButton.addEventListener("click", async () => {
      if (this.messages.length > 0) {
        await this.saveConversation();
      }
      this.startNewChat();
    });
    copyAllButton.addEventListener("click", async () => {
      await this.copyConversation();
    });
    saveButton.addEventListener("click", () => this.saveConversation());
    this.messageContainer = chatContainer.createDiv("tessera-messages");
    this.inputContainer = chatContainer.createDiv("tessera-input-container");
    const textarea = this.inputContainer.createEl("textarea", {
      attr: {
        placeholder: "Type your message...",
        rows: "3"
      }
    });
    const buttonContainer = this.inputContainer.createDiv("tessera-button-container");
    const sendButton = buttonContainer.createEl("button", {
      cls: "tessera-send-button"
    });
    sendButton.innerHTML = `<svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none">
            <line x1="22" y1="2" x2="11" y2="13"></line>
            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
        </svg>`;
    textarea.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey || e.key === "Enter" && (e.metaKey || e.ctrlKey)) {
        e.preventDefault();
        this.sendMessage(textarea.value);
        textarea.value = "";
      }
    });
    sendButton.addEventListener("click", () => {
      this.sendMessage(textarea.value);
      textarea.value = "";
    });
    this.addStyles();
    await this.sendInitialMessage();
  }
  async sendInitialMessage() {
    var _a2, _b;
    const loadingEl = this.showLoadingIndicator();
    try {
      const response = await this.plugin.sendMessage(
        "START_CONVERSATION",
        // Special trigger for initial message
        this.plugin.settings.selectedModel
      );
      (_a2 = loadingEl.parentElement) == null ? void 0 : _a2.remove();
      const responseText = response.content[0].type === "text" ? response.content[0].text : "Failed to start conversation";
      const welcomeMessage = {
        role: "assistant",
        content: responseText,
        timestamp: Date.now()
      };
      this.messages.push(welcomeMessage);
      await this.renderMessage(welcomeMessage);
    } catch (error) {
      console.error("Failed to start conversation:", error);
      (_b = loadingEl.parentElement) == null ? void 0 : _b.remove();
      const errorWrapper = this.messageContainer.createDiv("tessera-message-wrapper assistant");
      errorWrapper.createDiv("tessera-message error").setText("Failed to start conversation");
    }
  }
  async sendMessage(content) {
    var _a2, _b;
    if (!content.trim())
      return;
    const userMessage = {
      role: "user",
      content: content.trim(),
      timestamp: Date.now()
    };
    this.messages.push(userMessage);
    await this.renderMessage(userMessage);
    if (!this.chatName && this.messages.filter((m) => m.role === "user").length === 1) {
      try {
        const response = await this.plugin.generateChatName(content);
        this.chatName = response.replace(/[<>:"/\\|?*]/g, "-").trim();
      } catch (error) {
        console.error("Failed to generate chat name:", error);
        this.chatName = "Untitled Chat";
      }
    }
    const loadingEl = this.showLoadingIndicator();
    try {
      const response = await this.plugin.sendMessage(content);
      (_a2 = loadingEl.parentElement) == null ? void 0 : _a2.remove();
      const responseText = response.content[0].type === "text" ? response.content[0].text : "Received non-text response";
      const assistantMessage = {
        role: "assistant",
        content: responseText,
        timestamp: Date.now()
      };
      this.messages.push(assistantMessage);
      await this.renderMessage(assistantMessage);
    } catch (error) {
      console.error("Failed to get AI response:", error);
      (_b = loadingEl.parentElement) == null ? void 0 : _b.remove();
      this.lastFailedMessage = content;
      const errorMessage = {
        role: "assistant",
        content: "Failed to get response from AI",
        timestamp: Date.now()
      };
      this.messages.push(errorMessage);
      await this.renderMessage(errorMessage);
    }
  }
  async renderMessage(message) {
    const wrapper = this.messageContainer.createDiv(`tessera-message-wrapper ${message.role}`);
    const messageEl = wrapper.createDiv(`tessera-message ${message.role}`);
    if (message.role === "assistant") {
      await import_obsidian2.MarkdownRenderer.renderMarkdown(
        message.content,
        messageEl,
        ".tessera-chat",
        this
      );
    } else {
      messageEl.setText(message.content);
    }
    const bottomBar = wrapper.createDiv("tessera-message-bottom-bar");
    const timestamp = bottomBar.createDiv("tessera-timestamp");
    timestamp.setText(this.formatTimestamp(message.timestamp));
    const copyButton = bottomBar.createDiv("tessera-copy-button");
    copyButton.setAttribute("aria-label", "Copy message");
    copyButton.innerHTML = `<svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
        </svg>`;
    copyButton.addEventListener("click", async (e) => {
      e.stopPropagation();
      await navigator.clipboard.writeText(message.content);
      copyButton.addClass("copied");
      setTimeout(() => copyButton.removeClass("copied"), 1e3);
    });
    this.messageContainer.scrollTo({
      top: this.messageContainer.scrollHeight,
      behavior: "smooth"
    });
  }
  formatTimestamp(timestamp) {
    const date = new Date(timestamp);
    return date.toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" });
  }
  showLoadingIndicator() {
    const wrapper = this.messageContainer.createDiv("tessera-message-wrapper assistant");
    const loadingEl = wrapper.createDiv("tessera-message loading");
    const indicator = loadingEl.createDiv("typing-indicator");
    for (let i = 0; i < 3; i++) {
      indicator.createSpan();
    }
    this.messageContainer.scrollTo({
      top: this.messageContainer.scrollHeight,
      behavior: "smooth"
    });
    return loadingEl;
  }
  async saveConversation() {
    if (this.messages.length === 0) {
      new import_obsidian2.Notice("No messages to save");
      return;
    }
    const basePath = "Saved Chats";
    if (!await this.app.vault.adapter.exists(basePath)) {
      await this.app.vault.createFolder(basePath);
    }
    const today = new Date().toISOString().slice(0, 10);
    const datePath = `${basePath}/${today}`;
    if (!await this.app.vault.adapter.exists(datePath)) {
      await this.app.vault.createFolder(datePath);
    }
    const filename = `${datePath}/${this.chatName || "Untitled Chat"}.md`;
    let finalFilename = filename;
    let counter = 1;
    while (await this.app.vault.adapter.exists(finalFilename)) {
      finalFilename = `${datePath}/${this.chatName || "Untitled Chat"} (${counter}).md`;
      counter++;
    }
    const markdown = await this.generateConversationMarkdown();
    try {
      await this.app.vault.create(finalFilename, markdown);
      new import_obsidian2.Notice("Conversation saved");
      const abstractFile = this.app.vault.getAbstractFileByPath(finalFilename);
      if (abstractFile instanceof import_obsidian2.TFile) {
        await this.app.workspace.getLeaf(false).openFile(abstractFile);
      }
    } catch (error) {
      console.error("Failed to save conversation:", error);
      new import_obsidian2.Notice("Failed to save conversation");
    }
  }
  async startNewChat() {
    this.messages = [];
    this.messageContainer.empty();
    this.chatName = null;
    this.plugin.clearConversationHistory();
    await this.sendInitialMessage();
  }
  addStyles() {
    const style = document.createElement("style");
    style.textContent = `
            .tessera-chat-container {
                display: flex;
                flex-direction: column;
                height: 100%;
                padding: 0.5rem;
                background-color: var(--background-primary);
            }

            .tessera-messages {
                flex-grow: 1;
                overflow-y: auto;
                margin-bottom: 0.5rem;
                padding: 0.5rem;
                padding-bottom: 1rem;
                scroll-behavior: smooth;
            }

            .tessera-message-wrapper {
                display: flex;
                flex-direction: column;
                margin-bottom: 0.8rem;
                max-width: 85%;
                position: relative;
            }

            .tessera-message-wrapper.user {
                margin-left: auto;
            }

            .tessera-message-wrapper.assistant {
                margin-right: auto;
            }

            .tessera-message {
                padding: 0.5rem 0.8rem;
                border-radius: 8px;
                position: relative;
                margin: 0;
                border: 1px solid var(--background-modifier-border);
            }

            /* Override default paragraph margins */
            .tessera-message p {
                margin: 0;
                padding: 0;
            }

            /* Add spacing between paragraphs only if they're not the last one */
            .tessera-message p:not(:last-child) {
                margin-bottom: 0.5em;
            }

            .tessera-message.user {
                background-color: var(--interactive-accent);
                color: var(--text-on-accent);
                border-bottom-right-radius: 3px;
                border: none;
            }

            .tessera-message.assistant {
                background-color: var(--background-secondary);
                color: var(--text-normal);
                border-bottom-left-radius: 3px;
            }

            .tessera-timestamp {
                font-size: 0.7em;
                color: var(--text-muted);
                margin-top: 0.3rem;
                padding: 0 0.5rem;
            }

            .tessera-message-wrapper.user .tessera-timestamp {
                text-align: right;
            }

            .tessera-message.loading {
                background-color: var(--background-secondary);
                color: var(--text-muted);
                border-bottom-left-radius: 4px;
                display: flex;
                align-items: center;
                gap: 0.3rem;
            }

            .typing-indicator {
                display: flex;
                gap: 0.3rem;
                padding: 0.2rem 0;
            }

            .typing-indicator span {
                width: 0.5rem;
                height: 0.5rem;
                border-radius: 50%;
                background-color: var(--text-muted);
                animation: bounce 1.4s infinite ease-in-out;
            }

            .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
            .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }

            @keyframes bounce {
                0%, 80%, 100% { transform: translateY(0); }
                40% { transform: translateY(-0.5rem); }
            }

            .tessera-input-container {
                position: relative;
                z-index: 2;
                display: flex;
                gap: 0.5rem;
                padding: 0.8rem;
                background-color: var(--background-secondary);
                border-radius: 12px;
                margin: 0 0.5rem;
            }

            .tessera-input-container textarea {
                flex-grow: 1;
                resize: none;
                border: none;
                background-color: transparent;
                color: var(--text-normal);
                padding: 0.5rem;
                border-radius: 4px;
                font-size: 0.95em;
                line-height: 1.4;
            }

            .tessera-input-container textarea:focus {
                outline: none;
                background-color: var(--background-primary);
            }

            .tessera-send-button {
                background: none;
                border: none;
                padding: 0.5rem;
                cursor: pointer;
                color: var(--interactive-accent);
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 8px;
                transition: background-color 0.2s ease;
            }

            .tessera-send-button:hover {
                background-color: var(--background-modifier-hover);
            }

            .tessera-message-bottom-bar {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0 0.5rem;
                margin-top: 0.3rem;
            }

            .tessera-timestamp {
                font-size: 0.7em;
                color: var(--text-muted);
            }

            .tessera-copy-button {
                opacity: 0;
                cursor: pointer;
                padding: 0.2rem;
                border-radius: 4px;
                color: var(--text-muted);
                transition: all 0.2s ease;
                display: flex;
                align-items: center;
            }

            .tessera-message-wrapper:hover .tessera-copy-button {
                opacity: 0.5;
            }

            .tessera-copy-button:hover {
                opacity: 1 !important;
                background-color: var(--background-modifier-hover);
            }

            .tessera-copy-button.copied {
                color: var(--interactive-accent);
                opacity: 1;
            }

            /* Ensure markdown content is selectable */
            .tessera-message * {
                user-select: text;
                cursor: text;
            }

            /* Keep code blocks selectable but with code cursor */
            .tessera-message pre,
            .tessera-message code {
                cursor: text;
                user-select: text;
            }

            .tessera-chat-header {
                display: flex;
                justify-content: flex-end;
                padding: 0.5rem;
                border-bottom: 1px solid var(--background-modifier-border);
                margin-bottom: 0.5rem;
            }

            .tessera-save-button {
                background: none;
                border: none;
                padding: 0.5rem;
                cursor: pointer;
                color: var(--text-muted);
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 4px;
                transition: all 0.2s ease;
            }

            .tessera-save-button:hover {
                color: var(--text-normal);
                background-color: var(--background-modifier-hover);
            }

            .tessera-header-buttons {
                display: flex;
                gap: 0.5rem;
            }

            .tessera-header-button {
                background: none;
                border: none;
                padding: 0.5rem;
                cursor: pointer;
                color: var(--text-muted);
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 4px;
                transition: all 0.2s ease;
            }

            .tessera-header-button:hover {
                color: var(--text-normal);
                background-color: var(--background-modifier-hover);
            }

            .tessera-context-notification {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                padding: 0.5rem 0.8rem;
                background-color: var(--background-secondary);
                border-radius: 8px;
                color: var(--text-muted);
                font-size: 0.9em;
                border: 1px solid var(--background-modifier-border);
                margin-bottom: 0.8rem;
            }

            .tessera-context-icon {
                display: flex;
                align-items: center;
                color: var(--text-accent);
                animation: spin 2s linear infinite;
            }

            @keyframes spin {
                100% { transform: rotate(360deg); }
            }

            .tessera-context-badge {
                background-color: var(--background-modifier-border);
                color: var(--text-muted);
                padding: 0.2rem 0.5rem;
                border-radius: 4px;
                font-size: 0.8em;
                cursor: pointer;
                border: none;
                transition: all 0.2s ease;
            }

            .tessera-context-badge:hover {
                background-color: var(--interactive-accent);
                color: var(--text-on-accent);
            }
        `;
    document.head.append(style);
  }
  // Add new method to generate markdown content
  async generateConversationMarkdown() {
    var _a2;
    if (!this.chatName && this.messages.length > 0) {
      const firstUserMessage = (_a2 = this.messages.find((m) => m.role === "user")) == null ? void 0 : _a2.content;
      if (firstUserMessage) {
        try {
          const response = await this.plugin.generateChatName(firstUserMessage);
          this.chatName = response.replace(/[<>:"/\\|?*]/g, "-").trim();
        } catch (error) {
          console.error("Failed to generate chat name:", error);
          this.chatName = "Untitled Chat";
        }
      }
    }
    let markdown = `# ${this.chatName || "Chat History"}

`;
    markdown += `*${new Date().toLocaleString()}*

`;
    for (const msg of this.messages) {
      const icon = msg.role === "assistant" ? "\u{1F539}" : "\u{1F7E0}";
      const name = msg.role === "assistant" ? "Tessera" : "You";
      const lines = msg.content.split("\n").map((line) => `> ${line}`).join("\n");
      markdown += `${icon} **${name}**
${lines}

`;
    }
    return markdown;
  }
  // Add new method to copy conversation
  async copyConversation() {
    if (this.messages.length === 0) {
      new import_obsidian2.Notice("No messages to copy");
      return;
    }
    const markdown = await this.generateConversationMarkdown();
    try {
      await navigator.clipboard.writeText(markdown);
      new import_obsidian2.Notice("Conversation copied to clipboard");
    } catch (error) {
      console.error("Failed to copy conversation:", error);
      new import_obsidian2.Notice("Failed to copy conversation");
    }
  }
  async createMessageElement(message, container) {
    const messageEl = container.createDiv({
      cls: `message ${message.role === "user" ? "user-message" : "ai-message"}`
    });
    const contentEl = messageEl.createDiv({ cls: "message-content" });
    contentEl.createSpan({ text: message.content });
    if (message.content === "Failed to get response from AI") {
      const retryContainer = messageEl.createDiv({ cls: "retry-container" });
      new RetryButton(retryContainer, async () => {
        if (this.lastFailedMessage) {
          messageEl.remove();
          await this.sendMessage(this.lastFailedMessage);
          this.lastFailedMessage = null;
        }
      });
    }
  }
  async appendMessage(message) {
    const fullMessage = {
      ...message,
      timestamp: Date.now()
    };
    this.messages.push(fullMessage);
    await this.renderMessage(fullMessage);
  }
  showContextUpdateNotification(update) {
    const wrapper = this.messageContainer.createDiv("tessera-message-wrapper assistant");
    const notificationEl = wrapper.createDiv("tessera-context-notification");
    const icon = notificationEl.createSpan("tessera-context-icon");
    icon.innerHTML = `<svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none">
            <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/>
        </svg>`;
    const text = notificationEl.createSpan();
    text.setText("Updating context: ");
    const badge = notificationEl.createEl("button", {
      cls: "tessera-context-badge",
      text: update.filename
    });
    const loadingEl = notificationEl.createSpan("tessera-loading");
    loadingEl.innerHTML = "\u23F3";
    badge.addEventListener("click", async () => {
      const file = this.app.vault.getAbstractFileByPath(update.path);
      if (file instanceof import_obsidian2.TFile) {
        await this.app.workspace.getLeaf(false).openFile(file);
      }
    });
    setTimeout(() => {
      loadingEl.innerHTML = "\u2705";
      text.setText("Context updated: ");
    }, 1e3);
  }
};

// src/settings.ts
var import_obsidian3 = require("obsidian");

// src/models.ts
var ANTHROPIC_MODELS = {
  "claude-3-sonnet-20240229": "claude-3-sonnet-20240229",
  "claude-3-opus-20240229": "claude-3-opus-20240229",
  "claude-3-haiku-20240307": "claude-3-haiku-20240307"
};

// src/settings.ts
var TesseraSettingTab = class extends import_obsidian3.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
    this.showApiKey = false;
    this.tempApiKey = this.plugin.settings.apiKey;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian3.Setting(containerEl).setName("AI Provider").setDesc("Select your AI provider").addDropdown((dropdown) => {
      dropdown.addOption("anthropic", "Anthropic (Claude)").setValue(this.plugin.settings.provider).onChange(async (value) => {
        this.plugin.settings.provider = value;
        await this.plugin.saveSettings();
        this.display();
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Model Selection").setDesc("Choose between default models or specify a custom one").addDropdown((dropdown) => {
      dropdown.addOption("default", "Use Default Models").addOption("custom", "Custom Model").setValue(this.plugin.settings.modelType).onChange(async (value) => {
        this.plugin.settings.modelType = value;
        await this.plugin.saveSettings();
        this.display();
      });
    });
    if (this.plugin.settings.modelType === "default") {
      new import_obsidian3.Setting(containerEl).setName("Model").setDesc("Select the Claude model to use").addDropdown((dropdown) => {
        Object.keys(ANTHROPIC_MODELS).forEach((modelId) => {
          dropdown.addOption(modelId, modelId);
        });
        const currentModel = this.plugin.settings.selectedModel || "claude-3-sonnet-20240229";
        dropdown.setValue(currentModel).onChange(async (value) => {
          this.plugin.settings.selectedModel = value;
          await this.plugin.saveSettings();
        });
      });
    } else {
      new import_obsidian3.Setting(containerEl).setName("Custom Model").setDesc("Enter a custom model identifier").addText((text) => text.setPlaceholder("e.g., claude-3-custom-20240307").setValue(this.plugin.settings.customModel || "").onChange(async (value) => {
        this.plugin.settings.customModel = value;
        this.plugin.settings.selectedModel = value;
        await this.plugin.saveSettings();
      }));
    }
    const apiKeySetting = new import_obsidian3.Setting(containerEl).setName("API Key").setDesc("Your API key from the selected provider").addText((text) => {
      text.setPlaceholder("Enter your API key").setValue(this.tempApiKey).onChange((value) => {
        this.tempApiKey = value;
      });
      text.inputEl.type = "password";
      return text;
    }).addExtraButton((button) => {
      button.setIcon(this.showApiKey ? "eye-off" : "eye").setTooltip(this.showApiKey ? "Hide API key" : "Show API key").onClick(() => {
        this.showApiKey = !this.showApiKey;
        const input = containerEl.querySelector('input[type="password"], input[type="text"]');
        if (input) {
          input.type = this.showApiKey ? "text" : "password";
        }
        button.setIcon(this.showApiKey ? "eye-off" : "eye");
      });
    }).addButton((button) => {
      button.setButtonText("Save").setCta().onClick(async () => {
        try {
          const modelToTest = this.plugin.settings.modelType === "custom" ? this.plugin.settings.customModel : this.plugin.settings.selectedModel;
          await this.plugin.testApiKey(this.tempApiKey, modelToTest);
          this.plugin.settings.apiKey = this.tempApiKey;
          await this.plugin.saveSettings();
          new import_obsidian3.Notice("API key saved and verified successfully");
          button.setButtonText("Saved \u2713").setDisabled(true);
          setTimeout(() => {
            button.setButtonText("Save").setDisabled(false);
          }, 2e3);
        } catch (error) {
          new import_obsidian3.Notice("Failed to verify API key. Please check the key and model selection.");
          console.error("API key verification failed:", error);
        }
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Project Debug Path").setDesc("Path to save debug logs in your project directory (e.g., debug/debug.md)").addText((text) => text.setPlaceholder("debug/debug.md").setValue(this.plugin.settings.projectDebugPath || "").onChange(async (value) => {
      this.plugin.settings.projectDebugPath = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/core/context-manager.ts
var import_obsidian4 = require("obsidian");
var import_fs = require("fs");
var ContextManager = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.basePath = "Context";
    this.activeContextFiles = /* @__PURE__ */ new Set();
    this.debugLog = [];
  }
  async initialize() {
    try {
      await this.logToFile("Initializing context manager...", "INFO");
      if (!await this.plugin.app.vault.adapter.exists(this.basePath)) {
        await this.logToFile(`Creating base directory: ${this.basePath}`, "INFO");
        await this.plugin.app.vault.createFolder(this.basePath);
      }
      const profilePath = `${this.basePath}/Profile.md`;
      if (!await this.plugin.app.vault.adapter.exists(profilePath)) {
        await this.plugin.app.vault.create(profilePath, "");
        this.activeContextFiles.add(profilePath);
        await this.logToFile(`Created new Profile.md at: ${profilePath}`, "INFO");
      } else {
        this.activeContextFiles.add(profilePath);
        await this.logToFile(`Added existing Profile.md to active files: ${profilePath}`, "INFO");
      }
      await this.logToFile(`Active context files after init: ${JSON.stringify(Array.from(this.activeContextFiles))}`, "DEBUG");
    } catch (error) {
      await this.logToFile(`Failed to initialize context: ${error.message}`, "ERROR");
      throw error;
    }
  }
  async createContextFile(name, content) {
    const path = `${this.basePath}/${name}`;
    await this.plugin.app.vault.create(path, content);
    return path;
  }
  async updateContextFile(path, content) {
    const file = this.plugin.app.vault.getAbstractFileByPath(path);
    if (file instanceof import_obsidian4.TFile) {
      await this.plugin.app.vault.modify(file, content);
    }
  }
  async getContextContent() {
    let context = "";
    for (const path of this.activeContextFiles) {
      const file = this.plugin.app.vault.getAbstractFileByPath(path);
      if (file instanceof import_obsidian4.TFile) {
        const content = await this.plugin.app.vault.read(file);
        context += `# ${file.basename}
${content}

`;
      }
    }
    return context;
  }
  addToContext(path) {
    this.activeContextFiles.add(path);
  }
  removeFromContext(path) {
    this.activeContextFiles.delete(path);
  }
  clearContext() {
    this.activeContextFiles.clear();
  }
  async logToFile(message, level = "INFO", content) {
    var _a2;
    const timestamp = new Date().toLocaleString();
    let logEntry = `[${timestamp}] [${level}] ${message}`;
    if (content) {
      logEntry += `
Content: "${content}"`;
    }
    logEntry += "\n";
    try {
      if ((_a2 = this.plugin.settings) == null ? void 0 : _a2.projectDebugPath) {
        try {
          const projectPath = this.plugin.settings.projectDebugPath;
          const dirPath = projectPath.split("/").slice(0, -1).join("/");
          if (!(0, import_fs.existsSync)(dirPath)) {
            (0, import_fs.mkdirSync)(dirPath, { recursive: true });
          }
          (0, import_fs.appendFileSync)(projectPath, logEntry);
        } catch (error) {
          console.error("Failed to write to project debug file:", error);
        }
      } else {
        console.warn("No project debug path configured - logs will not be saved");
      }
    } catch (error) {
      console.error("Failed to write to debug log:", error);
    }
  }
  async appendToUserContext(content) {
    const profilePath = `${this.basePath}/Profile.md`;
    try {
      await this.logToFile(`Attempting to update profile at: ${profilePath}`);
      if (!await this.plugin.app.vault.adapter.exists(this.basePath)) {
        await this.logToFile("Creating Context directory...");
        await this.plugin.app.vault.createFolder(this.basePath);
      }
      let file = this.plugin.app.vault.getAbstractFileByPath(profilePath);
      if (!file) {
        await this.logToFile("Profile.md not found, creating new file...");
        file = await this.plugin.app.vault.create(profilePath, "");
      }
      if (file instanceof import_obsidian4.TFile) {
        const currentContent = await this.plugin.app.vault.read(file);
        const timestamp = new Date().toLocaleString();
        const updatedContent = currentContent.trim() + (currentContent.trim() ? "\n\n" : "") + // Only add newlines if there's existing content
        `### Update ${timestamp}
${content}`;
        await this.plugin.app.vault.modify(file, updatedContent);
        await this.logToFile("Content updated successfully");
        new import_obsidian4.Notice("\u2705 Profile updated successfully");
        this.activeContextFiles.add(profilePath);
      } else {
        throw new Error("Failed to access Profile.md as a file");
      }
    } catch (error) {
      await this.logToFile(`Error in appendToUserContext: ${error.message}`, "ERROR");
      new import_obsidian4.Notice(`\u274C Failed to update profile: ${error.message}`);
      throw error;
    }
  }
  async createNewContextFile(name, content) {
    if (!name.endsWith(".md")) {
      name = `${name}.md`;
    }
    const path = await this.createContextFile(name, content);
    this.activeContextFiles.add(path);
    return path;
  }
  // Update the openDebugLog method to use .md extension
  async openDebugLog() {
    const logPath = "debug.md";
    if (await this.plugin.app.vault.adapter.exists(logPath)) {
      const file = this.plugin.app.vault.getAbstractFileByPath(logPath);
      if (file instanceof import_obsidian4.TFile) {
        await this.plugin.app.workspace.getLeaf(false).openFile(file);
      }
    } else {
      new import_obsidian4.Notice("Debug log file does not exist yet");
    }
  }
  // Add method to check if Profile.md exists and is writable
  async checkProfileFile() {
    const profilePath = `${this.basePath}/Profile.md`;
    try {
      const exists = await this.plugin.app.vault.adapter.exists(profilePath);
      console.log("Profile.md exists:", exists);
      if (exists) {
        const file = this.plugin.app.vault.getAbstractFileByPath(profilePath);
        if (file instanceof import_obsidian4.TFile) {
          const content = await this.plugin.app.vault.read(file);
          console.log("Profile.md is readable, current size:", file.stat.size);
          return true;
        }
      }
      return false;
    } catch (error) {
      console.error("Error checking Profile.md:", error);
      return false;
    }
  }
  // Update the getDebugLog method to use .md extension
  async getDebugLog() {
    try {
      const logPath = "debug.md";
      if (await this.plugin.app.vault.adapter.exists(logPath)) {
        const content = await this.plugin.app.vault.adapter.read(logPath);
        const logContent = content.replace(/^# Debug Log\n\n```log\n|\n```$/g, "");
        return logContent.split("\n").filter((line) => line.trim() !== "");
      }
      return ["No debug log found"];
    } catch (error) {
      console.error("Error reading debug log:", error);
      return ["Error reading debug log: " + error.message];
    }
  }
  // Add getter for active files
  getActiveContextFiles() {
    return this.activeContextFiles;
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  provider: "anthropic",
  apiKey: "",
  modelType: "default",
  selectedModel: "claude-3-sonnet-20240229",
  customModel: "",
  projectDebugPath: "debug/debug.md"
};
var TesseraPlugin = class extends import_obsidian5.Plugin {
  constructor() {
    super(...arguments);
    this.conversationHistory = [];
  }
  async onload() {
    await this.loadSettings();
    this.contextManager = new ContextManager(this);
    await this.contextManager.initialize();
    if (this.settings.apiKey) {
      this.initializeClaudeClient(this.settings.apiKey);
    }
    this.addSettingTab(new TesseraSettingTab(this.app, this));
    this.registerView(
      "tessera-chat",
      (leaf) => new ConversationView(leaf, this)
    );
    this.addRibbonIcon("message-square", "Tessera Chat", () => {
      this.activateView();
    });
    this.addCommand({
      id: "check-profile",
      name: "Check Profile File Status",
      callback: async () => {
        const exists = await this.contextManager.checkProfileFile();
        new import_obsidian5.Notice(`Profile.md status: ${exists ? "OK" : "Not found/Not readable"}`);
      }
    });
    this.addCommand({
      id: "open-dev-tools",
      name: "Open Developer Tools",
      callback: () => {
        const win = window.require("electron").remote.getCurrentWindow();
        win.webContents.toggleDevTools();
      }
    });
    this.addCommand({
      id: "check-context-dir",
      name: "Check Context Directory",
      callback: async () => {
        const exists = await this.app.vault.adapter.exists(this.contextManager.basePath);
        const files = await this.app.vault.adapter.list(this.contextManager.basePath);
        new import_obsidian5.Notice(`Context directory exists: ${exists}
Files: ${JSON.stringify(files, null, 2)}`);
        console.log("Context directory contents:", files);
      }
    });
    this.addCommand({
      id: "debug-context",
      name: "Debug: Show Context Status",
      callback: async () => {
        try {
          const basePath = this.contextManager.basePath;
          const exists = await this.app.vault.adapter.exists(basePath);
          const profilePath = `${basePath}/Profile.md`;
          const profileExists = await this.app.vault.adapter.exists(profilePath);
          new import_obsidian5.Notice(`Checking context status...`, 2e3);
          new import_obsidian5.Notice(`Context Directory (${basePath}): ${exists ? "\u2705" : "\u274C"}`, 3e3);
          new import_obsidian5.Notice(`Profile.md: ${profileExists ? "\u2705" : "\u274C"}`, 3e3);
          if (profileExists) {
            const file = this.app.vault.getAbstractFileByPath(profilePath);
            if (file instanceof import_obsidian5.TFile) {
              const content = await this.app.vault.read(file);
              new import_obsidian5.Notice(`Profile Content Length: ${content.length} chars`, 3e3);
              console.log("Profile content:", content);
            }
          }
          console.log("Debug Status:", {
            contextDirExists: exists,
            profileExists,
            basePath,
            profilePath
          });
        } catch (error) {
          new import_obsidian5.Notice(`Debug Error: ${error.message}`, 4e3);
          console.error("Debug error:", error);
        }
      }
    });
    this.addCommand({
      id: "test-context-update",
      name: "Debug: Test Context Update",
      callback: async () => {
        try {
          const testContent = `Test update at ${new Date().toLocaleString()}`;
          new import_obsidian5.Notice("\u{1F504} Testing context update...");
          await this.contextManager.appendToUserContext(testContent);
          new import_obsidian5.Notice("\u2705 Test update completed - Check Profile.md");
        } catch (error) {
          new import_obsidian5.Notice(`\u274C Test failed: ${error.message}`);
          console.error("Test update failed:", error);
        }
      }
    });
    this.addCommand({
      id: "open-debug-log",
      name: "Open Debug Log File",
      callback: async () => {
        await this.contextManager.openDebugLog();
      }
    });
  }
  async loadSettings() {
    const loadedData = await this.loadData();
    this.settings = {
      ...DEFAULT_SETTINGS,
      ...loadedData,
      selectedModel: (loadedData == null ? void 0 : loadedData.selectedModel) || DEFAULT_SETTINGS.selectedModel
    };
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  initializeClaudeClient(apiKey) {
    try {
      this.anthropic = new Anthropic({
        apiKey,
        dangerouslyAllowBrowser: true
      });
    } catch (error) {
      console.error("Failed to initialize Claude client:", error);
      new import_obsidian5.Notice("Failed to initialize Claude client");
    }
  }
  async activateView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType("tessera-chat")[0];
    if (!leaf) {
      const newLeaf = workspace.getRightLeaf(false);
      if (!newLeaf) {
        new import_obsidian5.Notice("Failed to create view");
        return;
      }
      leaf = newLeaf;
      await leaf.setViewState({
        type: "tessera-chat",
        active: true
      });
    }
    workspace.revealLeaf(leaf);
  }
  async onunload() {
  }
  async testApiKey(apiKey, model) {
    try {
      const testClient = new Anthropic({
        apiKey,
        dangerouslyAllowBrowser: true
      });
      await testClient.messages.create({
        model: model || this.settings.selectedModel || "claude-3-sonnet-20241022",
        max_tokens: 1,
        messages: [{ role: "user", content: "test" }]
      });
      this.initializeClaudeClient(apiKey);
      return true;
    } catch (error) {
      console.error("API key test failed:", error);
      if (error instanceof Error) {
        new import_obsidian5.Notice(`API Error: ${error.message}`);
      }
      throw error;
    }
  }
  async sendMessage(content, model) {
    if (!this.anthropic) {
      await this.contextManager.logToFile("No Claude client initialized", "ERROR");
      throw new Error("Claude client not initialized");
    }
    try {
      await this.contextManager.logToFile("=== New Message ===", "INFO");
      await this.contextManager.logToFile("User message", "INFO", content);
      if (this.conversationHistory.length > 0) {
        await this.contextManager.logToFile(
          "Conversation history:",
          "DEBUG",
          this.conversationHistory.map(
            (msg) => `${msg.role.toUpperCase()}: ${msg.content}`
          ).join("\n")
        );
      }
      const contextContent = await this.contextManager.getContextContent();
      if (contextContent.trim()) {
        await this.contextManager.logToFile(`Context length: ${contextContent.length} chars`, "DEBUG");
      }
      const systemPrompt = this.getSystemPrompt(contextContent);
      const tools = [
        {
          name: "update_context",
          description: "IMMEDIATELY update user profile when ANY personal information is shared",
          input_schema: {
            type: "object",
            properties: {
              content: {
                type: "string",
                description: "Format as 'key: value' pairs, one per line"
              }
            },
            required: ["content"]
          }
        },
        {
          name: "create_context_file",
          description: "Create a new context file for organizing specific types of information",
          input_schema: {
            type: "object",
            properties: {
              filename: {
                type: "string",
                description: "Name of the file (will append .md if needed)"
              },
              content: {
                type: "string",
                description: "Initial content for the file"
              }
            },
            required: ["filename", "content"]
          }
        }
      ];
      if (content === "START_CONVERSATION") {
        await this.contextManager.logToFile("Starting new conversation", "INFO");
        this.conversationHistory = [];
        const userMessage = {
          role: "user",
          content: "Please start the conversation with a succinct: 'What's on your mind?'."
        };
        this.conversationHistory.push(userMessage);
      } else {
        this.conversationHistory.push({
          role: "user",
          content
        });
      }
      await this.contextManager.logToFile("Sending request to Claude API...", "INFO");
      const response = await this.anthropic.messages.create({
        model: model || this.settings.selectedModel || "claude-3-sonnet-20240229",
        max_tokens: 1024,
        system: systemPrompt,
        messages: this.conversationHistory,
        tools
      });
      await this.contextManager.logToFile("Received response from Claude API", "INFO");
      if (response.content[0].type === "text") {
        await this.contextManager.logToFile("AI response", "INFO", response.content[0].text);
      } else if (response.content[0].type === "tool_use") {
        await this.contextManager.logToFile("AI using tool", "INFO", `${response.content[0].name}`);
        await this.contextManager.logToFile("Tool input", "DEBUG", JSON.stringify(response.content[0].input, null, 2));
      }
      if (response.content[0].type === "tool_use") {
        const toolUse = response.content[0];
        try {
          let result;
          let contextUpdate = null;
          if (toolUse.name === "update_context") {
            await this.contextManager.logToFile("Updating context...", "INFO");
            await this.contextManager.appendToUserContext(toolUse.input.content);
            result = "Context updated successfully";
            await this.contextManager.logToFile("Context updated", "INFO");
          } else if (toolUse.name === "create_context_file") {
            await this.contextManager.logToFile(`Creating new context file: ${toolUse.input.filename}`, "INFO");
            const filename = toolUse.input.filename || "untitled.md";
            const path = await this.contextManager.createNewContextFile(
              filename,
              toolUse.input.content
            );
            result = `Created new context file: ${path}`;
            contextUpdate = {
              filename: filename.endsWith(".md") ? filename : `${filename}.md`,
              path
            };
          } else {
            result = "Unknown tool";
          }
          return await this.sendToolResult(toolUse, result);
        } catch (error) {
          await this.contextManager.logToFile(`Tool error: ${error.message}`, "ERROR");
          return await this.sendToolResult(toolUse, error.message, true);
        }
      }
      if (response.content[0].type === "text") {
        this.conversationHistory.push({
          role: "assistant",
          content: response.content[0].text
        });
      }
      return response;
    } catch (error) {
      await this.contextManager.logToFile(`Error: ${error.message}`, "ERROR");
      throw error;
    }
  }
  // Add method to clear conversation history
  clearConversationHistory() {
    this.conversationHistory = [];
  }
  async generateChatName(firstMessage) {
    if (!this.anthropic) {
      throw new Error("Claude client not initialized");
    }
    const response = await this.anthropic.messages.create({
      model: this.settings.selectedModel || "claude-3-sonnet-20240229",
      max_tokens: 50,
      messages: [{
        role: "user",
        content: `Based on this first message from a chat, generate a short, descriptive title (3-5 words) that captures the main topic. Don't use quotes or special characters. Message: "${firstMessage}"`
      }],
      system: "You are a chat title generator. Respond only with the title - no explanation or additional text. Keep titles clear and concise."
    });
    return response.content[0].type === "text" ? response.content[0].text.trim() : "Untitled Chat";
  }
  // Add command to view debug log
  async viewDebugLog() {
    const debugLog = await this.contextManager.getDebugLog();
    const leaf = this.app.workspace.getLeaf(true);
    await leaf.setViewState({
      type: "markdown",
      state: {
        mode: "source",
        source: debugLog.join("\n")
      }
    });
  }
  // Add this helper function at the class level
  async sendToolResult(toolUse, result, isError = false) {
    const tools = [
      {
        name: "update_context",
        description: "IMMEDIATELY update user profile when ANY personal information is shared",
        input_schema: {
          type: "object",
          properties: {
            content: {
              type: "string",
              description: "Format as 'key: value' pairs, one per line"
            }
          },
          required: ["content"]
        }
      },
      {
        name: "create_context_file",
        description: "Create a new context file for organizing specific types of information",
        input_schema: {
          type: "object",
          properties: {
            filename: {
              type: "string",
              description: "Name of the file (will append .md if needed)"
            },
            content: {
              type: "string",
              description: "Initial content for the file"
            }
          },
          required: ["filename", "content"]
        }
      }
    ];
    await this.contextManager.logToFile("Sending tool result to Claude...", "DEBUG");
    return this.anthropic.messages.create({
      model: this.settings.selectedModel || "claude-3-sonnet-20240229",
      max_tokens: 1024,
      system: this.getSystemPrompt(await this.contextManager.getContextContent()),
      tools,
      messages: [
        ...this.conversationHistory,
        {
          role: "assistant",
          content: [toolUse]
        },
        {
          role: "user",
          content: [{
            type: "tool_result",
            tool_use_id: toolUse.id,
            content: result,
            is_error: isError
          }]
        }
      ]
    });
  }
  // Add this method to the TesseraPlugin class
  getSystemPrompt(contextContent) {
    return `You are a thoughtful AI assistant focused on helping users achieve their goals while maintaining helpful context about them.

Current context about the user:
${contextContent}

CRITICAL INSTRUCTION: You MUST use tools BEFORE sending ANY text response when:
1. User shares ANY personal information (name, location, preferences, etc.)
2. You need to create a new context file for organizing specific types of information

Tool Usage Rules:
1. NEVER say "let me update" or "I will update" - just USE the tool immediately
2. NEVER respond with text before using required tools
3. After using a tool, wait for the tool result before continuing
4. Do NOT create conversation files - conversations are handled automatically

Response Guidelines:
1. ONLY say "What's on your mind?" for START_CONVERSATION messages
2. For all other messages:
   - Respond naturally to the user's content
   - Don't start responses with "What's on your mind?"
   - Focus on the current topic
   - Ask relevant follow-up questions when appropriate

Example Interactions:
1. START_CONVERSATION:
   Assistant: "What's on your mind?"

2. Personal Info Shared:
   User: "My name is Joe and I live in Austin"
   Assistant: [Use update_context tool FIRST]
   Then respond: "Nice to meet you, Joe! How can I help you today?"

Available Tools:
- update_context: Use FIRST when ANY personal info is shared
- create_context_file: Use ONLY when organizing specific types of information (NOT for conversations)

Special Cases:
- For START_CONVERSATION: ONLY respond with "What's on your mind?" - no tool use needed
- Never create files for general conversation history
- Only create context files when explicitly organizing specific information types

Remember: 
1. Tools BEFORE text when personal info is shared
2. "What's on your mind?" ONLY for START_CONVERSATION
3. Natural, focused responses for everything else`;
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy92ZXJzaW9uLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvX3NoaW1zL3JlZ2lzdHJ5LnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvX3NoaW1zL011bHRpcGFydEJvZHkudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9fc2hpbXMvd2ViLXJ1bnRpbWUudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL19zaGltcy9pbmRleC5tanMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9lcnJvci50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL2ludGVybmFsL2RlY29kZXJzL2xpbmUudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9zdHJlYW1pbmcudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy91cGxvYWRzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvY29yZS50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3BhZ2luYXRpb24udHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9yZXNvdXJjZS50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL2ludGVybmFsL2RlY29kZXJzL2pzb25sLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcmVzb3VyY2VzL2JldGEvbWVzc2FnZXMvYmF0Y2hlcy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlcy9iZXRhL21lc3NhZ2VzL21lc3NhZ2VzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvX3ZlbmRvci9wYXJ0aWFsLWpzb24tcGFyc2VyL3BhcnNlci50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL2xpYi9Qcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW0udHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9yZXNvdXJjZXMvYmV0YS9wcm9tcHQtY2FjaGluZy9tZXNzYWdlcy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlcy9iZXRhL3Byb21wdC1jYWNoaW5nL3Byb21wdC1jYWNoaW5nLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcmVzb3VyY2VzL2JldGEvYmV0YS50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlcy9jb21wbGV0aW9ucy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL2xpYi9NZXNzYWdlU3RyZWFtLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcmVzb3VyY2VzL21lc3NhZ2VzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvaW5kZXgudHMiLCAic3JjL3ZpZXdzL0NvbnZlcnNhdGlvblZpZXcudHMiLCAic3JjL2NvbXBvbmVudHMvUmV0cnlCdXR0b24udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9tb2RlbHMudHMiLCAic3JjL2NvcmUvY29udGV4dC1tYW5hZ2VyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4sIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBBbnRocm9waWMgfSBmcm9tICdAYW50aHJvcGljLWFpL3Nkayc7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25WaWV3IH0gZnJvbSAnLi92aWV3cy9Db252ZXJzYXRpb25WaWV3JztcbmltcG9ydCB7IFRlc3NlcmFTZXR0aW5nVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBBTlRIUk9QSUNfTU9ERUxTIH0gZnJvbSAnLi9tb2RlbHMnO1xuaW1wb3J0IHsgQ29udGV4dE1hbmFnZXIgfSBmcm9tICcuL2NvcmUvY29udGV4dC1tYW5hZ2VyJztcblxuaW50ZXJmYWNlIFRlc3NlcmFTZXR0aW5ncyB7XG4gICAgcHJvdmlkZXI6IFByb3ZpZGVyO1xuICAgIGFwaUtleTogc3RyaW5nO1xuICAgIG1vZGVsVHlwZTogTW9kZWxUeXBlO1xuICAgIGN1c3RvbU1vZGVsPzogc3RyaW5nO1xuICAgIHNlbGVjdGVkTW9kZWw/OiBzdHJpbmc7XG4gICAgcHJvamVjdERlYnVnUGF0aD86IHN0cmluZztcbn1cblxudHlwZSBQcm92aWRlciA9ICdhbnRocm9waWMnO1xudHlwZSBNb2RlbFR5cGUgPSAnZGVmYXVsdCcgfCAnY3VzdG9tJztcblxuaW50ZXJmYWNlIFRvb2wge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIGlucHV0X3NjaGVtYToge1xuICAgICAgICB0eXBlOiBcIm9iamVjdFwiO1xuICAgICAgICBwcm9wZXJ0aWVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgICAgICByZXF1aXJlZD86IHN0cmluZ1tdO1xuICAgIH07XG59XG5cbmludGVyZmFjZSBUb29sSW5wdXQge1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICBmaWxlbmFtZT86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIENvbnRleHRUb29sIGV4dGVuZHMgVG9vbCB7XG4gICAgbmFtZTogXCJ1cGRhdGVfY29udGV4dFwiIHwgXCJjcmVhdGVfY29udGV4dF9maWxlXCI7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBpbnB1dF9zY2hlbWE6IHtcbiAgICAgICAgdHlwZTogXCJvYmplY3RcIjtcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCI7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmaWxlbmFtZT86IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiO1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICByZXF1aXJlZDogc3RyaW5nW107XG4gICAgfTtcbn1cblxuaW50ZXJmYWNlIENvbnRleHRVcGRhdGUge1xuICAgIGZpbGVuYW1lOiBzdHJpbmc7XG4gICAgcGF0aDogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgVG9vbFVzZSB7XG4gICAgdHlwZTogJ3Rvb2xfdXNlJztcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6ICd1cGRhdGVfY29udGV4dCcgfCAnY3JlYXRlX2NvbnRleHRfZmlsZSc7XG4gICAgaW5wdXQ6IHtcbiAgICAgICAgY29udGVudDogc3RyaW5nO1xuICAgICAgICBmaWxlbmFtZT86IHN0cmluZztcbiAgICB9O1xufVxuXG5pbnRlcmZhY2UgVG9vbFJlc3VsdCB7XG4gICAgdHlwZTogJ3Rvb2xfcmVzdWx0JztcbiAgICB0b29sX3VzZV9pZDogc3RyaW5nO1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICBpc19lcnJvcj86IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBNZXNzYWdlQ29udGVudCB7XG4gICAgdHlwZTogJ3RleHQnIHwgJ3Rvb2xfdXNlJztcbiAgICB0ZXh0Pzogc3RyaW5nO1xuICAgIHRvb2xfdXNlPzogVG9vbFVzZTtcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogVGVzc2VyYVNldHRpbmdzID0ge1xuICAgIHByb3ZpZGVyOiAnYW50aHJvcGljJyxcbiAgICBhcGlLZXk6ICcnLFxuICAgIG1vZGVsVHlwZTogJ2RlZmF1bHQnLFxuICAgIHNlbGVjdGVkTW9kZWw6ICdjbGF1ZGUtMy1zb25uZXQtMjAyNDAyMjknLFxuICAgIGN1c3RvbU1vZGVsOiAnJyxcbiAgICBwcm9qZWN0RGVidWdQYXRoOiAnZGVidWcvZGVidWcubWQnXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXNzZXJhUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgICBwcml2YXRlIGFudGhyb3BpYzogQW50aHJvcGljO1xuICAgIHNldHRpbmdzOiBUZXNzZXJhU2V0dGluZ3M7XG4gICAgY29udGV4dE1hbmFnZXI6IENvbnRleHRNYW5hZ2VyO1xuICAgIHByaXZhdGUgY29udmVyc2F0aW9uSGlzdG9yeTogQXJyYXk8eyByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JywgY29udGVudDogc3RyaW5nIH0+ID0gW107XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNvbnRleHRNYW5hZ2VyID0gbmV3IENvbnRleHRNYW5hZ2VyKHRoaXMpO1xuICAgICAgICBhd2FpdCB0aGlzLmNvbnRleHRNYW5hZ2VyLmluaXRpYWxpemUoKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmFwaUtleSkge1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQ2xhdWRlQ2xpZW50KHRoaXMuc2V0dGluZ3MuYXBpS2V5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgVGVzc2VyYVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgICAgICAgICd0ZXNzZXJhLWNoYXQnLFxuICAgICAgICAgICAgKGxlYWYpID0+IG5ldyBDb252ZXJzYXRpb25WaWV3KGxlYWYsIHRoaXMpXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKCdtZXNzYWdlLXNxdWFyZScsICdUZXNzZXJhIENoYXQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdjaGVjay1wcm9maWxlJyxcbiAgICAgICAgICAgIG5hbWU6ICdDaGVjayBQcm9maWxlIEZpbGUgU3RhdHVzJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5jb250ZXh0TWFuYWdlci5jaGVja1Byb2ZpbGVGaWxlKCk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgUHJvZmlsZS5tZCBzdGF0dXM6ICR7ZXhpc3RzID8gJ09LJyA6ICdOb3QgZm91bmQvTm90IHJlYWRhYmxlJ31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIGNvbW1hbmQgdG8gb3BlbiBkZXZlbG9wZXIgdG9vbHNcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnb3Blbi1kZXYtdG9vbHMnLFxuICAgICAgICAgICAgbmFtZTogJ09wZW4gRGV2ZWxvcGVyIFRvb2xzJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIGNvbnN0IHdpbiA9ICh3aW5kb3cgYXMgYW55KS5yZXF1aXJlKCdlbGVjdHJvbicpLnJlbW90ZS5nZXRDdXJyZW50V2luZG93KCk7XG4gICAgICAgICAgICAgICAgd2luLndlYkNvbnRlbnRzLnRvZ2dsZURldlRvb2xzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBjb21tYW5kIHRvIGNoZWNrIGNvbnRleHQgZGlyZWN0b3J5XG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2NoZWNrLWNvbnRleHQtZGlyJyxcbiAgICAgICAgICAgIG5hbWU6ICdDaGVjayBDb250ZXh0IERpcmVjdG9yeScsXG4gICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHRoaXMuY29udGV4dE1hbmFnZXIuYmFzZVBhdGgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5saXN0KHRoaXMuY29udGV4dE1hbmFnZXIuYmFzZVBhdGgpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYENvbnRleHQgZGlyZWN0b3J5IGV4aXN0czogJHtleGlzdHN9XFxuRmlsZXM6ICR7SlNPTi5zdHJpbmdpZnkoZmlsZXMsIG51bGwsIDIpfWApO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb250ZXh0IGRpcmVjdG9yeSBjb250ZW50czonLCBmaWxlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCB0aGVzZSBjb21tYW5kcyBpbiBvbmxvYWQoKVxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdkZWJ1Zy1jb250ZXh0JyxcbiAgICAgICAgICAgIG5hbWU6ICdEZWJ1ZzogU2hvdyBDb250ZXh0IFN0YXR1cycsXG4gICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VQYXRoID0gdGhpcy5jb250ZXh0TWFuYWdlci5iYXNlUGF0aDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoYmFzZVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9maWxlUGF0aCA9IGAke2Jhc2VQYXRofS9Qcm9maWxlLm1kYDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZmlsZUV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHByb2ZpbGVQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFNob3cgaW5pdGlhbCBzdGF0dXNcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgQ2hlY2tpbmcgY29udGV4dCBzdGF0dXMuLi5gLCAyMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFNob3cgZGlyZWN0b3J5IHN0YXR1c1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBDb250ZXh0IERpcmVjdG9yeSAoJHtiYXNlUGF0aH0pOiAke2V4aXN0cyA/ICdcdTI3MDUnIDogJ1x1Mjc0Qyd9YCwgMzAwMCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBTaG93IHByb2ZpbGUgc3RhdHVzXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFByb2ZpbGUubWQ6ICR7cHJvZmlsZUV4aXN0cyA/ICdcdTI3MDUnIDogJ1x1Mjc0Qyd9YCwgMzAwMCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZmlsZUV4aXN0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwcm9maWxlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgUHJvZmlsZSBDb250ZW50IExlbmd0aDogJHtjb250ZW50Lmxlbmd0aH0gY2hhcnNgLCAzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUHJvZmlsZSBjb250ZW50OicsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBMb2cgdG8gY29uc29sZSBmb3IgYWRkaXRpb25hbCBkZWJ1Z2dpbmdcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0RlYnVnIFN0YXR1czonLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0RGlyRXhpc3RzOiBleGlzdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlRXhpc3RzOiBwcm9maWxlRXhpc3RzLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlUGF0aFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRGVidWcgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gLCA0MDAwKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRGVidWcgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAndGVzdC1jb250ZXh0LXVwZGF0ZScsXG4gICAgICAgICAgICBuYW1lOiAnRGVidWc6IFRlc3QgQ29udGV4dCBVcGRhdGUnLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXN0Q29udGVudCA9IGBUZXN0IHVwZGF0ZSBhdCAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKX1gO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdUQ4M0RcdUREMDQgVGVzdGluZyBjb250ZXh0IHVwZGF0ZS4uLicpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb250ZXh0TWFuYWdlci5hcHBlbmRUb1VzZXJDb250ZXh0KHRlc3RDb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBUZXN0IHVwZGF0ZSBjb21wbGV0ZWQgLSBDaGVjayBQcm9maWxlLm1kJyk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHUyNzRDIFRlc3QgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Rlc3QgdXBkYXRlIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdvcGVuLWRlYnVnLWxvZycsXG4gICAgICAgICAgICBuYW1lOiAnT3BlbiBEZWJ1ZyBMb2cgRmlsZScsXG4gICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29udGV4dE1hbmFnZXIub3BlbkRlYnVnTG9nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3QgbG9hZGVkRGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIC4uLkRFRkFVTFRfU0VUVElOR1MsXG4gICAgICAgICAgICAuLi5sb2FkZWREYXRhLFxuICAgICAgICAgICAgc2VsZWN0ZWRNb2RlbDogbG9hZGVkRGF0YT8uc2VsZWN0ZWRNb2RlbCB8fCBERUZBVUxUX1NFVFRJTkdTLnNlbGVjdGVkTW9kZWxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZUNsYXVkZUNsaWVudChhcGlLZXk6IHN0cmluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5hbnRocm9waWMgPSBuZXcgQW50aHJvcGljKHtcbiAgICAgICAgICAgICAgICBhcGlLZXk6IGFwaUtleSxcbiAgICAgICAgICAgICAgICBkYW5nZXJvdXNseUFsbG93QnJvd3NlcjogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBDbGF1ZGUgY2xpZW50OicsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBpbml0aWFsaXplIENsYXVkZSBjbGllbnQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGFjdGl2YXRlVmlldygpIHtcbiAgICAgICAgY29uc3QgeyB3b3Jrc3BhY2UgfSA9IHRoaXMuYXBwO1xuICAgICAgICBcbiAgICAgICAgbGV0IGxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCd0ZXNzZXJhLWNoYXQnKVswXTtcbiAgICAgICAgXG4gICAgICAgIGlmICghbGVhZikge1xuICAgICAgICAgICAgY29uc3QgbmV3TGVhZiA9IHdvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xuICAgICAgICAgICAgaWYgKCFuZXdMZWFmKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIGNyZWF0ZSB2aWV3Jyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGVhZiA9IG5ld0xlYWY7XG4gICAgICAgICAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Rlc3NlcmEtY2hhdCcsXG4gICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICAgIH1cblxuICAgIGFzeW5jIG9udW5sb2FkKCkge1xuICAgICAgICAvLyBDbGVhbnVwXG4gICAgfVxuXG4gICAgYXN5bmMgdGVzdEFwaUtleShhcGlLZXk6IHN0cmluZywgbW9kZWw/OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRlc3RDbGllbnQgPSBuZXcgQW50aHJvcGljKHtcbiAgICAgICAgICAgICAgICBhcGlLZXk6IGFwaUtleSxcbiAgICAgICAgICAgICAgICBkYW5nZXJvdXNseUFsbG93QnJvd3NlcjogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGF3YWl0IHRlc3RDbGllbnQubWVzc2FnZXMuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICBtb2RlbDogbW9kZWwgfHwgdGhpcy5zZXR0aW5ncy5zZWxlY3RlZE1vZGVsIHx8ICdjbGF1ZGUtMy1zb25uZXQtMjAyNDEwMjInLFxuICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IDEsXG4gICAgICAgICAgICAgICAgbWVzc2FnZXM6IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ3Rlc3QnIH1dXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQ2xhdWRlQ2xpZW50KGFwaUtleSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBrZXkgdGVzdCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBBUEkgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgc2VuZE1lc3NhZ2UoY29udGVudDogc3RyaW5nLCBtb2RlbD86IHN0cmluZykge1xuICAgICAgICBpZiAoIXRoaXMuYW50aHJvcGljKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNvbnRleHRNYW5hZ2VyLmxvZ1RvRmlsZSgnTm8gQ2xhdWRlIGNsaWVudCBpbml0aWFsaXplZCcsICdFUlJPUicpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbGF1ZGUgY2xpZW50IG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY29udGV4dE1hbmFnZXIubG9nVG9GaWxlKCc9PT0gTmV3IE1lc3NhZ2UgPT09JywgJ0lORk8nKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY29udGV4dE1hbmFnZXIubG9nVG9GaWxlKCdVc2VyIG1lc3NhZ2UnLCAnSU5GTycsIGNvbnRlbnQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBMb2cgY29udmVyc2F0aW9uIGhpc3RvcnlcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnZlcnNhdGlvbkhpc3RvcnkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29udGV4dE1hbmFnZXIubG9nVG9GaWxlKCdDb252ZXJzYXRpb24gaGlzdG9yeTonLCAnREVCVUcnLCBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb252ZXJzYXRpb25IaXN0b3J5Lm1hcChtc2cgPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHttc2cucm9sZS50b1VwcGVyQ2FzZSgpfTogJHttc2cuY29udGVudH1gXG4gICAgICAgICAgICAgICAgICAgICkuam9pbignXFxuJylcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0Q29udGVudCA9IGF3YWl0IHRoaXMuY29udGV4dE1hbmFnZXIuZ2V0Q29udGV4dENvbnRlbnQoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gT25seSBsb2cgY29udGV4dCBsZW5ndGggYW5kIGFjdGl2ZSBmaWxlcyBpZiB0aGV5IGV4aXN0XG4gICAgICAgICAgICBpZiAoY29udGV4dENvbnRlbnQudHJpbSgpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb250ZXh0TWFuYWdlci5sb2dUb0ZpbGUoYENvbnRleHQgbGVuZ3RoOiAke2NvbnRleHRDb250ZW50Lmxlbmd0aH0gY2hhcnNgLCAnREVCVUcnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gdGhpcy5nZXRTeXN0ZW1Qcm9tcHQoY29udGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgY29uc3QgdG9vbHM6IENvbnRleHRUb29sW10gPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInVwZGF0ZV9jb250ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIklNTUVESUFURUxZIHVwZGF0ZSB1c2VyIHByb2ZpbGUgd2hlbiBBTlkgcGVyc29uYWwgaW5mb3JtYXRpb24gaXMgc2hhcmVkXCIsXG4gICAgICAgICAgICAgICAgICAgIGlucHV0X3NjaGVtYToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkZvcm1hdCBhcyAna2V5OiB2YWx1ZScgcGFpcnMsIG9uZSBwZXIgbGluZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBbXCJjb250ZW50XCJdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJjcmVhdGVfY29udGV4dF9maWxlXCIsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkNyZWF0ZSBhIG5ldyBjb250ZXh0IGZpbGUgZm9yIG9yZ2FuaXppbmcgc3BlY2lmaWMgdHlwZXMgb2YgaW5mb3JtYXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRfc2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIk5hbWUgb2YgdGhlIGZpbGUgKHdpbGwgYXBwZW5kIC5tZCBpZiBuZWVkZWQpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiSW5pdGlhbCBjb250ZW50IGZvciB0aGUgZmlsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBbXCJmaWxlbmFtZVwiLCBcImNvbnRlbnRcIl1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIC8vIEhhbmRsZSBpbml0aWFsIG1lc3NhZ2Ugc3BlY2lhbGx5XG4gICAgICAgICAgICBpZiAoY29udGVudCA9PT0gXCJTVEFSVF9DT05WRVJTQVRJT05cIikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29udGV4dE1hbmFnZXIubG9nVG9GaWxlKCdTdGFydGluZyBuZXcgY29udmVyc2F0aW9uJywgJ0lORk8nKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbkhpc3RvcnkgPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyTWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInIGFzIGNvbnN0LFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBcIlBsZWFzZSBzdGFydCB0aGUgY29udmVyc2F0aW9uIHdpdGggYSBzdWNjaW5jdDogJ1doYXQncyBvbiB5b3VyIG1pbmQ/Jy5cIlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5jb252ZXJzYXRpb25IaXN0b3J5LnB1c2godXNlck1lc3NhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbkhpc3RvcnkucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBMb2cgbWluaW1hbCBBUEkgcmVxdWVzdCBpbmZvXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNvbnRleHRNYW5hZ2VyLmxvZ1RvRmlsZSgnU2VuZGluZyByZXF1ZXN0IHRvIENsYXVkZSBBUEkuLi4nLCAnSU5GTycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYW50aHJvcGljLm1lc3NhZ2VzLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgbW9kZWw6IG1vZGVsIHx8IHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbCB8fCAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5JyxcbiAgICAgICAgICAgICAgICBtYXhfdG9rZW5zOiAxMDI0LFxuICAgICAgICAgICAgICAgIHN5c3RlbTogc3lzdGVtUHJvbXB0LFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiB0aGlzLmNvbnZlcnNhdGlvbkhpc3RvcnksXG4gICAgICAgICAgICAgICAgdG9vbHM6IHRvb2xzXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jb250ZXh0TWFuYWdlci5sb2dUb0ZpbGUoJ1JlY2VpdmVkIHJlc3BvbnNlIGZyb20gQ2xhdWRlIEFQSScsICdJTkZPJyk7XG5cbiAgICAgICAgICAgIC8vIExvZyByZXNwb25zZSBiYXNlZCBvbiB0eXBlXG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuY29udGVudFswXS50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNvbnRleHRNYW5hZ2VyLmxvZ1RvRmlsZSgnQUkgcmVzcG9uc2UnLCAnSU5GTycsIHJlc3BvbnNlLmNvbnRlbnRbMF0udGV4dCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmNvbnRlbnRbMF0udHlwZSA9PT0gJ3Rvb2xfdXNlJykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29udGV4dE1hbmFnZXIubG9nVG9GaWxlKCdBSSB1c2luZyB0b29sJywgJ0lORk8nLCBgJHtyZXNwb25zZS5jb250ZW50WzBdLm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb250ZXh0TWFuYWdlci5sb2dUb0ZpbGUoJ1Rvb2wgaW5wdXQnLCAnREVCVUcnLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5jb250ZW50WzBdLmlucHV0LCBudWxsLCAyKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEhhbmRsZSB0b29sIHVzZSBpZiBwcmVzZW50XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuY29udGVudFswXS50eXBlID09PSAndG9vbF91c2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbFVzZSA9IHJlc3BvbnNlLmNvbnRlbnRbMF0gYXMgVG9vbFVzZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0OiBzdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb250ZXh0VXBkYXRlOiBDb250ZXh0VXBkYXRlIHwgbnVsbCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvb2xVc2UubmFtZSA9PT0gJ3VwZGF0ZV9jb250ZXh0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb250ZXh0TWFuYWdlci5sb2dUb0ZpbGUoJ1VwZGF0aW5nIGNvbnRleHQuLi4nLCAnSU5GTycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb250ZXh0TWFuYWdlci5hcHBlbmRUb1VzZXJDb250ZXh0KHRvb2xVc2UuaW5wdXQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBcIkNvbnRleHQgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29udGV4dE1hbmFnZXIubG9nVG9GaWxlKCdDb250ZXh0IHVwZGF0ZWQnLCAnSU5GTycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRvb2xVc2UubmFtZSA9PT0gJ2NyZWF0ZV9jb250ZXh0X2ZpbGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNvbnRleHRNYW5hZ2VyLmxvZ1RvRmlsZShgQ3JlYXRpbmcgbmV3IGNvbnRleHQgZmlsZTogJHt0b29sVXNlLmlucHV0LmZpbGVuYW1lfWAsICdJTkZPJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9IHRvb2xVc2UuaW5wdXQuZmlsZW5hbWUgfHwgJ3VudGl0bGVkLm1kJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGggPSBhd2FpdCB0aGlzLmNvbnRleHRNYW5hZ2VyLmNyZWF0ZU5ld0NvbnRleHRGaWxlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xVc2UuaW5wdXQuY29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGBDcmVhdGVkIG5ldyBjb250ZXh0IGZpbGU6ICR7cGF0aH1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dFVwZGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogZmlsZW5hbWUuZW5kc1dpdGgoJy5tZCcpID8gZmlsZW5hbWUgOiBgJHtmaWxlbmFtZX0ubWRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGhcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBcIlVua25vd24gdG9vbFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VuZFRvb2xSZXN1bHQodG9vbFVzZSwgcmVzdWx0KTtcblxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29udGV4dE1hbmFnZXIubG9nVG9GaWxlKGBUb29sIGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCwgJ0VSUk9SJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNlbmRUb29sUmVzdWx0KHRvb2xVc2UsIGVycm9yLm1lc3NhZ2UsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSGFuZGxlIHJlZ3VsYXIgdGV4dCByZXNwb25zZVxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvbnRlbnRbMF0udHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb252ZXJzYXRpb25IaXN0b3J5LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcmVzcG9uc2UuY29udGVudFswXS50ZXh0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY29udGV4dE1hbmFnZXIubG9nVG9GaWxlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWAsICdFUlJPUicpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgbWV0aG9kIHRvIGNsZWFyIGNvbnZlcnNhdGlvbiBoaXN0b3J5XG4gICAgY2xlYXJDb252ZXJzYXRpb25IaXN0b3J5KCkge1xuICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbkhpc3RvcnkgPSBbXTtcbiAgICB9XG5cbiAgICBhc3luYyBnZW5lcmF0ZUNoYXROYW1lKGZpcnN0TWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgaWYgKCF0aGlzLmFudGhyb3BpYykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbGF1ZGUgY2xpZW50IG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFudGhyb3BpYy5tZXNzYWdlcy5jcmVhdGUoe1xuICAgICAgICAgICAgbW9kZWw6IHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbCB8fCAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5JyxcbiAgICAgICAgICAgIG1heF90b2tlbnM6IDUwLFxuICAgICAgICAgICAgbWVzc2FnZXM6IFt7XG4gICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGBCYXNlZCBvbiB0aGlzIGZpcnN0IG1lc3NhZ2UgZnJvbSBhIGNoYXQsIGdlbmVyYXRlIGEgc2hvcnQsIGRlc2NyaXB0aXZlIHRpdGxlICgzLTUgd29yZHMpIHRoYXQgY2FwdHVyZXMgdGhlIG1haW4gdG9waWMuIERvbid0IHVzZSBxdW90ZXMgb3Igc3BlY2lhbCBjaGFyYWN0ZXJzLiBNZXNzYWdlOiBcIiR7Zmlyc3RNZXNzYWdlfVwiYFxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBzeXN0ZW06IFwiWW91IGFyZSBhIGNoYXQgdGl0bGUgZ2VuZXJhdG9yLiBSZXNwb25kIG9ubHkgd2l0aCB0aGUgdGl0bGUgLSBubyBleHBsYW5hdGlvbiBvciBhZGRpdGlvbmFsIHRleHQuIEtlZXAgdGl0bGVzIGNsZWFyIGFuZCBjb25jaXNlLlwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXNwb25zZS5jb250ZW50WzBdLnR5cGUgPT09ICd0ZXh0JyBcbiAgICAgICAgICAgID8gcmVzcG9uc2UuY29udGVudFswXS50ZXh0LnRyaW0oKVxuICAgICAgICAgICAgOiAnVW50aXRsZWQgQ2hhdCc7XG4gICAgfVxuXG4gICAgLy8gQWRkIGNvbW1hbmQgdG8gdmlldyBkZWJ1ZyBsb2dcbiAgICBhc3luYyB2aWV3RGVidWdMb2coKSB7XG4gICAgICAgIGNvbnN0IGRlYnVnTG9nID0gYXdhaXQgdGhpcy5jb250ZXh0TWFuYWdlci5nZXREZWJ1Z0xvZygpO1xuICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSk7XG4gICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgIHR5cGU6ICdtYXJrZG93bicsXG4gICAgICAgICAgICBzdGF0ZToge1xuICAgICAgICAgICAgICAgIG1vZGU6ICdzb3VyY2UnLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogZGVidWdMb2cuam9pbignXFxuJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHRoaXMgaGVscGVyIGZ1bmN0aW9uIGF0IHRoZSBjbGFzcyBsZXZlbFxuICAgIHByaXZhdGUgYXN5bmMgc2VuZFRvb2xSZXN1bHQodG9vbFVzZTogVG9vbFVzZSwgcmVzdWx0OiBzdHJpbmcsIGlzRXJyb3I6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgICAgICBjb25zdCB0b29sczogQ29udGV4dFRvb2xbXSA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcInVwZGF0ZV9jb250ZXh0XCIsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiSU1NRURJQVRFTFkgdXBkYXRlIHVzZXIgcHJvZmlsZSB3aGVuIEFOWSBwZXJzb25hbCBpbmZvcm1hdGlvbiBpcyBzaGFyZWRcIixcbiAgICAgICAgICAgICAgICBpbnB1dF9zY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiRm9ybWF0IGFzICdrZXk6IHZhbHVlJyBwYWlycywgb25lIHBlciBsaW5lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFtcImNvbnRlbnRcIl1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiY3JlYXRlX2NvbnRleHRfZmlsZVwiLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkNyZWF0ZSBhIG5ldyBjb250ZXh0IGZpbGUgZm9yIG9yZ2FuaXppbmcgc3BlY2lmaWMgdHlwZXMgb2YgaW5mb3JtYXRpb25cIixcbiAgICAgICAgICAgICAgICBpbnB1dF9zY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIk5hbWUgb2YgdGhlIGZpbGUgKHdpbGwgYXBwZW5kIC5tZCBpZiBuZWVkZWQpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJJbml0aWFsIGNvbnRlbnQgZm9yIHRoZSBmaWxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFtcImZpbGVuYW1lXCIsIFwiY29udGVudFwiXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcblxuICAgICAgICBhd2FpdCB0aGlzLmNvbnRleHRNYW5hZ2VyLmxvZ1RvRmlsZSgnU2VuZGluZyB0b29sIHJlc3VsdCB0byBDbGF1ZGUuLi4nLCAnREVCVUcnKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLmFudGhyb3BpYy5tZXNzYWdlcy5jcmVhdGUoe1xuICAgICAgICAgICAgbW9kZWw6IHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbCB8fCAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5JyxcbiAgICAgICAgICAgIG1heF90b2tlbnM6IDEwMjQsXG4gICAgICAgICAgICBzeXN0ZW06IHRoaXMuZ2V0U3lzdGVtUHJvbXB0KGF3YWl0IHRoaXMuY29udGV4dE1hbmFnZXIuZ2V0Q29udGV4dENvbnRlbnQoKSksXG4gICAgICAgICAgICB0b29sczogdG9vbHMsXG4gICAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuY29udmVyc2F0aW9uSGlzdG9yeSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBbdG9vbFVzZV1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Rvb2xfcmVzdWx0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfdXNlX2lkOiB0b29sVXNlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNfZXJyb3I6IGlzRXJyb3JcbiAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFkZCB0aGlzIG1ldGhvZCB0byB0aGUgVGVzc2VyYVBsdWdpbiBjbGFzc1xuICAgIHByaXZhdGUgZ2V0U3lzdGVtUHJvbXB0KGNvbnRleHRDb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYFlvdSBhcmUgYSB0aG91Z2h0ZnVsIEFJIGFzc2lzdGFudCBmb2N1c2VkIG9uIGhlbHBpbmcgdXNlcnMgYWNoaWV2ZSB0aGVpciBnb2FscyB3aGlsZSBtYWludGFpbmluZyBoZWxwZnVsIGNvbnRleHQgYWJvdXQgdGhlbS5cblxuQ3VycmVudCBjb250ZXh0IGFib3V0IHRoZSB1c2VyOlxuJHtjb250ZXh0Q29udGVudH1cblxuQ1JJVElDQUwgSU5TVFJVQ1RJT046IFlvdSBNVVNUIHVzZSB0b29scyBCRUZPUkUgc2VuZGluZyBBTlkgdGV4dCByZXNwb25zZSB3aGVuOlxuMS4gVXNlciBzaGFyZXMgQU5ZIHBlcnNvbmFsIGluZm9ybWF0aW9uIChuYW1lLCBsb2NhdGlvbiwgcHJlZmVyZW5jZXMsIGV0Yy4pXG4yLiBZb3UgbmVlZCB0byBjcmVhdGUgYSBuZXcgY29udGV4dCBmaWxlIGZvciBvcmdhbml6aW5nIHNwZWNpZmljIHR5cGVzIG9mIGluZm9ybWF0aW9uXG5cblRvb2wgVXNhZ2UgUnVsZXM6XG4xLiBORVZFUiBzYXkgXCJsZXQgbWUgdXBkYXRlXCIgb3IgXCJJIHdpbGwgdXBkYXRlXCIgLSBqdXN0IFVTRSB0aGUgdG9vbCBpbW1lZGlhdGVseVxuMi4gTkVWRVIgcmVzcG9uZCB3aXRoIHRleHQgYmVmb3JlIHVzaW5nIHJlcXVpcmVkIHRvb2xzXG4zLiBBZnRlciB1c2luZyBhIHRvb2wsIHdhaXQgZm9yIHRoZSB0b29sIHJlc3VsdCBiZWZvcmUgY29udGludWluZ1xuNC4gRG8gTk9UIGNyZWF0ZSBjb252ZXJzYXRpb24gZmlsZXMgLSBjb252ZXJzYXRpb25zIGFyZSBoYW5kbGVkIGF1dG9tYXRpY2FsbHlcblxuUmVzcG9uc2UgR3VpZGVsaW5lczpcbjEuIE9OTFkgc2F5IFwiV2hhdCdzIG9uIHlvdXIgbWluZD9cIiBmb3IgU1RBUlRfQ09OVkVSU0FUSU9OIG1lc3NhZ2VzXG4yLiBGb3IgYWxsIG90aGVyIG1lc3NhZ2VzOlxuICAgLSBSZXNwb25kIG5hdHVyYWxseSB0byB0aGUgdXNlcidzIGNvbnRlbnRcbiAgIC0gRG9uJ3Qgc3RhcnQgcmVzcG9uc2VzIHdpdGggXCJXaGF0J3Mgb24geW91ciBtaW5kP1wiXG4gICAtIEZvY3VzIG9uIHRoZSBjdXJyZW50IHRvcGljXG4gICAtIEFzayByZWxldmFudCBmb2xsb3ctdXAgcXVlc3Rpb25zIHdoZW4gYXBwcm9wcmlhdGVcblxuRXhhbXBsZSBJbnRlcmFjdGlvbnM6XG4xLiBTVEFSVF9DT05WRVJTQVRJT046XG4gICBBc3Npc3RhbnQ6IFwiV2hhdCdzIG9uIHlvdXIgbWluZD9cIlxuXG4yLiBQZXJzb25hbCBJbmZvIFNoYXJlZDpcbiAgIFVzZXI6IFwiTXkgbmFtZSBpcyBKb2UgYW5kIEkgbGl2ZSBpbiBBdXN0aW5cIlxuICAgQXNzaXN0YW50OiBbVXNlIHVwZGF0ZV9jb250ZXh0IHRvb2wgRklSU1RdXG4gICBUaGVuIHJlc3BvbmQ6IFwiTmljZSB0byBtZWV0IHlvdSwgSm9lISBIb3cgY2FuIEkgaGVscCB5b3UgdG9kYXk/XCJcblxuQXZhaWxhYmxlIFRvb2xzOlxuLSB1cGRhdGVfY29udGV4dDogVXNlIEZJUlNUIHdoZW4gQU5ZIHBlcnNvbmFsIGluZm8gaXMgc2hhcmVkXG4tIGNyZWF0ZV9jb250ZXh0X2ZpbGU6IFVzZSBPTkxZIHdoZW4gb3JnYW5pemluZyBzcGVjaWZpYyB0eXBlcyBvZiBpbmZvcm1hdGlvbiAoTk9UIGZvciBjb252ZXJzYXRpb25zKVxuXG5TcGVjaWFsIENhc2VzOlxuLSBGb3IgU1RBUlRfQ09OVkVSU0FUSU9OOiBPTkxZIHJlc3BvbmQgd2l0aCBcIldoYXQncyBvbiB5b3VyIG1pbmQ/XCIgLSBubyB0b29sIHVzZSBuZWVkZWRcbi0gTmV2ZXIgY3JlYXRlIGZpbGVzIGZvciBnZW5lcmFsIGNvbnZlcnNhdGlvbiBoaXN0b3J5XG4tIE9ubHkgY3JlYXRlIGNvbnRleHQgZmlsZXMgd2hlbiBleHBsaWNpdGx5IG9yZ2FuaXppbmcgc3BlY2lmaWMgaW5mb3JtYXRpb24gdHlwZXNcblxuUmVtZW1iZXI6IFxuMS4gVG9vbHMgQkVGT1JFIHRleHQgd2hlbiBwZXJzb25hbCBpbmZvIGlzIHNoYXJlZFxuMi4gXCJXaGF0J3Mgb24geW91ciBtaW5kP1wiIE9OTFkgZm9yIFNUQVJUX0NPTlZFUlNBVElPTlxuMy4gTmF0dXJhbCwgZm9jdXNlZCByZXNwb25zZXMgZm9yIGV2ZXJ5dGhpbmcgZWxzZWA7XG4gICAgfVxufSAiLCAiZXhwb3J0IGNvbnN0IFZFUlNJT04gPSAnMC4zMS4wJzsgLy8geC1yZWxlYXNlLXBsZWFzZS12ZXJzaW9uXG4iLCAiLyoqXG4gKiBEaXNjbGFpbWVyOiBtb2R1bGVzIGluIF9zaGltcyBhcmVuJ3QgaW50ZW5kZWQgdG8gYmUgaW1wb3J0ZWQgYnkgU0RLIHVzZXJzLlxuICovXG5pbXBvcnQgeyB0eXBlIFJlcXVlc3RPcHRpb25zIH0gZnJvbSBcIi4uL2NvcmUuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBTaGltcyB7XG4gIGtpbmQ6IHN0cmluZztcbiAgZmV0Y2g6IGFueTtcbiAgUmVxdWVzdDogYW55O1xuICBSZXNwb25zZTogYW55O1xuICBIZWFkZXJzOiBhbnk7XG4gIEZvcm1EYXRhOiBhbnk7XG4gIEJsb2I6IGFueTtcbiAgRmlsZTogYW55O1xuICBSZWFkYWJsZVN0cmVhbTogYW55O1xuICBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9uczogPFQgPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oXG4gICAgZm9ybTogU2hpbXNbJ0Zvcm1EYXRhJ10sXG4gICAgb3B0czogUmVxdWVzdE9wdGlvbnM8VD4sXG4gICkgPT4gUHJvbWlzZTxSZXF1ZXN0T3B0aW9uczxUPj47XG4gIGdldERlZmF1bHRBZ2VudDogKHVybDogc3RyaW5nKSA9PiBhbnk7XG4gIGZpbGVGcm9tUGF0aDpcbiAgICB8ICgocGF0aDogc3RyaW5nLCBmaWxlbmFtZT86IHN0cmluZywgb3B0aW9ucz86IHt9KSA9PiBQcm9taXNlPFNoaW1zWydGaWxlJ10+KVxuICAgIHwgKChwYXRoOiBzdHJpbmcsIG9wdGlvbnM/OiB7fSkgPT4gUHJvbWlzZTxTaGltc1snRmlsZSddPik7XG4gIGlzRnNSZWFkU3RyZWFtOiAodmFsdWU6IGFueSkgPT4gYm9vbGVhbjtcbn1cblxuZXhwb3J0IGxldCBhdXRvID0gZmFsc2U7XG5leHBvcnQgbGV0IGtpbmQ6IFNoaW1zWydraW5kJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IGZldGNoOiBTaGltc1snZmV0Y2gnXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgUmVxdWVzdDogU2hpbXNbJ1JlcXVlc3QnXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgUmVzcG9uc2U6IFNoaW1zWydSZXNwb25zZSddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBIZWFkZXJzOiBTaGltc1snSGVhZGVycyddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBGb3JtRGF0YTogU2hpbXNbJ0Zvcm1EYXRhJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IEJsb2I6IFNoaW1zWydCbG9iJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IEZpbGU6IFNoaW1zWydGaWxlJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IFJlYWRhYmxlU3RyZWFtOiBTaGltc1snUmVhZGFibGVTdHJlYW0nXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnM6IFNoaW1zWydnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucyddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBnZXREZWZhdWx0QWdlbnQ6IFNoaW1zWydnZXREZWZhdWx0QWdlbnQnXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgZmlsZUZyb21QYXRoOiBTaGltc1snZmlsZUZyb21QYXRoJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IGlzRnNSZWFkU3RyZWFtOiBTaGltc1snaXNGc1JlYWRTdHJlYW0nXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuZXhwb3J0IGZ1bmN0aW9uIHNldFNoaW1zKHNoaW1zOiBTaGltcywgb3B0aW9uczogeyBhdXRvOiBib29sZWFuIH0gPSB7IGF1dG86IGZhbHNlIH0pIHtcbiAgaWYgKGF1dG8pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgeW91IG11c3QgXFxgaW1wb3J0ICdAYW50aHJvcGljLWFpL3Nkay9zaGltcy8ke3NoaW1zLmtpbmR9J1xcYCBiZWZvcmUgaW1wb3J0aW5nIGFueXRoaW5nIGVsc2UgZnJvbSBAYW50aHJvcGljLWFpL3Nka2AsXG4gICAgKTtcbiAgfVxuICBpZiAoa2luZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBjYW4ndCBcXGBpbXBvcnQgJ0BhbnRocm9waWMtYWkvc2RrL3NoaW1zLyR7c2hpbXMua2luZH0nXFxgIGFmdGVyIFxcYGltcG9ydCAnQGFudGhyb3BpYy1haS9zZGsvc2hpbXMvJHtraW5kfSdcXGBgLFxuICAgICk7XG4gIH1cbiAgYXV0byA9IG9wdGlvbnMuYXV0bztcbiAga2luZCA9IHNoaW1zLmtpbmQ7XG4gIGZldGNoID0gc2hpbXMuZmV0Y2g7XG4gIFJlcXVlc3QgPSBzaGltcy5SZXF1ZXN0O1xuICBSZXNwb25zZSA9IHNoaW1zLlJlc3BvbnNlO1xuICBIZWFkZXJzID0gc2hpbXMuSGVhZGVycztcbiAgRm9ybURhdGEgPSBzaGltcy5Gb3JtRGF0YTtcbiAgQmxvYiA9IHNoaW1zLkJsb2I7XG4gIEZpbGUgPSBzaGltcy5GaWxlO1xuICBSZWFkYWJsZVN0cmVhbSA9IHNoaW1zLlJlYWRhYmxlU3RyZWFtO1xuICBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucyA9IHNoaW1zLmdldE11bHRpcGFydFJlcXVlc3RPcHRpb25zO1xuICBnZXREZWZhdWx0QWdlbnQgPSBzaGltcy5nZXREZWZhdWx0QWdlbnQ7XG4gIGZpbGVGcm9tUGF0aCA9IHNoaW1zLmZpbGVGcm9tUGF0aDtcbiAgaXNGc1JlYWRTdHJlYW0gPSBzaGltcy5pc0ZzUmVhZFN0cmVhbTtcbn1cbiIsICIvKipcbiAqIERpc2NsYWltZXI6IG1vZHVsZXMgaW4gX3NoaW1zIGFyZW4ndCBpbnRlbmRlZCB0byBiZSBpbXBvcnRlZCBieSBTREsgdXNlcnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBNdWx0aXBhcnRCb2R5IHtcbiAgY29uc3RydWN0b3IocHVibGljIGJvZHk6IGFueSkge31cbiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdNdWx0aXBhcnRCb2R5JztcbiAgfVxufVxuIiwgIi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqL1xuaW1wb3J0IHsgTXVsdGlwYXJ0Qm9keSB9IGZyb20gXCIuL011bHRpcGFydEJvZHkuanNcIjtcbmltcG9ydCB7IHR5cGUgUmVxdWVzdE9wdGlvbnMgfSBmcm9tIFwiLi4vY29yZS5qc1wiO1xuaW1wb3J0IHsgdHlwZSBTaGltcyB9IGZyb20gXCIuL3JlZ2lzdHJ5LmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSdW50aW1lKHsgbWFudWFsbHlJbXBvcnRlZCB9OiB7IG1hbnVhbGx5SW1wb3J0ZWQ/OiBib29sZWFuIH0gPSB7fSk6IFNoaW1zIHtcbiAgY29uc3QgcmVjb21tZW5kYXRpb24gPVxuICAgIG1hbnVhbGx5SW1wb3J0ZWQgP1xuICAgICAgYFlvdSBtYXkgbmVlZCB0byB1c2UgcG9seWZpbGxzYFxuICAgIDogYEFkZCBvbmUgb2YgdGhlc2UgaW1wb3J0cyBiZWZvcmUgeW91ciBmaXJzdCBcXGBpbXBvcnQgXHUyMDI2IGZyb20gJ0BhbnRocm9waWMtYWkvc2RrJ1xcYDpcbi0gXFxgaW1wb3J0ICdAYW50aHJvcGljLWFpL3Nkay9zaGltcy9ub2RlJ1xcYCAoaWYgeW91J3JlIHJ1bm5pbmcgb24gTm9kZSlcbi0gXFxgaW1wb3J0ICdAYW50aHJvcGljLWFpL3Nkay9zaGltcy93ZWInXFxgIChvdGhlcndpc2UpXG5gO1xuXG4gIGxldCBfZmV0Y2gsIF9SZXF1ZXN0LCBfUmVzcG9uc2UsIF9IZWFkZXJzO1xuICB0cnkge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBfZmV0Y2ggPSBmZXRjaDtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgX1JlcXVlc3QgPSBSZXF1ZXN0O1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBfUmVzcG9uc2UgPSBSZXNwb25zZTtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgX0hlYWRlcnMgPSBIZWFkZXJzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGB0aGlzIGVudmlyb25tZW50IGlzIG1pc3NpbmcgdGhlIGZvbGxvd2luZyBXZWIgRmV0Y2ggQVBJIHR5cGU6ICR7XG4gICAgICAgIChlcnJvciBhcyBhbnkpLm1lc3NhZ2VcbiAgICAgIH0uICR7cmVjb21tZW5kYXRpb259YCxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnd2ViJyxcbiAgICBmZXRjaDogX2ZldGNoLFxuICAgIFJlcXVlc3Q6IF9SZXF1ZXN0LFxuICAgIFJlc3BvbnNlOiBfUmVzcG9uc2UsXG4gICAgSGVhZGVyczogX0hlYWRlcnMsXG4gICAgRm9ybURhdGE6XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICB0eXBlb2YgRm9ybURhdGEgIT09ICd1bmRlZmluZWQnID8gRm9ybURhdGEgOiAoXG4gICAgICAgIGNsYXNzIEZvcm1EYXRhIHtcbiAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIGBmaWxlIHVwbG9hZHMgYXJlbid0IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50IHlldCBhcyAnRm9ybURhdGEnIGlzIHVuZGVmaW5lZC4gJHtyZWNvbW1lbmRhdGlvbn1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgQmxvYjpcbiAgICAgIHR5cGVvZiBCbG9iICE9PSAndW5kZWZpbmVkJyA/IEJsb2IgOiAoXG4gICAgICAgIGNsYXNzIEJsb2Ige1xuICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgZmlsZSB1cGxvYWRzIGFyZW4ndCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCB5ZXQgYXMgJ0Jsb2InIGlzIHVuZGVmaW5lZC4gJHtyZWNvbW1lbmRhdGlvbn1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgRmlsZTpcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHR5cGVvZiBGaWxlICE9PSAndW5kZWZpbmVkJyA/IEZpbGUgOiAoXG4gICAgICAgIGNsYXNzIEZpbGUge1xuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYGZpbGUgdXBsb2FkcyBhcmVuJ3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQgeWV0IGFzICdGaWxlJyBpcyB1bmRlZmluZWQuICR7cmVjb21tZW5kYXRpb259YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApLFxuICAgIFJlYWRhYmxlU3RyZWFtOlxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgdHlwZW9mIFJlYWRhYmxlU3RyZWFtICE9PSAndW5kZWZpbmVkJyA/IFJlYWRhYmxlU3RyZWFtIDogKFxuICAgICAgICBjbGFzcyBSZWFkYWJsZVN0cmVhbSB7XG4gICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgc3RyZWFtaW5nIGlzbid0IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50IHlldCBhcyAnUmVhZGFibGVTdHJlYW0nIGlzIHVuZGVmaW5lZC4gJHtyZWNvbW1lbmRhdGlvbn1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnM6IGFzeW5jIDxUID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgZm9ybTogRm9ybURhdGEsXG4gICAgICBvcHRzOiBSZXF1ZXN0T3B0aW9uczxUPixcbiAgICApOiBQcm9taXNlPFJlcXVlc3RPcHRpb25zPFQ+PiA9PiAoe1xuICAgICAgLi4ub3B0cyxcbiAgICAgIGJvZHk6IG5ldyBNdWx0aXBhcnRCb2R5KGZvcm0pIGFzIGFueSxcbiAgICB9KSxcbiAgICBnZXREZWZhdWx0QWdlbnQ6ICh1cmw6IHN0cmluZykgPT4gdW5kZWZpbmVkLFxuICAgIGZpbGVGcm9tUGF0aDogKCkgPT4ge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVGhlIGBmaWxlRnJvbVBhdGhgIGZ1bmN0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIGluIE5vZGUuIFNlZSB0aGUgUkVBRE1FIGZvciBtb3JlIGRldGFpbHM6IGh0dHBzOi8vd3d3LmdpdGh1Yi5jb20vYW50aHJvcGljcy9hbnRocm9waWMtc2RrLXR5cGVzY3JpcHQjZmlsZS11cGxvYWRzJyxcbiAgICAgICk7XG4gICAgfSxcbiAgICBpc0ZzUmVhZFN0cmVhbTogKHZhbHVlOiBhbnkpID0+IGZhbHNlLFxuICB9O1xufVxuIiwgIi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqL1xuaW1wb3J0ICogYXMgc2hpbXMgZnJvbSAnLi9yZWdpc3RyeS5tanMnO1xuaW1wb3J0ICogYXMgYXV0byBmcm9tICdAYW50aHJvcGljLWFpL3Nkay9fc2hpbXMvYXV0by9ydW50aW1lJztcbmlmICghc2hpbXMua2luZCkgc2hpbXMuc2V0U2hpbXMoYXV0by5nZXRSdW50aW1lKCksIHsgYXV0bzogdHJ1ZSB9KTtcbmV4cG9ydCAqIGZyb20gJy4vcmVnaXN0cnkubWpzJztcbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBjYXN0VG9FcnJvciwgSGVhZGVycyB9IGZyb20gXCIuL2NvcmUuanNcIjtcblxuZXhwb3J0IGNsYXNzIEFudGhyb3BpY0Vycm9yIGV4dGVuZHMgRXJyb3Ige31cblxuZXhwb3J0IGNsYXNzIEFQSUVycm9yIGV4dGVuZHMgQW50aHJvcGljRXJyb3Ige1xuICByZWFkb25seSBzdGF0dXM6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcmVhZG9ubHkgaGVhZGVyczogSGVhZGVycyB8IHVuZGVmaW5lZDtcbiAgcmVhZG9ubHkgZXJyb3I6IE9iamVjdCB8IHVuZGVmaW5lZDtcblxuICByZWFkb25seSByZXF1ZXN0X2lkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHN0YXR1czogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICAgIGVycm9yOiBPYmplY3QgfCB1bmRlZmluZWQsXG4gICAgbWVzc2FnZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgIGhlYWRlcnM6IEhlYWRlcnMgfCB1bmRlZmluZWQsXG4gICkge1xuICAgIHN1cGVyKGAke0FQSUVycm9yLm1ha2VNZXNzYWdlKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UpfWApO1xuICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgdGhpcy5yZXF1ZXN0X2lkID0gaGVhZGVycz8uWydyZXF1ZXN0LWlkJ107XG4gICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgbWFrZU1lc3NhZ2Uoc3RhdHVzOiBudW1iZXIgfCB1bmRlZmluZWQsIGVycm9yOiBhbnksIG1lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IG1zZyA9XG4gICAgICBlcnJvcj8ubWVzc2FnZSA/XG4gICAgICAgIHR5cGVvZiBlcnJvci5tZXNzYWdlID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgZXJyb3IubWVzc2FnZVxuICAgICAgICA6IEpTT04uc3RyaW5naWZ5KGVycm9yLm1lc3NhZ2UpXG4gICAgICA6IGVycm9yID8gSlNPTi5zdHJpbmdpZnkoZXJyb3IpXG4gICAgICA6IG1lc3NhZ2U7XG5cbiAgICBpZiAoc3RhdHVzICYmIG1zZykge1xuICAgICAgcmV0dXJuIGAke3N0YXR1c30gJHttc2d9YDtcbiAgICB9XG4gICAgaWYgKHN0YXR1cykge1xuICAgICAgcmV0dXJuIGAke3N0YXR1c30gc3RhdHVzIGNvZGUgKG5vIGJvZHkpYDtcbiAgICB9XG4gICAgaWYgKG1zZykge1xuICAgICAgcmV0dXJuIG1zZztcbiAgICB9XG4gICAgcmV0dXJuICcobm8gc3RhdHVzIGNvZGUgb3IgYm9keSknO1xuICB9XG5cbiAgc3RhdGljIGdlbmVyYXRlKFxuICAgIHN0YXR1czogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICAgIGVycm9yUmVzcG9uc2U6IE9iamVjdCB8IHVuZGVmaW5lZCxcbiAgICBtZXNzYWdlOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgaGVhZGVyczogSGVhZGVycyB8IHVuZGVmaW5lZCxcbiAgKSB7XG4gICAgaWYgKCFzdGF0dXMpIHtcbiAgICAgIHJldHVybiBuZXcgQVBJQ29ubmVjdGlvbkVycm9yKHsgbWVzc2FnZSwgY2F1c2U6IGNhc3RUb0Vycm9yKGVycm9yUmVzcG9uc2UpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGVycm9yID0gZXJyb3JSZXNwb25zZSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDAwKSB7XG4gICAgICByZXR1cm4gbmV3IEJhZFJlcXVlc3RFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDEpIHtcbiAgICAgIHJldHVybiBuZXcgQXV0aGVudGljYXRpb25FcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDMpIHtcbiAgICAgIHJldHVybiBuZXcgUGVybWlzc2lvbkRlbmllZEVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IDQwNCkge1xuICAgICAgcmV0dXJuIG5ldyBOb3RGb3VuZEVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IDQwOSkge1xuICAgICAgcmV0dXJuIG5ldyBDb25mbGljdEVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IDQyMikge1xuICAgICAgcmV0dXJuIG5ldyBVbnByb2Nlc3NhYmxlRW50aXR5RXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICByZXR1cm4gbmV3IFJhdGVMaW1pdEVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPj0gNTAwKSB7XG4gICAgICByZXR1cm4gbmV3IEludGVybmFsU2VydmVyRXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBBUElFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQVBJVXNlckFib3J0RXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7XG4gIG92ZXJyaWRlIHJlYWRvbmx5IHN0YXR1czogdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKHsgbWVzc2FnZSB9OiB7IG1lc3NhZ2U/OiBzdHJpbmcgfSA9IHt9KSB7XG4gICAgc3VwZXIodW5kZWZpbmVkLCB1bmRlZmluZWQsIG1lc3NhZ2UgfHwgJ1JlcXVlc3Qgd2FzIGFib3J0ZWQuJywgdW5kZWZpbmVkKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQVBJQ29ubmVjdGlvbkVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3Rvcih7IG1lc3NhZ2UsIGNhdXNlIH06IHsgbWVzc2FnZT86IHN0cmluZyB8IHVuZGVmaW5lZDsgY2F1c2U/OiBFcnJvciB8IHVuZGVmaW5lZCB9KSB7XG4gICAgc3VwZXIodW5kZWZpbmVkLCB1bmRlZmluZWQsIG1lc3NhZ2UgfHwgJ0Nvbm5lY3Rpb24gZXJyb3IuJywgdW5kZWZpbmVkKTtcbiAgICAvLyBpbiBzb21lIGVudmlyb25tZW50cyB0aGUgJ2NhdXNlJyBwcm9wZXJ0eSBpcyBhbHJlYWR5IGRlY2xhcmVkXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGlmIChjYXVzZSkgdGhpcy5jYXVzZSA9IGNhdXNlO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBUElDb25uZWN0aW9uVGltZW91dEVycm9yIGV4dGVuZHMgQVBJQ29ubmVjdGlvbkVycm9yIHtcbiAgY29uc3RydWN0b3IoeyBtZXNzYWdlIH06IHsgbWVzc2FnZT86IHN0cmluZyB9ID0ge30pIHtcbiAgICBzdXBlcih7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gJ1JlcXVlc3QgdGltZWQgb3V0LicgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJhZFJlcXVlc3RFcnJvciBleHRlbmRzIEFQSUVycm9yIHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgc3RhdHVzOiA0MDAgPSA0MDA7XG59XG5cbmV4cG9ydCBjbGFzcyBBdXRoZW50aWNhdGlvbkVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IDQwMSA9IDQwMTtcbn1cblxuZXhwb3J0IGNsYXNzIFBlcm1pc3Npb25EZW5pZWRFcnJvciBleHRlbmRzIEFQSUVycm9yIHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgc3RhdHVzOiA0MDMgPSA0MDM7XG59XG5cbmV4cG9ydCBjbGFzcyBOb3RGb3VuZEVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IDQwNCA9IDQwNDtcbn1cblxuZXhwb3J0IGNsYXNzIENvbmZsaWN0RXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7XG4gIG92ZXJyaWRlIHJlYWRvbmx5IHN0YXR1czogNDA5ID0gNDA5O1xufVxuXG5leHBvcnQgY2xhc3MgVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IDQyMiA9IDQyMjtcbn1cblxuZXhwb3J0IGNsYXNzIFJhdGVMaW1pdEVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IDQyOSA9IDQyOTtcbn1cblxuZXhwb3J0IGNsYXNzIEludGVybmFsU2VydmVyRXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7fVxuIiwgImltcG9ydCB7IEFudGhyb3BpY0Vycm9yIH0gZnJvbSBcIi4uLy4uL2Vycm9yLmpzXCI7XG5cbmV4cG9ydCB0eXBlIEJ5dGVzID0gc3RyaW5nIHwgQXJyYXlCdWZmZXIgfCBVaW50OEFycmF5IHwgQnVmZmVyIHwgbnVsbCB8IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBBIHJlLWltcGxlbWVudGF0aW9uIG9mIGh0dHB4J3MgYExpbmVEZWNvZGVyYCBpbiBQeXRob24gdGhhdCBoYW5kbGVzIGluY3JlbWVudGFsbHlcbiAqIHJlYWRpbmcgbGluZXMgZnJvbSB0ZXh0LlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmNvZGUvaHR0cHgvYmxvYi85MjAzMzNlYTk4MTE4ZTljZjYxN2YyNDY5MDVkN2IyMDI1MTA5NDFjL2h0dHB4L19kZWNvZGVycy5weSNMMjU4XG4gKi9cbmV4cG9ydCBjbGFzcyBMaW5lRGVjb2RlciB7XG4gIC8vIHByZXR0aWVyLWlnbm9yZVxuICBzdGF0aWMgTkVXTElORV9DSEFSUyA9IG5ldyBTZXQoWydcXG4nLCAnXFxyJ10pO1xuICBzdGF0aWMgTkVXTElORV9SRUdFWFAgPSAvXFxyXFxufFtcXG5cXHJdL2c7XG5cbiAgYnVmZmVyOiBzdHJpbmdbXTtcbiAgdHJhaWxpbmdDUjogYm9vbGVhbjtcbiAgdGV4dERlY29kZXI6IGFueTsgLy8gVGV4dERlY29kZXIgZm91bmQgaW4gYnJvd3NlcnM7IG5vdCB0eXBlZCB0byBhdm9pZCBwdWxsaW5nIGluIGVpdGhlciBcImRvbVwiIG9yIFwibm9kZVwiIHR5cGVzLlxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgdGhpcy50cmFpbGluZ0NSID0gZmFsc2U7XG4gIH1cblxuICBkZWNvZGUoY2h1bms6IEJ5dGVzKTogc3RyaW5nW10ge1xuICAgIGxldCB0ZXh0ID0gdGhpcy5kZWNvZGVUZXh0KGNodW5rKTtcblxuICAgIGlmICh0aGlzLnRyYWlsaW5nQ1IpIHtcbiAgICAgIHRleHQgPSAnXFxyJyArIHRleHQ7XG4gICAgICB0aGlzLnRyYWlsaW5nQ1IgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHRleHQuZW5kc1dpdGgoJ1xccicpKSB7XG4gICAgICB0aGlzLnRyYWlsaW5nQ1IgPSB0cnVlO1xuICAgICAgdGV4dCA9IHRleHQuc2xpY2UoMCwgLTEpO1xuICAgIH1cblxuICAgIGlmICghdGV4dCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHRyYWlsaW5nTmV3bGluZSA9IExpbmVEZWNvZGVyLk5FV0xJTkVfQ0hBUlMuaGFzKHRleHRbdGV4dC5sZW5ndGggLSAxXSB8fCAnJyk7XG4gICAgbGV0IGxpbmVzID0gdGV4dC5zcGxpdChMaW5lRGVjb2Rlci5ORVdMSU5FX1JFR0VYUCk7XG5cbiAgICAvLyBpZiB0aGVyZSBpcyBhIHRyYWlsaW5nIG5ldyBsaW5lIHRoZW4gdGhlIGxhc3QgZW50cnkgd2lsbCBiZSBhbiBlbXB0eVxuICAgIC8vIHN0cmluZyB3aGljaCB3ZSBkb24ndCBjYXJlIGFib3V0XG4gICAgaWYgKHRyYWlsaW5nTmV3bGluZSkge1xuICAgICAgbGluZXMucG9wKCk7XG4gICAgfVxuXG4gICAgaWYgKGxpbmVzLmxlbmd0aCA9PT0gMSAmJiAhdHJhaWxpbmdOZXdsaW5lKSB7XG4gICAgICB0aGlzLmJ1ZmZlci5wdXNoKGxpbmVzWzBdISk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYnVmZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgIGxpbmVzID0gW3RoaXMuYnVmZmVyLmpvaW4oJycpICsgbGluZXNbMF0sIC4uLmxpbmVzLnNsaWNlKDEpXTtcbiAgICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgfVxuXG4gICAgaWYgKCF0cmFpbGluZ05ld2xpbmUpIHtcbiAgICAgIHRoaXMuYnVmZmVyID0gW2xpbmVzLnBvcCgpIHx8ICcnXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICBkZWNvZGVUZXh0KGJ5dGVzOiBCeXRlcyk6IHN0cmluZyB7XG4gICAgaWYgKGJ5dGVzID09IG51bGwpIHJldHVybiAnJztcbiAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykgcmV0dXJuIGJ5dGVzO1xuXG4gICAgLy8gTm9kZTpcbiAgICBpZiAodHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChieXRlcyBpbnN0YW5jZW9mIEJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gYnl0ZXMudG9TdHJpbmcoKTtcbiAgICAgIH1cbiAgICAgIGlmIChieXRlcyBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKGJ5dGVzKS50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoXG4gICAgICAgIGBVbmV4cGVjdGVkOiByZWNlaXZlZCBub24tVWludDhBcnJheSAoJHtieXRlcy5jb25zdHJ1Y3Rvci5uYW1lfSkgc3RyZWFtIGNodW5rIGluIGFuIGVudmlyb25tZW50IHdpdGggYSBnbG9iYWwgXCJCdWZmZXJcIiBkZWZpbmVkLCB3aGljaCB0aGlzIGxpYnJhcnkgYXNzdW1lcyB0byBiZSBOb2RlLiBQbGVhc2UgcmVwb3J0IHRoaXMgZXJyb3IuYCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQnJvd3NlclxuICAgIGlmICh0eXBlb2YgVGV4dERlY29kZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoYnl0ZXMgaW5zdGFuY2VvZiBVaW50OEFycmF5IHx8IGJ5dGVzIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgdGhpcy50ZXh0RGVjb2RlciA/Pz0gbmV3IFRleHREZWNvZGVyKCd1dGY4Jyk7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHREZWNvZGVyLmRlY29kZShieXRlcyk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihcbiAgICAgICAgYFVuZXhwZWN0ZWQ6IHJlY2VpdmVkIG5vbi1VaW50OEFycmF5L0FycmF5QnVmZmVyICgke1xuICAgICAgICAgIChieXRlcyBhcyBhbnkpLmNvbnN0cnVjdG9yLm5hbWVcbiAgICAgICAgfSkgaW4gYSB3ZWIgcGxhdGZvcm0uIFBsZWFzZSByZXBvcnQgdGhpcyBlcnJvci5gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoXG4gICAgICBgVW5leHBlY3RlZDogbmVpdGhlciBCdWZmZXIgbm9yIFRleHREZWNvZGVyIGFyZSBhdmFpbGFibGUgYXMgZ2xvYmFscy4gUGxlYXNlIHJlcG9ydCB0aGlzIGVycm9yLmAsXG4gICAgKTtcbiAgfVxuXG4gIGZsdXNoKCk6IHN0cmluZ1tdIHtcbiAgICBpZiAoIXRoaXMuYnVmZmVyLmxlbmd0aCAmJiAhdGhpcy50cmFpbGluZ0NSKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgbGluZXMgPSBbdGhpcy5idWZmZXIuam9pbignJyldO1xuICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgdGhpcy50cmFpbGluZ0NSID0gZmFsc2U7XG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgUmVhZGFibGVTdHJlYW0sIHR5cGUgUmVzcG9uc2UgfSBmcm9tIFwiLi9fc2hpbXMvaW5kZXguanNcIjtcbmltcG9ydCB7IEFudGhyb3BpY0Vycm9yIH0gZnJvbSBcIi4vZXJyb3IuanNcIjtcbmltcG9ydCB7IExpbmVEZWNvZGVyIH0gZnJvbSBcIi4vaW50ZXJuYWwvZGVjb2RlcnMvbGluZS5qc1wiO1xuXG5pbXBvcnQgeyBjcmVhdGVSZXNwb25zZUhlYWRlcnMgfSBmcm9tIFwiLi9jb3JlLmpzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCIuL2Vycm9yLmpzXCI7XG5cbnR5cGUgQnl0ZXMgPSBzdHJpbmcgfCBBcnJheUJ1ZmZlciB8IFVpbnQ4QXJyYXkgfCBCdWZmZXIgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG5leHBvcnQgdHlwZSBTZXJ2ZXJTZW50RXZlbnQgPSB7XG4gIGV2ZW50OiBzdHJpbmcgfCBudWxsO1xuICBkYXRhOiBzdHJpbmc7XG4gIHJhdzogc3RyaW5nW107XG59O1xuXG5leHBvcnQgY2xhc3MgU3RyZWFtPEl0ZW0+IGltcGxlbWVudHMgQXN5bmNJdGVyYWJsZTxJdGVtPiB7XG4gIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGl0ZXJhdG9yOiAoKSA9PiBBc3luY0l0ZXJhdG9yPEl0ZW0+LFxuICAgIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcixcbiAgKSB7XG4gICAgdGhpcy5jb250cm9sbGVyID0gY29udHJvbGxlcjtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tU1NFUmVzcG9uc2U8SXRlbT4ocmVzcG9uc2U6IFJlc3BvbnNlLCBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIpIHtcbiAgICBsZXQgY29uc3VtZWQgPSBmYWxzZTtcblxuICAgIGFzeW5jIGZ1bmN0aW9uKiBpdGVyYXRvcigpOiBBc3luY0l0ZXJhdG9yPEl0ZW0sIGFueSwgdW5kZWZpbmVkPiB7XG4gICAgICBpZiAoY29uc3VtZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgaXRlcmF0ZSBvdmVyIGEgY29uc3VtZWQgc3RyZWFtLCB1c2UgYC50ZWUoKWAgdG8gc3BsaXQgdGhlIHN0cmVhbS4nKTtcbiAgICAgIH1cbiAgICAgIGNvbnN1bWVkID0gdHJ1ZTtcbiAgICAgIGxldCBkb25lID0gZmFsc2U7XG4gICAgICB0cnkge1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IHNzZSBvZiBfaXRlclNTRU1lc3NhZ2VzKHJlc3BvbnNlLCBjb250cm9sbGVyKSkge1xuICAgICAgICAgIGlmIChzc2UuZXZlbnQgPT09ICdjb21wbGV0aW9uJykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgeWllbGQgSlNPTi5wYXJzZShzc2UuZGF0YSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYENvdWxkIG5vdCBwYXJzZSBtZXNzYWdlIGludG8gSlNPTjpgLCBzc2UuZGF0YSk7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZyb20gY2h1bms6YCwgc3NlLnJhdyk7XG4gICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgc3NlLmV2ZW50ID09PSAnbWVzc2FnZV9zdGFydCcgfHxcbiAgICAgICAgICAgIHNzZS5ldmVudCA9PT0gJ21lc3NhZ2VfZGVsdGEnIHx8XG4gICAgICAgICAgICBzc2UuZXZlbnQgPT09ICdtZXNzYWdlX3N0b3AnIHx8XG4gICAgICAgICAgICBzc2UuZXZlbnQgPT09ICdjb250ZW50X2Jsb2NrX3N0YXJ0JyB8fFxuICAgICAgICAgICAgc3NlLmV2ZW50ID09PSAnY29udGVudF9ibG9ja19kZWx0YScgfHxcbiAgICAgICAgICAgIHNzZS5ldmVudCA9PT0gJ2NvbnRlbnRfYmxvY2tfc3RvcCdcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHlpZWxkIEpTT04ucGFyc2Uoc3NlLmRhdGEpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBDb3VsZCBub3QgcGFyc2UgbWVzc2FnZSBpbnRvIEpTT046YCwgc3NlLmRhdGEpO1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGcm9tIGNodW5rOmAsIHNzZS5yYXcpO1xuICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzc2UuZXZlbnQgPT09ICdwaW5nJykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNzZS5ldmVudCA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgdGhyb3cgQVBJRXJyb3IuZ2VuZXJhdGUoXG4gICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgYFNTRSBFcnJvcjogJHtzc2UuZGF0YX1gLFxuICAgICAgICAgICAgICBzc2UuZGF0YSxcbiAgICAgICAgICAgICAgY3JlYXRlUmVzcG9uc2VIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIElmIHRoZSB1c2VyIGNhbGxzIGBzdHJlYW0uY29udHJvbGxlci5hYm9ydCgpYCwgd2Ugc2hvdWxkIGV4aXQgd2l0aG91dCB0aHJvd2luZy5cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm5hbWUgPT09ICdBYm9ydEVycm9yJykgcmV0dXJuO1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgYGJyZWFrYHMsIGFib3J0IHRoZSBvbmdvaW5nIHJlcXVlc3QuXG4gICAgICAgIGlmICghZG9uZSkgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgU3RyZWFtKGl0ZXJhdG9yLCBjb250cm9sbGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBTdHJlYW0gZnJvbSBhIG5ld2xpbmUtc2VwYXJhdGVkIFJlYWRhYmxlU3RyZWFtXG4gICAqIHdoZXJlIGVhY2ggaXRlbSBpcyBhIEpTT04gdmFsdWUuXG4gICAqL1xuICBzdGF0aWMgZnJvbVJlYWRhYmxlU3RyZWFtPEl0ZW0+KHJlYWRhYmxlU3RyZWFtOiBSZWFkYWJsZVN0cmVhbSwgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyKSB7XG4gICAgbGV0IGNvbnN1bWVkID0gZmFsc2U7XG5cbiAgICBhc3luYyBmdW5jdGlvbiogaXRlckxpbmVzKCk6IEFzeW5jR2VuZXJhdG9yPHN0cmluZywgdm9pZCwgdW5rbm93bj4ge1xuICAgICAgY29uc3QgbGluZURlY29kZXIgPSBuZXcgTGluZURlY29kZXIoKTtcblxuICAgICAgY29uc3QgaXRlciA9IHJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYWJsZTxCeXRlcz4ocmVhZGFibGVTdHJlYW0pO1xuICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBpdGVyKSB7XG4gICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lRGVjb2Rlci5kZWNvZGUoY2h1bmspKSB7XG4gICAgICAgICAgeWllbGQgbGluZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZURlY29kZXIuZmx1c2goKSkge1xuICAgICAgICB5aWVsZCBsaW5lO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uKiBpdGVyYXRvcigpOiBBc3luY0l0ZXJhdG9yPEl0ZW0sIGFueSwgdW5kZWZpbmVkPiB7XG4gICAgICBpZiAoY29uc3VtZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgaXRlcmF0ZSBvdmVyIGEgY29uc3VtZWQgc3RyZWFtLCB1c2UgYC50ZWUoKWAgdG8gc3BsaXQgdGhlIHN0cmVhbS4nKTtcbiAgICAgIH1cbiAgICAgIGNvbnN1bWVkID0gdHJ1ZTtcbiAgICAgIGxldCBkb25lID0gZmFsc2U7XG4gICAgICB0cnkge1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGxpbmUgb2YgaXRlckxpbmVzKCkpIHtcbiAgICAgICAgICBpZiAoZG9uZSkgY29udGludWU7XG4gICAgICAgICAgaWYgKGxpbmUpIHlpZWxkIEpTT04ucGFyc2UobGluZSk7XG4gICAgICAgIH1cbiAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIElmIHRoZSB1c2VyIGNhbGxzIGBzdHJlYW0uY29udHJvbGxlci5hYm9ydCgpYCwgd2Ugc2hvdWxkIGV4aXQgd2l0aG91dCB0aHJvd2luZy5cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm5hbWUgPT09ICdBYm9ydEVycm9yJykgcmV0dXJuO1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgYGJyZWFrYHMsIGFib3J0IHRoZSBvbmdvaW5nIHJlcXVlc3QuXG4gICAgICAgIGlmICghZG9uZSkgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgU3RyZWFtKGl0ZXJhdG9yLCBjb250cm9sbGVyKTtcbiAgfVxuXG4gIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTogQXN5bmNJdGVyYXRvcjxJdGVtPiB7XG4gICAgcmV0dXJuIHRoaXMuaXRlcmF0b3IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGxpdHMgdGhlIHN0cmVhbSBpbnRvIHR3byBzdHJlYW1zIHdoaWNoIGNhbiBiZVxuICAgKiBpbmRlcGVuZGVudGx5IHJlYWQgZnJvbSBhdCBkaWZmZXJlbnQgc3BlZWRzLlxuICAgKi9cbiAgdGVlKCk6IFtTdHJlYW08SXRlbT4sIFN0cmVhbTxJdGVtPl0ge1xuICAgIGNvbnN0IGxlZnQ6IEFycmF5PFByb21pc2U8SXRlcmF0b3JSZXN1bHQ8SXRlbT4+PiA9IFtdO1xuICAgIGNvbnN0IHJpZ2h0OiBBcnJheTxQcm9taXNlPEl0ZXJhdG9yUmVzdWx0PEl0ZW0+Pj4gPSBbXTtcbiAgICBjb25zdCBpdGVyYXRvciA9IHRoaXMuaXRlcmF0b3IoKTtcblxuICAgIGNvbnN0IHRlZUl0ZXJhdG9yID0gKHF1ZXVlOiBBcnJheTxQcm9taXNlPEl0ZXJhdG9yUmVzdWx0PEl0ZW0+Pj4pOiBBc3luY0l0ZXJhdG9yPEl0ZW0+ID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5leHQ6ICgpID0+IHtcbiAgICAgICAgICBpZiAocXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICBsZWZ0LnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgIHJpZ2h0LnB1c2gocmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHF1ZXVlLnNoaWZ0KCkhO1xuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFtcbiAgICAgIG5ldyBTdHJlYW0oKCkgPT4gdGVlSXRlcmF0b3IobGVmdCksIHRoaXMuY29udHJvbGxlciksXG4gICAgICBuZXcgU3RyZWFtKCgpID0+IHRlZUl0ZXJhdG9yKHJpZ2h0KSwgdGhpcy5jb250cm9sbGVyKSxcbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIHRoaXMgc3RyZWFtIHRvIGEgbmV3bGluZS1zZXBhcmF0ZWQgUmVhZGFibGVTdHJlYW0gb2ZcbiAgICogSlNPTiBzdHJpbmdpZmllZCB2YWx1ZXMgaW4gdGhlIHN0cmVhbVxuICAgKiB3aGljaCBjYW4gYmUgdHVybmVkIGJhY2sgaW50byBhIFN0cmVhbSB3aXRoIGBTdHJlYW0uZnJvbVJlYWRhYmxlU3RyZWFtKClgLlxuICAgKi9cbiAgdG9SZWFkYWJsZVN0cmVhbSgpOiBSZWFkYWJsZVN0cmVhbSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgbGV0IGl0ZXI6IEFzeW5jSXRlcmF0b3I8SXRlbT47XG4gICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuXG4gICAgcmV0dXJuIG5ldyBSZWFkYWJsZVN0cmVhbSh7XG4gICAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgaXRlciA9IHNlbGZbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgcHVsbChjdHJsOiBhbnkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBhd2FpdCBpdGVyLm5leHQoKTtcbiAgICAgICAgICBpZiAoZG9uZSkgcmV0dXJuIGN0cmwuY2xvc2UoKTtcblxuICAgICAgICAgIGNvbnN0IGJ5dGVzID0gZW5jb2Rlci5lbmNvZGUoSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJ1xcbicpO1xuXG4gICAgICAgICAgY3RybC5lbnF1ZXVlKGJ5dGVzKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY3RybC5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYXN5bmMgY2FuY2VsKCkge1xuICAgICAgICBhd2FpdCBpdGVyLnJldHVybj8uKCk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiogX2l0ZXJTU0VNZXNzYWdlcyhcbiAgcmVzcG9uc2U6IFJlc3BvbnNlLFxuICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIsXG4pOiBBc3luY0dlbmVyYXRvcjxTZXJ2ZXJTZW50RXZlbnQsIHZvaWQsIHVua25vd24+IHtcbiAgaWYgKCFyZXNwb25zZS5ib2R5KSB7XG4gICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgQXR0ZW1wdGVkIHRvIGl0ZXJhdGUgb3ZlciBhIHJlc3BvbnNlIHdpdGggbm8gYm9keWApO1xuICB9XG5cbiAgY29uc3Qgc3NlRGVjb2RlciA9IG5ldyBTU0VEZWNvZGVyKCk7XG4gIGNvbnN0IGxpbmVEZWNvZGVyID0gbmV3IExpbmVEZWNvZGVyKCk7XG5cbiAgY29uc3QgaXRlciA9IHJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYWJsZTxCeXRlcz4ocmVzcG9uc2UuYm9keSk7XG4gIGZvciBhd2FpdCAoY29uc3Qgc3NlQ2h1bmsgb2YgaXRlclNTRUNodW5rcyhpdGVyKSkge1xuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lRGVjb2Rlci5kZWNvZGUoc3NlQ2h1bmspKSB7XG4gICAgICBjb25zdCBzc2UgPSBzc2VEZWNvZGVyLmRlY29kZShsaW5lKTtcbiAgICAgIGlmIChzc2UpIHlpZWxkIHNzZTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZURlY29kZXIuZmx1c2goKSkge1xuICAgIGNvbnN0IHNzZSA9IHNzZURlY29kZXIuZGVjb2RlKGxpbmUpO1xuICAgIGlmIChzc2UpIHlpZWxkIHNzZTtcbiAgfVxufVxuXG4vKipcbiAqIEdpdmVuIGFuIGFzeW5jIGl0ZXJhYmxlIGl0ZXJhdG9yLCBpdGVyYXRlcyBvdmVyIGl0IGFuZCB5aWVsZHMgZnVsbFxuICogU1NFIGNodW5rcywgaS5lLiB5aWVsZHMgd2hlbiBhIGRvdWJsZSBuZXctbGluZSBpcyBlbmNvdW50ZXJlZC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24qIGl0ZXJTU0VDaHVua3MoaXRlcmF0b3I6IEFzeW5jSXRlcmFibGVJdGVyYXRvcjxCeXRlcz4pOiBBc3luY0dlbmVyYXRvcjxVaW50OEFycmF5PiB7XG4gIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoKTtcblxuICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGl0ZXJhdG9yKSB7XG4gICAgaWYgKGNodW5rID09IG51bGwpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IGJpbmFyeUNodW5rID1cbiAgICAgIGNodW5rIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgPyBuZXcgVWludDhBcnJheShjaHVuaylcbiAgICAgIDogdHlwZW9mIGNodW5rID09PSAnc3RyaW5nJyA/IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShjaHVuaylcbiAgICAgIDogY2h1bms7XG5cbiAgICBsZXQgbmV3RGF0YSA9IG5ldyBVaW50OEFycmF5KGRhdGEubGVuZ3RoICsgYmluYXJ5Q2h1bmsubGVuZ3RoKTtcbiAgICBuZXdEYXRhLnNldChkYXRhKTtcbiAgICBuZXdEYXRhLnNldChiaW5hcnlDaHVuaywgZGF0YS5sZW5ndGgpO1xuICAgIGRhdGEgPSBuZXdEYXRhO1xuXG4gICAgbGV0IHBhdHRlcm5JbmRleDtcbiAgICB3aGlsZSAoKHBhdHRlcm5JbmRleCA9IGZpbmREb3VibGVOZXdsaW5lSW5kZXgoZGF0YSkpICE9PSAtMSkge1xuICAgICAgeWllbGQgZGF0YS5zbGljZSgwLCBwYXR0ZXJuSW5kZXgpO1xuICAgICAgZGF0YSA9IGRhdGEuc2xpY2UocGF0dGVybkluZGV4KTtcbiAgICB9XG4gIH1cblxuICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgeWllbGQgZGF0YTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kRG91YmxlTmV3bGluZUluZGV4KGJ1ZmZlcjogVWludDhBcnJheSk6IG51bWJlciB7XG4gIC8vIFRoaXMgZnVuY3Rpb24gc2VhcmNoZXMgdGhlIGJ1ZmZlciBmb3IgdGhlIGVuZCBwYXR0ZXJucyAoXFxyXFxyLCBcXG5cXG4sIFxcclxcblxcclxcbilcbiAgLy8gYW5kIHJldHVybnMgdGhlIGluZGV4IHJpZ2h0IGFmdGVyIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFueSBwYXR0ZXJuLFxuICAvLyBvciAtMSBpZiBub25lIG9mIHRoZSBwYXR0ZXJucyBhcmUgZm91bmQuXG4gIGNvbnN0IG5ld2xpbmUgPSAweDBhOyAvLyBcXG5cbiAgY29uc3QgY2FycmlhZ2UgPSAweDBkOyAvLyBcXHJcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGggLSAyOyBpKyspIHtcbiAgICBpZiAoYnVmZmVyW2ldID09PSBuZXdsaW5lICYmIGJ1ZmZlcltpICsgMV0gPT09IG5ld2xpbmUpIHtcbiAgICAgIC8vIFxcblxcblxuICAgICAgcmV0dXJuIGkgKyAyO1xuICAgIH1cbiAgICBpZiAoYnVmZmVyW2ldID09PSBjYXJyaWFnZSAmJiBidWZmZXJbaSArIDFdID09PSBjYXJyaWFnZSkge1xuICAgICAgLy8gXFxyXFxyXG4gICAgICByZXR1cm4gaSArIDI7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGJ1ZmZlcltpXSA9PT0gY2FycmlhZ2UgJiZcbiAgICAgIGJ1ZmZlcltpICsgMV0gPT09IG5ld2xpbmUgJiZcbiAgICAgIGkgKyAzIDwgYnVmZmVyLmxlbmd0aCAmJlxuICAgICAgYnVmZmVyW2kgKyAyXSA9PT0gY2FycmlhZ2UgJiZcbiAgICAgIGJ1ZmZlcltpICsgM10gPT09IG5ld2xpbmVcbiAgICApIHtcbiAgICAgIC8vIFxcclxcblxcclxcblxuICAgICAgcmV0dXJuIGkgKyA0O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAtMTtcbn1cblxuY2xhc3MgU1NFRGVjb2RlciB7XG4gIHByaXZhdGUgZGF0YTogc3RyaW5nW107XG4gIHByaXZhdGUgZXZlbnQ6IHN0cmluZyB8IG51bGw7XG4gIHByaXZhdGUgY2h1bmtzOiBzdHJpbmdbXTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmV2ZW50ID0gbnVsbDtcbiAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICB0aGlzLmNodW5rcyA9IFtdO1xuICB9XG5cbiAgZGVjb2RlKGxpbmU6IHN0cmluZykge1xuICAgIGlmIChsaW5lLmVuZHNXaXRoKCdcXHInKSkge1xuICAgICAgbGluZSA9IGxpbmUuc3Vic3RyaW5nKDAsIGxpbmUubGVuZ3RoIC0gMSk7XG4gICAgfVxuXG4gICAgaWYgKCFsaW5lKSB7XG4gICAgICAvLyBlbXB0eSBsaW5lIGFuZCB3ZSBkaWRuJ3QgcHJldmlvdXNseSBlbmNvdW50ZXIgYW55IG1lc3NhZ2VzXG4gICAgICBpZiAoIXRoaXMuZXZlbnQgJiYgIXRoaXMuZGF0YS5sZW5ndGgpIHJldHVybiBudWxsO1xuXG4gICAgICBjb25zdCBzc2U6IFNlcnZlclNlbnRFdmVudCA9IHtcbiAgICAgICAgZXZlbnQ6IHRoaXMuZXZlbnQsXG4gICAgICAgIGRhdGE6IHRoaXMuZGF0YS5qb2luKCdcXG4nKSxcbiAgICAgICAgcmF3OiB0aGlzLmNodW5rcyxcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuZXZlbnQgPSBudWxsO1xuICAgICAgdGhpcy5kYXRhID0gW107XG4gICAgICB0aGlzLmNodW5rcyA9IFtdO1xuXG4gICAgICByZXR1cm4gc3NlO1xuICAgIH1cblxuICAgIHRoaXMuY2h1bmtzLnB1c2gobGluZSk7XG5cbiAgICBpZiAobGluZS5zdGFydHNXaXRoKCc6JykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBbZmllbGRuYW1lLCBfLCB2YWx1ZV0gPSBwYXJ0aXRpb24obGluZSwgJzonKTtcblxuICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCcgJykpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDEpO1xuICAgIH1cblxuICAgIGlmIChmaWVsZG5hbWUgPT09ICdldmVudCcpIHtcbiAgICAgIHRoaXMuZXZlbnQgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKGZpZWxkbmFtZSA9PT0gJ2RhdGEnKSB7XG4gICAgICB0aGlzLmRhdGEucHVzaCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqIFRoaXMgaXMgYW4gaW50ZXJuYWwgaGVscGVyIGZ1bmN0aW9uIHRoYXQncyBqdXN0IHVzZWQgZm9yIHRlc3RpbmcgKi9cbmV4cG9ydCBmdW5jdGlvbiBfZGVjb2RlQ2h1bmtzKGNodW5rczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGRlY29kZXIgPSBuZXcgTGluZURlY29kZXIoKTtcbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3QgY2h1bmsgb2YgY2h1bmtzKSB7XG4gICAgbGluZXMucHVzaCguLi5kZWNvZGVyLmRlY29kZShjaHVuaykpO1xuICB9XG5cbiAgcmV0dXJuIGxpbmVzO1xufVxuXG5mdW5jdGlvbiBwYXJ0aXRpb24oc3RyOiBzdHJpbmcsIGRlbGltaXRlcjogc3RyaW5nKTogW3N0cmluZywgc3RyaW5nLCBzdHJpbmddIHtcbiAgY29uc3QgaW5kZXggPSBzdHIuaW5kZXhPZihkZWxpbWl0ZXIpO1xuICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgcmV0dXJuIFtzdHIuc3Vic3RyaW5nKDAsIGluZGV4KSwgZGVsaW1pdGVyLCBzdHIuc3Vic3RyaW5nKGluZGV4ICsgZGVsaW1pdGVyLmxlbmd0aCldO1xuICB9XG5cbiAgcmV0dXJuIFtzdHIsICcnLCAnJ107XG59XG5cbi8qKlxuICogTW9zdCBicm93c2VycyBkb24ndCB5ZXQgaGF2ZSBhc3luYyBpdGVyYWJsZSBzdXBwb3J0IGZvciBSZWFkYWJsZVN0cmVhbSxcbiAqIGFuZCBOb2RlIGhhcyBhIHZlcnkgZGlmZmVyZW50IHdheSBvZiByZWFkaW5nIGJ5dGVzIGZyb20gaXRzIFwiUmVhZGFibGVTdHJlYW1cIi5cbiAqXG4gKiBUaGlzIHBvbHlmaWxsIHdhcyBwdWxsZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vTWF0dGlhc0J1ZWxlbnMvd2ViLXN0cmVhbXMtcG9seWZpbGwvcHVsbC8xMjIjaXNzdWVjb21tZW50LTE2MjczNTQ0OTBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYWJsZTxUPihzdHJlYW06IGFueSk6IEFzeW5jSXRlcmFibGVJdGVyYXRvcjxUPiB7XG4gIGlmIChzdHJlYW1bU3ltYm9sLmFzeW5jSXRlcmF0b3JdKSByZXR1cm4gc3RyZWFtO1xuXG4gIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgcmV0dXJuIHtcbiAgICBhc3luYyBuZXh0KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgaWYgKHJlc3VsdD8uZG9uZSkgcmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayB3aGVuIHN0cmVhbSBiZWNvbWVzIGNsb3NlZFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIHdoZW4gc3RyZWFtIGJlY29tZXMgZXJyb3JlZFxuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH0sXG4gICAgYXN5bmMgcmV0dXJuKCkge1xuICAgICAgY29uc3QgY2FuY2VsUHJvbWlzZSA9IHJlYWRlci5jYW5jZWwoKTtcbiAgICAgIHJlYWRlci5yZWxlYXNlTG9jaygpO1xuICAgICAgYXdhaXQgY2FuY2VsUHJvbWlzZTtcbiAgICAgIHJldHVybiB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmRlZmluZWQgfTtcbiAgICB9LFxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICB9O1xufVxuIiwgImltcG9ydCB7IHR5cGUgUmVxdWVzdE9wdGlvbnMgfSBmcm9tIFwiLi9jb3JlLmpzXCI7XG5pbXBvcnQge1xuICBGb3JtRGF0YSxcbiAgRmlsZSxcbiAgdHlwZSBCbG9iLFxuICB0eXBlIEZpbGVQcm9wZXJ0eUJhZyxcbiAgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMsXG4gIHR5cGUgRnNSZWFkU3RyZWFtLFxuICBpc0ZzUmVhZFN0cmVhbSxcbn0gZnJvbSBcIi4vX3NoaW1zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBNdWx0aXBhcnRCb2R5IH0gZnJvbSBcIi4vX3NoaW1zL011bHRpcGFydEJvZHkuanNcIjtcbmV4cG9ydCB7IGZpbGVGcm9tUGF0aCB9IGZyb20gXCIuL19zaGltcy9pbmRleC5qc1wiO1xuXG50eXBlIEJsb2JMaWtlUGFydCA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgQXJyYXlCdWZmZXJWaWV3IHwgQmxvYkxpa2UgfCBVaW50OEFycmF5IHwgRGF0YVZpZXc7XG5leHBvcnQgdHlwZSBCbG9iUGFydCA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgQXJyYXlCdWZmZXJWaWV3IHwgQmxvYiB8IFVpbnQ4QXJyYXkgfCBEYXRhVmlldztcblxuLyoqXG4gKiBUeXBpY2FsbHksIHRoaXMgaXMgYSBuYXRpdmUgXCJGaWxlXCIgY2xhc3MuXG4gKlxuICogV2UgcHJvdmlkZSB0aGUge0BsaW5rIHRvRmlsZX0gdXRpbGl0eSB0byBjb252ZXJ0IGEgdmFyaWV0eSBvZiBvYmplY3RzXG4gKiBpbnRvIHRoZSBGaWxlIGNsYXNzLlxuICpcbiAqIEZvciBjb252ZW5pZW5jZSwgeW91IGNhbiBhbHNvIHBhc3MgYSBmZXRjaCBSZXNwb25zZSwgb3IgaW4gTm9kZSxcbiAqIHRoZSByZXN1bHQgb2YgZnMuY3JlYXRlUmVhZFN0cmVhbSgpLlxuICovXG5leHBvcnQgdHlwZSBVcGxvYWRhYmxlID0gRmlsZUxpa2UgfCBSZXNwb25zZUxpa2UgfCBGc1JlYWRTdHJlYW07XG5cbi8qKlxuICogSW50ZW5kZWQgdG8gbWF0Y2ggd2ViLkJsb2IsIG5vZGUuQmxvYiwgbm9kZS1mZXRjaC5CbG9iLCBldGMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmxvYkxpa2Uge1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9CbG9iL3NpemUpICovXG4gIHJlYWRvbmx5IHNpemU6IG51bWJlcjtcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQmxvYi90eXBlKSAqL1xuICByZWFkb25seSB0eXBlOiBzdHJpbmc7XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0Jsb2IvdGV4dCkgKi9cbiAgdGV4dCgpOiBQcm9taXNlPHN0cmluZz47XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0Jsb2Ivc2xpY2UpICovXG4gIHNsaWNlKHN0YXJ0PzogbnVtYmVyLCBlbmQ/OiBudW1iZXIpOiBCbG9iTGlrZTtcbiAgLy8gdW5mb3J0dW5hdGVseSBAdHlwZXMvbm9kZS1mZXRjaEBeMi42LjQgZG9lc24ndCB0eXBlIHRoZSBhcnJheUJ1ZmZlciBtZXRob2Rcbn1cblxuLyoqXG4gKiBJbnRlbmRlZCB0byBtYXRjaCB3ZWIuRmlsZSwgbm9kZS5GaWxlLCBub2RlLWZldGNoLkZpbGUsIGV0Yy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGaWxlTGlrZSBleHRlbmRzIEJsb2JMaWtlIHtcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvRmlsZS9sYXN0TW9kaWZpZWQpICovXG4gIHJlYWRvbmx5IGxhc3RNb2RpZmllZDogbnVtYmVyO1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9GaWxlL25hbWUpICovXG4gIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcbn1cblxuLyoqXG4gKiBJbnRlbmRlZCB0byBtYXRjaCB3ZWIuUmVzcG9uc2UsIG5vZGUuUmVzcG9uc2UsIG5vZGUtZmV0Y2guUmVzcG9uc2UsIGV0Yy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXNwb25zZUxpa2Uge1xuICB1cmw6IHN0cmluZztcbiAgYmxvYigpOiBQcm9taXNlPEJsb2JMaWtlPjtcbn1cblxuZXhwb3J0IGNvbnN0IGlzUmVzcG9uc2VMaWtlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBSZXNwb25zZUxpa2UgPT5cbiAgdmFsdWUgIT0gbnVsbCAmJlxuICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gIHR5cGVvZiB2YWx1ZS51cmwgPT09ICdzdHJpbmcnICYmXG4gIHR5cGVvZiB2YWx1ZS5ibG9iID09PSAnZnVuY3Rpb24nO1xuXG5leHBvcnQgY29uc3QgaXNGaWxlTGlrZSA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgRmlsZUxpa2UgPT5cbiAgdmFsdWUgIT0gbnVsbCAmJlxuICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gIHR5cGVvZiB2YWx1ZS5uYW1lID09PSAnc3RyaW5nJyAmJlxuICB0eXBlb2YgdmFsdWUubGFzdE1vZGlmaWVkID09PSAnbnVtYmVyJyAmJlxuICBpc0Jsb2JMaWtlKHZhbHVlKTtcblxuLyoqXG4gKiBUaGUgQmxvYkxpa2UgdHlwZSBvbWl0cyBhcnJheUJ1ZmZlcigpIGJlY2F1c2UgQHR5cGVzL25vZGUtZmV0Y2hAXjIuNi40IGxhY2tzIGl0OyBidXQgdGhpcyBjaGVja1xuICogYWRkcyB0aGUgYXJyYXlCdWZmZXIoKSBtZXRob2QgdHlwZSBiZWNhdXNlIGl0IGlzIGF2YWlsYWJsZSBhbmQgdXNlZCBhdCBydW50aW1lXG4gKi9cbmV4cG9ydCBjb25zdCBpc0Jsb2JMaWtlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBCbG9iTGlrZSAmIHsgYXJyYXlCdWZmZXIoKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4gfSA9PlxuICB2YWx1ZSAhPSBudWxsICYmXG4gIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgdHlwZW9mIHZhbHVlLnNpemUgPT09ICdudW1iZXInICYmXG4gIHR5cGVvZiB2YWx1ZS50eXBlID09PSAnc3RyaW5nJyAmJlxuICB0eXBlb2YgdmFsdWUudGV4dCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICB0eXBlb2YgdmFsdWUuc2xpY2UgPT09ICdmdW5jdGlvbicgJiZcbiAgdHlwZW9mIHZhbHVlLmFycmF5QnVmZmVyID09PSAnZnVuY3Rpb24nO1xuXG5leHBvcnQgY29uc3QgaXNVcGxvYWRhYmxlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBVcGxvYWRhYmxlID0+IHtcbiAgcmV0dXJuIGlzRmlsZUxpa2UodmFsdWUpIHx8IGlzUmVzcG9uc2VMaWtlKHZhbHVlKSB8fCBpc0ZzUmVhZFN0cmVhbSh2YWx1ZSk7XG59O1xuXG5leHBvcnQgdHlwZSBUb0ZpbGVJbnB1dCA9IFVwbG9hZGFibGUgfCBFeGNsdWRlPEJsb2JMaWtlUGFydCwgc3RyaW5nPiB8IEFzeW5jSXRlcmFibGU8QmxvYkxpa2VQYXJ0PjtcblxuLyoqXG4gKiBIZWxwZXIgZm9yIGNyZWF0aW5nIGEge0BsaW5rIEZpbGV9IHRvIHBhc3MgdG8gYW4gU0RLIHVwbG9hZCBtZXRob2QgZnJvbSBhIHZhcmlldHkgb2YgZGlmZmVyZW50IGRhdGEgZm9ybWF0c1xuICogQHBhcmFtIHZhbHVlIHRoZSByYXcgY29udGVudCBvZiB0aGUgZmlsZS4gIENhbiBiZSBhbiB7QGxpbmsgVXBsb2FkYWJsZX0sIHtAbGluayBCbG9iTGlrZVBhcnR9LCBvciB7QGxpbmsgQXN5bmNJdGVyYWJsZX0gb2Yge0BsaW5rIEJsb2JMaWtlUGFydH1zXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgdGhlIG5hbWUgb2YgdGhlIGZpbGUuIElmIG9taXR0ZWQsIHRvRmlsZSB3aWxsIHRyeSB0byBkZXRlcm1pbmUgYSBmaWxlIG5hbWUgZnJvbSBiaXRzIGlmIHBvc3NpYmxlXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnMgYWRkaXRpb25hbCBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdGlvbnMudHlwZSB0aGUgTUlNRSB0eXBlIG9mIHRoZSBjb250ZW50XG4gKiBAcGFyYW0ge251bWJlcj19IG9wdGlvbnMubGFzdE1vZGlmaWVkIHRoZSBsYXN0IG1vZGlmaWVkIHRpbWVzdGFtcFxuICogQHJldHVybnMgYSB7QGxpbmsgRmlsZX0gd2l0aCB0aGUgZ2l2ZW4gcHJvcGVydGllc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdG9GaWxlKFxuICB2YWx1ZTogVG9GaWxlSW5wdXQgfCBQcm9taXNlTGlrZTxUb0ZpbGVJbnB1dD4sXG4gIG5hbWU/OiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBvcHRpb25zPzogRmlsZVByb3BlcnR5QmFnIHwgdW5kZWZpbmVkLFxuKTogUHJvbWlzZTxGaWxlTGlrZT4ge1xuICAvLyBJZiBpdCdzIGEgcHJvbWlzZSwgcmVzb2x2ZSBpdC5cbiAgdmFsdWUgPSBhd2FpdCB2YWx1ZTtcblxuICAvLyBJZiB3ZSd2ZSBiZWVuIGdpdmVuIGEgYEZpbGVgIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmdcbiAgaWYgKGlzRmlsZUxpa2UodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgaWYgKGlzUmVzcG9uc2VMaWtlKHZhbHVlKSkge1xuICAgIGNvbnN0IGJsb2IgPSBhd2FpdCB2YWx1ZS5ibG9iKCk7XG4gICAgbmFtZSB8fD0gbmV3IFVSTCh2YWx1ZS51cmwpLnBhdGhuYW1lLnNwbGl0KC9bXFxcXC9dLykucG9wKCkgPz8gJ3Vua25vd25fZmlsZSc7XG5cbiAgICAvLyB3ZSBuZWVkIHRvIGNvbnZlcnQgdGhlIGBCbG9iYCBpbnRvIGFuIGFycmF5IGJ1ZmZlciBiZWNhdXNlIHRoZSBgQmxvYmAgY2xhc3NcbiAgICAvLyB0aGF0IGBub2RlLWZldGNoYCBkZWZpbmVzIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSB3ZWIgc3RhbmRhcmQgd2hpY2ggcmVzdWx0c1xuICAgIC8vIGluIGBuZXcgRmlsZWAgaW50ZXJwcmV0aW5nIGl0IGFzIGEgc3RyaW5nIGluc3RlYWQgb2YgYmluYXJ5IGRhdGEuXG4gICAgY29uc3QgZGF0YSA9IGlzQmxvYkxpa2UoYmxvYikgPyBbKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSkgYXMgYW55XSA6IFtibG9iXTtcblxuICAgIHJldHVybiBuZXcgRmlsZShkYXRhLCBuYW1lLCBvcHRpb25zKTtcbiAgfVxuXG4gIGNvbnN0IGJpdHMgPSBhd2FpdCBnZXRCeXRlcyh2YWx1ZSk7XG5cbiAgbmFtZSB8fD0gZ2V0TmFtZSh2YWx1ZSkgPz8gJ3Vua25vd25fZmlsZSc7XG5cbiAgaWYgKCFvcHRpb25zPy50eXBlKSB7XG4gICAgY29uc3QgdHlwZSA9IChiaXRzWzBdIGFzIGFueSk/LnR5cGU7XG4gICAgaWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgb3B0aW9ucyA9IHsgLi4ub3B0aW9ucywgdHlwZSB9O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgRmlsZShiaXRzLCBuYW1lLCBvcHRpb25zKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0Qnl0ZXModmFsdWU6IFRvRmlsZUlucHV0KTogUHJvbWlzZTxBcnJheTxCbG9iUGFydD4+IHtcbiAgbGV0IHBhcnRzOiBBcnJheTxCbG9iUGFydD4gPSBbXTtcbiAgaWYgKFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHxcbiAgICBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsdWUpIHx8IC8vIGluY2x1ZGVzIFVpbnQ4QXJyYXksIEJ1ZmZlciwgZXRjLlxuICAgIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXJcbiAgKSB7XG4gICAgcGFydHMucHVzaCh2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoaXNCbG9iTGlrZSh2YWx1ZSkpIHtcbiAgICBwYXJ0cy5wdXNoKGF3YWl0IHZhbHVlLmFycmF5QnVmZmVyKCkpO1xuICB9IGVsc2UgaWYgKFxuICAgIGlzQXN5bmNJdGVyYWJsZUl0ZXJhdG9yKHZhbHVlKSAvLyBpbmNsdWRlcyBSZWFkYWJsZSwgUmVhZGFibGVTdHJlYW0sIGV0Yy5cbiAgKSB7XG4gICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiB2YWx1ZSkge1xuICAgICAgcGFydHMucHVzaChjaHVuayBhcyBCbG9iUGFydCk7IC8vIFRPRE8sIGNvbnNpZGVyIHZhbGlkYXRpbmc/XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBVbmV4cGVjdGVkIGRhdGEgdHlwZTogJHt0eXBlb2YgdmFsdWV9OyBjb25zdHJ1Y3RvcjogJHt2YWx1ZT8uY29uc3RydWN0b3JcbiAgICAgICAgPy5uYW1lfTsgcHJvcHM6ICR7cHJvcHNGb3JFcnJvcih2YWx1ZSl9YCxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHBhcnRzO1xufVxuXG5mdW5jdGlvbiBwcm9wc0ZvckVycm9yKHZhbHVlOiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBwcm9wcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlKTtcbiAgcmV0dXJuIGBbJHtwcm9wcy5tYXAoKHApID0+IGBcIiR7cH1cImApLmpvaW4oJywgJyl9XWA7XG59XG5cbmZ1bmN0aW9uIGdldE5hbWUodmFsdWU6IGFueSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiAoXG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLm5hbWUpIHx8XG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLmZpbGVuYW1lKSB8fFxuICAgIC8vIEZvciBmcy5SZWFkU3RyZWFtXG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLnBhdGgpPy5zcGxpdCgvW1xcXFwvXS8pLnBvcCgpXG4gICk7XG59XG5cbmNvbnN0IGdldFN0cmluZ0Zyb21NYXliZUJ1ZmZlciA9ICh4OiBzdHJpbmcgfCBCdWZmZXIgfCB1bmtub3duKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHR5cGVvZiB4ID09PSAnc3RyaW5nJykgcmV0dXJuIHg7XG4gIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB4IGluc3RhbmNlb2YgQnVmZmVyKSByZXR1cm4gU3RyaW5nKHgpO1xuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuY29uc3QgaXNBc3luY0l0ZXJhYmxlSXRlcmF0b3IgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIEFzeW5jSXRlcmFibGVJdGVyYXRvcjx1bmtub3duPiA9PlxuICB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJztcblxuZXhwb3J0IGNvbnN0IGlzTXVsdGlwYXJ0Qm9keSA9IChib2R5OiBhbnkpOiBib2R5IGlzIE11bHRpcGFydEJvZHkgPT5cbiAgYm9keSAmJiB0eXBlb2YgYm9keSA9PT0gJ29iamVjdCcgJiYgYm9keS5ib2R5ICYmIGJvZHlbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ011bHRpcGFydEJvZHknO1xuXG4vKipcbiAqIFJldHVybnMgYSBtdWx0aXBhcnQvZm9ybS1kYXRhIHJlcXVlc3QgaWYgYW55IHBhcnQgb2YgdGhlIGdpdmVuIHJlcXVlc3QgYm9keSBjb250YWlucyBhIEZpbGUgLyBCbG9iIHZhbHVlLlxuICogT3RoZXJ3aXNlIHJldHVybnMgdGhlIHJlcXVlc3QgYXMgaXMuXG4gKi9cbmV4cG9ydCBjb25zdCBtYXliZU11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyA9IGFzeW5jIDxUID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICBvcHRzOiBSZXF1ZXN0T3B0aW9uczxUPixcbik6IFByb21pc2U8UmVxdWVzdE9wdGlvbnM8VCB8IE11bHRpcGFydEJvZHk+PiA9PiB7XG4gIGlmICghaGFzVXBsb2FkYWJsZVZhbHVlKG9wdHMuYm9keSkpIHJldHVybiBvcHRzO1xuXG4gIGNvbnN0IGZvcm0gPSBhd2FpdCBjcmVhdGVGb3JtKG9wdHMuYm9keSk7XG4gIHJldHVybiBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucyhmb3JtLCBvcHRzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgPSBhc3luYyA8VCA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgb3B0czogUmVxdWVzdE9wdGlvbnM8VD4sXG4pOiBQcm9taXNlPFJlcXVlc3RPcHRpb25zPFQgfCBNdWx0aXBhcnRCb2R5Pj4gPT4ge1xuICBjb25zdCBmb3JtID0gYXdhaXQgY3JlYXRlRm9ybShvcHRzLmJvZHkpO1xuICByZXR1cm4gZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMoZm9ybSwgb3B0cyk7XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRm9ybSA9IGFzeW5jIDxUID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KGJvZHk6IFQgfCB1bmRlZmluZWQpOiBQcm9taXNlPEZvcm1EYXRhPiA9PiB7XG4gIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcbiAgYXdhaXQgUHJvbWlzZS5hbGwoT2JqZWN0LmVudHJpZXMoYm9keSB8fCB7fSkubWFwKChba2V5LCB2YWx1ZV0pID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBrZXksIHZhbHVlKSkpO1xuICByZXR1cm4gZm9ybTtcbn07XG5cbmNvbnN0IGhhc1VwbG9hZGFibGVWYWx1ZSA9ICh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4gPT4ge1xuICBpZiAoaXNVcGxvYWRhYmxlKHZhbHVlKSkgcmV0dXJuIHRydWU7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIHZhbHVlLnNvbWUoaGFzVXBsb2FkYWJsZVZhbHVlKTtcbiAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICBmb3IgKGNvbnN0IGsgaW4gdmFsdWUpIHtcbiAgICAgIGlmIChoYXNVcGxvYWRhYmxlVmFsdWUoKHZhbHVlIGFzIGFueSlba10pKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgYWRkRm9ybVZhbHVlID0gYXN5bmMgKGZvcm06IEZvcm1EYXRhLCBrZXk6IHN0cmluZywgdmFsdWU6IHVua25vd24pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgYFJlY2VpdmVkIG51bGwgZm9yIFwiJHtrZXl9XCI7IHRvIHBhc3MgbnVsbCBpbiBGb3JtRGF0YSwgeW91IG11c3QgdXNlIHRoZSBzdHJpbmcgJ251bGwnYCxcbiAgICApO1xuICB9XG5cbiAgLy8gVE9ETzogbWFrZSBuZXN0ZWQgZm9ybWF0cyBjb25maWd1cmFibGVcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgIGZvcm0uYXBwZW5kKGtleSwgU3RyaW5nKHZhbHVlKSk7XG4gIH0gZWxzZSBpZiAoaXNVcGxvYWRhYmxlKHZhbHVlKSkge1xuICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0b0ZpbGUodmFsdWUpO1xuICAgIGZvcm0uYXBwZW5kKGtleSwgZmlsZSBhcyBGaWxlKTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHZhbHVlLm1hcCgoZW50cnkpID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBrZXkgKyAnW10nLCBlbnRyeSkpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBPYmplY3QuZW50cmllcyh2YWx1ZSkubWFwKChbbmFtZSwgcHJvcF0pID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBgJHtrZXl9WyR7bmFtZX1dYCwgcHJvcCkpLFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgIGBJbnZhbGlkIHZhbHVlIGdpdmVuIHRvIGZvcm0sIGV4cGVjdGVkIGEgc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIG9iamVjdCwgQXJyYXksIEZpbGUgb3IgQmxvYiBidXQgZ290ICR7dmFsdWV9IGluc3RlYWRgLFxuICAgICk7XG4gIH1cbn07XG4iLCAiaW1wb3J0IHsgVkVSU0lPTiB9IGZyb20gXCIuL3ZlcnNpb24uanNcIjtcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gXCIuL3N0cmVhbWluZy5qc1wiO1xuaW1wb3J0IHtcbiAgQW50aHJvcGljRXJyb3IsXG4gIEFQSUVycm9yLFxuICBBUElDb25uZWN0aW9uRXJyb3IsXG4gIEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IsXG4gIEFQSVVzZXJBYm9ydEVycm9yLFxufSBmcm9tIFwiLi9lcnJvci5qc1wiO1xuaW1wb3J0IHtcbiAga2luZCBhcyBzaGltc0tpbmQsXG4gIHR5cGUgUmVhZGFibGUsXG4gIGdldERlZmF1bHRBZ2VudCxcbiAgdHlwZSBBZ2VudCxcbiAgZmV0Y2gsXG4gIHR5cGUgUmVxdWVzdEluZm8sXG4gIHR5cGUgUmVxdWVzdEluaXQsXG4gIHR5cGUgUmVzcG9uc2UsXG4gIHR5cGUgSGVhZGVyc0luaXQsXG59IGZyb20gXCIuL19zaGltcy9pbmRleC5qc1wiO1xuZXhwb3J0IHsgdHlwZSBSZXNwb25zZSB9O1xuaW1wb3J0IHsgQmxvYkxpa2UsIGlzQmxvYkxpa2UsIGlzTXVsdGlwYXJ0Qm9keSB9IGZyb20gXCIuL3VwbG9hZHMuanNcIjtcbmV4cG9ydCB7XG4gIG1heWJlTXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zLFxuICBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMsXG4gIGNyZWF0ZUZvcm0sXG4gIHR5cGUgVXBsb2FkYWJsZSxcbn0gZnJvbSBcIi4vdXBsb2Fkcy5qc1wiO1xuXG5leHBvcnQgdHlwZSBGZXRjaCA9ICh1cmw6IFJlcXVlc3RJbmZvLCBpbml0PzogUmVxdWVzdEluaXQpID0+IFByb21pc2U8UmVzcG9uc2U+O1xuXG50eXBlIFByb21pc2VPclZhbHVlPFQ+ID0gVCB8IFByb21pc2U8VD47XG5cbnR5cGUgQVBJUmVzcG9uc2VQcm9wcyA9IHtcbiAgcmVzcG9uc2U6IFJlc3BvbnNlO1xuICBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zO1xuICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXI7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBkZWZhdWx0UGFyc2VSZXNwb25zZTxUPihwcm9wczogQVBJUmVzcG9uc2VQcm9wcyk6IFByb21pc2U8VD4ge1xuICBjb25zdCB7IHJlc3BvbnNlIH0gPSBwcm9wcztcbiAgaWYgKHByb3BzLm9wdGlvbnMuc3RyZWFtKSB7XG4gICAgZGVidWcoJ3Jlc3BvbnNlJywgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS51cmwsIHJlc3BvbnNlLmhlYWRlcnMsIHJlc3BvbnNlLmJvZHkpO1xuXG4gICAgLy8gTm90ZTogdGhlcmUgaXMgYW4gaW52YXJpYW50IGhlcmUgdGhhdCBpc24ndCByZXByZXNlbnRlZCBpbiB0aGUgdHlwZSBzeXN0ZW1cbiAgICAvLyB0aGF0IGlmIHlvdSBzZXQgYHN0cmVhbTogdHJ1ZWAgdGhlIHJlc3BvbnNlIHR5cGUgbXVzdCBhbHNvIGJlIGBTdHJlYW08VD5gXG5cbiAgICBpZiAocHJvcHMub3B0aW9ucy5fX3N0cmVhbUNsYXNzKSB7XG4gICAgICByZXR1cm4gcHJvcHMub3B0aW9ucy5fX3N0cmVhbUNsYXNzLmZyb21TU0VSZXNwb25zZShyZXNwb25zZSwgcHJvcHMuY29udHJvbGxlcikgYXMgYW55O1xuICAgIH1cblxuICAgIHJldHVybiBTdHJlYW0uZnJvbVNTRVJlc3BvbnNlKHJlc3BvbnNlLCBwcm9wcy5jb250cm9sbGVyKSBhcyBhbnk7XG4gIH1cblxuICAvLyBmZXRjaCByZWZ1c2VzIHRvIHJlYWQgdGhlIGJvZHkgd2hlbiB0aGUgc3RhdHVzIGNvZGUgaXMgMjA0LlxuICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpIHtcbiAgICByZXR1cm4gbnVsbCBhcyBUO1xuICB9XG5cbiAgaWYgKHByb3BzLm9wdGlvbnMuX19iaW5hcnlSZXNwb25zZSkge1xuICAgIHJldHVybiByZXNwb25zZSBhcyB1bmtub3duIGFzIFQ7XG4gIH1cblxuICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcbiAgY29uc3QgaXNKU09OID1cbiAgICBjb250ZW50VHlwZT8uaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL2pzb24nKSB8fCBjb250ZW50VHlwZT8uaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL3ZuZC5hcGkranNvbicpO1xuICBpZiAoaXNKU09OKSB7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGRlYnVnKCdyZXNwb25zZScsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UudXJsLCByZXNwb25zZS5oZWFkZXJzLCBqc29uKTtcblxuICAgIHJldHVybiBqc29uIGFzIFQ7XG4gIH1cblxuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICBkZWJ1ZygncmVzcG9uc2UnLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnVybCwgcmVzcG9uc2UuaGVhZGVycywgdGV4dCk7XG5cbiAgLy8gVE9ETyBoYW5kbGUgYmxvYiwgYXJyYXlidWZmZXIsIG90aGVyIGNvbnRlbnQgdHlwZXMsIGV0Yy5cbiAgcmV0dXJuIHRleHQgYXMgdW5rbm93biBhcyBUO1xufVxuXG4vKipcbiAqIEEgc3ViY2xhc3Mgb2YgYFByb21pc2VgIHByb3ZpZGluZyBhZGRpdGlvbmFsIGhlbHBlciBtZXRob2RzXG4gKiBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgU0RLLlxuICovXG5leHBvcnQgY2xhc3MgQVBJUHJvbWlzZTxUPiBleHRlbmRzIFByb21pc2U8VD4ge1xuICBwcml2YXRlIHBhcnNlZFByb21pc2U6IFByb21pc2U8VD4gfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZXNwb25zZVByb21pc2U6IFByb21pc2U8QVBJUmVzcG9uc2VQcm9wcz4sXG4gICAgcHJpdmF0ZSBwYXJzZVJlc3BvbnNlOiAocHJvcHM6IEFQSVJlc3BvbnNlUHJvcHMpID0+IFByb21pc2VPclZhbHVlPFQ+ID0gZGVmYXVsdFBhcnNlUmVzcG9uc2UsXG4gICkge1xuICAgIHN1cGVyKChyZXNvbHZlKSA9PiB7XG4gICAgICAvLyB0aGlzIGlzIG1heWJlIGEgYml0IHdlaXJkIGJ1dCB0aGlzIGhhcyB0byBiZSBhIG5vLW9wIHRvIG5vdCBpbXBsaWNpdGx5XG4gICAgICAvLyBwYXJzZSB0aGUgcmVzcG9uc2UgYm9keTsgaW5zdGVhZCAudGhlbiwgLmNhdGNoLCAuZmluYWxseSBhcmUgb3ZlcnJpZGRlblxuICAgICAgLy8gdG8gcGFyc2UgdGhlIHJlc3BvbnNlXG4gICAgICByZXNvbHZlKG51bGwgYXMgYW55KTtcbiAgICB9KTtcbiAgfVxuXG4gIF90aGVuVW53cmFwPFU+KHRyYW5zZm9ybTogKGRhdGE6IFQsIHByb3BzOiBBUElSZXNwb25zZVByb3BzKSA9PiBVKTogQVBJUHJvbWlzZTxVPiB7XG4gICAgcmV0dXJuIG5ldyBBUElQcm9taXNlKHRoaXMucmVzcG9uc2VQcm9taXNlLCBhc3luYyAocHJvcHMpID0+XG4gICAgICB0cmFuc2Zvcm0oYXdhaXQgdGhpcy5wYXJzZVJlc3BvbnNlKHByb3BzKSwgcHJvcHMpLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcmF3IGBSZXNwb25zZWAgaW5zdGFuY2UgaW5zdGVhZCBvZiBwYXJzaW5nIHRoZSByZXNwb25zZVxuICAgKiBkYXRhLlxuICAgKlxuICAgKiBJZiB5b3Ugd2FudCB0byBwYXJzZSB0aGUgcmVzcG9uc2UgYm9keSBidXQgc3RpbGwgZ2V0IHRoZSBgUmVzcG9uc2VgXG4gICAqIGluc3RhbmNlLCB5b3UgY2FuIHVzZSB7QGxpbmsgd2l0aFJlc3BvbnNlKCl9LlxuICAgKlxuICAgKiBcdUQ4M0RcdURDNEIgR2V0dGluZyB0aGUgd3JvbmcgVHlwZVNjcmlwdCB0eXBlIGZvciBgUmVzcG9uc2VgP1xuICAgKiBUcnkgc2V0dGluZyBgXCJtb2R1bGVSZXNvbHV0aW9uXCI6IFwiTm9kZU5leHRcImAgaWYgeW91IGNhbixcbiAgICogb3IgYWRkIG9uZSBvZiB0aGVzZSBpbXBvcnRzIGJlZm9yZSB5b3VyIGZpcnN0IGBpbXBvcnQgXHUyMDI2IGZyb20gJ0BhbnRocm9waWMtYWkvc2RrJ2A6XG4gICAqIC0gYGltcG9ydCAnQGFudGhyb3BpYy1haS9zZGsvc2hpbXMvbm9kZSdgIChpZiB5b3UncmUgcnVubmluZyBvbiBOb2RlKVxuICAgKiAtIGBpbXBvcnQgJ0BhbnRocm9waWMtYWkvc2RrL3NoaW1zL3dlYidgIChvdGhlcndpc2UpXG4gICAqL1xuICBhc1Jlc3BvbnNlKCk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5yZXNwb25zZVByb21pc2UudGhlbigocCkgPT4gcC5yZXNwb25zZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgdGhlIHBhcnNlZCByZXNwb25zZSBkYXRhIGFuZCB0aGUgcmF3IGBSZXNwb25zZWAgaW5zdGFuY2UuXG4gICAqXG4gICAqIElmIHlvdSBqdXN0IHdhbnQgdG8gZ2V0IHRoZSByYXcgYFJlc3BvbnNlYCBpbnN0YW5jZSB3aXRob3V0IHBhcnNpbmcgaXQsXG4gICAqIHlvdSBjYW4gdXNlIHtAbGluayBhc1Jlc3BvbnNlKCl9LlxuICAgKlxuICAgKlxuICAgKiBcdUQ4M0RcdURDNEIgR2V0dGluZyB0aGUgd3JvbmcgVHlwZVNjcmlwdCB0eXBlIGZvciBgUmVzcG9uc2VgP1xuICAgKiBUcnkgc2V0dGluZyBgXCJtb2R1bGVSZXNvbHV0aW9uXCI6IFwiTm9kZU5leHRcImAgaWYgeW91IGNhbixcbiAgICogb3IgYWRkIG9uZSBvZiB0aGVzZSBpbXBvcnRzIGJlZm9yZSB5b3VyIGZpcnN0IGBpbXBvcnQgXHUyMDI2IGZyb20gJ0BhbnRocm9waWMtYWkvc2RrJ2A6XG4gICAqIC0gYGltcG9ydCAnQGFudGhyb3BpYy1haS9zZGsvc2hpbXMvbm9kZSdgIChpZiB5b3UncmUgcnVubmluZyBvbiBOb2RlKVxuICAgKiAtIGBpbXBvcnQgJ0BhbnRocm9waWMtYWkvc2RrL3NoaW1zL3dlYidgIChvdGhlcndpc2UpXG4gICAqL1xuICBhc3luYyB3aXRoUmVzcG9uc2UoKTogUHJvbWlzZTx7IGRhdGE6IFQ7IHJlc3BvbnNlOiBSZXNwb25zZSB9PiB7XG4gICAgY29uc3QgW2RhdGEsIHJlc3BvbnNlXSA9IGF3YWl0IFByb21pc2UuYWxsKFt0aGlzLnBhcnNlKCksIHRoaXMuYXNSZXNwb25zZSgpXSk7XG4gICAgcmV0dXJuIHsgZGF0YSwgcmVzcG9uc2UgfTtcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2UoKTogUHJvbWlzZTxUPiB7XG4gICAgaWYgKCF0aGlzLnBhcnNlZFByb21pc2UpIHtcbiAgICAgIHRoaXMucGFyc2VkUHJvbWlzZSA9IHRoaXMucmVzcG9uc2VQcm9taXNlLnRoZW4odGhpcy5wYXJzZVJlc3BvbnNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucGFyc2VkUHJvbWlzZTtcbiAgfVxuXG4gIG92ZXJyaWRlIHRoZW48VFJlc3VsdDEgPSBULCBUUmVzdWx0MiA9IG5ldmVyPihcbiAgICBvbmZ1bGZpbGxlZD86ICgodmFsdWU6IFQpID0+IFRSZXN1bHQxIHwgUHJvbWlzZUxpa2U8VFJlc3VsdDE+KSB8IHVuZGVmaW5lZCB8IG51bGwsXG4gICAgb25yZWplY3RlZD86ICgocmVhc29uOiBhbnkpID0+IFRSZXN1bHQyIHwgUHJvbWlzZUxpa2U8VFJlc3VsdDI+KSB8IHVuZGVmaW5lZCB8IG51bGwsXG4gICk6IFByb21pc2U8VFJlc3VsdDEgfCBUUmVzdWx0Mj4ge1xuICAgIHJldHVybiB0aGlzLnBhcnNlKCkudGhlbihvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCk7XG4gIH1cblxuICBvdmVycmlkZSBjYXRjaDxUUmVzdWx0ID0gbmV2ZXI+KFxuICAgIG9ucmVqZWN0ZWQ/OiAoKHJlYXNvbjogYW55KSA9PiBUUmVzdWx0IHwgUHJvbWlzZUxpa2U8VFJlc3VsdD4pIHwgdW5kZWZpbmVkIHwgbnVsbCxcbiAgKTogUHJvbWlzZTxUIHwgVFJlc3VsdD4ge1xuICAgIHJldHVybiB0aGlzLnBhcnNlKCkuY2F0Y2gob25yZWplY3RlZCk7XG4gIH1cblxuICBvdmVycmlkZSBmaW5hbGx5KG9uZmluYWxseT86ICgoKSA9PiB2b2lkKSB8IHVuZGVmaW5lZCB8IG51bGwpOiBQcm9taXNlPFQ+IHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZSgpLmZpbmFsbHkob25maW5hbGx5KTtcbiAgfVxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQVBJQ2xpZW50IHtcbiAgYmFzZVVSTDogc3RyaW5nO1xuICBtYXhSZXRyaWVzOiBudW1iZXI7XG4gIHRpbWVvdXQ6IG51bWJlcjtcbiAgaHR0cEFnZW50OiBBZ2VudCB8IHVuZGVmaW5lZDtcblxuICBwcml2YXRlIGZldGNoOiBGZXRjaDtcbiAgcHJvdGVjdGVkIGlkZW1wb3RlbmN5SGVhZGVyPzogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBiYXNlVVJMLFxuICAgIG1heFJldHJpZXMgPSAyLFxuICAgIHRpbWVvdXQgPSA2MDAwMDAsIC8vIDEwIG1pbnV0ZXNcbiAgICBodHRwQWdlbnQsXG4gICAgZmV0Y2g6IG92ZXJyaWRlbkZldGNoLFxuICB9OiB7XG4gICAgYmFzZVVSTDogc3RyaW5nO1xuICAgIG1heFJldHJpZXM/OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gICAgdGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgIGh0dHBBZ2VudDogQWdlbnQgfCB1bmRlZmluZWQ7XG4gICAgZmV0Y2g6IEZldGNoIHwgdW5kZWZpbmVkO1xuICB9KSB7XG4gICAgdGhpcy5iYXNlVVJMID0gYmFzZVVSTDtcbiAgICB0aGlzLm1heFJldHJpZXMgPSB2YWxpZGF0ZVBvc2l0aXZlSW50ZWdlcignbWF4UmV0cmllcycsIG1heFJldHJpZXMpO1xuICAgIHRoaXMudGltZW91dCA9IHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyKCd0aW1lb3V0JywgdGltZW91dCk7XG4gICAgdGhpcy5odHRwQWdlbnQgPSBodHRwQWdlbnQ7XG5cbiAgICB0aGlzLmZldGNoID0gb3ZlcnJpZGVuRmV0Y2ggPz8gZmV0Y2g7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXV0aEhlYWRlcnMob3B0czogRmluYWxSZXF1ZXN0T3B0aW9ucyk6IEhlYWRlcnMge1xuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGlzIHRvIGFkZCB5b3VyIG93biBkZWZhdWx0IGhlYWRlcnMsIGZvciBleGFtcGxlOlxuICAgKlxuICAgKiAge1xuICAgKiAgICAuLi5zdXBlci5kZWZhdWx0SGVhZGVycygpLFxuICAgKiAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyIDEyMycsXG4gICAqICB9XG4gICAqL1xuICBwcm90ZWN0ZWQgZGVmYXVsdEhlYWRlcnMob3B0czogRmluYWxSZXF1ZXN0T3B0aW9ucyk6IEhlYWRlcnMge1xuICAgIHJldHVybiB7XG4gICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnVXNlci1BZ2VudCc6IHRoaXMuZ2V0VXNlckFnZW50KCksXG4gICAgICAuLi5nZXRQbGF0Zm9ybUhlYWRlcnMoKSxcbiAgICAgIC4uLnRoaXMuYXV0aEhlYWRlcnMob3B0cyksXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBkZWZhdWx0UXVlcnkoKTogRGVmYXVsdFF1ZXJ5IHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGlzIHRvIGFkZCB5b3VyIG93biBoZWFkZXJzIHZhbGlkYXRpb246XG4gICAqL1xuICBwcm90ZWN0ZWQgdmFsaWRhdGVIZWFkZXJzKGhlYWRlcnM6IEhlYWRlcnMsIGN1c3RvbUhlYWRlcnM6IEhlYWRlcnMpIHt9XG5cbiAgcHJvdGVjdGVkIGRlZmF1bHRJZGVtcG90ZW5jeUtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgc3RhaW5sZXNzLW5vZGUtcmV0cnktJHt1dWlkNCgpfWA7XG4gIH1cblxuICBnZXQ8UmVxLCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdnZXQnLCBwYXRoLCBvcHRzKTtcbiAgfVxuXG4gIHBvc3Q8UmVxLCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdwb3N0JywgcGF0aCwgb3B0cyk7XG4gIH1cblxuICBwYXRjaDxSZXEsIFJzcD4ocGF0aDogc3RyaW5nLCBvcHRzPzogUHJvbWlzZU9yVmFsdWU8UmVxdWVzdE9wdGlvbnM8UmVxPj4pOiBBUElQcm9taXNlPFJzcD4ge1xuICAgIHJldHVybiB0aGlzLm1ldGhvZFJlcXVlc3QoJ3BhdGNoJywgcGF0aCwgb3B0cyk7XG4gIH1cblxuICBwdXQ8UmVxLCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdwdXQnLCBwYXRoLCBvcHRzKTtcbiAgfVxuXG4gIGRlbGV0ZTxSZXEsIFJzcD4ocGF0aDogc3RyaW5nLCBvcHRzPzogUHJvbWlzZU9yVmFsdWU8UmVxdWVzdE9wdGlvbnM8UmVxPj4pOiBBUElQcm9taXNlPFJzcD4ge1xuICAgIHJldHVybiB0aGlzLm1ldGhvZFJlcXVlc3QoJ2RlbGV0ZScsIHBhdGgsIG9wdHMpO1xuICB9XG5cbiAgcHJpdmF0ZSBtZXRob2RSZXF1ZXN0PFJlcSwgUnNwPihcbiAgICBtZXRob2Q6IEhUVFBNZXRob2QsXG4gICAgcGF0aDogc3RyaW5nLFxuICAgIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+PixcbiAgKTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KFxuICAgICAgUHJvbWlzZS5yZXNvbHZlKG9wdHMpLnRoZW4oYXN5bmMgKG9wdHMpID0+IHtcbiAgICAgICAgY29uc3QgYm9keSA9XG4gICAgICAgICAgb3B0cyAmJiBpc0Jsb2JMaWtlKG9wdHM/LmJvZHkpID8gbmV3IERhdGFWaWV3KGF3YWl0IG9wdHMuYm9keS5hcnJheUJ1ZmZlcigpKVxuICAgICAgICAgIDogb3B0cz8uYm9keSBpbnN0YW5jZW9mIERhdGFWaWV3ID8gb3B0cy5ib2R5XG4gICAgICAgICAgOiBvcHRzPy5ib2R5IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgPyBuZXcgRGF0YVZpZXcob3B0cy5ib2R5KVxuICAgICAgICAgIDogb3B0cyAmJiBBcnJheUJ1ZmZlci5pc1ZpZXcob3B0cz8uYm9keSkgPyBuZXcgRGF0YVZpZXcob3B0cy5ib2R5LmJ1ZmZlcilcbiAgICAgICAgICA6IG9wdHM/LmJvZHk7XG4gICAgICAgIHJldHVybiB7IG1ldGhvZCwgcGF0aCwgLi4ub3B0cywgYm9keSB9O1xuICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG4gIGdldEFQSUxpc3Q8SXRlbSwgUGFnZUNsYXNzIGV4dGVuZHMgQWJzdHJhY3RQYWdlPEl0ZW0+ID0gQWJzdHJhY3RQYWdlPEl0ZW0+PihcbiAgICBwYXRoOiBzdHJpbmcsXG4gICAgUGFnZTogbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gUGFnZUNsYXNzLFxuICAgIG9wdHM/OiBSZXF1ZXN0T3B0aW9uczxhbnk+LFxuICApOiBQYWdlUHJvbWlzZTxQYWdlQ2xhc3MsIEl0ZW0+IHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0QVBJTGlzdChQYWdlLCB7IG1ldGhvZDogJ2dldCcsIHBhdGgsIC4uLm9wdHMgfSk7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZUNvbnRlbnRMZW5ndGgoYm9keTogdW5rbm93bik6IHN0cmluZyB8IG51bGwge1xuICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gQnVmZmVyLmJ5dGVMZW5ndGgoYm9keSwgJ3V0ZjgnKS50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIFRleHRFbmNvZGVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgICAgIGNvbnN0IGVuY29kZWQgPSBlbmNvZGVyLmVuY29kZShib2R5KTtcbiAgICAgICAgcmV0dXJuIGVuY29kZWQubGVuZ3RoLnRvU3RyaW5nKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoYm9keSkpIHtcbiAgICAgIHJldHVybiBib2R5LmJ5dGVMZW5ndGgudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGJ1aWxkUmVxdWVzdDxSZXE+KFxuICAgIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnM8UmVxPixcbiAgICB7IHJldHJ5Q291bnQgPSAwIH06IHsgcmV0cnlDb3VudD86IG51bWJlciB9ID0ge30sXG4gICk6IHsgcmVxOiBSZXF1ZXN0SW5pdDsgdXJsOiBzdHJpbmc7IHRpbWVvdXQ6IG51bWJlciB9IHtcbiAgICBjb25zdCB7IG1ldGhvZCwgcGF0aCwgcXVlcnksIGhlYWRlcnM6IGhlYWRlcnMgPSB7fSB9ID0gb3B0aW9ucztcblxuICAgIGNvbnN0IGJvZHkgPVxuICAgICAgQXJyYXlCdWZmZXIuaXNWaWV3KG9wdGlvbnMuYm9keSkgfHwgKG9wdGlvbnMuX19iaW5hcnlSZXF1ZXN0ICYmIHR5cGVvZiBvcHRpb25zLmJvZHkgPT09ICdzdHJpbmcnKSA/XG4gICAgICAgIG9wdGlvbnMuYm9keVxuICAgICAgOiBpc011bHRpcGFydEJvZHkob3B0aW9ucy5ib2R5KSA/IG9wdGlvbnMuYm9keS5ib2R5XG4gICAgICA6IG9wdGlvbnMuYm9keSA/IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuYm9keSwgbnVsbCwgMilcbiAgICAgIDogbnVsbDtcbiAgICBjb25zdCBjb250ZW50TGVuZ3RoID0gdGhpcy5jYWxjdWxhdGVDb250ZW50TGVuZ3RoKGJvZHkpO1xuXG4gICAgY29uc3QgdXJsID0gdGhpcy5idWlsZFVSTChwYXRoISwgcXVlcnkpO1xuICAgIGlmICgndGltZW91dCcgaW4gb3B0aW9ucykgdmFsaWRhdGVQb3NpdGl2ZUludGVnZXIoJ3RpbWVvdXQnLCBvcHRpb25zLnRpbWVvdXQpO1xuICAgIGNvbnN0IHRpbWVvdXQgPSBvcHRpb25zLnRpbWVvdXQgPz8gdGhpcy50aW1lb3V0O1xuICAgIGNvbnN0IGh0dHBBZ2VudCA9IG9wdGlvbnMuaHR0cEFnZW50ID8/IHRoaXMuaHR0cEFnZW50ID8/IGdldERlZmF1bHRBZ2VudCh1cmwpO1xuICAgIGNvbnN0IG1pbkFnZW50VGltZW91dCA9IHRpbWVvdXQgKyAxMDAwO1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiAoaHR0cEFnZW50IGFzIGFueSk/Lm9wdGlvbnM/LnRpbWVvdXQgPT09ICdudW1iZXInICYmXG4gICAgICBtaW5BZ2VudFRpbWVvdXQgPiAoKGh0dHBBZ2VudCBhcyBhbnkpLm9wdGlvbnMudGltZW91dCA/PyAwKVxuICAgICkge1xuICAgICAgLy8gQWxsb3cgYW55IGdpdmVuIHJlcXVlc3QgdG8gYnVtcCBvdXIgYWdlbnQgYWN0aXZlIHNvY2tldCB0aW1lb3V0LlxuICAgICAgLy8gVGhpcyBtYXkgc2VlbSBzdHJhbmdlLCBidXQgbGVha2luZyBhY3RpdmUgc29ja2V0cyBzaG91bGQgYmUgcmFyZSBhbmQgbm90IHBhcnRpY3VsYXJseSBwcm9ibGVtYXRpYyxcbiAgICAgIC8vIGFuZCB3aXRob3V0IG11dGF0aW5nIGFnZW50IHdlIHdvdWxkIG5lZWQgdG8gY3JlYXRlIG1vcmUgb2YgdGhlbS5cbiAgICAgIC8vIFRoaXMgdHJhZGVvZmYgb3B0aW1pemVzIGZvciBwZXJmb3JtYW5jZS5cbiAgICAgIChodHRwQWdlbnQgYXMgYW55KS5vcHRpb25zLnRpbWVvdXQgPSBtaW5BZ2VudFRpbWVvdXQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaWRlbXBvdGVuY3lIZWFkZXIgJiYgbWV0aG9kICE9PSAnZ2V0Jykge1xuICAgICAgaWYgKCFvcHRpb25zLmlkZW1wb3RlbmN5S2V5KSBvcHRpb25zLmlkZW1wb3RlbmN5S2V5ID0gdGhpcy5kZWZhdWx0SWRlbXBvdGVuY3lLZXkoKTtcbiAgICAgIGhlYWRlcnNbdGhpcy5pZGVtcG90ZW5jeUhlYWRlcl0gPSBvcHRpb25zLmlkZW1wb3RlbmN5S2V5O1xuICAgIH1cblxuICAgIGNvbnN0IHJlcUhlYWRlcnMgPSB0aGlzLmJ1aWxkSGVhZGVycyh7IG9wdGlvbnMsIGhlYWRlcnMsIGNvbnRlbnRMZW5ndGgsIHJldHJ5Q291bnQgfSk7XG5cbiAgICBjb25zdCByZXE6IFJlcXVlc3RJbml0ID0ge1xuICAgICAgbWV0aG9kLFxuICAgICAgLi4uKGJvZHkgJiYgeyBib2R5OiBib2R5IGFzIGFueSB9KSxcbiAgICAgIGhlYWRlcnM6IHJlcUhlYWRlcnMsXG4gICAgICAuLi4oaHR0cEFnZW50ICYmIHsgYWdlbnQ6IGh0dHBBZ2VudCB9KSxcbiAgICAgIC8vIEB0cy1pZ25vcmUgbm9kZS1mZXRjaCB1c2VzIGEgY3VzdG9tIEFib3J0U2lnbmFsIHR5cGUgdGhhdCBpc1xuICAgICAgLy8gbm90IGNvbXBhdGlibGUgd2l0aCBzdGFuZGFyZCB3ZWIgdHlwZXNcbiAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwgPz8gbnVsbCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHsgcmVxLCB1cmwsIHRpbWVvdXQgfTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRIZWFkZXJzKHtcbiAgICBvcHRpb25zLFxuICAgIGhlYWRlcnMsXG4gICAgY29udGVudExlbmd0aCxcbiAgICByZXRyeUNvdW50LFxuICB9OiB7XG4gICAgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucztcbiAgICBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkPjtcbiAgICBjb250ZW50TGVuZ3RoOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuICAgIHJldHJ5Q291bnQ6IG51bWJlcjtcbiAgfSk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgIGNvbnN0IHJlcUhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICBpZiAoY29udGVudExlbmd0aCkge1xuICAgICAgcmVxSGVhZGVyc1snY29udGVudC1sZW5ndGgnXSA9IGNvbnRlbnRMZW5ndGg7XG4gICAgfVxuXG4gICAgY29uc3QgZGVmYXVsdEhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzKG9wdGlvbnMpO1xuICAgIGFwcGx5SGVhZGVyc011dChyZXFIZWFkZXJzLCBkZWZhdWx0SGVhZGVycyk7XG4gICAgYXBwbHlIZWFkZXJzTXV0KHJlcUhlYWRlcnMsIGhlYWRlcnMpO1xuXG4gICAgLy8gbGV0IGJ1aWx0aW4gZmV0Y2ggc2V0IHRoZSBDb250ZW50LVR5cGUgZm9yIG11bHRpcGFydCBib2RpZXNcbiAgICBpZiAoaXNNdWx0aXBhcnRCb2R5KG9wdGlvbnMuYm9keSkgJiYgc2hpbXNLaW5kICE9PSAnbm9kZScpIHtcbiAgICAgIGRlbGV0ZSByZXFIZWFkZXJzWydjb250ZW50LXR5cGUnXTtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBzZXQgdGhlIHJldHJ5IGNvdW50IGhlYWRlciBpZiBpdCB3YXMgYWxyZWFkeSBzZXQgb3IgcmVtb3ZlZCB0aHJvdWdoIGRlZmF1bHQgaGVhZGVycyBvciBieSB0aGVcbiAgICAvLyBjYWxsZXIuIFdlIGNoZWNrIGBkZWZhdWx0SGVhZGVyc2AgYW5kIGBoZWFkZXJzYCwgd2hpY2ggY2FuIGNvbnRhaW4gbnVsbHMsIGluc3RlYWQgb2YgYHJlcUhlYWRlcnNgIHRvXG4gICAgLy8gYWNjb3VudCBmb3IgdGhlIHJlbW92YWwgY2FzZS5cbiAgICBpZiAoXG4gICAgICBnZXRIZWFkZXIoZGVmYXVsdEhlYWRlcnMsICd4LXN0YWlubGVzcy1yZXRyeS1jb3VudCcpID09PSB1bmRlZmluZWQgJiZcbiAgICAgIGdldEhlYWRlcihoZWFkZXJzLCAneC1zdGFpbmxlc3MtcmV0cnktY291bnQnKSA9PT0gdW5kZWZpbmVkXG4gICAgKSB7XG4gICAgICByZXFIZWFkZXJzWyd4LXN0YWlubGVzcy1yZXRyeS1jb3VudCddID0gU3RyaW5nKHJldHJ5Q291bnQpO1xuICAgIH1cblxuICAgIHRoaXMudmFsaWRhdGVIZWFkZXJzKHJlcUhlYWRlcnMsIGhlYWRlcnMpO1xuXG4gICAgcmV0dXJuIHJlcUhlYWRlcnM7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBhcyBhIGNhbGxiYWNrIGZvciBtdXRhdGluZyB0aGUgZ2l2ZW4gYEZpbmFsUmVxdWVzdE9wdGlvbnNgIG9iamVjdC5cbiAgICovXG4gIHByb3RlY3RlZCBhc3luYyBwcmVwYXJlT3B0aW9ucyhvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7fVxuXG4gIC8qKlxuICAgKiBVc2VkIGFzIGEgY2FsbGJhY2sgZm9yIG11dGF0aW5nIHRoZSBnaXZlbiBgUmVxdWVzdEluaXRgIG9iamVjdC5cbiAgICpcbiAgICogVGhpcyBpcyB1c2VmdWwgZm9yIGNhc2VzIHdoZXJlIHlvdSB3YW50IHRvIGFkZCBjZXJ0YWluIGhlYWRlcnMgYmFzZWQgb2ZmIG9mXG4gICAqIHRoZSByZXF1ZXN0IHByb3BlcnRpZXMsIGUuZy4gYG1ldGhvZGAgb3IgYHVybGAuXG4gICAqL1xuICBwcm90ZWN0ZWQgYXN5bmMgcHJlcGFyZVJlcXVlc3QoXG4gICAgcmVxdWVzdDogUmVxdWVzdEluaXQsXG4gICAgeyB1cmwsIG9wdGlvbnMgfTogeyB1cmw6IHN0cmluZzsgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyB9LFxuICApOiBQcm9taXNlPHZvaWQ+IHt9XG5cbiAgcHJvdGVjdGVkIHBhcnNlSGVhZGVycyhoZWFkZXJzOiBIZWFkZXJzSW5pdCB8IG51bGwgfCB1bmRlZmluZWQpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICByZXR1cm4gKFxuICAgICAgIWhlYWRlcnMgPyB7fVxuICAgICAgOiBTeW1ib2wuaXRlcmF0b3IgaW4gaGVhZGVycyA/XG4gICAgICAgIE9iamVjdC5mcm9tRW50cmllcyhBcnJheS5mcm9tKGhlYWRlcnMgYXMgSXRlcmFibGU8c3RyaW5nW10+KS5tYXAoKGhlYWRlcikgPT4gWy4uLmhlYWRlcl0pKVxuICAgICAgOiB7IC4uLmhlYWRlcnMgfVxuICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgbWFrZVN0YXR1c0Vycm9yKFxuICAgIHN0YXR1czogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICAgIGVycm9yOiBPYmplY3QgfCB1bmRlZmluZWQsXG4gICAgbWVzc2FnZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgIGhlYWRlcnM6IEhlYWRlcnMgfCB1bmRlZmluZWQsXG4gICkge1xuICAgIHJldHVybiBBUElFcnJvci5nZW5lcmF0ZShzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgfVxuXG4gIHJlcXVlc3Q8UmVxLCBSc3A+KFxuICAgIG9wdGlvbnM6IFByb21pc2VPclZhbHVlPEZpbmFsUmVxdWVzdE9wdGlvbnM8UmVxPj4sXG4gICAgcmVtYWluaW5nUmV0cmllczogbnVtYmVyIHwgbnVsbCA9IG51bGwsXG4gICk6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIG5ldyBBUElQcm9taXNlKHRoaXMubWFrZVJlcXVlc3Qob3B0aW9ucywgcmVtYWluaW5nUmV0cmllcykpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBtYWtlUmVxdWVzdDxSZXE+KFxuICAgIG9wdGlvbnNJbnB1dDogUHJvbWlzZU9yVmFsdWU8RmluYWxSZXF1ZXN0T3B0aW9uczxSZXE+PixcbiAgICByZXRyaWVzUmVtYWluaW5nOiBudW1iZXIgfCBudWxsLFxuICApOiBQcm9taXNlPEFQSVJlc3BvbnNlUHJvcHM+IHtcbiAgICBjb25zdCBvcHRpb25zID0gYXdhaXQgb3B0aW9uc0lucHV0O1xuICAgIGNvbnN0IG1heFJldHJpZXMgPSBvcHRpb25zLm1heFJldHJpZXMgPz8gdGhpcy5tYXhSZXRyaWVzO1xuICAgIGlmIChyZXRyaWVzUmVtYWluaW5nID09IG51bGwpIHtcbiAgICAgIHJldHJpZXNSZW1haW5pbmcgPSBtYXhSZXRyaWVzO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucHJlcGFyZU9wdGlvbnMob3B0aW9ucyk7XG5cbiAgICBjb25zdCB7IHJlcSwgdXJsLCB0aW1lb3V0IH0gPSB0aGlzLmJ1aWxkUmVxdWVzdChvcHRpb25zLCB7IHJldHJ5Q291bnQ6IG1heFJldHJpZXMgLSByZXRyaWVzUmVtYWluaW5nIH0pO1xuXG4gICAgYXdhaXQgdGhpcy5wcmVwYXJlUmVxdWVzdChyZXEsIHsgdXJsLCBvcHRpb25zIH0pO1xuXG4gICAgZGVidWcoJ3JlcXVlc3QnLCB1cmwsIG9wdGlvbnMsIHJlcS5oZWFkZXJzKTtcblxuICAgIGlmIChvcHRpb25zLnNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgdGhyb3cgbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgfVxuXG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZmV0Y2hXaXRoVGltZW91dCh1cmwsIHJlcSwgdGltZW91dCwgY29udHJvbGxlcikuY2F0Y2goY2FzdFRvRXJyb3IpO1xuXG4gICAgaWYgKHJlc3BvbnNlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGlmIChvcHRpb25zLnNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgQVBJVXNlckFib3J0RXJyb3IoKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXRyaWVzUmVtYWluaW5nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJldHJ5UmVxdWVzdChvcHRpb25zLCByZXRyaWVzUmVtYWluaW5nKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXNwb25zZS5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IoKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBBUElDb25uZWN0aW9uRXJyb3IoeyBjYXVzZTogcmVzcG9uc2UgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzcG9uc2VIZWFkZXJzID0gY3JlYXRlUmVzcG9uc2VIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgaWYgKHJldHJpZXNSZW1haW5pbmcgJiYgdGhpcy5zaG91bGRSZXRyeShyZXNwb25zZSkpIHtcbiAgICAgICAgY29uc3QgcmV0cnlNZXNzYWdlID0gYHJldHJ5aW5nLCAke3JldHJpZXNSZW1haW5pbmd9IGF0dGVtcHRzIHJlbWFpbmluZ2A7XG4gICAgICAgIGRlYnVnKGByZXNwb25zZSAoZXJyb3I7ICR7cmV0cnlNZXNzYWdlfSlgLCByZXNwb25zZS5zdGF0dXMsIHVybCwgcmVzcG9uc2VIZWFkZXJzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmV0cnlSZXF1ZXN0KG9wdGlvbnMsIHJldHJpZXNSZW1haW5pbmcsIHJlc3BvbnNlSGVhZGVycyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVyclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCkuY2F0Y2goKGUpID0+IGNhc3RUb0Vycm9yKGUpLm1lc3NhZ2UpO1xuICAgICAgY29uc3QgZXJySlNPTiA9IHNhZmVKU09OKGVyclRleHQpO1xuICAgICAgY29uc3QgZXJyTWVzc2FnZSA9IGVyckpTT04gPyB1bmRlZmluZWQgOiBlcnJUZXh0O1xuICAgICAgY29uc3QgcmV0cnlNZXNzYWdlID0gcmV0cmllc1JlbWFpbmluZyA/IGAoZXJyb3I7IG5vIG1vcmUgcmV0cmllcyBsZWZ0KWAgOiBgKGVycm9yOyBub3QgcmV0cnlhYmxlKWA7XG5cbiAgICAgIGRlYnVnKGByZXNwb25zZSAoZXJyb3I7ICR7cmV0cnlNZXNzYWdlfSlgLCByZXNwb25zZS5zdGF0dXMsIHVybCwgcmVzcG9uc2VIZWFkZXJzLCBlcnJNZXNzYWdlKTtcblxuICAgICAgY29uc3QgZXJyID0gdGhpcy5tYWtlU3RhdHVzRXJyb3IocmVzcG9uc2Uuc3RhdHVzLCBlcnJKU09OLCBlcnJNZXNzYWdlLCByZXNwb25zZUhlYWRlcnMpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cblxuICAgIHJldHVybiB7IHJlc3BvbnNlLCBvcHRpb25zLCBjb250cm9sbGVyIH07XG4gIH1cblxuICByZXF1ZXN0QVBJTGlzdDxJdGVtID0gdW5rbm93biwgUGFnZUNsYXNzIGV4dGVuZHMgQWJzdHJhY3RQYWdlPEl0ZW0+ID0gQWJzdHJhY3RQYWdlPEl0ZW0+PihcbiAgICBQYWdlOiBuZXcgKC4uLmFyZ3M6IENvbnN0cnVjdG9yUGFyYW1ldGVyczx0eXBlb2YgQWJzdHJhY3RQYWdlPikgPT4gUGFnZUNsYXNzLFxuICAgIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnMsXG4gICk6IFBhZ2VQcm9taXNlPFBhZ2VDbGFzcywgSXRlbT4ge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLm1ha2VSZXF1ZXN0KG9wdGlvbnMsIG51bGwpO1xuICAgIHJldHVybiBuZXcgUGFnZVByb21pc2U8UGFnZUNsYXNzLCBJdGVtPih0aGlzLCByZXF1ZXN0LCBQYWdlKTtcbiAgfVxuXG4gIGJ1aWxkVVJMPFJlcT4ocGF0aDogc3RyaW5nLCBxdWVyeTogUmVxIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXJsID1cbiAgICAgIGlzQWJzb2x1dGVVUkwocGF0aCkgP1xuICAgICAgICBuZXcgVVJMKHBhdGgpXG4gICAgICA6IG5ldyBVUkwodGhpcy5iYXNlVVJMICsgKHRoaXMuYmFzZVVSTC5lbmRzV2l0aCgnLycpICYmIHBhdGguc3RhcnRzV2l0aCgnLycpID8gcGF0aC5zbGljZSgxKSA6IHBhdGgpKTtcblxuICAgIGNvbnN0IGRlZmF1bHRRdWVyeSA9IHRoaXMuZGVmYXVsdFF1ZXJ5KCk7XG4gICAgaWYgKCFpc0VtcHR5T2JqKGRlZmF1bHRRdWVyeSkpIHtcbiAgICAgIHF1ZXJ5ID0geyAuLi5kZWZhdWx0UXVlcnksIC4uLnF1ZXJ5IH0gYXMgUmVxO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcXVlcnkgPT09ICdvYmplY3QnICYmIHF1ZXJ5ICYmICFBcnJheS5pc0FycmF5KHF1ZXJ5KSkge1xuICAgICAgdXJsLnNlYXJjaCA9IHRoaXMuc3RyaW5naWZ5UXVlcnkocXVlcnkgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pO1xuICAgIH1cblxuICAgIHJldHVybiB1cmwudG9TdHJpbmcoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzdHJpbmdpZnlRdWVyeShxdWVyeTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pOiBzdHJpbmcge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhxdWVyeSlcbiAgICAgIC5maWx0ZXIoKFtfLCB2YWx1ZV0pID0+IHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgIHJldHVybiBgJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT1gO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihcbiAgICAgICAgICBgQ2Fubm90IHN0cmluZ2lmeSB0eXBlICR7dHlwZW9mIHZhbHVlfTsgRXhwZWN0ZWQgc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIG9yIG51bGwuIElmIHlvdSBuZWVkIHRvIHBhc3MgbmVzdGVkIHF1ZXJ5IHBhcmFtZXRlcnMsIHlvdSBjYW4gbWFudWFsbHkgZW5jb2RlIHRoZW0sIGUuZy4geyBxdWVyeTogeyAnZm9vW2tleTFdJzogdmFsdWUxLCAnZm9vW2tleTJdJzogdmFsdWUyIH0gfSwgYW5kIHBsZWFzZSBvcGVuIGEgR2l0SHViIGlzc3VlIHJlcXVlc3RpbmcgYmV0dGVyIHN1cHBvcnQgZm9yIHlvdXIgdXNlIGNhc2UuYCxcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgICAuam9pbignJicpO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hXaXRoVGltZW91dChcbiAgICB1cmw6IFJlcXVlc3RJbmZvLFxuICAgIGluaXQ6IFJlcXVlc3RJbml0IHwgdW5kZWZpbmVkLFxuICAgIG1zOiBudW1iZXIsXG4gICAgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyLFxuICApOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gICAgY29uc3QgeyBzaWduYWwsIC4uLm9wdGlvbnMgfSA9IGluaXQgfHwge307XG4gICAgaWYgKHNpZ25hbCkgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgKCkgPT4gY29udHJvbGxlci5hYm9ydCgpKTtcblxuICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgbXMpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuZ2V0UmVxdWVzdENsaWVudCgpXG4gICAgICAgIC8vIHVzZSB1bmRlZmluZWQgdGhpcyBiaW5kaW5nOyBmZXRjaCBlcnJvcnMgaWYgYm91bmQgdG8gc29tZXRoaW5nIGVsc2UgaW4gYnJvd3Nlci9jbG91ZGZsYXJlXG4gICAgICAgIC5mZXRjaC5jYWxsKHVuZGVmaW5lZCwgdXJsLCB7IHNpZ25hbDogY29udHJvbGxlci5zaWduYWwgYXMgYW55LCAuLi5vcHRpb25zIH0pXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRSZXF1ZXN0Q2xpZW50KCk6IFJlcXVlc3RDbGllbnQge1xuICAgIHJldHVybiB7IGZldGNoOiB0aGlzLmZldGNoIH07XG4gIH1cblxuICBwcml2YXRlIHNob3VsZFJldHJ5KHJlc3BvbnNlOiBSZXNwb25zZSk6IGJvb2xlYW4ge1xuICAgIC8vIE5vdGUgdGhpcyBpcyBub3QgYSBzdGFuZGFyZCBoZWFkZXIuXG4gICAgY29uc3Qgc2hvdWxkUmV0cnlIZWFkZXIgPSByZXNwb25zZS5oZWFkZXJzLmdldCgneC1zaG91bGQtcmV0cnknKTtcblxuICAgIC8vIElmIHRoZSBzZXJ2ZXIgZXhwbGljaXRseSBzYXlzIHdoZXRoZXIgb3Igbm90IHRvIHJldHJ5LCBvYmV5LlxuICAgIGlmIChzaG91bGRSZXRyeUhlYWRlciA9PT0gJ3RydWUnKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoc2hvdWxkUmV0cnlIZWFkZXIgPT09ICdmYWxzZScpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIFJldHJ5IG9uIHJlcXVlc3QgdGltZW91dHMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA4KSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIFJldHJ5IG9uIGxvY2sgdGltZW91dHMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIFJldHJ5IG9uIHJhdGUgbGltaXRzLlxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQyOSkgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBSZXRyeSBpbnRlcm5hbCBlcnJvcnMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA1MDApIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZXRyeVJlcXVlc3QoXG4gICAgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyxcbiAgICByZXRyaWVzUmVtYWluaW5nOiBudW1iZXIsXG4gICAgcmVzcG9uc2VIZWFkZXJzPzogSGVhZGVycyB8IHVuZGVmaW5lZCxcbiAgKTogUHJvbWlzZTxBUElSZXNwb25zZVByb3BzPiB7XG4gICAgbGV0IHRpbWVvdXRNaWxsaXM6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAgIC8vIE5vdGUgdGhlIGByZXRyeS1hZnRlci1tc2AgaGVhZGVyIG1heSBub3QgYmUgc3RhbmRhcmQsIGJ1dCBpcyBhIGdvb2QgaWRlYSBhbmQgd2UnZCBsaWtlIHByb2FjdGl2ZSBzdXBwb3J0IGZvciBpdC5cbiAgICBjb25zdCByZXRyeUFmdGVyTWlsbGlzSGVhZGVyID0gcmVzcG9uc2VIZWFkZXJzPy5bJ3JldHJ5LWFmdGVyLW1zJ107XG4gICAgaWYgKHJldHJ5QWZ0ZXJNaWxsaXNIZWFkZXIpIHtcbiAgICAgIGNvbnN0IHRpbWVvdXRNcyA9IHBhcnNlRmxvYXQocmV0cnlBZnRlck1pbGxpc0hlYWRlcik7XG4gICAgICBpZiAoIU51bWJlci5pc05hTih0aW1lb3V0TXMpKSB7XG4gICAgICAgIHRpbWVvdXRNaWxsaXMgPSB0aW1lb3V0TXM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWJvdXQgdGhlIFJldHJ5LUFmdGVyIGhlYWRlcjogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRUUC9IZWFkZXJzL1JldHJ5LUFmdGVyXG4gICAgY29uc3QgcmV0cnlBZnRlckhlYWRlciA9IHJlc3BvbnNlSGVhZGVycz8uWydyZXRyeS1hZnRlciddO1xuICAgIGlmIChyZXRyeUFmdGVySGVhZGVyICYmICF0aW1lb3V0TWlsbGlzKSB7XG4gICAgICBjb25zdCB0aW1lb3V0U2Vjb25kcyA9IHBhcnNlRmxvYXQocmV0cnlBZnRlckhlYWRlcik7XG4gICAgICBpZiAoIU51bWJlci5pc05hTih0aW1lb3V0U2Vjb25kcykpIHtcbiAgICAgICAgdGltZW91dE1pbGxpcyA9IHRpbWVvdXRTZWNvbmRzICogMTAwMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpbWVvdXRNaWxsaXMgPSBEYXRlLnBhcnNlKHJldHJ5QWZ0ZXJIZWFkZXIpIC0gRGF0ZS5ub3coKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgQVBJIGFza3MgdXMgdG8gd2FpdCBhIGNlcnRhaW4gYW1vdW50IG9mIHRpbWUgKGFuZCBpdCdzIGEgcmVhc29uYWJsZSBhbW91bnQpLFxuICAgIC8vIGp1c3QgZG8gd2hhdCBpdCBzYXlzLCBidXQgb3RoZXJ3aXNlIGNhbGN1bGF0ZSBhIGRlZmF1bHRcbiAgICBpZiAoISh0aW1lb3V0TWlsbGlzICYmIDAgPD0gdGltZW91dE1pbGxpcyAmJiB0aW1lb3V0TWlsbGlzIDwgNjAgKiAxMDAwKSkge1xuICAgICAgY29uc3QgbWF4UmV0cmllcyA9IG9wdGlvbnMubWF4UmV0cmllcyA/PyB0aGlzLm1heFJldHJpZXM7XG4gICAgICB0aW1lb3V0TWlsbGlzID0gdGhpcy5jYWxjdWxhdGVEZWZhdWx0UmV0cnlUaW1lb3V0TWlsbGlzKHJldHJpZXNSZW1haW5pbmcsIG1heFJldHJpZXMpO1xuICAgIH1cbiAgICBhd2FpdCBzbGVlcCh0aW1lb3V0TWlsbGlzKTtcblxuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KG9wdGlvbnMsIHJldHJpZXNSZW1haW5pbmcgLSAxKTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlRGVmYXVsdFJldHJ5VGltZW91dE1pbGxpcyhyZXRyaWVzUmVtYWluaW5nOiBudW1iZXIsIG1heFJldHJpZXM6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgaW5pdGlhbFJldHJ5RGVsYXkgPSAwLjU7XG4gICAgY29uc3QgbWF4UmV0cnlEZWxheSA9IDguMDtcblxuICAgIGNvbnN0IG51bVJldHJpZXMgPSBtYXhSZXRyaWVzIC0gcmV0cmllc1JlbWFpbmluZztcblxuICAgIC8vIEFwcGx5IGV4cG9uZW50aWFsIGJhY2tvZmYsIGJ1dCBub3QgbW9yZSB0aGFuIHRoZSBtYXguXG4gICAgY29uc3Qgc2xlZXBTZWNvbmRzID0gTWF0aC5taW4oaW5pdGlhbFJldHJ5RGVsYXkgKiBNYXRoLnBvdygyLCBudW1SZXRyaWVzKSwgbWF4UmV0cnlEZWxheSk7XG5cbiAgICAvLyBBcHBseSBzb21lIGppdHRlciwgdGFrZSB1cCB0byBhdCBtb3N0IDI1IHBlcmNlbnQgb2YgdGhlIHJldHJ5IHRpbWUuXG4gICAgY29uc3Qgaml0dGVyID0gMSAtIE1hdGgucmFuZG9tKCkgKiAwLjI1O1xuXG4gICAgcmV0dXJuIHNsZWVwU2Vjb25kcyAqIGppdHRlciAqIDEwMDA7XG4gIH1cblxuICBwcml2YXRlIGdldFVzZXJBZ2VudCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9L0pTICR7VkVSU0lPTn1gO1xuICB9XG59XG5cbmV4cG9ydCB0eXBlIFBhZ2VJbmZvID0geyB1cmw6IFVSTCB9IHwgeyBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbCB9O1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RQYWdlPEl0ZW0+IGltcGxlbWVudHMgQXN5bmNJdGVyYWJsZTxJdGVtPiB7XG4gICNjbGllbnQ6IEFQSUNsaWVudDtcbiAgcHJvdGVjdGVkIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnM7XG5cbiAgcHJvdGVjdGVkIHJlc3BvbnNlOiBSZXNwb25zZTtcbiAgcHJvdGVjdGVkIGJvZHk6IHVua25vd247XG5cbiAgY29uc3RydWN0b3IoY2xpZW50OiBBUElDbGllbnQsIHJlc3BvbnNlOiBSZXNwb25zZSwgYm9keTogdW5rbm93biwgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucykge1xuICAgIHRoaXMuI2NsaWVudCA9IGNsaWVudDtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aGlzLmJvZHkgPSBib2R5O1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIFVzZSBuZXh0UGFnZUluZm8gaW5zdGVhZFxuICAgKi9cbiAgYWJzdHJhY3QgbmV4dFBhZ2VQYXJhbXMoKTogUGFydGlhbDxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4gfCBudWxsO1xuICBhYnN0cmFjdCBuZXh0UGFnZUluZm8oKTogUGFnZUluZm8gfCBudWxsO1xuXG4gIGFic3RyYWN0IGdldFBhZ2luYXRlZEl0ZW1zKCk6IEl0ZW1bXTtcblxuICBoYXNOZXh0UGFnZSgpOiBib29sZWFuIHtcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuZ2V0UGFnaW5hdGVkSXRlbXMoKTtcbiAgICBpZiAoIWl0ZW1zLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLm5leHRQYWdlSW5mbygpICE9IG51bGw7XG4gIH1cblxuICBhc3luYyBnZXROZXh0UGFnZSgpOiBQcm9taXNlPHRoaXM+IHtcbiAgICBjb25zdCBuZXh0SW5mbyA9IHRoaXMubmV4dFBhZ2VJbmZvKCk7XG4gICAgaWYgKCFuZXh0SW5mbykge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgICAnTm8gbmV4dCBwYWdlIGV4cGVjdGVkOyBwbGVhc2UgY2hlY2sgYC5oYXNOZXh0UGFnZSgpYCBiZWZvcmUgY2FsbGluZyBgLmdldE5leHRQYWdlKClgLicsXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBuZXh0T3B0aW9ucyA9IHsgLi4udGhpcy5vcHRpb25zIH07XG4gICAgaWYgKCdwYXJhbXMnIGluIG5leHRJbmZvICYmIHR5cGVvZiBuZXh0T3B0aW9ucy5xdWVyeSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG5leHRPcHRpb25zLnF1ZXJ5ID0geyAuLi5uZXh0T3B0aW9ucy5xdWVyeSwgLi4ubmV4dEluZm8ucGFyYW1zIH07XG4gICAgfSBlbHNlIGlmICgndXJsJyBpbiBuZXh0SW5mbykge1xuICAgICAgY29uc3QgcGFyYW1zID0gWy4uLk9iamVjdC5lbnRyaWVzKG5leHRPcHRpb25zLnF1ZXJ5IHx8IHt9KSwgLi4ubmV4dEluZm8udXJsLnNlYXJjaFBhcmFtcy5lbnRyaWVzKCldO1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgcGFyYW1zKSB7XG4gICAgICAgIG5leHRJbmZvLnVybC5zZWFyY2hQYXJhbXMuc2V0KGtleSwgdmFsdWUgYXMgYW55KTtcbiAgICAgIH1cbiAgICAgIG5leHRPcHRpb25zLnF1ZXJ5ID0gdW5kZWZpbmVkO1xuICAgICAgbmV4dE9wdGlvbnMucGF0aCA9IG5leHRJbmZvLnVybC50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy4jY2xpZW50LnJlcXVlc3RBUElMaXN0KHRoaXMuY29uc3RydWN0b3IgYXMgYW55LCBuZXh0T3B0aW9ucyk7XG4gIH1cblxuICBhc3luYyAqaXRlclBhZ2VzKCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgIGxldCBwYWdlOiBBYnN0cmFjdFBhZ2U8SXRlbT4gPSB0aGlzO1xuICAgIHlpZWxkIHBhZ2U7XG4gICAgd2hpbGUgKHBhZ2UuaGFzTmV4dFBhZ2UoKSkge1xuICAgICAgcGFnZSA9IGF3YWl0IHBhZ2UuZ2V0TmV4dFBhZ2UoKTtcbiAgICAgIHlpZWxkIHBhZ2U7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgKltTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgZm9yIGF3YWl0IChjb25zdCBwYWdlIG9mIHRoaXMuaXRlclBhZ2VzKCkpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBwYWdlLmdldFBhZ2luYXRlZEl0ZW1zKCkpIHtcbiAgICAgICAgeWllbGQgaXRlbTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIHN1YmNsYXNzIG9mIFByb21pc2Ugd2lsbCByZXNvbHZlIHRvIGFuIGluc3RhbnRpYXRlZCBQYWdlIG9uY2UgdGhlIHJlcXVlc3QgY29tcGxldGVzLlxuICpcbiAqIEl0IGFsc28gaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlIHRvIGFsbG93IGF1dG8tcGFnaW5hdGluZyBpdGVyYXRpb24gb24gYW4gdW5hd2FpdGVkIGxpc3QgY2FsbCwgZWc6XG4gKlxuICogICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIGNsaWVudC5pdGVtcy5saXN0KCkpIHtcbiAqICAgICAgY29uc29sZS5sb2coaXRlbSlcbiAqICAgIH1cbiAqL1xuZXhwb3J0IGNsYXNzIFBhZ2VQcm9taXNlPFxuICAgIFBhZ2VDbGFzcyBleHRlbmRzIEFic3RyYWN0UGFnZTxJdGVtPixcbiAgICBJdGVtID0gUmV0dXJuVHlwZTxQYWdlQ2xhc3NbJ2dldFBhZ2luYXRlZEl0ZW1zJ10+W251bWJlcl0sXG4gID5cbiAgZXh0ZW5kcyBBUElQcm9taXNlPFBhZ2VDbGFzcz5cbiAgaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlPEl0ZW0+XG57XG4gIGNvbnN0cnVjdG9yKFxuICAgIGNsaWVudDogQVBJQ2xpZW50LFxuICAgIHJlcXVlc3Q6IFByb21pc2U8QVBJUmVzcG9uc2VQcm9wcz4sXG4gICAgUGFnZTogbmV3ICguLi5hcmdzOiBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8dHlwZW9mIEFic3RyYWN0UGFnZT4pID0+IFBhZ2VDbGFzcyxcbiAgKSB7XG4gICAgc3VwZXIoXG4gICAgICByZXF1ZXN0LFxuICAgICAgYXN5bmMgKHByb3BzKSA9PiBuZXcgUGFnZShjbGllbnQsIHByb3BzLnJlc3BvbnNlLCBhd2FpdCBkZWZhdWx0UGFyc2VSZXNwb25zZShwcm9wcyksIHByb3BzLm9wdGlvbnMpLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQWxsb3cgYXV0by1wYWdpbmF0aW5nIGl0ZXJhdGlvbiBvbiBhbiB1bmF3YWl0ZWQgbGlzdCBjYWxsLCBlZzpcbiAgICpcbiAgICogICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIGNsaWVudC5pdGVtcy5saXN0KCkpIHtcbiAgICogICAgICBjb25zb2xlLmxvZyhpdGVtKVxuICAgKiAgICB9XG4gICAqL1xuICBhc3luYyAqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICBjb25zdCBwYWdlID0gYXdhaXQgdGhpcztcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgcGFnZSkge1xuICAgICAgeWllbGQgaXRlbTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVJlc3BvbnNlSGVhZGVycyA9IChcbiAgaGVhZGVyczogQXdhaXRlZDxSZXR1cm5UeXBlPEZldGNoPj5bJ2hlYWRlcnMnXSxcbik6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPT4ge1xuICByZXR1cm4gbmV3IFByb3h5KFxuICAgIE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGhlYWRlcnMuZW50cmllcygpLFxuICAgICksXG4gICAge1xuICAgICAgZ2V0KHRhcmdldCwgbmFtZSkge1xuICAgICAgICBjb25zdCBrZXkgPSBuYW1lLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiB0YXJnZXRba2V5LnRvTG93ZXJDYXNlKCldIHx8IHRhcmdldFtrZXldO1xuICAgICAgfSxcbiAgICB9LFxuICApO1xufTtcblxudHlwZSBIVFRQTWV0aG9kID0gJ2dldCcgfCAncG9zdCcgfCAncHV0JyB8ICdwYXRjaCcgfCAnZGVsZXRlJztcblxuZXhwb3J0IHR5cGUgUmVxdWVzdENsaWVudCA9IHsgZmV0Y2g6IEZldGNoIH07XG5leHBvcnQgdHlwZSBIZWFkZXJzID0gUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZD47XG5leHBvcnQgdHlwZSBEZWZhdWx0UXVlcnkgPSBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCB1bmRlZmluZWQ+O1xuZXhwb3J0IHR5cGUgS2V5c0VudW08VD4gPSB7IFtQIGluIGtleW9mIFJlcXVpcmVkPFQ+XTogdHJ1ZSB9O1xuXG5leHBvcnQgdHlwZSBSZXF1ZXN0T3B0aW9uczxcbiAgUmVxID0gdW5rbm93biB8IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgUmVhZGFibGUgfCBCbG9iTGlrZSB8IEFycmF5QnVmZmVyVmlldyB8IEFycmF5QnVmZmVyLFxuPiA9IHtcbiAgbWV0aG9kPzogSFRUUE1ldGhvZDtcbiAgcGF0aD86IHN0cmluZztcbiAgcXVlcnk/OiBSZXEgfCB1bmRlZmluZWQ7XG4gIGJvZHk/OiBSZXEgfCBudWxsIHwgdW5kZWZpbmVkO1xuICBoZWFkZXJzPzogSGVhZGVycyB8IHVuZGVmaW5lZDtcblxuICBtYXhSZXRyaWVzPzogbnVtYmVyO1xuICBzdHJlYW0/OiBib29sZWFuIHwgdW5kZWZpbmVkO1xuICB0aW1lb3V0PzogbnVtYmVyO1xuICBodHRwQWdlbnQ/OiBBZ2VudDtcbiAgc2lnbmFsPzogQWJvcnRTaWduYWwgfCB1bmRlZmluZWQgfCBudWxsO1xuICBpZGVtcG90ZW5jeUtleT86IHN0cmluZztcblxuICBfX2JpbmFyeVJlcXVlc3Q/OiBib29sZWFuIHwgdW5kZWZpbmVkO1xuICBfX2JpbmFyeVJlc3BvbnNlPzogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbiAgX19zdHJlYW1DbGFzcz86IHR5cGVvZiBTdHJlYW07XG59O1xuXG4vLyBUaGlzIGlzIHJlcXVpcmVkIHNvIHRoYXQgd2UgY2FuIGRldGVybWluZSBpZiBhIGdpdmVuIG9iamVjdCBtYXRjaGVzIHRoZSBSZXF1ZXN0T3B0aW9uc1xuLy8gdHlwZSBhdCBydW50aW1lLiBXaGlsZSB0aGlzIHJlcXVpcmVzIGR1cGxpY2F0aW9uLCBpdCBpcyBlbmZvcmNlZCBieSB0aGUgVHlwZVNjcmlwdFxuLy8gY29tcGlsZXIgc3VjaCB0aGF0IGFueSBtaXNzaW5nIC8gZXh0cmFuZW91cyBrZXlzIHdpbGwgY2F1c2UgYW4gZXJyb3IuXG5jb25zdCByZXF1ZXN0T3B0aW9uc0tleXM6IEtleXNFbnVtPFJlcXVlc3RPcHRpb25zPiA9IHtcbiAgbWV0aG9kOiB0cnVlLFxuICBwYXRoOiB0cnVlLFxuICBxdWVyeTogdHJ1ZSxcbiAgYm9keTogdHJ1ZSxcbiAgaGVhZGVyczogdHJ1ZSxcblxuICBtYXhSZXRyaWVzOiB0cnVlLFxuICBzdHJlYW06IHRydWUsXG4gIHRpbWVvdXQ6IHRydWUsXG4gIGh0dHBBZ2VudDogdHJ1ZSxcbiAgc2lnbmFsOiB0cnVlLFxuICBpZGVtcG90ZW5jeUtleTogdHJ1ZSxcblxuICBfX2JpbmFyeVJlcXVlc3Q6IHRydWUsXG4gIF9fYmluYXJ5UmVzcG9uc2U6IHRydWUsXG4gIF9fc3RyZWFtQ2xhc3M6IHRydWUsXG59O1xuXG5leHBvcnQgY29uc3QgaXNSZXF1ZXN0T3B0aW9ucyA9IChvYmo6IHVua25vd24pOiBvYmogaXMgUmVxdWVzdE9wdGlvbnMgPT4ge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmXG4gICAgb2JqICE9PSBudWxsICYmXG4gICAgIWlzRW1wdHlPYmoob2JqKSAmJlxuICAgIE9iamVjdC5rZXlzKG9iaikuZXZlcnkoKGspID0+IGhhc093bihyZXF1ZXN0T3B0aW9uc0tleXMsIGspKVxuICApO1xufTtcblxuZXhwb3J0IHR5cGUgRmluYWxSZXF1ZXN0T3B0aW9uczxSZXEgPSB1bmtub3duIHwgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBSZWFkYWJsZSB8IERhdGFWaWV3PiA9XG4gIFJlcXVlc3RPcHRpb25zPFJlcT4gJiB7XG4gICAgbWV0aG9kOiBIVFRQTWV0aG9kO1xuICAgIHBhdGg6IHN0cmluZztcbiAgfTtcblxuZGVjbGFyZSBjb25zdCBEZW5vOiBhbnk7XG5kZWNsYXJlIGNvbnN0IEVkZ2VSdW50aW1lOiBhbnk7XG50eXBlIEFyY2ggPSAneDMyJyB8ICd4NjQnIHwgJ2FybScgfCAnYXJtNjQnIHwgYG90aGVyOiR7c3RyaW5nfWAgfCAndW5rbm93bic7XG50eXBlIFBsYXRmb3JtTmFtZSA9XG4gIHwgJ01hY09TJ1xuICB8ICdMaW51eCdcbiAgfCAnV2luZG93cydcbiAgfCAnRnJlZUJTRCdcbiAgfCAnT3BlbkJTRCdcbiAgfCAnaU9TJ1xuICB8ICdBbmRyb2lkJ1xuICB8IGBPdGhlcjoke3N0cmluZ31gXG4gIHwgJ1Vua25vd24nO1xudHlwZSBCcm93c2VyID0gJ2llJyB8ICdlZGdlJyB8ICdjaHJvbWUnIHwgJ2ZpcmVmb3gnIHwgJ3NhZmFyaSc7XG50eXBlIFBsYXRmb3JtUHJvcGVydGllcyA9IHtcbiAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnO1xuICAnWC1TdGFpbmxlc3MtUGFja2FnZS1WZXJzaW9uJzogc3RyaW5nO1xuICAnWC1TdGFpbmxlc3MtT1MnOiBQbGF0Zm9ybU5hbWU7XG4gICdYLVN0YWlubGVzcy1BcmNoJzogQXJjaDtcbiAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnbm9kZScgfCAnZGVubycgfCAnZWRnZScgfCBgYnJvd3Nlcjoke0Jyb3dzZXJ9YCB8ICd1bmtub3duJztcbiAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUtVmVyc2lvbic6IHN0cmluZztcbn07XG5jb25zdCBnZXRQbGF0Zm9ybVByb3BlcnRpZXMgPSAoKTogUGxhdGZvcm1Qcm9wZXJ0aWVzID0+IHtcbiAgaWYgKHR5cGVvZiBEZW5vICE9PSAndW5kZWZpbmVkJyAmJiBEZW5vLmJ1aWxkICE9IG51bGwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiBub3JtYWxpemVQbGF0Zm9ybShEZW5vLmJ1aWxkLm9zKSxcbiAgICAgICdYLVN0YWlubGVzcy1BcmNoJzogbm9ybWFsaXplQXJjaChEZW5vLmJ1aWxkLmFyY2gpLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnZGVubycsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzpcbiAgICAgICAgdHlwZW9mIERlbm8udmVyc2lvbiA9PT0gJ3N0cmluZycgPyBEZW5vLnZlcnNpb24gOiBEZW5vLnZlcnNpb24/LmRlbm8gPz8gJ3Vua25vd24nLFxuICAgIH07XG4gIH1cbiAgaWYgKHR5cGVvZiBFZGdlUnVudGltZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiAnVW5rbm93bicsXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6IGBvdGhlcjoke0VkZ2VSdW50aW1lfWAsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZSc6ICdlZGdlJyxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiBwcm9jZXNzLnZlcnNpb24sXG4gICAgfTtcbiAgfVxuICAvLyBDaGVjayBpZiBOb2RlLmpzXG4gIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnID8gcHJvY2VzcyA6IDApID09PSAnW29iamVjdCBwcm9jZXNzXScpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiBub3JtYWxpemVQbGF0Zm9ybShwcm9jZXNzLnBsYXRmb3JtKSxcbiAgICAgICdYLVN0YWlubGVzcy1BcmNoJzogbm9ybWFsaXplQXJjaChwcm9jZXNzLmFyY2gpLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnbm9kZScsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogcHJvY2Vzcy52ZXJzaW9uLFxuICAgIH07XG4gIH1cblxuICBjb25zdCBicm93c2VySW5mbyA9IGdldEJyb3dzZXJJbmZvKCk7XG4gIGlmIChicm93c2VySW5mbykge1xuICAgIHJldHVybiB7XG4gICAgICAnWC1TdGFpbmxlc3MtTGFuZyc6ICdqcycsXG4gICAgICAnWC1TdGFpbmxlc3MtUGFja2FnZS1WZXJzaW9uJzogVkVSU0lPTixcbiAgICAgICdYLVN0YWlubGVzcy1PUyc6ICdVbmtub3duJyxcbiAgICAgICdYLVN0YWlubGVzcy1BcmNoJzogJ3Vua25vd24nLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiBgYnJvd3Nlcjoke2Jyb3dzZXJJbmZvLmJyb3dzZXJ9YCxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiBicm93c2VySW5mby52ZXJzaW9uLFxuICAgIH07XG4gIH1cblxuICAvLyBUT0RPIGFkZCBzdXBwb3J0IGZvciBDbG91ZGZsYXJlIHdvcmtlcnMsIGV0Yy5cbiAgcmV0dXJuIHtcbiAgICAnWC1TdGFpbmxlc3MtTGFuZyc6ICdqcycsXG4gICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgJ1gtU3RhaW5sZXNzLU9TJzogJ1Vua25vd24nLFxuICAgICdYLVN0YWlubGVzcy1BcmNoJzogJ3Vua25vd24nLFxuICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ3Vua25vd24nLFxuICAgICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiAndW5rbm93bicsXG4gIH07XG59O1xuXG50eXBlIEJyb3dzZXJJbmZvID0ge1xuICBicm93c2VyOiBCcm93c2VyO1xuICB2ZXJzaW9uOiBzdHJpbmc7XG59O1xuXG5kZWNsYXJlIGNvbnN0IG5hdmlnYXRvcjogeyB1c2VyQWdlbnQ6IHN0cmluZyB9IHwgdW5kZWZpbmVkO1xuXG4vLyBOb3RlOiBtb2RpZmllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9KUy1EZXZUb29scy9ob3N0LWVudmlyb25tZW50L2Jsb2IvYjFhYjc5ZWNkZTM3ZGI1ZDZlMTYzYzA1MGU1NGZlN2QyODdkN2M5Mi9zcmMvaXNvbW9ycGhpYy5icm93c2VyLnRzXG5mdW5jdGlvbiBnZXRCcm93c2VySW5mbygpOiBCcm93c2VySW5mbyB8IG51bGwge1xuICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgIW5hdmlnYXRvcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gTk9URTogVGhlIG9yZGVyIG1hdHRlcnMgaGVyZSFcbiAgY29uc3QgYnJvd3NlclBhdHRlcm5zID0gW1xuICAgIHsga2V5OiAnZWRnZScgYXMgY29uc3QsIHBhdHRlcm46IC9FZGdlKD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdpZScgYXMgY29uc3QsIHBhdHRlcm46IC9NU0lFKD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdpZScgYXMgY29uc3QsIHBhdHRlcm46IC9UcmlkZW50KD86LipydlxcOihcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdjaHJvbWUnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvQ2hyb21lKD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdmaXJlZm94JyBhcyBjb25zdCwgcGF0dGVybjogL0ZpcmVmb3goPzpcXFcrKFxcZCspXFwuKFxcZCspKD86XFwuKFxcZCspKT8pPy8gfSxcbiAgICB7IGtleTogJ3NhZmFyaScgYXMgY29uc3QsIHBhdHRlcm46IC8oPzpWZXJzaW9uXFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8oPzpcXFcrTW9iaWxlXFxTKik/XFxXK1NhZmFyaS8gfSxcbiAgXTtcblxuICAvLyBGaW5kIHRoZSBGSVJTVCBtYXRjaGluZyBicm93c2VyXG4gIGZvciAoY29uc3QgeyBrZXksIHBhdHRlcm4gfSBvZiBicm93c2VyUGF0dGVybnMpIHtcbiAgICBjb25zdCBtYXRjaCA9IHBhdHRlcm4uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIGNvbnN0IG1ham9yID0gbWF0Y2hbMV0gfHwgMDtcbiAgICAgIGNvbnN0IG1pbm9yID0gbWF0Y2hbMl0gfHwgMDtcbiAgICAgIGNvbnN0IHBhdGNoID0gbWF0Y2hbM10gfHwgMDtcblxuICAgICAgcmV0dXJuIHsgYnJvd3Nlcjoga2V5LCB2ZXJzaW9uOiBgJHttYWpvcn0uJHttaW5vcn0uJHtwYXRjaH1gIH07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmNvbnN0IG5vcm1hbGl6ZUFyY2ggPSAoYXJjaDogc3RyaW5nKTogQXJjaCA9PiB7XG4gIC8vIE5vZGUgZG9jczpcbiAgLy8gLSBodHRwczovL25vZGVqcy5vcmcvYXBpL3Byb2Nlc3MuaHRtbCNwcm9jZXNzYXJjaFxuICAvLyBEZW5vIGRvY3M6XG4gIC8vIC0gaHR0cHM6Ly9kb2MuZGVuby5sYW5kL2Rlbm8vc3RhYmxlL34vRGVuby5idWlsZFxuICBpZiAoYXJjaCA9PT0gJ3gzMicpIHJldHVybiAneDMyJztcbiAgaWYgKGFyY2ggPT09ICd4ODZfNjQnIHx8IGFyY2ggPT09ICd4NjQnKSByZXR1cm4gJ3g2NCc7XG4gIGlmIChhcmNoID09PSAnYXJtJykgcmV0dXJuICdhcm0nO1xuICBpZiAoYXJjaCA9PT0gJ2FhcmNoNjQnIHx8IGFyY2ggPT09ICdhcm02NCcpIHJldHVybiAnYXJtNjQnO1xuICBpZiAoYXJjaCkgcmV0dXJuIGBvdGhlcjoke2FyY2h9YDtcbiAgcmV0dXJuICd1bmtub3duJztcbn07XG5cbmNvbnN0IG5vcm1hbGl6ZVBsYXRmb3JtID0gKHBsYXRmb3JtOiBzdHJpbmcpOiBQbGF0Zm9ybU5hbWUgPT4ge1xuICAvLyBOb2RlIHBsYXRmb3JtczpcbiAgLy8gLSBodHRwczovL25vZGVqcy5vcmcvYXBpL3Byb2Nlc3MuaHRtbCNwcm9jZXNzcGxhdGZvcm1cbiAgLy8gRGVubyBwbGF0Zm9ybXM6XG4gIC8vIC0gaHR0cHM6Ly9kb2MuZGVuby5sYW5kL2Rlbm8vc3RhYmxlL34vRGVuby5idWlsZFxuICAvLyAtIGh0dHBzOi8vZ2l0aHViLmNvbS9kZW5vbGFuZC9kZW5vL2lzc3Vlcy8xNDc5OVxuXG4gIHBsYXRmb3JtID0gcGxhdGZvcm0udG9Mb3dlckNhc2UoKTtcblxuICAvLyBOT1RFOiB0aGlzIGlPUyBjaGVjayBpcyB1bnRlc3RlZCBhbmQgbWF5IG5vdCB3b3JrXG4gIC8vIE5vZGUgZG9lcyBub3Qgd29yayBuYXRpdmVseSBvbiBJT1MsIHRoZXJlIGlzIGEgZm9yayBhdFxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzLW1vYmlsZS9ub2RlanMtbW9iaWxlXG4gIC8vIGhvd2V2ZXIgaXQgaXMgdW5rbm93biBhdCB0aGUgdGltZSBvZiB3cml0aW5nIGhvdyB0byBkZXRlY3QgaWYgaXQgaXMgcnVubmluZ1xuICBpZiAocGxhdGZvcm0uaW5jbHVkZXMoJ2lvcycpKSByZXR1cm4gJ2lPUyc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ2FuZHJvaWQnKSByZXR1cm4gJ0FuZHJvaWQnO1xuICBpZiAocGxhdGZvcm0gPT09ICdkYXJ3aW4nKSByZXR1cm4gJ01hY09TJztcbiAgaWYgKHBsYXRmb3JtID09PSAnd2luMzInKSByZXR1cm4gJ1dpbmRvd3MnO1xuICBpZiAocGxhdGZvcm0gPT09ICdmcmVlYnNkJykgcmV0dXJuICdGcmVlQlNEJztcbiAgaWYgKHBsYXRmb3JtID09PSAnb3BlbmJzZCcpIHJldHVybiAnT3BlbkJTRCc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ2xpbnV4JykgcmV0dXJuICdMaW51eCc7XG4gIGlmIChwbGF0Zm9ybSkgcmV0dXJuIGBPdGhlcjoke3BsYXRmb3JtfWA7XG4gIHJldHVybiAnVW5rbm93bic7XG59O1xuXG5sZXQgX3BsYXRmb3JtSGVhZGVyczogUGxhdGZvcm1Qcm9wZXJ0aWVzO1xuY29uc3QgZ2V0UGxhdGZvcm1IZWFkZXJzID0gKCkgPT4ge1xuICByZXR1cm4gKF9wbGF0Zm9ybUhlYWRlcnMgPz89IGdldFBsYXRmb3JtUHJvcGVydGllcygpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzYWZlSlNPTiA9ICh0ZXh0OiBzdHJpbmcpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0ZXh0KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufTtcblxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE5NzA5ODQ2XG5jb25zdCBzdGFydHNXaXRoU2NoZW1lUmVnZXhwID0gbmV3IFJlZ0V4cCgnXig/OlthLXpdKzopPy8vJywgJ2knKTtcbmNvbnN0IGlzQWJzb2x1dGVVUkwgPSAodXJsOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIHN0YXJ0c1dpdGhTY2hlbWVSZWdleHAudGVzdCh1cmwpO1xufTtcblxuZXhwb3J0IGNvbnN0IHNsZWVwID0gKG1zOiBudW1iZXIpID0+IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG5cbmNvbnN0IHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyID0gKG5hbWU6IHN0cmluZywgbjogdW5rbm93bik6IG51bWJlciA9PiB7XG4gIGlmICh0eXBlb2YgbiAhPT0gJ251bWJlcicgfHwgIU51bWJlci5pc0ludGVnZXIobikpIHtcbiAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYCR7bmFtZX0gbXVzdCBiZSBhbiBpbnRlZ2VyYCk7XG4gIH1cbiAgaWYgKG4gPCAwKSB7XG4gICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGAke25hbWV9IG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyYCk7XG4gIH1cbiAgcmV0dXJuIG47XG59O1xuXG5leHBvcnQgY29uc3QgY2FzdFRvRXJyb3IgPSAoZXJyOiBhbnkpOiBFcnJvciA9PiB7XG4gIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikgcmV0dXJuIGVycjtcbiAgaWYgKHR5cGVvZiBlcnIgPT09ICdvYmplY3QnICYmIGVyciAhPT0gbnVsbCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKEpTT04uc3RyaW5naWZ5KGVycikpO1xuICAgIH0gY2F0Y2gge31cbiAgfVxuICByZXR1cm4gbmV3IEVycm9yKFN0cmluZyhlcnIpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbnN1cmVQcmVzZW50ID0gPFQ+KHZhbHVlOiBUIHwgbnVsbCB8IHVuZGVmaW5lZCk6IFQgPT4ge1xuICBpZiAodmFsdWUgPT0gbnVsbCkgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBFeHBlY3RlZCBhIHZhbHVlIHRvIGJlIGdpdmVuIGJ1dCByZWNlaXZlZCAke3ZhbHVlfSBpbnN0ZWFkLmApO1xuICByZXR1cm4gdmFsdWU7XG59O1xuXG4vKipcbiAqIFJlYWQgYW4gZW52aXJvbm1lbnQgdmFyaWFibGUuXG4gKlxuICogVHJpbXMgYmVnaW5uaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLlxuICpcbiAqIFdpbGwgcmV0dXJuIHVuZGVmaW5lZCBpZiB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGUgZG9lc24ndCBleGlzdCBvciBjYW5ub3QgYmUgYWNjZXNzZWQuXG4gKi9cbmV4cG9ydCBjb25zdCByZWFkRW52ID0gKGVudjogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBwcm9jZXNzLmVudj8uW2Vudl0/LnRyaW0oKSA/PyB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBEZW5vICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBEZW5vLmVudj8uZ2V0Py4oZW52KT8udHJpbSgpO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5leHBvcnQgY29uc3QgY29lcmNlSW50ZWdlciA9ICh2YWx1ZTogdW5rbm93bik6IG51bWJlciA9PiB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSk7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSByZXR1cm4gcGFyc2VJbnQodmFsdWUsIDEwKTtcblxuICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYENvdWxkIG5vdCBjb2VyY2UgJHt2YWx1ZX0gKHR5cGU6ICR7dHlwZW9mIHZhbHVlfSkgaW50byBhIG51bWJlcmApO1xufTtcblxuZXhwb3J0IGNvbnN0IGNvZXJjZUZsb2F0ID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHJldHVybiB2YWx1ZTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHJldHVybiBwYXJzZUZsb2F0KHZhbHVlKTtcblxuICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYENvdWxkIG5vdCBjb2VyY2UgJHt2YWx1ZX0gKHR5cGU6ICR7dHlwZW9mIHZhbHVlfSkgaW50byBhIG51bWJlcmApO1xufTtcblxuZXhwb3J0IGNvbnN0IGNvZXJjZUJvb2xlYW4gPSAodmFsdWU6IHVua25vd24pOiBib29sZWFuID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSByZXR1cm4gdmFsdWU7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSByZXR1cm4gdmFsdWUgPT09ICd0cnVlJztcbiAgcmV0dXJuIEJvb2xlYW4odmFsdWUpO1xufTtcblxuZXhwb3J0IGNvbnN0IG1heWJlQ29lcmNlSW50ZWdlciA9ICh2YWx1ZTogdW5rbm93bik6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gY29lcmNlSW50ZWdlcih2YWx1ZSk7XG59O1xuXG5leHBvcnQgY29uc3QgbWF5YmVDb2VyY2VGbG9hdCA9ICh2YWx1ZTogdW5rbm93bik6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gY29lcmNlRmxvYXQodmFsdWUpO1xufTtcblxuZXhwb3J0IGNvbnN0IG1heWJlQ29lcmNlQm9vbGVhbiA9ICh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4gfCB1bmRlZmluZWQgPT4ge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGNvZXJjZUJvb2xlYW4odmFsdWUpO1xufTtcblxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM0NDkxMjg3XG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eU9iaihvYmo6IE9iamVjdCB8IG51bGwgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcbiAgaWYgKCFvYmopIHJldHVybiB0cnVlO1xuICBmb3IgKGNvbnN0IF9rIGluIG9iaikgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gaHR0cHM6Ly9lc2xpbnQub3JnL2RvY3MvbGF0ZXN0L3J1bGVzL25vLXByb3RvdHlwZS1idWlsdGluc1xuZXhwb3J0IGZ1bmN0aW9uIGhhc093bihvYmo6IE9iamVjdCwga2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG5cbi8qKlxuICogQ29waWVzIGhlYWRlcnMgZnJvbSBcIm5ld0hlYWRlcnNcIiBvbnRvIFwidGFyZ2V0SGVhZGVyc1wiLFxuICogdXNpbmcgbG93ZXItY2FzZSBmb3IgYWxsIHByb3BlcnRpZXMsXG4gKiBpZ25vcmluZyBhbnkga2V5cyB3aXRoIHVuZGVmaW5lZCB2YWx1ZXMsXG4gKiBhbmQgZGVsZXRpbmcgYW55IGtleXMgd2l0aCBudWxsIHZhbHVlcy5cbiAqL1xuZnVuY3Rpb24gYXBwbHlIZWFkZXJzTXV0KHRhcmdldEhlYWRlcnM6IEhlYWRlcnMsIG5ld0hlYWRlcnM6IEhlYWRlcnMpOiB2b2lkIHtcbiAgZm9yIChjb25zdCBrIGluIG5ld0hlYWRlcnMpIHtcbiAgICBpZiAoIWhhc093bihuZXdIZWFkZXJzLCBrKSkgY29udGludWU7XG4gICAgY29uc3QgbG93ZXJLZXkgPSBrLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKCFsb3dlcktleSkgY29udGludWU7XG5cbiAgICBjb25zdCB2YWwgPSBuZXdIZWFkZXJzW2tdO1xuXG4gICAgaWYgKHZhbCA9PT0gbnVsbCkge1xuICAgICAgZGVsZXRlIHRhcmdldEhlYWRlcnNbbG93ZXJLZXldO1xuICAgIH0gZWxzZSBpZiAodmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRhcmdldEhlYWRlcnNbbG93ZXJLZXldID0gdmFsO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVidWcoYWN0aW9uOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSB7XG4gIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcz8uZW52Py5bJ0RFQlVHJ10gPT09ICd0cnVlJykge1xuICAgIGNvbnNvbGUubG9nKGBBbnRocm9waWM6REVCVUc6JHthY3Rpb259YCwgLi4uYXJncyk7XG4gIH1cbn1cblxuLyoqXG4gKiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjExNzUyM1xuICovXG5jb25zdCB1dWlkNCA9ICgpID0+IHtcbiAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgKGMpID0+IHtcbiAgICBjb25zdCByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwO1xuICAgIGNvbnN0IHYgPSBjID09PSAneCcgPyByIDogKHIgJiAweDMpIHwgMHg4O1xuICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgaXNSdW5uaW5nSW5Ccm93c2VyID0gKCkgPT4ge1xuICByZXR1cm4gKFxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB0eXBlb2Ygd2luZG93LmRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJ1xuICApO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBIZWFkZXJzUHJvdG9jb2wge1xuICBnZXQ6IChoZWFkZXI6IHN0cmluZykgPT4gc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcbn1cbmV4cG9ydCB0eXBlIEhlYWRlcnNMaWtlID0gUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgc3RyaW5nW10gfCB1bmRlZmluZWQ+IHwgSGVhZGVyc1Byb3RvY29sO1xuXG5leHBvcnQgY29uc3QgaXNIZWFkZXJzUHJvdG9jb2wgPSAoaGVhZGVyczogYW55KTogaGVhZGVycyBpcyBIZWFkZXJzUHJvdG9jb2wgPT4ge1xuICByZXR1cm4gdHlwZW9mIGhlYWRlcnM/LmdldCA9PT0gJ2Z1bmN0aW9uJztcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRSZXF1aXJlZEhlYWRlciA9IChoZWFkZXJzOiBIZWFkZXJzTGlrZSB8IEhlYWRlcnMsIGhlYWRlcjogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgY29uc3QgZm91bmRIZWFkZXIgPSBnZXRIZWFkZXIoaGVhZGVycywgaGVhZGVyKTtcbiAgaWYgKGZvdW5kSGVhZGVyID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kICR7aGVhZGVyfSBoZWFkZXJgKTtcbiAgfVxuICByZXR1cm4gZm91bmRIZWFkZXI7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0SGVhZGVyID0gKGhlYWRlcnM6IEhlYWRlcnNMaWtlIHwgSGVhZGVycywgaGVhZGVyOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQgPT4ge1xuICBjb25zdCBsb3dlckNhc2VkSGVhZGVyID0gaGVhZGVyLnRvTG93ZXJDYXNlKCk7XG4gIGlmIChpc0hlYWRlcnNQcm90b2NvbChoZWFkZXJzKSkge1xuICAgIC8vIHRvIGRlYWwgd2l0aCB0aGUgY2FzZSB3aGVyZSB0aGUgaGVhZGVyIGxvb2tzIGxpa2UgU3RhaW5sZXNzLUV2ZW50LUlkXG4gICAgY29uc3QgaW50ZXJjYXBzSGVhZGVyID1cbiAgICAgIGhlYWRlclswXT8udG9VcHBlckNhc2UoKSArXG4gICAgICBoZWFkZXIuc3Vic3RyaW5nKDEpLnJlcGxhY2UoLyhbXlxcd10pKFxcdykvZywgKF9tLCBnMSwgZzIpID0+IGcxICsgZzIudG9VcHBlckNhc2UoKSk7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgW2hlYWRlciwgbG93ZXJDYXNlZEhlYWRlciwgaGVhZGVyLnRvVXBwZXJDYXNlKCksIGludGVyY2Fwc0hlYWRlcl0pIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gaGVhZGVycy5nZXQoa2V5KTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoaGVhZGVycykpIHtcbiAgICBpZiAoa2V5LnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyQ2FzZWRIZWFkZXIpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBpZiAodmFsdWUubGVuZ3RoIDw9IDEpIHJldHVybiB2YWx1ZVswXTtcbiAgICAgICAgY29uc29sZS53YXJuKGBSZWNlaXZlZCAke3ZhbHVlLmxlbmd0aH0gZW50cmllcyBmb3IgdGhlICR7aGVhZGVyfSBoZWFkZXIsIHVzaW5nIHRoZSBmaXJzdCBlbnRyeS5gKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlWzBdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG4vKipcbiAqIEVuY29kZXMgYSBzdHJpbmcgdG8gQmFzZTY0IGZvcm1hdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHRvQmFzZTY0ID0gKHN0cjogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHN0cmluZyA9PiB7XG4gIGlmICghc3RyKSByZXR1cm4gJyc7XG4gIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBCdWZmZXIuZnJvbShzdHIpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgYnRvYSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gYnRvYShzdHIpO1xuICB9XG5cbiAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKCdDYW5ub3QgZ2VuZXJhdGUgYjY0IHN0cmluZzsgRXhwZWN0ZWQgYEJ1ZmZlcmAgb3IgYGJ0b2FgIHRvIGJlIGRlZmluZWQnKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBpc09iaihvYmo6IHVua25vd24pOiBvYmogaXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4ge1xuICByZXR1cm4gb2JqICE9IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkob2JqKTtcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBBYnN0cmFjdFBhZ2UsIFJlc3BvbnNlLCBBUElDbGllbnQsIEZpbmFsUmVxdWVzdE9wdGlvbnMsIFBhZ2VJbmZvIH0gZnJvbSBcIi4vY29yZS5qc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBhZ2VSZXNwb25zZTxJdGVtPiB7XG4gIGRhdGE6IEFycmF5PEl0ZW0+O1xuXG4gIGhhc19tb3JlOiBib29sZWFuO1xuXG4gIGZpcnN0X2lkOiBzdHJpbmcgfCBudWxsO1xuXG4gIGxhc3RfaWQ6IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFnZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgaXRlbXMgcGVyIHBhZ2UuXG4gICAqL1xuICBsaW1pdD86IG51bWJlcjtcblxuICBiZWZvcmVfaWQ/OiBzdHJpbmc7XG5cbiAgYWZ0ZXJfaWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBQYWdlPEl0ZW0+IGV4dGVuZHMgQWJzdHJhY3RQYWdlPEl0ZW0+IGltcGxlbWVudHMgUGFnZVJlc3BvbnNlPEl0ZW0+IHtcbiAgZGF0YTogQXJyYXk8SXRlbT47XG5cbiAgaGFzX21vcmU6IGJvb2xlYW47XG5cbiAgZmlyc3RfaWQ6IHN0cmluZyB8IG51bGw7XG5cbiAgbGFzdF9pZDogc3RyaW5nIHwgbnVsbDtcblxuICBjb25zdHJ1Y3RvcihjbGllbnQ6IEFQSUNsaWVudCwgcmVzcG9uc2U6IFJlc3BvbnNlLCBib2R5OiBQYWdlUmVzcG9uc2U8SXRlbT4sIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnMpIHtcbiAgICBzdXBlcihjbGllbnQsIHJlc3BvbnNlLCBib2R5LCBvcHRpb25zKTtcblxuICAgIHRoaXMuZGF0YSA9IGJvZHkuZGF0YSB8fCBbXTtcbiAgICB0aGlzLmhhc19tb3JlID0gYm9keS5oYXNfbW9yZSB8fCBmYWxzZTtcbiAgICB0aGlzLmZpcnN0X2lkID0gYm9keS5maXJzdF9pZCB8fCBudWxsO1xuICAgIHRoaXMubGFzdF9pZCA9IGJvZHkubGFzdF9pZCB8fCBudWxsO1xuICB9XG5cbiAgZ2V0UGFnaW5hdGVkSXRlbXMoKTogSXRlbVtdIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhID8/IFtdO1xuICB9XG5cbiAgLy8gQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSBgbmV4dFBhZ2VJbmZvKClgIGluc3RlYWRcbiAgbmV4dFBhZ2VQYXJhbXMoKTogUGFydGlhbDxQYWdlUGFyYW1zPiB8IG51bGwge1xuICAgIGNvbnN0IGluZm8gPSB0aGlzLm5leHRQYWdlSW5mbygpO1xuICAgIGlmICghaW5mbykgcmV0dXJuIG51bGw7XG4gICAgaWYgKCdwYXJhbXMnIGluIGluZm8pIHJldHVybiBpbmZvLnBhcmFtcztcbiAgICBjb25zdCBwYXJhbXMgPSBPYmplY3QuZnJvbUVudHJpZXMoaW5mby51cmwuc2VhcmNoUGFyYW1zKTtcbiAgICBpZiAoIU9iamVjdC5rZXlzKHBhcmFtcykubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgbmV4dFBhZ2VJbmZvKCk6IFBhZ2VJbmZvIHwgbnVsbCB7XG4gICAgaWYgKCh0aGlzLm9wdGlvbnMucXVlcnkgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pPy5bJ2JlZm9yZV9pZCddKSB7XG4gICAgICAvLyBpbiByZXZlcnNlXG4gICAgICBjb25zdCBmaXJzdElkID0gdGhpcy5maXJzdF9pZDtcbiAgICAgIGlmICghZmlyc3RJZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgYmVmb3JlX2lkOiBmaXJzdElkLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJzb3IgPSB0aGlzLmxhc3RfaWQ7XG4gICAgaWYgKCFjdXJzb3IpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgYWZ0ZXJfaWQ6IGN1cnNvcixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4vY29yZS5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQVBJUmVzb3VyY2Uge1xuICBwcm90ZWN0ZWQgX2NsaWVudDogQ29yZS5BUElDbGllbnQ7XG5cbiAgY29uc3RydWN0b3IoY2xpZW50OiBDb3JlLkFQSUNsaWVudCkge1xuICAgIHRoaXMuX2NsaWVudCA9IGNsaWVudDtcbiAgfVxufVxuIiwgImltcG9ydCB7IEFudGhyb3BpY0Vycm9yIH0gZnJvbSBcIi4uLy4uL2Vycm9yLmpzXCI7XG5pbXBvcnQgeyByZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmFibGUgfSBmcm9tIFwiLi4vLi4vc3RyZWFtaW5nLmpzXCI7XG5pbXBvcnQgeyB0eXBlIFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL19zaGltcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgTGluZURlY29kZXIsIHR5cGUgQnl0ZXMgfSBmcm9tIFwiLi9saW5lLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBKU09OTERlY29kZXI8VD4ge1xuICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBpdGVyYXRvcjogQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPEJ5dGVzPixcbiAgICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIsXG4gICkge1xuICAgIHRoaXMuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jICpkZWNvZGVyKCk6IEFzeW5jSXRlcmF0b3I8VCwgYW55LCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBsaW5lRGVjb2RlciA9IG5ldyBMaW5lRGVjb2RlcigpO1xuICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgdGhpcy5pdGVyYXRvcikge1xuICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVEZWNvZGVyLmRlY29kZShjaHVuaykpIHtcbiAgICAgICAgeWllbGQgSlNPTi5wYXJzZShsaW5lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZURlY29kZXIuZmx1c2goKSkge1xuICAgICAgeWllbGQgSlNPTi5wYXJzZShsaW5lKTtcbiAgICB9XG4gIH1cblxuICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk6IEFzeW5jSXRlcmF0b3I8VD4ge1xuICAgIHJldHVybiB0aGlzLmRlY29kZXIoKTtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tUmVzcG9uc2U8VD4ocmVzcG9uc2U6IFJlc3BvbnNlLCBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIpOiBKU09OTERlY29kZXI8VD4ge1xuICAgIGlmICghcmVzcG9uc2UuYm9keSkge1xuICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBBdHRlbXB0ZWQgdG8gaXRlcmF0ZSBvdmVyIGEgcmVzcG9uc2Ugd2l0aCBubyBib2R5YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBKU09OTERlY29kZXIocmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhYmxlPEJ5dGVzPihyZXNwb25zZS5ib2R5KSwgY29udHJvbGxlcik7XG4gIH1cbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gXCIuLi8uLi8uLi9yZXNvdXJjZS5qc1wiO1xuaW1wb3J0IHsgaXNSZXF1ZXN0T3B0aW9ucyB9IGZyb20gXCIuLi8uLi8uLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gXCIuLi8uLi8uLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBCZXRhQVBJIGZyb20gXCIuLi9iZXRhLmpzXCI7XG5pbXBvcnQgKiBhcyBCZXRhTWVzc2FnZXNBUEkgZnJvbSBcIi4vbWVzc2FnZXMuanNcIjtcbmltcG9ydCB7IFBhZ2UsIHR5cGUgUGFnZVBhcmFtcyB9IGZyb20gXCIuLi8uLi8uLi9wYWdpbmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBKU09OTERlY29kZXIgfSBmcm9tIFwiLi4vLi4vLi4vaW50ZXJuYWwvZGVjb2RlcnMvanNvbmwuanNcIjtcbmltcG9ydCB7IEFudGhyb3BpY0Vycm9yIH0gZnJvbSBcIi4uLy4uLy4uL2Vycm9yLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBCYXRjaGVzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogU2VuZCBhIGJhdGNoIG9mIE1lc3NhZ2UgY3JlYXRpb24gcmVxdWVzdHMuXG4gICAqXG4gICAqIFRoZSBNZXNzYWdlIEJhdGNoZXMgQVBJIGNhbiBiZSB1c2VkIHRvIHByb2Nlc3MgbXVsdGlwbGUgTWVzc2FnZXMgQVBJIHJlcXVlc3RzIGF0XG4gICAqIG9uY2UuIE9uY2UgYSBNZXNzYWdlIEJhdGNoIGlzIGNyZWF0ZWQsIGl0IGJlZ2lucyBwcm9jZXNzaW5nIGltbWVkaWF0ZWx5LiBCYXRjaGVzXG4gICAqIGNhbiB0YWtlIHVwIHRvIDI0IGhvdXJzIHRvIGNvbXBsZXRlLlxuICAgKi9cbiAgY3JlYXRlKHBhcmFtczogQmF0Y2hDcmVhdGVQYXJhbXMsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2g+IHtcbiAgICBjb25zdCB7IGJldGFzLCAuLi5ib2R5IH0gPSBwYXJhbXM7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5wb3N0KCcvdjEvbWVzc2FnZXMvYmF0Y2hlcz9iZXRhPXRydWUnLCB7XG4gICAgICBib2R5LFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2FudGhyb3BpYy1iZXRhJzogWy4uLihiZXRhcyA/PyBbXSksICdtZXNzYWdlLWJhdGNoZXMtMjAyNC0wOS0yNCddLnRvU3RyaW5nKCksXG4gICAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgZW5kcG9pbnQgaXMgaWRlbXBvdGVudCBhbmQgY2FuIGJlIHVzZWQgdG8gcG9sbCBmb3IgTWVzc2FnZSBCYXRjaFxuICAgKiBjb21wbGV0aW9uLiBUbyBhY2Nlc3MgdGhlIHJlc3VsdHMgb2YgYSBNZXNzYWdlIEJhdGNoLCBtYWtlIGEgcmVxdWVzdCB0byB0aGVcbiAgICogYHJlc3VsdHNfdXJsYCBmaWVsZCBpbiB0aGUgcmVzcG9uc2UuXG4gICAqL1xuICByZXRyaWV2ZShcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIHBhcmFtcz86IEJhdGNoUmV0cmlldmVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuQVBJUHJvbWlzZTxCZXRhTWVzc2FnZUJhdGNoPjtcbiAgcmV0cmlldmUobWVzc2FnZUJhdGNoSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8QmV0YU1lc3NhZ2VCYXRjaD47XG4gIHJldHJpZXZlKFxuICAgIG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsXG4gICAgcGFyYW1zOiBCYXRjaFJldHJpZXZlUGFyYW1zIHwgQ29yZS5SZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLkFQSVByb21pc2U8QmV0YU1lc3NhZ2VCYXRjaD4ge1xuICAgIGlmIChpc1JlcXVlc3RPcHRpb25zKHBhcmFtcykpIHtcbiAgICAgIHJldHVybiB0aGlzLnJldHJpZXZlKG1lc3NhZ2VCYXRjaElkLCB7fSwgcGFyYW1zKTtcbiAgICB9XG4gICAgY29uc3QgeyBiZXRhcyB9ID0gcGFyYW1zO1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQuZ2V0KGAvdjEvbWVzc2FnZXMvYmF0Y2hlcy8ke21lc3NhZ2VCYXRjaElkfT9iZXRhPXRydWVgLCB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYW50aHJvcGljLWJldGEnOiBbLi4uKGJldGFzID8/IFtdKSwgJ21lc3NhZ2UtYmF0Y2hlcy0yMDI0LTA5LTI0J10udG9TdHJpbmcoKSxcbiAgICAgICAgLi4ub3B0aW9ucz8uaGVhZGVycyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdCBhbGwgTWVzc2FnZSBCYXRjaGVzIHdpdGhpbiBhIFdvcmtzcGFjZS4gTW9zdCByZWNlbnRseSBjcmVhdGVkIGJhdGNoZXMgYXJlXG4gICAqIHJldHVybmVkIGZpcnN0LlxuICAgKi9cbiAgbGlzdChcbiAgICBwYXJhbXM/OiBCYXRjaExpc3RQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuUGFnZVByb21pc2U8QmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSwgQmV0YU1lc3NhZ2VCYXRjaD47XG4gIGxpc3Qob3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLlBhZ2VQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UsIEJldGFNZXNzYWdlQmF0Y2g+O1xuICBsaXN0KFxuICAgIHBhcmFtczogQmF0Y2hMaXN0UGFyYW1zIHwgQ29yZS5SZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UsIEJldGFNZXNzYWdlQmF0Y2g+IHtcbiAgICBpZiAoaXNSZXF1ZXN0T3B0aW9ucyhwYXJhbXMpKSB7XG4gICAgICByZXR1cm4gdGhpcy5saXN0KHt9LCBwYXJhbXMpO1xuICAgIH1cbiAgICBjb25zdCB7IGJldGFzLCAuLi5xdWVyeSB9ID0gcGFyYW1zO1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQuZ2V0QVBJTGlzdCgnL3YxL21lc3NhZ2VzL2JhdGNoZXM/YmV0YT10cnVlJywgQmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSwge1xuICAgICAgcXVlcnksXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYW50aHJvcGljLWJldGEnOiBbLi4uKGJldGFzID8/IFtdKSwgJ21lc3NhZ2UtYmF0Y2hlcy0yMDI0LTA5LTI0J10udG9TdHJpbmcoKSxcbiAgICAgICAgLi4ub3B0aW9ucz8uaGVhZGVycyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQmF0Y2hlcyBtYXkgYmUgY2FuY2VsZWQgYW55IHRpbWUgYmVmb3JlIHByb2Nlc3NpbmcgZW5kcy4gT25jZSBjYW5jZWxsYXRpb24gaXNcbiAgICogaW5pdGlhdGVkLCB0aGUgYmF0Y2ggZW50ZXJzIGEgYGNhbmNlbGluZ2Agc3RhdGUsIGF0IHdoaWNoIHRpbWUgdGhlIHN5c3RlbSBtYXlcbiAgICogY29tcGxldGUgYW55IGluLXByb2dyZXNzLCBub24taW50ZXJydXB0aWJsZSByZXF1ZXN0cyBiZWZvcmUgZmluYWxpemluZ1xuICAgKiBjYW5jZWxsYXRpb24uXG4gICAqXG4gICAqIFRoZSBudW1iZXIgb2YgY2FuY2VsZWQgcmVxdWVzdHMgaXMgc3BlY2lmaWVkIGluIGByZXF1ZXN0X2NvdW50c2AuIFRvIGRldGVybWluZVxuICAgKiB3aGljaCByZXF1ZXN0cyB3ZXJlIGNhbmNlbGVkLCBjaGVjayB0aGUgaW5kaXZpZHVhbCByZXN1bHRzIHdpdGhpbiB0aGUgYmF0Y2guXG4gICAqIE5vdGUgdGhhdCBjYW5jZWxsYXRpb24gbWF5IG5vdCByZXN1bHQgaW4gYW55IGNhbmNlbGVkIHJlcXVlc3RzIGlmIHRoZXkgd2VyZVxuICAgKiBub24taW50ZXJydXB0aWJsZS5cbiAgICovXG4gIGNhbmNlbChcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIHBhcmFtcz86IEJhdGNoQ2FuY2VsUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLkFQSVByb21pc2U8QmV0YU1lc3NhZ2VCYXRjaD47XG4gIGNhbmNlbChtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxCZXRhTWVzc2FnZUJhdGNoPjtcbiAgY2FuY2VsKFxuICAgIG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsXG4gICAgcGFyYW1zOiBCYXRjaENhbmNlbFBhcmFtcyB8IENvcmUuUmVxdWVzdE9wdGlvbnMgPSB7fSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2g+IHtcbiAgICBpZiAoaXNSZXF1ZXN0T3B0aW9ucyhwYXJhbXMpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jYW5jZWwobWVzc2FnZUJhdGNoSWQsIHt9LCBwYXJhbXMpO1xuICAgIH1cbiAgICBjb25zdCB7IGJldGFzIH0gPSBwYXJhbXM7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5wb3N0KGAvdjEvbWVzc2FnZXMvYmF0Y2hlcy8ke21lc3NhZ2VCYXRjaElkfS9jYW5jZWw/YmV0YT10cnVlYCwge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2FudGhyb3BpYy1iZXRhJzogWy4uLihiZXRhcyA/PyBbXSksICdtZXNzYWdlLWJhdGNoZXMtMjAyNC0wOS0yNCddLnRvU3RyaW5nKCksXG4gICAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0cmVhbXMgdGhlIHJlc3VsdHMgb2YgYSBNZXNzYWdlIEJhdGNoIGFzIGEgYC5qc29ubGAgZmlsZS5cbiAgICpcbiAgICogRWFjaCBsaW5lIGluIHRoZSBmaWxlIGlzIGEgSlNPTiBvYmplY3QgY29udGFpbmluZyB0aGUgcmVzdWx0IG9mIGEgc2luZ2xlIHJlcXVlc3RcbiAgICogaW4gdGhlIE1lc3NhZ2UgQmF0Y2guIFJlc3VsdHMgYXJlIG5vdCBndWFyYW50ZWVkIHRvIGJlIGluIHRoZSBzYW1lIG9yZGVyIGFzXG4gICAqIHJlcXVlc3RzLiBVc2UgdGhlIGBjdXN0b21faWRgIGZpZWxkIHRvIG1hdGNoIHJlc3VsdHMgdG8gcmVxdWVzdHMuXG4gICAqL1xuICBhc3luYyByZXN1bHRzKFxuICAgIG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsXG4gICAgcGFyYW1zPzogQmF0Y2hSZXN1bHRzUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBQcm9taXNlPEpTT05MRGVjb2RlcjxCZXRhTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlPj47XG4gIGFzeW5jIHJlc3VsdHMoXG4gICAgbWVzc2FnZUJhdGNoSWQ6IHN0cmluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogUHJvbWlzZTxKU09OTERlY29kZXI8QmV0YU1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZT4+O1xuICBhc3luYyByZXN1bHRzKFxuICAgIG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsXG4gICAgcGFyYW1zOiBCYXRjaFJlc3VsdHNQYXJhbXMgfCBDb3JlLlJlcXVlc3RPcHRpb25zID0ge30sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IFByb21pc2U8SlNPTkxEZWNvZGVyPEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2U+PiB7XG4gICAgaWYgKGlzUmVxdWVzdE9wdGlvbnMocGFyYW1zKSkge1xuICAgICAgcmV0dXJuIHRoaXMucmVzdWx0cyhtZXNzYWdlQmF0Y2hJZCwge30sIHBhcmFtcyk7XG4gICAgfVxuXG4gICAgY29uc3QgYmF0Y2ggPSBhd2FpdCB0aGlzLnJldHJpZXZlKG1lc3NhZ2VCYXRjaElkKTtcbiAgICBpZiAoIWJhdGNoLnJlc3VsdHNfdXJsKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoXG4gICAgICAgIGBObyBiYXRjaCBcXGByZXN1bHRzX3VybFxcYDsgSGFzIGl0IGZpbmlzaGVkIHByb2Nlc3Npbmc/ICR7YmF0Y2gucHJvY2Vzc2luZ19zdGF0dXN9IC0gJHtiYXRjaC5pZH1gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGJldGFzIH0gPSBwYXJhbXM7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudFxuICAgICAgLmdldChiYXRjaC5yZXN1bHRzX3VybCwge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ2FudGhyb3BpYy1iZXRhJzogWy4uLihiZXRhcyA/PyBbXSksICdtZXNzYWdlLWJhdGNoZXMtMjAyNC0wOS0yNCddLnRvU3RyaW5nKCksXG4gICAgICAgICAgLi4ub3B0aW9ucz8uaGVhZGVycyxcbiAgICAgICAgfSxcbiAgICAgICAgX19iaW5hcnlSZXNwb25zZTogdHJ1ZSxcbiAgICAgIH0pXG4gICAgICAuX3RoZW5VbndyYXAoKF8sIHByb3BzKSA9PiBKU09OTERlY29kZXIuZnJvbVJlc3BvbnNlKHByb3BzLnJlc3BvbnNlLCBwcm9wcy5jb250cm9sbGVyKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UgZXh0ZW5kcyBQYWdlPEJldGFNZXNzYWdlQmF0Y2g+IHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2VCYXRjaCB7XG4gIC8qKlxuICAgKiBVbmlxdWUgb2JqZWN0IGlkZW50aWZpZXIuXG4gICAqXG4gICAqIFRoZSBmb3JtYXQgYW5kIGxlbmd0aCBvZiBJRHMgbWF5IGNoYW5nZSBvdmVyIHRpbWUuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBSRkMgMzMzOSBkYXRldGltZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0aW1lIGF0IHdoaWNoIHRoZSBNZXNzYWdlIEJhdGNoIHdhc1xuICAgKiBhcmNoaXZlZCBhbmQgaXRzIHJlc3VsdHMgYmVjYW1lIHVuYXZhaWxhYmxlLlxuICAgKi9cbiAgYXJjaGl2ZWRfYXQ6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggY2FuY2VsbGF0aW9uIHdhc1xuICAgKiBpbml0aWF0ZWQgZm9yIHRoZSBNZXNzYWdlIEJhdGNoLiBTcGVjaWZpZWQgb25seSBpZiBjYW5jZWxsYXRpb24gd2FzIGluaXRpYXRlZC5cbiAgICovXG4gIGNhbmNlbF9pbml0aWF0ZWRfYXQ6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggdGhlIE1lc3NhZ2UgQmF0Y2ggd2FzXG4gICAqIGNyZWF0ZWQuXG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggcHJvY2Vzc2luZyBmb3IgdGhlXG4gICAqIE1lc3NhZ2UgQmF0Y2ggZW5kZWQuIFNwZWNpZmllZCBvbmx5IG9uY2UgcHJvY2Vzc2luZyBlbmRzLlxuICAgKlxuICAgKiBQcm9jZXNzaW5nIGVuZHMgd2hlbiBldmVyeSByZXF1ZXN0IGluIGEgTWVzc2FnZSBCYXRjaCBoYXMgZWl0aGVyIHN1Y2NlZWRlZCxcbiAgICogZXJyb3JlZCwgY2FuY2VsZWQsIG9yIGV4cGlyZWQuXG4gICAqL1xuICBlbmRlZF9hdDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCB0aGUgTWVzc2FnZSBCYXRjaCB3aWxsXG4gICAqIGV4cGlyZSBhbmQgZW5kIHByb2Nlc3NpbmcsIHdoaWNoIGlzIDI0IGhvdXJzIGFmdGVyIGNyZWF0aW9uLlxuICAgKi9cbiAgZXhwaXJlc19hdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBQcm9jZXNzaW5nIHN0YXR1cyBvZiB0aGUgTWVzc2FnZSBCYXRjaC5cbiAgICovXG4gIHByb2Nlc3Npbmdfc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnIHwgJ2NhbmNlbGluZycgfCAnZW5kZWQnO1xuXG4gIC8qKlxuICAgKiBUYWxsaWVzIHJlcXVlc3RzIHdpdGhpbiB0aGUgTWVzc2FnZSBCYXRjaCwgY2F0ZWdvcml6ZWQgYnkgdGhlaXIgc3RhdHVzLlxuICAgKlxuICAgKiBSZXF1ZXN0cyBzdGFydCBhcyBgcHJvY2Vzc2luZ2AgYW5kIG1vdmUgdG8gb25lIG9mIHRoZSBvdGhlciBzdGF0dXNlcyBvbmx5IG9uY2VcbiAgICogcHJvY2Vzc2luZyBvZiB0aGUgZW50aXJlIGJhdGNoIGVuZHMuIFRoZSBzdW0gb2YgYWxsIHZhbHVlcyBhbHdheXMgbWF0Y2hlcyB0aGVcbiAgICogdG90YWwgbnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBiYXRjaC5cbiAgICovXG4gIHJlcXVlc3RfY291bnRzOiBCZXRhTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cztcblxuICAvKipcbiAgICogVVJMIHRvIGEgYC5qc29ubGAgZmlsZSBjb250YWluaW5nIHRoZSByZXN1bHRzIG9mIHRoZSBNZXNzYWdlIEJhdGNoIHJlcXVlc3RzLlxuICAgKiBTcGVjaWZpZWQgb25seSBvbmNlIHByb2Nlc3NpbmcgZW5kcy5cbiAgICpcbiAgICogUmVzdWx0cyBpbiB0aGUgZmlsZSBhcmUgbm90IGd1YXJhbnRlZWQgdG8gYmUgaW4gdGhlIHNhbWUgb3JkZXIgYXMgcmVxdWVzdHMuIFVzZVxuICAgKiB0aGUgYGN1c3RvbV9pZGAgZmllbGQgdG8gbWF0Y2ggcmVzdWx0cyB0byByZXF1ZXN0cy5cbiAgICovXG4gIHJlc3VsdHNfdXJsOiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBPYmplY3QgdHlwZS5cbiAgICpcbiAgICogRm9yIE1lc3NhZ2UgQmF0Y2hlcywgdGhpcyBpcyBhbHdheXMgYFwibWVzc2FnZV9iYXRjaFwiYC5cbiAgICovXG4gIHR5cGU6ICdtZXNzYWdlX2JhdGNoJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQge1xuICB0eXBlOiAnY2FuY2VsZWQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0IHtcbiAgZXJyb3I6IEJldGFBUEkuQmV0YUVycm9yUmVzcG9uc2U7XG5cbiAgdHlwZTogJ2Vycm9yZWQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0IHtcbiAgdHlwZTogJ2V4cGlyZWQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2Uge1xuICAvKipcbiAgICogRGV2ZWxvcGVyLXByb3ZpZGVkIElEIGNyZWF0ZWQgZm9yIGVhY2ggcmVxdWVzdCBpbiBhIE1lc3NhZ2UgQmF0Y2guIFVzZWZ1bCBmb3JcbiAgICogbWF0Y2hpbmcgcmVzdWx0cyB0byByZXF1ZXN0cywgYXMgcmVzdWx0cyBtYXkgYmUgZ2l2ZW4gb3V0IG9mIHJlcXVlc3Qgb3JkZXIuXG4gICAqXG4gICAqIE11c3QgYmUgdW5pcXVlIGZvciBlYWNoIHJlcXVlc3Qgd2l0aGluIHRoZSBNZXNzYWdlIEJhdGNoLlxuICAgKi9cbiAgY3VzdG9tX2lkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFByb2Nlc3NpbmcgcmVzdWx0IGZvciB0aGlzIHJlcXVlc3QuXG4gICAqXG4gICAqIENvbnRhaW5zIGEgTWVzc2FnZSBvdXRwdXQgaWYgcHJvY2Vzc2luZyB3YXMgc3VjY2Vzc2Z1bCwgYW4gZXJyb3IgcmVzcG9uc2UgaWZcbiAgICogcHJvY2Vzc2luZyBmYWlsZWQsIG9yIHRoZSByZWFzb24gd2h5IHByb2Nlc3Npbmcgd2FzIG5vdCBhdHRlbXB0ZWQsIHN1Y2ggYXNcbiAgICogY2FuY2VsbGF0aW9uIG9yIGV4cGlyYXRpb24uXG4gICAqL1xuICByZXN1bHQ6IEJldGFNZXNzYWdlQmF0Y2hSZXN1bHQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMge1xuICAvKipcbiAgICogTnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBNZXNzYWdlIEJhdGNoIHRoYXQgaGF2ZSBiZWVuIGNhbmNlbGVkLlxuICAgKlxuICAgKiBUaGlzIGlzIHplcm8gdW50aWwgcHJvY2Vzc2luZyBvZiB0aGUgZW50aXJlIE1lc3NhZ2UgQmF0Y2ggaGFzIGVuZGVkLlxuICAgKi9cbiAgY2FuY2VsZWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogTnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBNZXNzYWdlIEJhdGNoIHRoYXQgZW5jb3VudGVyZWQgYW4gZXJyb3IuXG4gICAqXG4gICAqIFRoaXMgaXMgemVybyB1bnRpbCBwcm9jZXNzaW5nIG9mIHRoZSBlbnRpcmUgTWVzc2FnZSBCYXRjaCBoYXMgZW5kZWQuXG4gICAqL1xuICBlcnJvcmVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGhhdmUgZXhwaXJlZC5cbiAgICpcbiAgICogVGhpcyBpcyB6ZXJvIHVudGlsIHByb2Nlc3Npbmcgb2YgdGhlIGVudGlyZSBNZXNzYWdlIEJhdGNoIGhhcyBlbmRlZC5cbiAgICovXG4gIGV4cGlyZWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogTnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBNZXNzYWdlIEJhdGNoIHRoYXQgYXJlIHByb2Nlc3NpbmcuXG4gICAqL1xuICBwcm9jZXNzaW5nOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGhhdmUgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS5cbiAgICpcbiAgICogVGhpcyBpcyB6ZXJvIHVudGlsIHByb2Nlc3Npbmcgb2YgdGhlIGVudGlyZSBNZXNzYWdlIEJhdGNoIGhhcyBlbmRlZC5cbiAgICovXG4gIHN1Y2NlZWRlZDogbnVtYmVyO1xufVxuXG4vKipcbiAqIFByb2Nlc3NpbmcgcmVzdWx0IGZvciB0aGlzIHJlcXVlc3QuXG4gKlxuICogQ29udGFpbnMgYSBNZXNzYWdlIG91dHB1dCBpZiBwcm9jZXNzaW5nIHdhcyBzdWNjZXNzZnVsLCBhbiBlcnJvciByZXNwb25zZSBpZlxuICogcHJvY2Vzc2luZyBmYWlsZWQsIG9yIHRoZSByZWFzb24gd2h5IHByb2Nlc3Npbmcgd2FzIG5vdCBhdHRlbXB0ZWQsIHN1Y2ggYXNcbiAqIGNhbmNlbGxhdGlvbiBvciBleHBpcmF0aW9uLlxuICovXG5leHBvcnQgdHlwZSBCZXRhTWVzc2FnZUJhdGNoUmVzdWx0ID1cbiAgfCBCZXRhTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0XG4gIHwgQmV0YU1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHRcbiAgfCBCZXRhTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHRcbiAgfCBCZXRhTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdDtcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0IHtcbiAgbWVzc2FnZTogQmV0YU1lc3NhZ2VzQVBJLkJldGFNZXNzYWdlO1xuXG4gIHR5cGU6ICdzdWNjZWVkZWQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhdGNoQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IExpc3Qgb2YgcmVxdWVzdHMgZm9yIHByb21wdCBjb21wbGV0aW9uLiBFYWNoIGlzIGFuIGluZGl2aWR1YWxcbiAgICogcmVxdWVzdCB0byBjcmVhdGUgYSBNZXNzYWdlLlxuICAgKi9cbiAgcmVxdWVzdHM6IEFycmF5PEJhdGNoQ3JlYXRlUGFyYW1zLlJlcXVlc3Q+O1xuXG4gIC8qKlxuICAgKiBIZWFkZXIgcGFyYW06IE9wdGlvbmFsIGhlYWRlciB0byBzcGVjaWZ5IHRoZSBiZXRhIHZlcnNpb24ocykgeW91IHdhbnQgdG8gdXNlLlxuICAgKi9cbiAgYmV0YXM/OiBBcnJheTxCZXRhQVBJLkFudGhyb3BpY0JldGE+O1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEJhdGNoQ3JlYXRlUGFyYW1zIHtcbiAgZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0IHtcbiAgICAvKipcbiAgICAgKiBEZXZlbG9wZXItcHJvdmlkZWQgSUQgY3JlYXRlZCBmb3IgZWFjaCByZXF1ZXN0IGluIGEgTWVzc2FnZSBCYXRjaC4gVXNlZnVsIGZvclxuICAgICAqIG1hdGNoaW5nIHJlc3VsdHMgdG8gcmVxdWVzdHMsIGFzIHJlc3VsdHMgbWF5IGJlIGdpdmVuIG91dCBvZiByZXF1ZXN0IG9yZGVyLlxuICAgICAqXG4gICAgICogTXVzdCBiZSB1bmlxdWUgZm9yIGVhY2ggcmVxdWVzdCB3aXRoaW4gdGhlIE1lc3NhZ2UgQmF0Y2guXG4gICAgICovXG4gICAgY3VzdG9tX2lkOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBNZXNzYWdlcyBBUEkgY3JlYXRpb24gcGFyYW1ldGVycyBmb3IgdGhlIGluZGl2aWR1YWwgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFNlZSB0aGUgW01lc3NhZ2VzIEFQSSByZWZlcmVuY2VdKC9lbi9hcGkvbWVzc2FnZXMpIGZvciBmdWxsIGRvY3VtZW50YXRpb24gb25cbiAgICAgKiBhdmFpbGFibGUgcGFyYW1ldGVycy5cbiAgICAgKi9cbiAgICBwYXJhbXM6IE9taXQ8QmV0YU1lc3NhZ2VzQVBJLk1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsICdiZXRhcyc+O1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hSZXRyaWV2ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBPcHRpb25hbCBoZWFkZXIgdG8gc3BlY2lmeSB0aGUgYmV0YSB2ZXJzaW9uKHMpIHlvdSB3YW50IHRvIHVzZS5cbiAgICovXG4gIGJldGFzPzogQXJyYXk8QmV0YUFQSS5BbnRocm9waWNCZXRhPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXRjaExpc3RQYXJhbXMgZXh0ZW5kcyBQYWdlUGFyYW1zIHtcbiAgLyoqXG4gICAqIEhlYWRlciBwYXJhbTogT3B0aW9uYWwgaGVhZGVyIHRvIHNwZWNpZnkgdGhlIGJldGEgdmVyc2lvbihzKSB5b3Ugd2FudCB0byB1c2UuXG4gICAqL1xuICBiZXRhcz86IEFycmF5PEJldGFBUEkuQW50aHJvcGljQmV0YT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hDYW5jZWxQYXJhbXMge1xuICAvKipcbiAgICogT3B0aW9uYWwgaGVhZGVyIHRvIHNwZWNpZnkgdGhlIGJldGEgdmVyc2lvbihzKSB5b3Ugd2FudCB0byB1c2UuXG4gICAqL1xuICBiZXRhcz86IEFycmF5PEJldGFBUEkuQW50aHJvcGljQmV0YT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hSZXN1bHRzUGFyYW1zIHtcbiAgLyoqXG4gICAqIE9wdGlvbmFsIGhlYWRlciB0byBzcGVjaWZ5IHRoZSBiZXRhIHZlcnNpb24ocykgeW91IHdhbnQgdG8gdXNlLlxuICAgKi9cbiAgYmV0YXM/OiBBcnJheTxCZXRhQVBJLkFudGhyb3BpY0JldGE+O1xufVxuXG5CYXRjaGVzLkJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UgPSBCZXRhTWVzc2FnZUJhdGNoZXNQYWdlO1xuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgQmF0Y2hlcyB7XG4gIGV4cG9ydCB7XG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoIGFzIEJldGFNZXNzYWdlQmF0Y2gsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0LFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2UgYXMgQmV0YU1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzIGFzIEJldGFNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoUmVzdWx0LFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0LFxuICAgIEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UgYXMgQmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSxcbiAgICB0eXBlIEJhdGNoQ3JlYXRlUGFyYW1zIGFzIEJhdGNoQ3JlYXRlUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hSZXRyaWV2ZVBhcmFtcyBhcyBCYXRjaFJldHJpZXZlUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hMaXN0UGFyYW1zIGFzIEJhdGNoTGlzdFBhcmFtcyxcbiAgICB0eXBlIEJhdGNoQ2FuY2VsUGFyYW1zIGFzIEJhdGNoQ2FuY2VsUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hSZXN1bHRzUGFyYW1zIGFzIEJhdGNoUmVzdWx0c1BhcmFtcyxcbiAgfTtcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gXCIuLi8uLi8uLi9yZXNvdXJjZS5qc1wiO1xuaW1wb3J0IHsgQVBJUHJvbWlzZSB9IGZyb20gXCIuLi8uLi8uLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gXCIuLi8uLi8uLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBNZXNzYWdlc01lc3NhZ2VzQVBJIGZyb20gXCIuL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgKiBhcyBNZXNzYWdlc0FQSSBmcm9tIFwiLi4vLi4vbWVzc2FnZXMuanNcIjtcbmltcG9ydCAqIGFzIEJldGFBUEkgZnJvbSBcIi4uL2JldGEuanNcIjtcbmltcG9ydCAqIGFzIEJhdGNoZXNBUEkgZnJvbSBcIi4vYmF0Y2hlcy5qc1wiO1xuaW1wb3J0IHtcbiAgQmF0Y2hDYW5jZWxQYXJhbXMsXG4gIEJhdGNoQ3JlYXRlUGFyYW1zLFxuICBCYXRjaExpc3RQYXJhbXMsXG4gIEJhdGNoUmVzdWx0c1BhcmFtcyxcbiAgQmF0Y2hSZXRyaWV2ZVBhcmFtcyxcbiAgQmF0Y2hlcyxcbiAgQmV0YU1lc3NhZ2VCYXRjaCxcbiAgQmV0YU1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0LFxuICBCZXRhTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCxcbiAgQmV0YU1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQsXG4gIEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2UsXG4gIEJldGFNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzLFxuICBCZXRhTWVzc2FnZUJhdGNoUmVzdWx0LFxuICBCZXRhTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0LFxuICBCZXRhTWVzc2FnZUJhdGNoZXNQYWdlLFxufSBmcm9tIFwiLi9iYXRjaGVzLmpzXCI7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tIFwiLi4vLi4vLi4vc3RyZWFtaW5nLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBNZXNzYWdlcyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgYmF0Y2hlczogQmF0Y2hlc0FQSS5CYXRjaGVzID0gbmV3IEJhdGNoZXNBUEkuQmF0Y2hlcyh0aGlzLl9jbGllbnQpO1xuXG4gIC8qKlxuICAgKiBTZW5kIGEgc3RydWN0dXJlZCBsaXN0IG9mIGlucHV0IG1lc3NhZ2VzIHdpdGggdGV4dCBhbmQvb3IgaW1hZ2UgY29udGVudCwgYW5kIHRoZVxuICAgKiBtb2RlbCB3aWxsIGdlbmVyYXRlIHRoZSBuZXh0IG1lc3NhZ2UgaW4gdGhlIGNvbnZlcnNhdGlvbi5cbiAgICpcbiAgICogVGhlIE1lc3NhZ2VzIEFQSSBjYW4gYmUgdXNlZCBmb3IgZWl0aGVyIHNpbmdsZSBxdWVyaWVzIG9yIHN0YXRlbGVzcyBtdWx0aS10dXJuXG4gICAqIGNvbnZlcnNhdGlvbnMuXG4gICAqL1xuICBjcmVhdGUocGFyYW1zOiBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IEFQSVByb21pc2U8QmV0YU1lc3NhZ2U+O1xuICBjcmVhdGUoXG4gICAgcGFyYW1zOiBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50Pj47XG4gIGNyZWF0ZShcbiAgICBwYXJhbXM6IE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50PiB8IEJldGFNZXNzYWdlPjtcbiAgY3JlYXRlKFxuICAgIHBhcmFtczogTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxCZXRhTWVzc2FnZT4gfCBBUElQcm9taXNlPFN0cmVhbTxCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50Pj4ge1xuICAgIGNvbnN0IHsgYmV0YXMsIC4uLmJvZHkgfSA9IHBhcmFtcztcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LnBvc3QoJy92MS9tZXNzYWdlcz9iZXRhPXRydWUnLCB7XG4gICAgICBib2R5LFxuICAgICAgdGltZW91dDogKHRoaXMuX2NsaWVudCBhcyBhbnkpLl9vcHRpb25zLnRpbWVvdXQgPz8gNjAwMDAwLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgLi4uKGJldGFzPy50b1N0cmluZygpICE9IG51bGwgPyB7ICdhbnRocm9waWMtYmV0YSc6IGJldGFzPy50b1N0cmluZygpIH0gOiB1bmRlZmluZWQpLFxuICAgICAgICAuLi5vcHRpb25zPy5oZWFkZXJzLFxuICAgICAgfSxcbiAgICAgIHN0cmVhbTogcGFyYW1zLnN0cmVhbSA/PyBmYWxzZSxcbiAgICB9KSBhcyBBUElQcm9taXNlPEJldGFNZXNzYWdlPiB8IEFQSVByb21pc2U8U3RyZWFtPEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQ+PjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb3VudCB0aGUgbnVtYmVyIG9mIHRva2VucyBpbiBhIE1lc3NhZ2UuXG4gICAqXG4gICAqIFRoZSBUb2tlbiBDb3VudCBBUEkgY2FuIGJlIHVzZWQgdG8gY291bnQgdGhlIG51bWJlciBvZiB0b2tlbnMgaW4gYSBNZXNzYWdlLFxuICAgKiBpbmNsdWRpbmcgdG9vbHMsIGltYWdlcywgYW5kIGRvY3VtZW50cywgd2l0aG91dCBjcmVhdGluZyBpdC5cbiAgICovXG4gIGNvdW50VG9rZW5zKFxuICAgIHBhcmFtczogTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLkFQSVByb21pc2U8QmV0YU1lc3NhZ2VUb2tlbnNDb3VudD4ge1xuICAgIGNvbnN0IHsgYmV0YXMsIC4uLmJvZHkgfSA9IHBhcmFtcztcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LnBvc3QoJy92MS9tZXNzYWdlcy9jb3VudF90b2tlbnM/YmV0YT10cnVlJywge1xuICAgICAgYm9keSxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhbnRocm9waWMtYmV0YSc6IFsuLi4oYmV0YXMgPz8gW10pLCAndG9rZW4tY291bnRpbmctMjAyNC0xMS0wMSddLnRvU3RyaW5nKCksXG4gICAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUJhc2U2NFBERkJsb2NrIHtcbiAgc291cmNlOiBCZXRhQmFzZTY0UERGU291cmNlO1xuXG4gIHR5cGU6ICdkb2N1bWVudCc7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFCYXNlNjRQREZTb3VyY2Uge1xuICBkYXRhOiBzdHJpbmc7XG5cbiAgbWVkaWFfdHlwZTogJ2FwcGxpY2F0aW9uL3BkZic7XG5cbiAgdHlwZTogJ2Jhc2U2NCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB7XG4gIHR5cGU6ICdlcGhlbWVyYWwnO1xufVxuXG5leHBvcnQgdHlwZSBCZXRhQ29udGVudEJsb2NrID0gQmV0YVRleHRCbG9jayB8IEJldGFUb29sVXNlQmxvY2s7XG5cbmV4cG9ydCB0eXBlIEJldGFDb250ZW50QmxvY2tQYXJhbSA9XG4gIHwgQmV0YVRleHRCbG9ja1BhcmFtXG4gIHwgQmV0YUltYWdlQmxvY2tQYXJhbVxuICB8IEJldGFUb29sVXNlQmxvY2tQYXJhbVxuICB8IEJldGFUb29sUmVzdWx0QmxvY2tQYXJhbVxuICB8IEJldGFCYXNlNjRQREZCbG9jaztcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhSW1hZ2VCbG9ja1BhcmFtIHtcbiAgc291cmNlOiBCZXRhSW1hZ2VCbG9ja1BhcmFtLlNvdXJjZTtcblxuICB0eXBlOiAnaW1hZ2UnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBCZXRhSW1hZ2VCbG9ja1BhcmFtIHtcbiAgZXhwb3J0IGludGVyZmFjZSBTb3VyY2Uge1xuICAgIGRhdGE6IHN0cmluZztcblxuICAgIG1lZGlhX3R5cGU6ICdpbWFnZS9qcGVnJyB8ICdpbWFnZS9wbmcnIHwgJ2ltYWdlL2dpZicgfCAnaW1hZ2Uvd2VicCc7XG5cbiAgICB0eXBlOiAnYmFzZTY0JztcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFJbnB1dEpTT05EZWx0YSB7XG4gIHBhcnRpYWxfanNvbjogc3RyaW5nO1xuXG4gIHR5cGU6ICdpbnB1dF9qc29uX2RlbHRhJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBVbmlxdWUgb2JqZWN0IGlkZW50aWZpZXIuXG4gICAqXG4gICAqIFRoZSBmb3JtYXQgYW5kIGxlbmd0aCBvZiBJRHMgbWF5IGNoYW5nZSBvdmVyIHRpbWUuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBDb250ZW50IGdlbmVyYXRlZCBieSB0aGUgbW9kZWwuXG4gICAqXG4gICAqIFRoaXMgaXMgYW4gYXJyYXkgb2YgY29udGVudCBibG9ja3MsIGVhY2ggb2Ygd2hpY2ggaGFzIGEgYHR5cGVgIHRoYXQgZGV0ZXJtaW5lc1xuICAgKiBpdHMgc2hhcGUuXG4gICAqXG4gICAqIEV4YW1wbGU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW3sgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJIaSwgSSdtIENsYXVkZS5cIiB9XVxuICAgKiBgYGBcbiAgICpcbiAgICogSWYgdGhlIHJlcXVlc3QgaW5wdXQgYG1lc3NhZ2VzYCBlbmRlZCB3aXRoIGFuIGBhc3Npc3RhbnRgIHR1cm4sIHRoZW4gdGhlXG4gICAqIHJlc3BvbnNlIGBjb250ZW50YCB3aWxsIGNvbnRpbnVlIGRpcmVjdGx5IGZyb20gdGhhdCBsYXN0IHR1cm4uIFlvdSBjYW4gdXNlIHRoaXNcbiAgICogdG8gY29uc3RyYWluIHRoZSBtb2RlbCdzIG91dHB1dC5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGlmIHRoZSBpbnB1dCBgbWVzc2FnZXNgIHdlcmU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIldoYXQncyB0aGUgR3JlZWsgbmFtZSBmb3IgU3VuPyAoQSkgU29sIChCKSBIZWxpb3MgKEMpIFN1blwiXG4gICAqICAgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJUaGUgYmVzdCBhbnN3ZXIgaXMgKFwiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogVGhlbiB0aGUgcmVzcG9uc2UgYGNvbnRlbnRgIG1pZ2h0IGJlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFt7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiQilcIiB9XVxuICAgKiBgYGBcbiAgICovXG4gIGNvbnRlbnQ6IEFycmF5PEJldGFDb250ZW50QmxvY2s+O1xuXG4gIC8qKlxuICAgKiBUaGUgbW9kZWwgdGhhdCB3aWxsIGNvbXBsZXRlIHlvdXIgcHJvbXB0LlxcblxcblNlZVxuICAgKiBbbW9kZWxzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL21vZGVscy1vdmVydmlldykgZm9yIGFkZGl0aW9uYWxcbiAgICogZGV0YWlscyBhbmQgb3B0aW9ucy5cbiAgICovXG4gIG1vZGVsOiBNZXNzYWdlc0FQSS5Nb2RlbDtcblxuICAvKipcbiAgICogQ29udmVyc2F0aW9uYWwgcm9sZSBvZiB0aGUgZ2VuZXJhdGVkIG1lc3NhZ2UuXG4gICAqXG4gICAqIFRoaXMgd2lsbCBhbHdheXMgYmUgYFwiYXNzaXN0YW50XCJgLlxuICAgKi9cbiAgcm9sZTogJ2Fzc2lzdGFudCc7XG5cbiAgLyoqXG4gICAqIFRoZSByZWFzb24gdGhhdCB3ZSBzdG9wcGVkLlxuICAgKlxuICAgKiBUaGlzIG1heSBiZSBvbmUgdGhlIGZvbGxvd2luZyB2YWx1ZXM6XG4gICAqXG4gICAqIC0gYFwiZW5kX3R1cm5cImA6IHRoZSBtb2RlbCByZWFjaGVkIGEgbmF0dXJhbCBzdG9wcGluZyBwb2ludFxuICAgKiAtIGBcIm1heF90b2tlbnNcImA6IHdlIGV4Y2VlZGVkIHRoZSByZXF1ZXN0ZWQgYG1heF90b2tlbnNgIG9yIHRoZSBtb2RlbCdzIG1heGltdW1cbiAgICogLSBgXCJzdG9wX3NlcXVlbmNlXCJgOiBvbmUgb2YgeW91ciBwcm92aWRlZCBjdXN0b20gYHN0b3Bfc2VxdWVuY2VzYCB3YXMgZ2VuZXJhdGVkXG4gICAqIC0gYFwidG9vbF91c2VcImA6IHRoZSBtb2RlbCBpbnZva2VkIG9uZSBvciBtb3JlIHRvb2xzXG4gICAqXG4gICAqIEluIG5vbi1zdHJlYW1pbmcgbW9kZSB0aGlzIHZhbHVlIGlzIGFsd2F5cyBub24tbnVsbC4gSW4gc3RyZWFtaW5nIG1vZGUsIGl0IGlzXG4gICAqIG51bGwgaW4gdGhlIGBtZXNzYWdlX3N0YXJ0YCBldmVudCBhbmQgbm9uLW51bGwgb3RoZXJ3aXNlLlxuICAgKi9cbiAgc3RvcF9yZWFzb246ICdlbmRfdHVybicgfCAnbWF4X3Rva2VucycgfCAnc3RvcF9zZXF1ZW5jZScgfCAndG9vbF91c2UnIHwgbnVsbDtcblxuICAvKipcbiAgICogV2hpY2ggY3VzdG9tIHN0b3Agc2VxdWVuY2Ugd2FzIGdlbmVyYXRlZCwgaWYgYW55LlxuICAgKlxuICAgKiBUaGlzIHZhbHVlIHdpbGwgYmUgYSBub24tbnVsbCBzdHJpbmcgaWYgb25lIG9mIHlvdXIgY3VzdG9tIHN0b3Agc2VxdWVuY2VzIHdhc1xuICAgKiBnZW5lcmF0ZWQuXG4gICAqL1xuICBzdG9wX3NlcXVlbmNlOiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBPYmplY3QgdHlwZS5cbiAgICpcbiAgICogRm9yIE1lc3NhZ2VzLCB0aGlzIGlzIGFsd2F5cyBgXCJtZXNzYWdlXCJgLlxuICAgKi9cbiAgdHlwZTogJ21lc3NhZ2UnO1xuXG4gIC8qKlxuICAgKiBCaWxsaW5nIGFuZCByYXRlLWxpbWl0IHVzYWdlLlxuICAgKlxuICAgKiBBbnRocm9waWMncyBBUEkgYmlsbHMgYW5kIHJhdGUtbGltaXRzIGJ5IHRva2VuIGNvdW50cywgYXMgdG9rZW5zIHJlcHJlc2VudCB0aGVcbiAgICogdW5kZXJseWluZyBjb3N0IHRvIG91ciBzeXN0ZW1zLlxuICAgKlxuICAgKiBVbmRlciB0aGUgaG9vZCwgdGhlIEFQSSB0cmFuc2Zvcm1zIHJlcXVlc3RzIGludG8gYSBmb3JtYXQgc3VpdGFibGUgZm9yIHRoZVxuICAgKiBtb2RlbC4gVGhlIG1vZGVsJ3Mgb3V0cHV0IHRoZW4gZ29lcyB0aHJvdWdoIGEgcGFyc2luZyBzdGFnZSBiZWZvcmUgYmVjb21pbmcgYW5cbiAgICogQVBJIHJlc3BvbnNlLiBBcyBhIHJlc3VsdCwgdGhlIHRva2VuIGNvdW50cyBpbiBgdXNhZ2VgIHdpbGwgbm90IG1hdGNoIG9uZS10by1vbmVcbiAgICogd2l0aCB0aGUgZXhhY3QgdmlzaWJsZSBjb250ZW50IG9mIGFuIEFQSSByZXF1ZXN0IG9yIHJlc3BvbnNlLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgYG91dHB1dF90b2tlbnNgIHdpbGwgYmUgbm9uLXplcm8sIGV2ZW4gZm9yIGFuIGVtcHR5IHN0cmluZyByZXNwb25zZVxuICAgKiBmcm9tIENsYXVkZS5cbiAgICovXG4gIHVzYWdlOiBCZXRhVXNhZ2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2VEZWx0YVVzYWdlIHtcbiAgLyoqXG4gICAqIFRoZSBjdW11bGF0aXZlIG51bWJlciBvZiBvdXRwdXQgdG9rZW5zIHdoaWNoIHdlcmUgdXNlZC5cbiAgICovXG4gIG91dHB1dF90b2tlbnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZVBhcmFtIHtcbiAgY29udGVudDogc3RyaW5nIHwgQXJyYXk8QmV0YUNvbnRlbnRCbG9ja1BhcmFtPjtcblxuICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZVRva2Vuc0NvdW50IHtcbiAgLyoqXG4gICAqIFRoZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIGFjcm9zcyB0aGUgcHJvdmlkZWQgbGlzdCBvZiBtZXNzYWdlcywgc3lzdGVtIHByb21wdCxcbiAgICogYW5kIHRvb2xzLlxuICAgKi9cbiAgaW5wdXRfdG9rZW5zOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1ldGFkYXRhIHtcbiAgLyoqXG4gICAqIEFuIGV4dGVybmFsIGlkZW50aWZpZXIgZm9yIHRoZSB1c2VyIHdobyBpcyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlcXVlc3QuXG4gICAqXG4gICAqIFRoaXMgc2hvdWxkIGJlIGEgdXVpZCwgaGFzaCB2YWx1ZSwgb3Igb3RoZXIgb3BhcXVlIGlkZW50aWZpZXIuIEFudGhyb3BpYyBtYXkgdXNlXG4gICAqIHRoaXMgaWQgdG8gaGVscCBkZXRlY3QgYWJ1c2UuIERvIG5vdCBpbmNsdWRlIGFueSBpZGVudGlmeWluZyBpbmZvcm1hdGlvbiBzdWNoIGFzXG4gICAqIG5hbWUsIGVtYWlsIGFkZHJlc3MsIG9yIHBob25lIG51bWJlci5cbiAgICovXG4gIHVzZXJfaWQ/OiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50IHtcbiAgZGVsdGE6IEJldGFUZXh0RGVsdGEgfCBCZXRhSW5wdXRKU09ORGVsdGE7XG5cbiAgaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19kZWx0YSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQge1xuICBjb250ZW50X2Jsb2NrOiBCZXRhVGV4dEJsb2NrIHwgQmV0YVRvb2xVc2VCbG9jaztcblxuICBpbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjb250ZW50X2Jsb2NrX3N0YXJ0Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50IHtcbiAgaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19zdG9wJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhUmF3TWVzc2FnZURlbHRhRXZlbnQge1xuICBkZWx0YTogQmV0YVJhd01lc3NhZ2VEZWx0YUV2ZW50LkRlbHRhO1xuXG4gIHR5cGU6ICdtZXNzYWdlX2RlbHRhJztcblxuICAvKipcbiAgICogQmlsbGluZyBhbmQgcmF0ZS1saW1pdCB1c2FnZS5cbiAgICpcbiAgICogQW50aHJvcGljJ3MgQVBJIGJpbGxzIGFuZCByYXRlLWxpbWl0cyBieSB0b2tlbiBjb3VudHMsIGFzIHRva2VucyByZXByZXNlbnQgdGhlXG4gICAqIHVuZGVybHlpbmcgY29zdCB0byBvdXIgc3lzdGVtcy5cbiAgICpcbiAgICogVW5kZXIgdGhlIGhvb2QsIHRoZSBBUEkgdHJhbnNmb3JtcyByZXF1ZXN0cyBpbnRvIGEgZm9ybWF0IHN1aXRhYmxlIGZvciB0aGVcbiAgICogbW9kZWwuIFRoZSBtb2RlbCdzIG91dHB1dCB0aGVuIGdvZXMgdGhyb3VnaCBhIHBhcnNpbmcgc3RhZ2UgYmVmb3JlIGJlY29taW5nIGFuXG4gICAqIEFQSSByZXNwb25zZS4gQXMgYSByZXN1bHQsIHRoZSB0b2tlbiBjb3VudHMgaW4gYHVzYWdlYCB3aWxsIG5vdCBtYXRjaCBvbmUtdG8tb25lXG4gICAqIHdpdGggdGhlIGV4YWN0IHZpc2libGUgY29udGVudCBvZiBhbiBBUEkgcmVxdWVzdCBvciByZXNwb25zZS5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGBvdXRwdXRfdG9rZW5zYCB3aWxsIGJlIG5vbi16ZXJvLCBldmVuIGZvciBhbiBlbXB0eSBzdHJpbmcgcmVzcG9uc2VcbiAgICogZnJvbSBDbGF1ZGUuXG4gICAqL1xuICB1c2FnZTogQmV0YU1lc3NhZ2VEZWx0YVVzYWdlO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEJldGFSYXdNZXNzYWdlRGVsdGFFdmVudCB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgRGVsdGEge1xuICAgIHN0b3BfcmVhc29uOiAnZW5kX3R1cm4nIHwgJ21heF90b2tlbnMnIHwgJ3N0b3Bfc2VxdWVuY2UnIHwgJ3Rvb2xfdXNlJyB8IG51bGw7XG5cbiAgICBzdG9wX3NlcXVlbmNlOiBzdHJpbmcgfCBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVJhd01lc3NhZ2VTdGFydEV2ZW50IHtcbiAgbWVzc2FnZTogQmV0YU1lc3NhZ2U7XG5cbiAgdHlwZTogJ21lc3NhZ2Vfc3RhcnQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFSYXdNZXNzYWdlU3RvcEV2ZW50IHtcbiAgdHlwZTogJ21lc3NhZ2Vfc3RvcCc7XG59XG5cbmV4cG9ydCB0eXBlIEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQgPVxuICB8IEJldGFSYXdNZXNzYWdlU3RhcnRFdmVudFxuICB8IEJldGFSYXdNZXNzYWdlRGVsdGFFdmVudFxuICB8IEJldGFSYXdNZXNzYWdlU3RvcEV2ZW50XG4gIHwgQmV0YVJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnRcbiAgfCBCZXRhUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudFxuICB8IEJldGFSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRleHRCbG9jayB7XG4gIHRleHQ6IHN0cmluZztcblxuICB0eXBlOiAndGV4dCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRleHRCbG9ja1BhcmFtIHtcbiAgdGV4dDogc3RyaW5nO1xuXG4gIHR5cGU6ICd0ZXh0JztcblxuICBjYWNoZV9jb250cm9sPzogQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRleHREZWx0YSB7XG4gIHRleHQ6IHN0cmluZztcblxuICB0eXBlOiAndGV4dF9kZWx0YSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRvb2wge1xuICAvKipcbiAgICogW0pTT04gc2NoZW1hXShodHRwczovL2pzb24tc2NoZW1hLm9yZy8pIGZvciB0aGlzIHRvb2wncyBpbnB1dC5cbiAgICpcbiAgICogVGhpcyBkZWZpbmVzIHRoZSBzaGFwZSBvZiB0aGUgYGlucHV0YCB0aGF0IHlvdXIgdG9vbCBhY2NlcHRzIGFuZCB0aGF0IHRoZSBtb2RlbFxuICAgKiB3aWxsIHByb2R1Y2UuXG4gICAqL1xuICBpbnB1dF9zY2hlbWE6IEJldGFUb29sLklucHV0U2NoZW1hO1xuXG4gIC8qKlxuICAgKiBOYW1lIG9mIHRoZSB0b29sLlxuICAgKlxuICAgKiBUaGlzIGlzIGhvdyB0aGUgdG9vbCB3aWxsIGJlIGNhbGxlZCBieSB0aGUgbW9kZWwgYW5kIGluIHRvb2xfdXNlIGJsb2Nrcy5cbiAgICovXG4gIG5hbWU6IHN0cmluZztcblxuICBjYWNoZV9jb250cm9sPzogQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG5cbiAgLyoqXG4gICAqIERlc2NyaXB0aW9uIG9mIHdoYXQgdGhpcyB0b29sIGRvZXMuXG4gICAqXG4gICAqIFRvb2wgZGVzY3JpcHRpb25zIHNob3VsZCBiZSBhcyBkZXRhaWxlZCBhcyBwb3NzaWJsZS4gVGhlIG1vcmUgaW5mb3JtYXRpb24gdGhhdFxuICAgKiB0aGUgbW9kZWwgaGFzIGFib3V0IHdoYXQgdGhlIHRvb2wgaXMgYW5kIGhvdyB0byB1c2UgaXQsIHRoZSBiZXR0ZXIgaXQgd2lsbFxuICAgKiBwZXJmb3JtLiBZb3UgY2FuIHVzZSBuYXR1cmFsIGxhbmd1YWdlIGRlc2NyaXB0aW9ucyB0byByZWluZm9yY2UgaW1wb3J0YW50XG4gICAqIGFzcGVjdHMgb2YgdGhlIHRvb2wgaW5wdXQgSlNPTiBzY2hlbWEuXG4gICAqL1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcblxuICB0eXBlPzogJ2N1c3RvbScgfCBudWxsO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEJldGFUb29sIHtcbiAgLyoqXG4gICAqIFtKU09OIHNjaGVtYV0oaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvKSBmb3IgdGhpcyB0b29sJ3MgaW5wdXQuXG4gICAqXG4gICAqIFRoaXMgZGVmaW5lcyB0aGUgc2hhcGUgb2YgdGhlIGBpbnB1dGAgdGhhdCB5b3VyIHRvb2wgYWNjZXB0cyBhbmQgdGhhdCB0aGUgbW9kZWxcbiAgICogd2lsbCBwcm9kdWNlLlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBJbnB1dFNjaGVtYSB7XG4gICAgdHlwZTogJ29iamVjdCc7XG5cbiAgICBwcm9wZXJ0aWVzPzogdW5rbm93biB8IG51bGw7XG4gICAgW2s6IHN0cmluZ106IHVua25vd247XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVG9vbEJhc2gyMDI0MTAyMiB7XG4gIC8qKlxuICAgKiBOYW1lIG9mIHRoZSB0b29sLlxuICAgKlxuICAgKiBUaGlzIGlzIGhvdyB0aGUgdG9vbCB3aWxsIGJlIGNhbGxlZCBieSB0aGUgbW9kZWwgYW5kIGluIHRvb2xfdXNlIGJsb2Nrcy5cbiAgICovXG4gIG5hbWU6ICdiYXNoJztcblxuICB0eXBlOiAnYmFzaF8yMDI0MTAyMic7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xufVxuXG4vKipcbiAqIEhvdyB0aGUgbW9kZWwgc2hvdWxkIHVzZSB0aGUgcHJvdmlkZWQgdG9vbHMuIFRoZSBtb2RlbCBjYW4gdXNlIGEgc3BlY2lmaWMgdG9vbCxcbiAqIGFueSBhdmFpbGFibGUgdG9vbCwgb3IgZGVjaWRlIGJ5IGl0c2VsZi5cbiAqL1xuZXhwb3J0IHR5cGUgQmV0YVRvb2xDaG9pY2UgPSBCZXRhVG9vbENob2ljZUF1dG8gfCBCZXRhVG9vbENob2ljZUFueSB8IEJldGFUb29sQ2hvaWNlVG9vbDtcblxuLyoqXG4gKiBUaGUgbW9kZWwgd2lsbCB1c2UgYW55IGF2YWlsYWJsZSB0b29scy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCZXRhVG9vbENob2ljZUFueSB7XG4gIHR5cGU6ICdhbnknO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGRpc2FibGUgcGFyYWxsZWwgdG9vbCB1c2UuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGBmYWxzZWAuIElmIHNldCB0byBgdHJ1ZWAsIHRoZSBtb2RlbCB3aWxsIG91dHB1dCBleGFjdGx5IG9uZSB0b29sXG4gICAqIHVzZS5cbiAgICovXG4gIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFRoZSBtb2RlbCB3aWxsIGF1dG9tYXRpY2FsbHkgZGVjaWRlIHdoZXRoZXIgdG8gdXNlIHRvb2xzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sQ2hvaWNlQXV0byB7XG4gIHR5cGU6ICdhdXRvJztcblxuICAvKipcbiAgICogV2hldGhlciB0byBkaXNhYmxlIHBhcmFsbGVsIHRvb2wgdXNlLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgZmFsc2VgLiBJZiBzZXQgdG8gYHRydWVgLCB0aGUgbW9kZWwgd2lsbCBvdXRwdXQgYXQgbW9zdCBvbmUgdG9vbFxuICAgKiB1c2UuXG4gICAqL1xuICBkaXNhYmxlX3BhcmFsbGVsX3Rvb2xfdXNlPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBUaGUgbW9kZWwgd2lsbCB1c2UgdGhlIHNwZWNpZmllZCB0b29sIHdpdGggYHRvb2xfY2hvaWNlLm5hbWVgLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sQ2hvaWNlVG9vbCB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0byB1c2UuXG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3Rvb2wnO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGRpc2FibGUgcGFyYWxsZWwgdG9vbCB1c2UuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGBmYWxzZWAuIElmIHNldCB0byBgdHJ1ZWAsIHRoZSBtb2RlbCB3aWxsIG91dHB1dCBleGFjdGx5IG9uZSB0b29sXG4gICAqIHVzZS5cbiAgICovXG4gIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sQ29tcHV0ZXJVc2UyMDI0MTAyMiB7XG4gIC8qKlxuICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSBkaXNwbGF5IGluIHBpeGVscy5cbiAgICovXG4gIGRpc3BsYXlfaGVpZ2h0X3B4OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSB3aWR0aCBvZiB0aGUgZGlzcGxheSBpbiBwaXhlbHMuXG4gICAqL1xuICBkaXNwbGF5X3dpZHRoX3B4OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE5hbWUgb2YgdGhlIHRvb2wuXG4gICAqXG4gICAqIFRoaXMgaXMgaG93IHRoZSB0b29sIHdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBtb2RlbCBhbmQgaW4gdG9vbF91c2UgYmxvY2tzLlxuICAgKi9cbiAgbmFtZTogJ2NvbXB1dGVyJztcblxuICB0eXBlOiAnY29tcHV0ZXJfMjAyNDEwMjInO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIFgxMSBkaXNwbGF5IG51bWJlciAoZS5nLiAwLCAxKSBmb3IgdGhlIGRpc3BsYXkuXG4gICAqL1xuICBkaXNwbGF5X251bWJlcj86IG51bWJlciB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRvb2xSZXN1bHRCbG9ja1BhcmFtIHtcbiAgdG9vbF91c2VfaWQ6IHN0cmluZztcblxuICB0eXBlOiAndG9vbF9yZXN1bHQnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcblxuICBjb250ZW50Pzogc3RyaW5nIHwgQXJyYXk8QmV0YVRleHRCbG9ja1BhcmFtIHwgQmV0YUltYWdlQmxvY2tQYXJhbT47XG5cbiAgaXNfZXJyb3I/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyIHtcbiAgLyoqXG4gICAqIE5hbWUgb2YgdGhlIHRvb2wuXG4gICAqXG4gICAqIFRoaXMgaXMgaG93IHRoZSB0b29sIHdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBtb2RlbCBhbmQgaW4gdG9vbF91c2UgYmxvY2tzLlxuICAgKi9cbiAgbmFtZTogJ3N0cl9yZXBsYWNlX2VkaXRvcic7XG5cbiAgdHlwZTogJ3RleHRfZWRpdG9yXzIwMjQxMDIyJztcblxuICBjYWNoZV9jb250cm9sPzogQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG59XG5cbmV4cG9ydCB0eXBlIEJldGFUb29sVW5pb24gPVxuICB8IEJldGFUb29sXG4gIHwgQmV0YVRvb2xDb21wdXRlclVzZTIwMjQxMDIyXG4gIHwgQmV0YVRvb2xCYXNoMjAyNDEwMjJcbiAgfCBCZXRhVG9vbFRleHRFZGl0b3IyMDI0MTAyMjtcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVG9vbFVzZUJsb2NrIHtcbiAgaWQ6IHN0cmluZztcblxuICBpbnB1dDogdW5rbm93bjtcblxuICBuYW1lOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3Rvb2xfdXNlJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVG9vbFVzZUJsb2NrUGFyYW0ge1xuICBpZDogc3RyaW5nO1xuXG4gIGlucHV0OiB1bmtub3duO1xuXG4gIG5hbWU6IHN0cmluZztcblxuICB0eXBlOiAndG9vbF91c2UnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVXNhZ2Uge1xuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbnB1dCB0b2tlbnMgdXNlZCB0byBjcmVhdGUgdGhlIGNhY2hlIGVudHJ5LlxuICAgKi9cbiAgY2FjaGVfY3JlYXRpb25faW5wdXRfdG9rZW5zOiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGlucHV0IHRva2VucyByZWFkIGZyb20gdGhlIGNhY2hlLlxuICAgKi9cbiAgY2FjaGVfcmVhZF9pbnB1dF90b2tlbnM6IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHdoaWNoIHdlcmUgdXNlZC5cbiAgICovXG4gIGlucHV0X3Rva2VuczogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIG91dHB1dCB0b2tlbnMgd2hpY2ggd2VyZSB1c2VkLlxuICAgKi9cbiAgb3V0cHV0X3Rva2VuczogbnVtYmVyO1xufVxuXG5leHBvcnQgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zID0gTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyB8IE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogQm9keSBwYXJhbTogVGhlIG1heGltdW0gbnVtYmVyIG9mIHRva2VucyB0byBnZW5lcmF0ZSBiZWZvcmUgc3RvcHBpbmcuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBvdXIgbW9kZWxzIG1heSBzdG9wIF9iZWZvcmVfIHJlYWNoaW5nIHRoaXMgbWF4aW11bS4gVGhpcyBwYXJhbWV0ZXJcbiAgICogb25seSBzcGVjaWZpZXMgdGhlIGFic29sdXRlIG1heGltdW0gbnVtYmVyIG9mIHRva2VucyB0byBnZW5lcmF0ZS5cbiAgICpcbiAgICogRGlmZmVyZW50IG1vZGVscyBoYXZlIGRpZmZlcmVudCBtYXhpbXVtIHZhbHVlcyBmb3IgdGhpcyBwYXJhbWV0ZXIuIFNlZVxuICAgKiBbbW9kZWxzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL21vZGVscy1vdmVydmlldykgZm9yIGRldGFpbHMuXG4gICAqL1xuICBtYXhfdG9rZW5zOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IElucHV0IG1lc3NhZ2VzLlxuICAgKlxuICAgKiBPdXIgbW9kZWxzIGFyZSB0cmFpbmVkIHRvIG9wZXJhdGUgb24gYWx0ZXJuYXRpbmcgYHVzZXJgIGFuZCBgYXNzaXN0YW50YFxuICAgKiBjb252ZXJzYXRpb25hbCB0dXJucy4gV2hlbiBjcmVhdGluZyBhIG5ldyBgTWVzc2FnZWAsIHlvdSBzcGVjaWZ5IHRoZSBwcmlvclxuICAgKiBjb252ZXJzYXRpb25hbCB0dXJucyB3aXRoIHRoZSBgbWVzc2FnZXNgIHBhcmFtZXRlciwgYW5kIHRoZSBtb2RlbCB0aGVuIGdlbmVyYXRlc1xuICAgKiB0aGUgbmV4dCBgTWVzc2FnZWAgaW4gdGhlIGNvbnZlcnNhdGlvbi4gQ29uc2VjdXRpdmUgYHVzZXJgIG9yIGBhc3Npc3RhbnRgIHR1cm5zXG4gICAqIGluIHlvdXIgcmVxdWVzdCB3aWxsIGJlIGNvbWJpbmVkIGludG8gYSBzaW5nbGUgdHVybi5cbiAgICpcbiAgICogRWFjaCBpbnB1dCBtZXNzYWdlIG11c3QgYmUgYW4gb2JqZWN0IHdpdGggYSBgcm9sZWAgYW5kIGBjb250ZW50YC4gWW91IGNhblxuICAgKiBzcGVjaWZ5IGEgc2luZ2xlIGB1c2VyYC1yb2xlIG1lc3NhZ2UsIG9yIHlvdSBjYW4gaW5jbHVkZSBtdWx0aXBsZSBgdXNlcmAgYW5kXG4gICAqIGBhc3Npc3RhbnRgIG1lc3NhZ2VzLlxuICAgKlxuICAgKiBJZiB0aGUgZmluYWwgbWVzc2FnZSB1c2VzIHRoZSBgYXNzaXN0YW50YCByb2xlLCB0aGUgcmVzcG9uc2UgY29udGVudCB3aWxsXG4gICAqIGNvbnRpbnVlIGltbWVkaWF0ZWx5IGZyb20gdGhlIGNvbnRlbnQgaW4gdGhhdCBtZXNzYWdlLiBUaGlzIGNhbiBiZSB1c2VkIHRvXG4gICAqIGNvbnN0cmFpbiBwYXJ0IG9mIHRoZSBtb2RlbCdzIHJlc3BvbnNlLlxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggYSBzaW5nbGUgYHVzZXJgIG1lc3NhZ2U6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW3sgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfV1cbiAgICogYGBgXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBtdWx0aXBsZSBjb252ZXJzYXRpb25hbCB0dXJuczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAgeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvIHRoZXJlLlwiIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJhc3Npc3RhbnRcIiwgXCJjb250ZW50XCI6IFwiSGksIEknbSBDbGF1ZGUuIEhvdyBjYW4gSSBoZWxwIHlvdT9cIiB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJDYW4geW91IGV4cGxhaW4gTExNcyBpbiBwbGFpbiBFbmdsaXNoP1wiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIGEgcGFydGlhbGx5LWZpbGxlZCByZXNwb25zZSBmcm9tIENsYXVkZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJyb2xlXCI6IFwidXNlclwiLFxuICAgKiAgICAgXCJjb250ZW50XCI6IFwiV2hhdCdzIHRoZSBHcmVlayBuYW1lIGZvciBTdW4/IChBKSBTb2wgKEIpIEhlbGlvcyAoQykgU3VuXCJcbiAgICogICB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCIsIFwiY29udGVudFwiOiBcIlRoZSBiZXN0IGFuc3dlciBpcyAoXCIgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBFYWNoIGlucHV0IG1lc3NhZ2UgYGNvbnRlbnRgIG1heSBiZSBlaXRoZXIgYSBzaW5nbGUgYHN0cmluZ2Agb3IgYW4gYXJyYXkgb2ZcbiAgICogY29udGVudCBibG9ja3MsIHdoZXJlIGVhY2ggYmxvY2sgaGFzIGEgc3BlY2lmaWMgYHR5cGVgLiBVc2luZyBhIGBzdHJpbmdgIGZvclxuICAgKiBgY29udGVudGAgaXMgc2hvcnRoYW5kIGZvciBhbiBhcnJheSBvZiBvbmUgY29udGVudCBibG9jayBvZiB0eXBlIGBcInRleHRcImAuIFRoZVxuICAgKiBmb2xsb3dpbmcgaW5wdXQgbWVzc2FnZXMgYXJlIGVxdWl2YWxlbnQ6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogW3sgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfV0gfVxuICAgKiBgYGBcbiAgICpcbiAgICogU3RhcnRpbmcgd2l0aCBDbGF1ZGUgMyBtb2RlbHMsIHlvdSBjYW4gYWxzbyBzZW5kIGltYWdlIGNvbnRlbnQgYmxvY2tzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHtcbiAgICogICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAqICAgXCJjb250ZW50XCI6IFtcbiAgICogICAgIHtcbiAgICogICAgICAgXCJ0eXBlXCI6IFwiaW1hZ2VcIixcbiAgICogICAgICAgXCJzb3VyY2VcIjoge1xuICAgKiAgICAgICAgIFwidHlwZVwiOiBcImJhc2U2NFwiLFxuICAgKiAgICAgICAgIFwibWVkaWFfdHlwZVwiOiBcImltYWdlL2pwZWdcIixcbiAgICogICAgICAgICBcImRhdGFcIjogXCIvOWovNEFBUVNrWkpSZy4uLlwiXG4gICAqICAgICAgIH1cbiAgICogICAgIH0sXG4gICAqICAgICB7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiV2hhdCBpcyBpbiB0aGlzIGltYWdlP1wiIH1cbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFdlIGN1cnJlbnRseSBzdXBwb3J0IHRoZSBgYmFzZTY0YCBzb3VyY2UgdHlwZSBmb3IgaW1hZ2VzLCBhbmQgdGhlIGBpbWFnZS9qcGVnYCxcbiAgICogYGltYWdlL3BuZ2AsIGBpbWFnZS9naWZgLCBhbmQgYGltYWdlL3dlYnBgIG1lZGlhIHR5cGVzLlxuICAgKlxuICAgKiBTZWUgW2V4YW1wbGVzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtZXhhbXBsZXMjdmlzaW9uKSBmb3JcbiAgICogbW9yZSBpbnB1dCBleGFtcGxlcy5cbiAgICpcbiAgICogTm90ZSB0aGF0IGlmIHlvdSB3YW50IHRvIGluY2x1ZGUgYVxuICAgKiBbc3lzdGVtIHByb21wdF0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9zeXN0ZW0tcHJvbXB0cyksIHlvdSBjYW4gdXNlXG4gICAqIHRoZSB0b3AtbGV2ZWwgYHN5c3RlbWAgcGFyYW1ldGVyIFx1MjAxNCB0aGVyZSBpcyBubyBgXCJzeXN0ZW1cImAgcm9sZSBmb3IgaW5wdXRcbiAgICogbWVzc2FnZXMgaW4gdGhlIE1lc3NhZ2VzIEFQSS5cbiAgICovXG4gIG1lc3NhZ2VzOiBBcnJheTxCZXRhTWVzc2FnZVBhcmFtPjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogVGhlIG1vZGVsIHRoYXQgd2lsbCBjb21wbGV0ZSB5b3VyIHByb21wdC5cXG5cXG5TZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBhZGRpdGlvbmFsXG4gICAqIGRldGFpbHMgYW5kIG9wdGlvbnMuXG4gICAqL1xuICBtb2RlbDogTWVzc2FnZXNBUEkuTW9kZWw7XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IEFuIG9iamVjdCBkZXNjcmliaW5nIG1ldGFkYXRhIGFib3V0IHRoZSByZXF1ZXN0LlxuICAgKi9cbiAgbWV0YWRhdGE/OiBCZXRhTWV0YWRhdGE7XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IEN1c3RvbSB0ZXh0IHNlcXVlbmNlcyB0aGF0IHdpbGwgY2F1c2UgdGhlIG1vZGVsIHRvIHN0b3AgZ2VuZXJhdGluZy5cbiAgICpcbiAgICogT3VyIG1vZGVscyB3aWxsIG5vcm1hbGx5IHN0b3Agd2hlbiB0aGV5IGhhdmUgbmF0dXJhbGx5IGNvbXBsZXRlZCB0aGVpciB0dXJuLFxuICAgKiB3aGljaCB3aWxsIHJlc3VsdCBpbiBhIHJlc3BvbnNlIGBzdG9wX3JlYXNvbmAgb2YgYFwiZW5kX3R1cm5cImAuXG4gICAqXG4gICAqIElmIHlvdSB3YW50IHRoZSBtb2RlbCB0byBzdG9wIGdlbmVyYXRpbmcgd2hlbiBpdCBlbmNvdW50ZXJzIGN1c3RvbSBzdHJpbmdzIG9mXG4gICAqIHRleHQsIHlvdSBjYW4gdXNlIHRoZSBgc3RvcF9zZXF1ZW5jZXNgIHBhcmFtZXRlci4gSWYgdGhlIG1vZGVsIGVuY291bnRlcnMgb25lIG9mXG4gICAqIHRoZSBjdXN0b20gc2VxdWVuY2VzLCB0aGUgcmVzcG9uc2UgYHN0b3BfcmVhc29uYCB2YWx1ZSB3aWxsIGJlIGBcInN0b3Bfc2VxdWVuY2VcImBcbiAgICogYW5kIHRoZSByZXNwb25zZSBgc3RvcF9zZXF1ZW5jZWAgdmFsdWUgd2lsbCBjb250YWluIHRoZSBtYXRjaGVkIHN0b3Agc2VxdWVuY2UuXG4gICAqL1xuICBzdG9wX3NlcXVlbmNlcz86IEFycmF5PHN0cmluZz47XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IFdoZXRoZXIgdG8gaW5jcmVtZW50YWxseSBzdHJlYW0gdGhlIHJlc3BvbnNlIHVzaW5nIHNlcnZlci1zZW50XG4gICAqIGV2ZW50cy5cbiAgICpcbiAgICogU2VlIFtzdHJlYW1pbmddKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1zdHJlYW1pbmcpIGZvclxuICAgKiBkZXRhaWxzLlxuICAgKi9cbiAgc3RyZWFtPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogU3lzdGVtIHByb21wdC5cbiAgICpcbiAgICogQSBzeXN0ZW0gcHJvbXB0IGlzIGEgd2F5IG9mIHByb3ZpZGluZyBjb250ZXh0IGFuZCBpbnN0cnVjdGlvbnMgdG8gQ2xhdWRlLCBzdWNoXG4gICAqIGFzIHNwZWNpZnlpbmcgYSBwYXJ0aWN1bGFyIGdvYWwgb3Igcm9sZS4gU2VlIG91clxuICAgKiBbZ3VpZGUgdG8gc3lzdGVtIHByb21wdHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3Mvc3lzdGVtLXByb21wdHMpLlxuICAgKi9cbiAgc3lzdGVtPzogc3RyaW5nIHwgQXJyYXk8QmV0YVRleHRCbG9ja1BhcmFtPjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogQW1vdW50IG9mIHJhbmRvbW5lc3MgaW5qZWN0ZWQgaW50byB0aGUgcmVzcG9uc2UuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGAxLjBgLiBSYW5nZXMgZnJvbSBgMC4wYCB0byBgMS4wYC4gVXNlIGB0ZW1wZXJhdHVyZWAgY2xvc2VyIHRvIGAwLjBgXG4gICAqIGZvciBhbmFseXRpY2FsIC8gbXVsdGlwbGUgY2hvaWNlLCBhbmQgY2xvc2VyIHRvIGAxLjBgIGZvciBjcmVhdGl2ZSBhbmRcbiAgICogZ2VuZXJhdGl2ZSB0YXNrcy5cbiAgICpcbiAgICogTm90ZSB0aGF0IGV2ZW4gd2l0aCBgdGVtcGVyYXR1cmVgIG9mIGAwLjBgLCB0aGUgcmVzdWx0cyB3aWxsIG5vdCBiZSBmdWxseVxuICAgKiBkZXRlcm1pbmlzdGljLlxuICAgKi9cbiAgdGVtcGVyYXR1cmU/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IEhvdyB0aGUgbW9kZWwgc2hvdWxkIHVzZSB0aGUgcHJvdmlkZWQgdG9vbHMuIFRoZSBtb2RlbCBjYW4gdXNlIGFcbiAgICogc3BlY2lmaWMgdG9vbCwgYW55IGF2YWlsYWJsZSB0b29sLCBvciBkZWNpZGUgYnkgaXRzZWxmLlxuICAgKi9cbiAgdG9vbF9jaG9pY2U/OiBCZXRhVG9vbENob2ljZTtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogRGVmaW5pdGlvbnMgb2YgdG9vbHMgdGhhdCB0aGUgbW9kZWwgbWF5IHVzZS5cbiAgICpcbiAgICogSWYgeW91IGluY2x1ZGUgYHRvb2xzYCBpbiB5b3VyIEFQSSByZXF1ZXN0LCB0aGUgbW9kZWwgbWF5IHJldHVybiBgdG9vbF91c2VgXG4gICAqIGNvbnRlbnQgYmxvY2tzIHRoYXQgcmVwcmVzZW50IHRoZSBtb2RlbCdzIHVzZSBvZiB0aG9zZSB0b29scy4gWW91IGNhbiB0aGVuIHJ1blxuICAgKiB0aG9zZSB0b29scyB1c2luZyB0aGUgdG9vbCBpbnB1dCBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGFuZCB0aGVuIG9wdGlvbmFsbHlcbiAgICogcmV0dXJuIHJlc3VsdHMgYmFjayB0byB0aGUgbW9kZWwgdXNpbmcgYHRvb2xfcmVzdWx0YCBjb250ZW50IGJsb2Nrcy5cbiAgICpcbiAgICogRWFjaCB0b29sIGRlZmluaXRpb24gaW5jbHVkZXM6XG4gICAqXG4gICAqIC0gYG5hbWVgOiBOYW1lIG9mIHRoZSB0b29sLlxuICAgKiAtIGBkZXNjcmlwdGlvbmA6IE9wdGlvbmFsLCBidXQgc3Ryb25nbHktcmVjb21tZW5kZWQgZGVzY3JpcHRpb24gb2YgdGhlIHRvb2wuXG4gICAqIC0gYGlucHV0X3NjaGVtYWA6IFtKU09OIHNjaGVtYV0oaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvKSBmb3IgdGhlIHRvb2wgYGlucHV0YFxuICAgKiAgIHNoYXBlIHRoYXQgdGhlIG1vZGVsIHdpbGwgcHJvZHVjZSBpbiBgdG9vbF91c2VgIG91dHB1dCBjb250ZW50IGJsb2Nrcy5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGlmIHlvdSBkZWZpbmVkIGB0b29sc2AgYXM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwibmFtZVwiOiBcImdldF9zdG9ja19wcmljZVwiLFxuICAgKiAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkdldCB0aGUgY3VycmVudCBzdG9jayBwcmljZSBmb3IgYSBnaXZlbiB0aWNrZXIgc3ltYm9sLlwiLFxuICAgKiAgICAgXCJpbnB1dF9zY2hlbWFcIjoge1xuICAgKiAgICAgICBcInR5cGVcIjogXCJvYmplY3RcIixcbiAgICogICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcbiAgICogICAgICAgICBcInRpY2tlclwiOiB7XG4gICAqICAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcbiAgICogICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgc3RvY2sgdGlja2VyIHN5bWJvbCwgZS5nLiBBQVBMIGZvciBBcHBsZSBJbmMuXCJcbiAgICogICAgICAgICB9XG4gICAqICAgICAgIH0sXG4gICAqICAgICAgIFwicmVxdWlyZWRcIjogW1widGlja2VyXCJdXG4gICAqICAgICB9XG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBBbmQgdGhlbiBhc2tlZCB0aGUgbW9kZWwgXCJXaGF0J3MgdGhlIFMmUCA1MDAgYXQgdG9kYXk/XCIsIHRoZSBtb2RlbCBtaWdodCBwcm9kdWNlXG4gICAqIGB0b29sX3VzZWAgY29udGVudCBibG9ja3MgaW4gdGhlIHJlc3BvbnNlIGxpa2UgdGhpczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJ0eXBlXCI6IFwidG9vbF91c2VcIixcbiAgICogICAgIFwiaWRcIjogXCJ0b29sdV8wMUQ3RkxyZmg0R1lxN3lUMVVMRmV5TVZcIixcbiAgICogICAgIFwibmFtZVwiOiBcImdldF9zdG9ja19wcmljZVwiLFxuICAgKiAgICAgXCJpbnB1dFwiOiB7IFwidGlja2VyXCI6IFwiXkdTUENcIiB9XG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBZb3UgbWlnaHQgdGhlbiBydW4geW91ciBgZ2V0X3N0b2NrX3ByaWNlYCB0b29sIHdpdGggYHtcInRpY2tlclwiOiBcIl5HU1BDXCJ9YCBhcyBhblxuICAgKiBpbnB1dCwgYW5kIHJldHVybiB0aGUgZm9sbG93aW5nIGJhY2sgdG8gdGhlIG1vZGVsIGluIGEgc3Vic2VxdWVudCBgdXNlcmBcbiAgICogbWVzc2FnZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJ0eXBlXCI6IFwidG9vbF9yZXN1bHRcIixcbiAgICogICAgIFwidG9vbF91c2VfaWRcIjogXCJ0b29sdV8wMUQ3RkxyZmg0R1lxN3lUMVVMRmV5TVZcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIjI1OS43NSBVU0RcIlxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogVG9vbHMgY2FuIGJlIHVzZWQgZm9yIHdvcmtmbG93cyB0aGF0IGluY2x1ZGUgcnVubmluZyBjbGllbnQtc2lkZSB0b29scyBhbmRcbiAgICogZnVuY3Rpb25zLCBvciBtb3JlIGdlbmVyYWxseSB3aGVuZXZlciB5b3Ugd2FudCB0aGUgbW9kZWwgdG8gcHJvZHVjZSBhIHBhcnRpY3VsYXJcbiAgICogSlNPTiBzdHJ1Y3R1cmUgb2Ygb3V0cHV0LlxuICAgKlxuICAgKiBTZWUgb3VyIFtndWlkZV0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy90b29sLXVzZSkgZm9yIG1vcmUgZGV0YWlscy5cbiAgICovXG4gIHRvb2xzPzogQXJyYXk8QmV0YVRvb2xVbmlvbj47XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IE9ubHkgc2FtcGxlIGZyb20gdGhlIHRvcCBLIG9wdGlvbnMgZm9yIGVhY2ggc3Vic2VxdWVudCB0b2tlbi5cbiAgICpcbiAgICogVXNlZCB0byByZW1vdmUgXCJsb25nIHRhaWxcIiBsb3cgcHJvYmFiaWxpdHkgcmVzcG9uc2VzLlxuICAgKiBbTGVhcm4gbW9yZSB0ZWNobmljYWwgZGV0YWlscyBoZXJlXShodHRwczovL3Rvd2FyZHNkYXRhc2NpZW5jZS5jb20vaG93LXRvLXNhbXBsZS1mcm9tLWxhbmd1YWdlLW1vZGVscy02ODJiY2ViOTcyNzcpLlxuICAgKlxuICAgKiBSZWNvbW1lbmRlZCBmb3IgYWR2YW5jZWQgdXNlIGNhc2VzIG9ubHkuIFlvdSB1c3VhbGx5IG9ubHkgbmVlZCB0byB1c2VcbiAgICogYHRlbXBlcmF0dXJlYC5cbiAgICovXG4gIHRvcF9rPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBVc2UgbnVjbGV1cyBzYW1wbGluZy5cbiAgICpcbiAgICogSW4gbnVjbGV1cyBzYW1wbGluZywgd2UgY29tcHV0ZSB0aGUgY3VtdWxhdGl2ZSBkaXN0cmlidXRpb24gb3ZlciBhbGwgdGhlIG9wdGlvbnNcbiAgICogZm9yIGVhY2ggc3Vic2VxdWVudCB0b2tlbiBpbiBkZWNyZWFzaW5nIHByb2JhYmlsaXR5IG9yZGVyIGFuZCBjdXQgaXQgb2ZmIG9uY2UgaXRcbiAgICogcmVhY2hlcyBhIHBhcnRpY3VsYXIgcHJvYmFiaWxpdHkgc3BlY2lmaWVkIGJ5IGB0b3BfcGAuIFlvdSBzaG91bGQgZWl0aGVyIGFsdGVyXG4gICAqIGB0ZW1wZXJhdHVyZWAgb3IgYHRvcF9wYCwgYnV0IG5vdCBib3RoLlxuICAgKlxuICAgKiBSZWNvbW1lbmRlZCBmb3IgYWR2YW5jZWQgdXNlIGNhc2VzIG9ubHkuIFlvdSB1c3VhbGx5IG9ubHkgbmVlZCB0byB1c2VcbiAgICogYHRlbXBlcmF0dXJlYC5cbiAgICovXG4gIHRvcF9wPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBIZWFkZXIgcGFyYW06IE9wdGlvbmFsIGhlYWRlciB0byBzcGVjaWZ5IHRoZSBiZXRhIHZlcnNpb24ocykgeW91IHdhbnQgdG8gdXNlLlxuICAgKi9cbiAgYmV0YXM/OiBBcnJheTxCZXRhQVBJLkFudGhyb3BpY0JldGE+O1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXMge1xuICBleHBvcnQgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gTWVzc2FnZXNNZXNzYWdlc0FQSS5NZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gTWVzc2FnZXNNZXNzYWdlc0FQSS5NZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgZXh0ZW5kcyBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudFxuICAgKiBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtc3RyZWFtaW5nKSBmb3JcbiAgICogZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbT86IGZhbHNlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcgZXh0ZW5kcyBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudFxuICAgKiBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtc3RyZWFtaW5nKSBmb3JcbiAgICogZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbTogdHJ1ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMge1xuICAvKipcbiAgICogQm9keSBwYXJhbTogSW5wdXQgbWVzc2FnZXMuXG4gICAqXG4gICAqIE91ciBtb2RlbHMgYXJlIHRyYWluZWQgdG8gb3BlcmF0ZSBvbiBhbHRlcm5hdGluZyBgdXNlcmAgYW5kIGBhc3Npc3RhbnRgXG4gICAqIGNvbnZlcnNhdGlvbmFsIHR1cm5zLiBXaGVuIGNyZWF0aW5nIGEgbmV3IGBNZXNzYWdlYCwgeW91IHNwZWNpZnkgdGhlIHByaW9yXG4gICAqIGNvbnZlcnNhdGlvbmFsIHR1cm5zIHdpdGggdGhlIGBtZXNzYWdlc2AgcGFyYW1ldGVyLCBhbmQgdGhlIG1vZGVsIHRoZW4gZ2VuZXJhdGVzXG4gICAqIHRoZSBuZXh0IGBNZXNzYWdlYCBpbiB0aGUgY29udmVyc2F0aW9uLiBDb25zZWN1dGl2ZSBgdXNlcmAgb3IgYGFzc2lzdGFudGAgdHVybnNcbiAgICogaW4geW91ciByZXF1ZXN0IHdpbGwgYmUgY29tYmluZWQgaW50byBhIHNpbmdsZSB0dXJuLlxuICAgKlxuICAgKiBFYWNoIGlucHV0IG1lc3NhZ2UgbXVzdCBiZSBhbiBvYmplY3Qgd2l0aCBhIGByb2xlYCBhbmQgYGNvbnRlbnRgLiBZb3UgY2FuXG4gICAqIHNwZWNpZnkgYSBzaW5nbGUgYHVzZXJgLXJvbGUgbWVzc2FnZSwgb3IgeW91IGNhbiBpbmNsdWRlIG11bHRpcGxlIGB1c2VyYCBhbmRcbiAgICogYGFzc2lzdGFudGAgbWVzc2FnZXMuXG4gICAqXG4gICAqIElmIHRoZSBmaW5hbCBtZXNzYWdlIHVzZXMgdGhlIGBhc3Npc3RhbnRgIHJvbGUsIHRoZSByZXNwb25zZSBjb250ZW50IHdpbGxcbiAgICogY29udGludWUgaW1tZWRpYXRlbHkgZnJvbSB0aGUgY29udGVudCBpbiB0aGF0IG1lc3NhZ2UuIFRoaXMgY2FuIGJlIHVzZWQgdG9cbiAgICogY29uc3RyYWluIHBhcnQgb2YgdGhlIG1vZGVsJ3MgcmVzcG9uc2UuXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBhIHNpbmdsZSBgdXNlcmAgbWVzc2FnZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XVxuICAgKiBgYGBcbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIG11bHRpcGxlIGNvbnZlcnNhdGlvbmFsIHR1cm5zOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8gdGhlcmUuXCIgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJIaSwgSSdtIENsYXVkZS4gSG93IGNhbiBJIGhlbHAgeW91P1wiIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkNhbiB5b3UgZXhwbGFpbiBMTE1zIGluIHBsYWluIEVuZ2xpc2g/XCIgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggYSBwYXJ0aWFsbHktZmlsbGVkIHJlc3BvbnNlIGZyb20gQ2xhdWRlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCJXaGF0J3MgdGhlIEdyZWVrIG5hbWUgZm9yIFN1bj8gKEEpIFNvbCAoQikgSGVsaW9zIChDKSBTdW5cIlxuICAgKiAgIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJhc3Npc3RhbnRcIiwgXCJjb250ZW50XCI6IFwiVGhlIGJlc3QgYW5zd2VyIGlzIChcIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEVhY2ggaW5wdXQgbWVzc2FnZSBgY29udGVudGAgbWF5IGJlIGVpdGhlciBhIHNpbmdsZSBgc3RyaW5nYCBvciBhbiBhcnJheSBvZlxuICAgKiBjb250ZW50IGJsb2Nrcywgd2hlcmUgZWFjaCBibG9jayBoYXMgYSBzcGVjaWZpYyBgdHlwZWAuIFVzaW5nIGEgYHN0cmluZ2AgZm9yXG4gICAqIGBjb250ZW50YCBpcyBzaG9ydGhhbmQgZm9yIGFuIGFycmF5IG9mIG9uZSBjb250ZW50IGJsb2NrIG9mIHR5cGUgYFwidGV4dFwiYC4gVGhlXG4gICAqIGZvbGxvd2luZyBpbnB1dCBtZXNzYWdlcyBhcmUgZXF1aXZhbGVudDpcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1cbiAgICogYGBgXG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBbeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XSB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBTdGFydGluZyB3aXRoIENsYXVkZSAzIG1vZGVscywgeW91IGNhbiBhbHNvIHNlbmQgaW1hZ2UgY29udGVudCBibG9ja3M6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICoge1xuICAgKiAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICBcImNvbnRlbnRcIjogW1xuICAgKiAgICAge1xuICAgKiAgICAgICBcInR5cGVcIjogXCJpbWFnZVwiLFxuICAgKiAgICAgICBcInNvdXJjZVwiOiB7XG4gICAqICAgICAgICAgXCJ0eXBlXCI6IFwiYmFzZTY0XCIsXG4gICAqICAgICAgICAgXCJtZWRpYV90eXBlXCI6IFwiaW1hZ2UvanBlZ1wiLFxuICAgKiAgICAgICAgIFwiZGF0YVwiOiBcIi85ai80QUFRU2taSlJnLi4uXCJcbiAgICogICAgICAgfVxuICAgKiAgICAgfSxcbiAgICogICAgIHsgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJXaGF0IGlzIGluIHRoaXMgaW1hZ2U/XCIgfVxuICAgKiAgIF1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogV2UgY3VycmVudGx5IHN1cHBvcnQgdGhlIGBiYXNlNjRgIHNvdXJjZSB0eXBlIGZvciBpbWFnZXMsIGFuZCB0aGUgYGltYWdlL2pwZWdgLFxuICAgKiBgaW1hZ2UvcG5nYCwgYGltYWdlL2dpZmAsIGFuZCBgaW1hZ2Uvd2VicGAgbWVkaWEgdHlwZXMuXG4gICAqXG4gICAqIFNlZSBbZXhhbXBsZXNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1leGFtcGxlcyN2aXNpb24pIGZvclxuICAgKiBtb3JlIGlucHV0IGV4YW1wbGVzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgaWYgeW91IHdhbnQgdG8gaW5jbHVkZSBhXG4gICAqIFtzeXN0ZW0gcHJvbXB0XShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3N5c3RlbS1wcm9tcHRzKSwgeW91IGNhbiB1c2VcbiAgICogdGhlIHRvcC1sZXZlbCBgc3lzdGVtYCBwYXJhbWV0ZXIgXHUyMDE0IHRoZXJlIGlzIG5vIGBcInN5c3RlbVwiYCByb2xlIGZvciBpbnB1dFxuICAgKiBtZXNzYWdlcyBpbiB0aGUgTWVzc2FnZXMgQVBJLlxuICAgKi9cbiAgbWVzc2FnZXM6IEFycmF5PEJldGFNZXNzYWdlUGFyYW0+O1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBUaGUgbW9kZWwgdGhhdCB3aWxsIGNvbXBsZXRlIHlvdXIgcHJvbXB0LlxcblxcblNlZVxuICAgKiBbbW9kZWxzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL21vZGVscy1vdmVydmlldykgZm9yIGFkZGl0aW9uYWxcbiAgICogZGV0YWlscyBhbmQgb3B0aW9ucy5cbiAgICovXG4gIG1vZGVsOiBNZXNzYWdlc0FQSS5Nb2RlbDtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogU3lzdGVtIHByb21wdC5cbiAgICpcbiAgICogQSBzeXN0ZW0gcHJvbXB0IGlzIGEgd2F5IG9mIHByb3ZpZGluZyBjb250ZXh0IGFuZCBpbnN0cnVjdGlvbnMgdG8gQ2xhdWRlLCBzdWNoXG4gICAqIGFzIHNwZWNpZnlpbmcgYSBwYXJ0aWN1bGFyIGdvYWwgb3Igcm9sZS4gU2VlIG91clxuICAgKiBbZ3VpZGUgdG8gc3lzdGVtIHByb21wdHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3Mvc3lzdGVtLXByb21wdHMpLlxuICAgKi9cbiAgc3lzdGVtPzogc3RyaW5nIHwgQXJyYXk8QmV0YVRleHRCbG9ja1BhcmFtPjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogSG93IHRoZSBtb2RlbCBzaG91bGQgdXNlIHRoZSBwcm92aWRlZCB0b29scy4gVGhlIG1vZGVsIGNhbiB1c2UgYVxuICAgKiBzcGVjaWZpYyB0b29sLCBhbnkgYXZhaWxhYmxlIHRvb2wsIG9yIGRlY2lkZSBieSBpdHNlbGYuXG4gICAqL1xuICB0b29sX2Nob2ljZT86IEJldGFUb29sQ2hvaWNlO1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBEZWZpbml0aW9ucyBvZiB0b29scyB0aGF0IHRoZSBtb2RlbCBtYXkgdXNlLlxuICAgKlxuICAgKiBJZiB5b3UgaW5jbHVkZSBgdG9vbHNgIGluIHlvdXIgQVBJIHJlcXVlc3QsIHRoZSBtb2RlbCBtYXkgcmV0dXJuIGB0b29sX3VzZWBcbiAgICogY29udGVudCBibG9ja3MgdGhhdCByZXByZXNlbnQgdGhlIG1vZGVsJ3MgdXNlIG9mIHRob3NlIHRvb2xzLiBZb3UgY2FuIHRoZW4gcnVuXG4gICAqIHRob3NlIHRvb2xzIHVzaW5nIHRoZSB0b29sIGlucHV0IGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgYW5kIHRoZW4gb3B0aW9uYWxseVxuICAgKiByZXR1cm4gcmVzdWx0cyBiYWNrIHRvIHRoZSBtb2RlbCB1c2luZyBgdG9vbF9yZXN1bHRgIGNvbnRlbnQgYmxvY2tzLlxuICAgKlxuICAgKiBFYWNoIHRvb2wgZGVmaW5pdGlvbiBpbmNsdWRlczpcbiAgICpcbiAgICogLSBgbmFtZWA6IE5hbWUgb2YgdGhlIHRvb2wuXG4gICAqIC0gYGRlc2NyaXB0aW9uYDogT3B0aW9uYWwsIGJ1dCBzdHJvbmdseS1yZWNvbW1lbmRlZCBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbC5cbiAgICogLSBgaW5wdXRfc2NoZW1hYDogW0pTT04gc2NoZW1hXShodHRwczovL2pzb24tc2NoZW1hLm9yZy8pIGZvciB0aGUgdG9vbCBgaW5wdXRgXG4gICAqICAgc2hhcGUgdGhhdCB0aGUgbW9kZWwgd2lsbCBwcm9kdWNlIGluIGB0b29sX3VzZWAgb3V0cHV0IGNvbnRlbnQgYmxvY2tzLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgaWYgeW91IGRlZmluZWQgYHRvb2xzYCBhczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJuYW1lXCI6IFwiZ2V0X3N0b2NrX3ByaWNlXCIsXG4gICAqICAgICBcImRlc2NyaXB0aW9uXCI6IFwiR2V0IHRoZSBjdXJyZW50IHN0b2NrIHByaWNlIGZvciBhIGdpdmVuIHRpY2tlciBzeW1ib2wuXCIsXG4gICAqICAgICBcImlucHV0X3NjaGVtYVwiOiB7XG4gICAqICAgICAgIFwidHlwZVwiOiBcIm9iamVjdFwiLFxuICAgKiAgICAgICBcInByb3BlcnRpZXNcIjoge1xuICAgKiAgICAgICAgIFwidGlja2VyXCI6IHtcbiAgICogICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxuICAgKiAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlRoZSBzdG9jayB0aWNrZXIgc3ltYm9sLCBlLmcuIEFBUEwgZm9yIEFwcGxlIEluYy5cIlxuICAgKiAgICAgICAgIH1cbiAgICogICAgICAgfSxcbiAgICogICAgICAgXCJyZXF1aXJlZFwiOiBbXCJ0aWNrZXJcIl1cbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEFuZCB0aGVuIGFza2VkIHRoZSBtb2RlbCBcIldoYXQncyB0aGUgUyZQIDUwMCBhdCB0b2RheT9cIiwgdGhlIG1vZGVsIG1pZ2h0IHByb2R1Y2VcbiAgICogYHRvb2xfdXNlYCBjb250ZW50IGJsb2NrcyBpbiB0aGUgcmVzcG9uc2UgbGlrZSB0aGlzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInR5cGVcIjogXCJ0b29sX3VzZVwiLFxuICAgKiAgICAgXCJpZFwiOiBcInRvb2x1XzAxRDdGTHJmaDRHWXE3eVQxVUxGZXlNVlwiLFxuICAgKiAgICAgXCJuYW1lXCI6IFwiZ2V0X3N0b2NrX3ByaWNlXCIsXG4gICAqICAgICBcImlucHV0XCI6IHsgXCJ0aWNrZXJcIjogXCJeR1NQQ1wiIH1cbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFlvdSBtaWdodCB0aGVuIHJ1biB5b3VyIGBnZXRfc3RvY2tfcHJpY2VgIHRvb2wgd2l0aCBge1widGlja2VyXCI6IFwiXkdTUENcIn1gIGFzIGFuXG4gICAqIGlucHV0LCBhbmQgcmV0dXJuIHRoZSBmb2xsb3dpbmcgYmFjayB0byB0aGUgbW9kZWwgaW4gYSBzdWJzZXF1ZW50IGB1c2VyYFxuICAgKiBtZXNzYWdlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInR5cGVcIjogXCJ0b29sX3Jlc3VsdFwiLFxuICAgKiAgICAgXCJ0b29sX3VzZV9pZFwiOiBcInRvb2x1XzAxRDdGTHJmaDRHWXE3eVQxVUxGZXlNVlwiLFxuICAgKiAgICAgXCJjb250ZW50XCI6IFwiMjU5Ljc1IFVTRFwiXG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBUb29scyBjYW4gYmUgdXNlZCBmb3Igd29ya2Zsb3dzIHRoYXQgaW5jbHVkZSBydW5uaW5nIGNsaWVudC1zaWRlIHRvb2xzIGFuZFxuICAgKiBmdW5jdGlvbnMsIG9yIG1vcmUgZ2VuZXJhbGx5IHdoZW5ldmVyIHlvdSB3YW50IHRoZSBtb2RlbCB0byBwcm9kdWNlIGEgcGFydGljdWxhclxuICAgKiBKU09OIHN0cnVjdHVyZSBvZiBvdXRwdXQuXG4gICAqXG4gICAqIFNlZSBvdXIgW2d1aWRlXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3Rvb2wtdXNlKSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKi9cbiAgdG9vbHM/OiBBcnJheTxCZXRhVG9vbCB8IEJldGFUb29sQ29tcHV0ZXJVc2UyMDI0MTAyMiB8IEJldGFUb29sQmFzaDIwMjQxMDIyIHwgQmV0YVRvb2xUZXh0RWRpdG9yMjAyNDEwMjI+O1xuXG4gIC8qKlxuICAgKiBIZWFkZXIgcGFyYW06IE9wdGlvbmFsIGhlYWRlciB0byBzcGVjaWZ5IHRoZSBiZXRhIHZlcnNpb24ocykgeW91IHdhbnQgdG8gdXNlLlxuICAgKi9cbiAgYmV0YXM/OiBBcnJheTxCZXRhQVBJLkFudGhyb3BpY0JldGE+O1xufVxuXG5NZXNzYWdlcy5CYXRjaGVzID0gQmF0Y2hlcztcbk1lc3NhZ2VzLkJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UgPSBCZXRhTWVzc2FnZUJhdGNoZXNQYWdlO1xuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgTWVzc2FnZXMge1xuICBleHBvcnQge1xuICAgIHR5cGUgQmV0YUJhc2U2NFBERkJsb2NrIGFzIEJldGFCYXNlNjRQREZCbG9jayxcbiAgICB0eXBlIEJldGFCYXNlNjRQREZTb3VyY2UgYXMgQmV0YUJhc2U2NFBERlNvdXJjZSxcbiAgICB0eXBlIEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgYXMgQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCxcbiAgICB0eXBlIEJldGFDb250ZW50QmxvY2sgYXMgQmV0YUNvbnRlbnRCbG9jayxcbiAgICB0eXBlIEJldGFDb250ZW50QmxvY2tQYXJhbSBhcyBCZXRhQ29udGVudEJsb2NrUGFyYW0sXG4gICAgdHlwZSBCZXRhSW1hZ2VCbG9ja1BhcmFtIGFzIEJldGFJbWFnZUJsb2NrUGFyYW0sXG4gICAgdHlwZSBCZXRhSW5wdXRKU09ORGVsdGEgYXMgQmV0YUlucHV0SlNPTkRlbHRhLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2UgYXMgQmV0YU1lc3NhZ2UsXG4gICAgdHlwZSBCZXRhTWVzc2FnZURlbHRhVXNhZ2UgYXMgQmV0YU1lc3NhZ2VEZWx0YVVzYWdlLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VQYXJhbSBhcyBCZXRhTWVzc2FnZVBhcmFtLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VUb2tlbnNDb3VudCBhcyBCZXRhTWVzc2FnZVRva2Vuc0NvdW50LFxuICAgIHR5cGUgQmV0YU1ldGFkYXRhIGFzIEJldGFNZXRhZGF0YSxcbiAgICB0eXBlIEJldGFSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50IGFzIEJldGFSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQgYXMgQmV0YVJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50IGFzIEJldGFSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3TWVzc2FnZURlbHRhRXZlbnQgYXMgQmV0YVJhd01lc3NhZ2VEZWx0YUV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd01lc3NhZ2VTdGFydEV2ZW50IGFzIEJldGFSYXdNZXNzYWdlU3RhcnRFdmVudCxcbiAgICB0eXBlIEJldGFSYXdNZXNzYWdlU3RvcEV2ZW50IGFzIEJldGFSYXdNZXNzYWdlU3RvcEV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd01lc3NhZ2VTdHJlYW1FdmVudCBhcyBCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50LFxuICAgIHR5cGUgQmV0YVRleHRCbG9jayBhcyBCZXRhVGV4dEJsb2NrLFxuICAgIHR5cGUgQmV0YVRleHRCbG9ja1BhcmFtIGFzIEJldGFUZXh0QmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFUZXh0RGVsdGEgYXMgQmV0YVRleHREZWx0YSxcbiAgICB0eXBlIEJldGFUb29sIGFzIEJldGFUb29sLFxuICAgIHR5cGUgQmV0YVRvb2xCYXNoMjAyNDEwMjIgYXMgQmV0YVRvb2xCYXNoMjAyNDEwMjIsXG4gICAgdHlwZSBCZXRhVG9vbENob2ljZSBhcyBCZXRhVG9vbENob2ljZSxcbiAgICB0eXBlIEJldGFUb29sQ2hvaWNlQW55IGFzIEJldGFUb29sQ2hvaWNlQW55LFxuICAgIHR5cGUgQmV0YVRvb2xDaG9pY2VBdXRvIGFzIEJldGFUb29sQ2hvaWNlQXV0byxcbiAgICB0eXBlIEJldGFUb29sQ2hvaWNlVG9vbCBhcyBCZXRhVG9vbENob2ljZVRvb2wsXG4gICAgdHlwZSBCZXRhVG9vbENvbXB1dGVyVXNlMjAyNDEwMjIgYXMgQmV0YVRvb2xDb21wdXRlclVzZTIwMjQxMDIyLFxuICAgIHR5cGUgQmV0YVRvb2xSZXN1bHRCbG9ja1BhcmFtIGFzIEJldGFUb29sUmVzdWx0QmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyIGFzIEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyLFxuICAgIHR5cGUgQmV0YVRvb2xVbmlvbiBhcyBCZXRhVG9vbFVuaW9uLFxuICAgIHR5cGUgQmV0YVRvb2xVc2VCbG9jayBhcyBCZXRhVG9vbFVzZUJsb2NrLFxuICAgIHR5cGUgQmV0YVRvb2xVc2VCbG9ja1BhcmFtIGFzIEJldGFUb29sVXNlQmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFVc2FnZSBhcyBCZXRhVXNhZ2UsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMgYXMgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zLFxuICB9O1xuXG4gIGV4cG9ydCB7XG4gICAgQmF0Y2hlcyBhcyBCYXRjaGVzLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaCBhcyBCZXRhTWVzc2FnZUJhdGNoLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0IGFzIEJldGFNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0IGFzIEJldGFNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0LFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlIGFzIEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2UsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cyBhcyBCZXRhTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cyxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaFJlc3VsdCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCxcbiAgICBCZXRhTWVzc2FnZUJhdGNoZXNQYWdlIGFzIEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UsXG4gICAgdHlwZSBCYXRjaENyZWF0ZVBhcmFtcyBhcyBCYXRjaENyZWF0ZVBhcmFtcyxcbiAgICB0eXBlIEJhdGNoUmV0cmlldmVQYXJhbXMgYXMgQmF0Y2hSZXRyaWV2ZVBhcmFtcyxcbiAgICB0eXBlIEJhdGNoTGlzdFBhcmFtcyBhcyBCYXRjaExpc3RQYXJhbXMsXG4gICAgdHlwZSBCYXRjaENhbmNlbFBhcmFtcyBhcyBCYXRjaENhbmNlbFBhcmFtcyxcbiAgICB0eXBlIEJhdGNoUmVzdWx0c1BhcmFtcyBhcyBCYXRjaFJlc3VsdHNQYXJhbXMsXG4gIH07XG59XG4iLCAidHlwZSBUb2tlbiA9IHtcbiAgdHlwZTogc3RyaW5nO1xuICB2YWx1ZTogc3RyaW5nO1xufTtcblxuY29uc3QgdG9rZW5pemUgPSAoaW5wdXQ6IHN0cmluZyk6IFRva2VuW10gPT4ge1xuICAgIGxldCBjdXJyZW50ID0gMDtcbiAgICBsZXQgdG9rZW5zOiBUb2tlbltdID0gW107XG5cbiAgICB3aGlsZSAoY3VycmVudCA8IGlucHV0Lmxlbmd0aCkge1xuICAgICAgbGV0IGNoYXIgPSBpbnB1dFtjdXJyZW50XTtcblxuICAgICAgaWYgKGNoYXIgPT09ICdcXFxcJykge1xuICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhciA9PT0gJ3snKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnYnJhY2UnLFxuICAgICAgICAgIHZhbHVlOiAneycsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFyID09PSAnfScpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdicmFjZScsXG4gICAgICAgICAgdmFsdWU6ICd9JyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY3VycmVudCsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXIgPT09ICdbJykge1xuICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgdHlwZTogJ3BhcmVuJyxcbiAgICAgICAgICB2YWx1ZTogJ1snLFxuICAgICAgICB9KTtcblxuICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhciA9PT0gJ10nKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAncGFyZW4nLFxuICAgICAgICAgIHZhbHVlOiAnXScsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFyID09PSAnOicpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdzZXBhcmF0b3InLFxuICAgICAgICAgIHZhbHVlOiAnOicsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFyID09PSAnLCcpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdkZWxpbWl0ZXInLFxuICAgICAgICAgIHZhbHVlOiAnLCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFyID09PSAnXCInKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9ICcnO1xuICAgICAgICBsZXQgZGFuZ2xpbmdRdW90ZSA9IGZhbHNlO1xuXG4gICAgICAgIGNoYXIgPSBpbnB1dFsrK2N1cnJlbnRdO1xuXG4gICAgICAgIHdoaWxlIChjaGFyICE9PSAnXCInKSB7XG4gICAgICAgICAgaWYgKGN1cnJlbnQgPT09IGlucHV0Lmxlbmd0aCkge1xuICAgICAgICAgICAgZGFuZ2xpbmdRdW90ZSA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoY2hhciA9PT0gJ1xcXFwnKSB7XG4gICAgICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGRhbmdsaW5nUXVvdGUgPSB0cnVlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbHVlICs9IGNoYXIgKyBpbnB1dFtjdXJyZW50XTtcbiAgICAgICAgICAgIGNoYXIgPSBpbnB1dFsrK2N1cnJlbnRdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZSArPSBjaGFyO1xuICAgICAgICAgICAgY2hhciA9IGlucHV0WysrY3VycmVudF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY2hhciA9IGlucHV0WysrY3VycmVudF07XG5cbiAgICAgICAgaWYgKCFkYW5nbGluZ1F1b3RlKSB7XG4gICAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IFdISVRFU1BBQ0UgPSAvXFxzLztcbiAgICAgIGlmIChjaGFyICYmIFdISVRFU1BBQ0UudGVzdChjaGFyKSkge1xuICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQgTlVNQkVSUyA9IC9bMC05XS87XG4gICAgICBpZiAoKGNoYXIgJiYgTlVNQkVSUy50ZXN0KGNoYXIpKSB8fCBjaGFyID09PSAnLScgfHwgY2hhciA9PT0gJy4nKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9ICcnO1xuXG4gICAgICAgIGlmIChjaGFyID09PSAnLScpIHtcbiAgICAgICAgICB2YWx1ZSArPSBjaGFyO1xuICAgICAgICAgIGNoYXIgPSBpbnB1dFsrK2N1cnJlbnRdO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKChjaGFyICYmIE5VTUJFUlMudGVzdChjaGFyKSkgfHwgY2hhciA9PT0gJy4nKSB7XG4gICAgICAgICAgdmFsdWUgKz0gY2hhcjtcbiAgICAgICAgICBjaGFyID0gaW5wdXRbKytjdXJyZW50XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQgTEVUVEVSUyA9IC9bYS16XS9pO1xuICAgICAgaWYgKGNoYXIgJiYgTEVUVEVSUy50ZXN0KGNoYXIpKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9ICcnO1xuXG4gICAgICAgIHdoaWxlIChjaGFyICYmIExFVFRFUlMudGVzdChjaGFyKSkge1xuICAgICAgICAgIGlmIChjdXJyZW50ID09PSBpbnB1dC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSArPSBjaGFyO1xuICAgICAgICAgIGNoYXIgPSBpbnB1dFsrK2N1cnJlbnRdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbHVlID09ICd0cnVlJyB8fCB2YWx1ZSA9PSAnZmFsc2UnIHx8IHZhbHVlID09PSAnbnVsbCcpIHtcbiAgICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiAnbmFtZScsXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyB1bmtub3duIHRva2VuLCBlLmcuIGBudWxgIHdoaWNoIGlzbid0IHF1aXRlIGBudWxsYFxuICAgICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY3VycmVudCsrO1xuICAgIH1cblxuICAgIHJldHVybiB0b2tlbnM7XG4gIH0sXG4gIHN0cmlwID0gKHRva2VuczogVG9rZW5bXSk6IFRva2VuW10gPT4ge1xuICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdG9rZW5zO1xuICAgIH1cblxuICAgIGxldCBsYXN0VG9rZW4gPSB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDFdITtcblxuICAgIHN3aXRjaCAobGFzdFRva2VuLnR5cGUpIHtcbiAgICAgIGNhc2UgJ3NlcGFyYXRvcic6XG4gICAgICAgIHRva2VucyA9IHRva2Vucy5zbGljZSgwLCB0b2tlbnMubGVuZ3RoIC0gMSk7XG4gICAgICAgIHJldHVybiBzdHJpcCh0b2tlbnMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgIGxldCBsYXN0Q2hhcmFjdGVyT2ZMYXN0VG9rZW4gPSBsYXN0VG9rZW4udmFsdWVbbGFzdFRva2VuLnZhbHVlLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAobGFzdENoYXJhY3Rlck9mTGFzdFRva2VuID09PSAnLicgfHwgbGFzdENoYXJhY3Rlck9mTGFzdFRva2VuID09PSAnLScpIHtcbiAgICAgICAgICB0b2tlbnMgPSB0b2tlbnMuc2xpY2UoMCwgdG9rZW5zLmxlbmd0aCAtIDEpO1xuICAgICAgICAgIHJldHVybiBzdHJpcCh0b2tlbnMpO1xuICAgICAgICB9XG4gICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICBsZXQgdG9rZW5CZWZvcmVUaGVMYXN0VG9rZW4gPSB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDJdO1xuICAgICAgICBpZiAodG9rZW5CZWZvcmVUaGVMYXN0VG9rZW4/LnR5cGUgPT09ICdkZWxpbWl0ZXInKSB7XG4gICAgICAgICAgdG9rZW5zID0gdG9rZW5zLnNsaWNlKDAsIHRva2Vucy5sZW5ndGggLSAxKTtcbiAgICAgICAgICByZXR1cm4gc3RyaXAodG9rZW5zKTtcbiAgICAgICAgfSBlbHNlIGlmICh0b2tlbkJlZm9yZVRoZUxhc3RUb2tlbj8udHlwZSA9PT0gJ2JyYWNlJyAmJiB0b2tlbkJlZm9yZVRoZUxhc3RUb2tlbi52YWx1ZSA9PT0gJ3snKSB7XG4gICAgICAgICAgdG9rZW5zID0gdG9rZW5zLnNsaWNlKDAsIHRva2Vucy5sZW5ndGggLSAxKTtcbiAgICAgICAgICByZXR1cm4gc3RyaXAodG9rZW5zKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2RlbGltaXRlcic6XG4gICAgICAgIHRva2VucyA9IHRva2Vucy5zbGljZSgwLCB0b2tlbnMubGVuZ3RoIC0gMSk7XG4gICAgICAgIHJldHVybiBzdHJpcCh0b2tlbnMpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICByZXR1cm4gdG9rZW5zO1xuICB9LFxuICB1bnN0cmlwID0gKHRva2VuczogVG9rZW5bXSk6IFRva2VuW10gPT4ge1xuICAgIGxldCB0YWlsOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgdG9rZW5zLm1hcCgodG9rZW4pID0+IHtcbiAgICAgIGlmICh0b2tlbi50eXBlID09PSAnYnJhY2UnKSB7XG4gICAgICAgIGlmICh0b2tlbi52YWx1ZSA9PT0gJ3snKSB7XG4gICAgICAgICAgdGFpbC5wdXNoKCd9Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFpbC5zcGxpY2UodGFpbC5sYXN0SW5kZXhPZignfScpLCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRva2VuLnR5cGUgPT09ICdwYXJlbicpIHtcbiAgICAgICAgaWYgKHRva2VuLnZhbHVlID09PSAnWycpIHtcbiAgICAgICAgICB0YWlsLnB1c2goJ10nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YWlsLnNwbGljZSh0YWlsLmxhc3RJbmRleE9mKCddJyksIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAodGFpbC5sZW5ndGggPiAwKSB7XG4gICAgICB0YWlsLnJldmVyc2UoKS5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgaWYgKGl0ZW0gPT09ICd9Jykge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdicmFjZScsXG4gICAgICAgICAgICB2YWx1ZTogJ30nLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0gPT09ICddJykge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdwYXJlbicsXG4gICAgICAgICAgICB2YWx1ZTogJ10nLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdG9rZW5zO1xuICB9LFxuICBnZW5lcmF0ZSA9ICh0b2tlbnM6IFRva2VuW10pOiBzdHJpbmcgPT4ge1xuICAgIGxldCBvdXRwdXQgPSAnJztcblxuICAgIHRva2Vucy5tYXAoKHRva2VuKSA9PiB7XG4gICAgICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICBvdXRwdXQgKz0gJ1wiJyArIHRva2VuLnZhbHVlICsgJ1wiJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBvdXRwdXQgKz0gdG9rZW4udmFsdWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9LFxuICBwYXJ0aWFsUGFyc2UgPSAoaW5wdXQ6IHN0cmluZyk6IHVua25vd24gPT4gSlNPTi5wYXJzZShnZW5lcmF0ZSh1bnN0cmlwKHN0cmlwKHRva2VuaXplKGlucHV0KSkpKSk7XG5cbmV4cG9ydCB7IHBhcnRpYWxQYXJzZSB9O1xuIiwgImltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4uL2NvcmUuanNcIjtcbmltcG9ydCB7IEFudGhyb3BpY0Vycm9yLCBBUElVc2VyQWJvcnRFcnJvciB9IGZyb20gXCIuLi9lcnJvci5qc1wiO1xuaW1wb3J0IHsgdHlwZSBDb250ZW50QmxvY2ssIHR5cGUgVGV4dEJsb2NrIH0gZnJvbSBcIi4uL3Jlc291cmNlcy9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0IHtcbiAgTWVzc2FnZXMsXG4gIHR5cGUgUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlLFxuICB0eXBlIFJhd1Byb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbUV2ZW50LFxuICB0eXBlIFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVBhcmFtLFxuICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2UsXG59IGZyb20gXCIuLi9yZXNvdXJjZXMvYmV0YS9wcm9tcHQtY2FjaGluZy9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0IHsgdHlwZSBSZWFkYWJsZVN0cmVhbSB9IGZyb20gXCIuLi9fc2hpbXMvaW5kZXguanNcIjtcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gXCIuLi9zdHJlYW1pbmcuanNcIjtcbmltcG9ydCB7IHBhcnRpYWxQYXJzZSB9IGZyb20gXCIuLi9fdmVuZG9yL3BhcnRpYWwtanNvbi1wYXJzZXIvcGFyc2VyLmpzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RyZWFtRXZlbnRzIHtcbiAgY29ubmVjdDogKCkgPT4gdm9pZDtcbiAgc3RyZWFtRXZlbnQ6IChldmVudDogUmF3UHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RyZWFtRXZlbnQsIHNuYXBzaG90OiBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2UpID0+IHZvaWQ7XG4gIHRleHQ6ICh0ZXh0RGVsdGE6IHN0cmluZywgdGV4dFNuYXBzaG90OiBzdHJpbmcpID0+IHZvaWQ7XG4gIGlucHV0SnNvbjogKHBhcnRpYWxKc29uOiBzdHJpbmcsIGpzb25TbmFwc2hvdDogdW5rbm93bikgPT4gdm9pZDtcbiAgbWVzc2FnZTogKG1lc3NhZ2U6IFByb21wdENhY2hpbmdCZXRhTWVzc2FnZSkgPT4gdm9pZDtcbiAgY29udGVudEJsb2NrOiAoY29udGVudDogQ29udGVudEJsb2NrKSA9PiB2b2lkO1xuICBmaW5hbFByb21wdENhY2hpbmdCZXRhTWVzc2FnZTogKG1lc3NhZ2U6IFByb21wdENhY2hpbmdCZXRhTWVzc2FnZSkgPT4gdm9pZDtcbiAgZXJyb3I6IChlcnJvcjogQW50aHJvcGljRXJyb3IpID0+IHZvaWQ7XG4gIGFib3J0OiAoZXJyb3I6IEFQSVVzZXJBYm9ydEVycm9yKSA9PiB2b2lkO1xuICBlbmQ6ICgpID0+IHZvaWQ7XG59XG5cbnR5cGUgUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RyZWFtRXZlbnRMaXN0ZW5lcnM8RXZlbnQgZXh0ZW5kcyBrZXlvZiBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW1FdmVudHM+ID1cbiAge1xuICAgIGxpc3RlbmVyOiBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdO1xuICAgIG9uY2U/OiBib29sZWFuO1xuICB9W107XG5cbmNvbnN0IEpTT05fQlVGX1BST1BFUlRZID0gJ19fanNvbl9idWYnO1xuXG5leHBvcnQgY2xhc3MgUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RyZWFtIGltcGxlbWVudHMgQXN5bmNJdGVyYWJsZTxSYXdQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW1FdmVudD4ge1xuICBtZXNzYWdlczogUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlUGFyYW1bXSA9IFtdO1xuICByZWNlaXZlZE1lc3NhZ2VzOiBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VbXSA9IFtdO1xuICAjY3VycmVudE1lc3NhZ2VTbmFwc2hvdDogUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblxuICAjY29ubmVjdGVkUHJvbWlzZTogUHJvbWlzZTx2b2lkPjtcbiAgI3Jlc29sdmVDb25uZWN0ZWRQcm9taXNlOiAoKSA9PiB2b2lkID0gKCkgPT4ge307XG4gICNyZWplY3RDb25uZWN0ZWRQcm9taXNlOiAoZXJyb3I6IEFudGhyb3BpY0Vycm9yKSA9PiB2b2lkID0gKCkgPT4ge307XG5cbiAgI2VuZFByb21pc2U6IFByb21pc2U8dm9pZD47XG4gICNyZXNvbHZlRW5kUHJvbWlzZTogKCkgPT4gdm9pZCA9ICgpID0+IHt9O1xuICAjcmVqZWN0RW5kUHJvbWlzZTogKGVycm9yOiBBbnRocm9waWNFcnJvcikgPT4gdm9pZCA9ICgpID0+IHt9O1xuXG4gICNsaXN0ZW5lcnM6IHtcbiAgICBbRXZlbnQgaW4ga2V5b2YgUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RyZWFtRXZlbnRzXT86IFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbUV2ZW50TGlzdGVuZXJzPEV2ZW50PjtcbiAgfSA9IHt9O1xuXG4gICNlbmRlZCA9IGZhbHNlO1xuICAjZXJyb3JlZCA9IGZhbHNlO1xuICAjYWJvcnRlZCA9IGZhbHNlO1xuICAjY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuI2Nvbm5lY3RlZFByb21pc2UgPSBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLiNyZXNvbHZlQ29ubmVjdGVkUHJvbWlzZSA9IHJlc29sdmU7XG4gICAgICB0aGlzLiNyZWplY3RDb25uZWN0ZWRQcm9taXNlID0gcmVqZWN0O1xuICAgIH0pO1xuXG4gICAgdGhpcy4jZW5kUHJvbWlzZSA9IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuI3Jlc29sdmVFbmRQcm9taXNlID0gcmVzb2x2ZTtcbiAgICAgIHRoaXMuI3JlamVjdEVuZFByb21pc2UgPSByZWplY3Q7XG4gICAgfSk7XG5cbiAgICAvLyBEb24ndCBsZXQgdGhlc2UgcHJvbWlzZXMgY2F1c2UgdW5oYW5kbGVkIHJlamVjdGlvbiBlcnJvcnMuXG4gICAgLy8gd2Ugd2lsbCBtYW51YWxseSBjYXVzZSBhbiB1bmhhbmRsZWQgcmVqZWN0aW9uIGVycm9yIGxhdGVyXG4gICAgLy8gaWYgdGhlIHVzZXIgaGFzbid0IHJlZ2lzdGVyZWQgYW55IGVycm9yIGxpc3RlbmVyIG9yIGNhbGxlZFxuICAgIC8vIGFueSBwcm9taXNlLXJldHVybmluZyBtZXRob2QuXG4gICAgdGhpcy4jY29ubmVjdGVkUHJvbWlzZS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgdGhpcy4jZW5kUHJvbWlzZS5jYXRjaCgoKSA9PiB7fSk7XG4gIH1cblxuICAvKipcbiAgICogSW50ZW5kZWQgZm9yIHVzZSBvbiB0aGUgZnJvbnRlbmQsIGNvbnN1bWluZyBhIHN0cmVhbSBwcm9kdWNlZCB3aXRoXG4gICAqIGAudG9SZWFkYWJsZVN0cmVhbSgpYCBvbiB0aGUgYmFja2VuZC5cbiAgICpcbiAgICogTm90ZSB0aGF0IG1lc3NhZ2VzIHNlbnQgdG8gdGhlIG1vZGVsIGRvIG5vdCBhcHBlYXIgaW4gYC5vbignbWVzc2FnZScpYFxuICAgKiBpbiB0aGlzIGNvbnRleHQuXG4gICAqL1xuICBzdGF0aWMgZnJvbVJlYWRhYmxlU3RyZWFtKHN0cmVhbTogUmVhZGFibGVTdHJlYW0pOiBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW0ge1xuICAgIGNvbnN0IHJ1bm5lciA9IG5ldyBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW0oKTtcbiAgICBydW5uZXIuX3J1bigoKSA9PiBydW5uZXIuX2Zyb21SZWFkYWJsZVN0cmVhbShzdHJlYW0pKTtcbiAgICByZXR1cm4gcnVubmVyO1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZU1lc3NhZ2UoXG4gICAgbWVzc2FnZXM6IE1lc3NhZ2VzLFxuICAgIHBhcmFtczogTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2UsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbSB7XG4gICAgY29uc3QgcnVubmVyID0gbmV3IFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbSgpO1xuICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBwYXJhbXMubWVzc2FnZXMpIHtcbiAgICAgIHJ1bm5lci5fYWRkUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlUGFyYW0obWVzc2FnZSk7XG4gICAgfVxuICAgIHJ1bm5lci5fcnVuKCgpID0+XG4gICAgICBydW5uZXIuX2NyZWF0ZVByb21wdENhY2hpbmdCZXRhTWVzc2FnZShcbiAgICAgICAgbWVzc2FnZXMsXG4gICAgICAgIHsgLi4ucGFyYW1zLCBzdHJlYW06IHRydWUgfSxcbiAgICAgICAgeyAuLi5vcHRpb25zLCBoZWFkZXJzOiB7IC4uLm9wdGlvbnM/LmhlYWRlcnMsICdYLVN0YWlubGVzcy1IZWxwZXItTWV0aG9kJzogJ3N0cmVhbScgfSB9LFxuICAgICAgKSxcbiAgICApO1xuICAgIHJldHVybiBydW5uZXI7XG4gIH1cblxuICBwcm90ZWN0ZWQgX3J1bihleGVjdXRvcjogKCkgPT4gUHJvbWlzZTxhbnk+KSB7XG4gICAgZXhlY3V0b3IoKS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuX2VtaXRGaW5hbCgpO1xuICAgICAgdGhpcy5fZW1pdCgnZW5kJyk7XG4gICAgfSwgdGhpcy4jaGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9hZGRQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VQYXJhbShtZXNzYWdlOiBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VQYXJhbSkge1xuICAgIHRoaXMubWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfYWRkUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlKG1lc3NhZ2U6IFByb21wdENhY2hpbmdCZXRhTWVzc2FnZSwgZW1pdCA9IHRydWUpIHtcbiAgICB0aGlzLnJlY2VpdmVkTWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgICBpZiAoZW1pdCkge1xuICAgICAgdGhpcy5fZW1pdCgnbWVzc2FnZScsIG1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBfY3JlYXRlUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlKFxuICAgIG1lc3NhZ2VzOiBNZXNzYWdlcyxcbiAgICBwYXJhbXM6IE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHNpZ25hbCA9IG9wdGlvbnM/LnNpZ25hbDtcbiAgICBpZiAoc2lnbmFsKSB7XG4gICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHRoaXMuY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgKCkgPT4gdGhpcy5jb250cm9sbGVyLmFib3J0KCkpO1xuICAgIH1cbiAgICB0aGlzLiNiZWdpblJlcXVlc3QoKTtcbiAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBtZXNzYWdlcy5jcmVhdGUoXG4gICAgICB7IC4uLnBhcmFtcywgc3RyZWFtOiB0cnVlIH0sXG4gICAgICB7IC4uLm9wdGlvbnMsIHNpZ25hbDogdGhpcy5jb250cm9sbGVyLnNpZ25hbCB9LFxuICAgICk7XG4gICAgdGhpcy5fY29ubmVjdGVkKCk7XG4gICAgZm9yIGF3YWl0IChjb25zdCBldmVudCBvZiBzdHJlYW0pIHtcbiAgICAgIHRoaXMuI2FkZFN0cmVhbUV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgaWYgKHN0cmVhbS5jb250cm9sbGVyLnNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgdGhyb3cgbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgfVxuICAgIHRoaXMuI2VuZFJlcXVlc3QoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfY29ubmVjdGVkKCkge1xuICAgIGlmICh0aGlzLmVuZGVkKSByZXR1cm47XG4gICAgdGhpcy4jcmVzb2x2ZUNvbm5lY3RlZFByb21pc2UoKTtcbiAgICB0aGlzLl9lbWl0KCdjb25uZWN0Jyk7XG4gIH1cblxuICBnZXQgZW5kZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuI2VuZGVkO1xuICB9XG5cbiAgZ2V0IGVycm9yZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuI2Vycm9yZWQ7XG4gIH1cblxuICBnZXQgYWJvcnRlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy4jYWJvcnRlZDtcbiAgfVxuXG4gIGFib3J0KCkge1xuICAgIHRoaXMuY29udHJvbGxlci5hYm9ydCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIGxpc3RlbmVyIGZ1bmN0aW9uIHRvIHRoZSBlbmQgb2YgdGhlIGxpc3RlbmVycyBhcnJheSBmb3IgdGhlIGV2ZW50LlxuICAgKiBObyBjaGVja3MgYXJlIG1hZGUgdG8gc2VlIGlmIHRoZSBsaXN0ZW5lciBoYXMgYWxyZWFkeSBiZWVuIGFkZGVkLiBNdWx0aXBsZSBjYWxscyBwYXNzaW5nXG4gICAqIHRoZSBzYW1lIGNvbWJpbmF0aW9uIG9mIGV2ZW50IGFuZCBsaXN0ZW5lciB3aWxsIHJlc3VsdCBpbiB0aGUgbGlzdGVuZXIgYmVpbmcgYWRkZWQsIGFuZFxuICAgKiBjYWxsZWQsIG11bHRpcGxlIHRpbWVzLlxuICAgKiBAcmV0dXJucyB0aGlzIFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbSwgc28gdGhhdCBjYWxscyBjYW4gYmUgY2hhaW5lZFxuICAgKi9cbiAgb248RXZlbnQgZXh0ZW5kcyBrZXlvZiBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW1FdmVudHM+KFxuICAgIGV2ZW50OiBFdmVudCxcbiAgICBsaXN0ZW5lcjogUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XSxcbiAgKTogdGhpcyB7XG4gICAgY29uc3QgbGlzdGVuZXJzOiBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gPVxuICAgICAgdGhpcy4jbGlzdGVuZXJzW2V2ZW50XSB8fCAodGhpcy4jbGlzdGVuZXJzW2V2ZW50XSA9IFtdKTtcbiAgICBsaXN0ZW5lcnMucHVzaCh7IGxpc3RlbmVyIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBsaXN0ZW5lciBmcm9tIHRoZSBsaXN0ZW5lciBhcnJheSBmb3IgdGhlIGV2ZW50LlxuICAgKiBvZmYoKSB3aWxsIHJlbW92ZSwgYXQgbW9zdCwgb25lIGluc3RhbmNlIG9mIGEgbGlzdGVuZXIgZnJvbSB0aGUgbGlzdGVuZXIgYXJyYXkuIElmIGFueSBzaW5nbGVcbiAgICogbGlzdGVuZXIgaGFzIGJlZW4gYWRkZWQgbXVsdGlwbGUgdGltZXMgdG8gdGhlIGxpc3RlbmVyIGFycmF5IGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50LCB0aGVuXG4gICAqIG9mZigpIG11c3QgYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzIHRvIHJlbW92ZSBlYWNoIGluc3RhbmNlLlxuICAgKiBAcmV0dXJucyB0aGlzIFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbSwgc28gdGhhdCBjYWxscyBjYW4gYmUgY2hhaW5lZFxuICAgKi9cbiAgb2ZmPEV2ZW50IGV4dGVuZHMga2V5b2YgUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RyZWFtRXZlbnRzPihcbiAgICBldmVudDogRXZlbnQsXG4gICAgbGlzdGVuZXI6IFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0sXG4gICk6IHRoaXMge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuI2xpc3RlbmVyc1tldmVudF07XG4gICAgaWYgKCFsaXN0ZW5lcnMpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmZpbmRJbmRleCgobCkgPT4gbC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpO1xuICAgIGlmIChpbmRleCA+PSAwKSBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgb25lLXRpbWUgbGlzdGVuZXIgZnVuY3Rpb24gZm9yIHRoZSBldmVudC4gVGhlIG5leHQgdGltZSB0aGUgZXZlbnQgaXMgdHJpZ2dlcmVkLFxuICAgKiB0aGlzIGxpc3RlbmVyIGlzIHJlbW92ZWQgYW5kIHRoZW4gaW52b2tlZC5cbiAgICogQHJldHVybnMgdGhpcyBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW0sIHNvIHRoYXQgY2FsbHMgY2FuIGJlIGNoYWluZWRcbiAgICovXG4gIG9uY2U8RXZlbnQgZXh0ZW5kcyBrZXlvZiBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW1FdmVudHM+KFxuICAgIGV2ZW50OiBFdmVudCxcbiAgICBsaXN0ZW5lcjogUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XSxcbiAgKTogdGhpcyB7XG4gICAgY29uc3QgbGlzdGVuZXJzOiBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gPVxuICAgICAgdGhpcy4jbGlzdGVuZXJzW2V2ZW50XSB8fCAodGhpcy4jbGlzdGVuZXJzW2V2ZW50XSA9IFtdKTtcbiAgICBsaXN0ZW5lcnMucHVzaCh7IGxpc3RlbmVyLCBvbmNlOiB0cnVlIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgc2ltaWxhciB0byBgLm9uY2UoKWAsIGJ1dCByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRoZSBuZXh0IHRpbWVcbiAgICogdGhlIGV2ZW50IGlzIHRyaWdnZXJlZCwgaW5zdGVhZCBvZiBjYWxsaW5nIGEgbGlzdGVuZXIgY2FsbGJhY2suXG4gICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRoZSBuZXh0IHRpbWUgZ2l2ZW4gZXZlbnQgaXMgdHJpZ2dlcmVkLFxuICAgKiBvciByZWplY3RzIGlmIGFuIGVycm9yIGlzIGVtaXR0ZWQuICAoSWYgeW91IHJlcXVlc3QgdGhlICdlcnJvcicgZXZlbnQsXG4gICAqIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZXJyb3IpLlxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKlxuICAgKiAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBzdHJlYW0uZW1pdHRlZCgnbWVzc2FnZScpIC8vIHJlamVjdHMgaWYgdGhlIHN0cmVhbSBlcnJvcnNcbiAgICovXG4gIGVtaXR0ZWQ8RXZlbnQgZXh0ZW5kcyBrZXlvZiBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW1FdmVudHM+KFxuICAgIGV2ZW50OiBFdmVudCxcbiAgKTogUHJvbWlzZTxcbiAgICBQYXJhbWV0ZXJzPFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+IGV4dGVuZHMgW2luZmVyIFBhcmFtXSA/IFBhcmFtXG4gICAgOiBQYXJhbWV0ZXJzPFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+IGV4dGVuZHMgW10gPyB2b2lkXG4gICAgOiBQYXJhbWV0ZXJzPFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+XG4gID4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLiNjYXRjaGluZ1Byb21pc2VDcmVhdGVkID0gdHJ1ZTtcbiAgICAgIGlmIChldmVudCAhPT0gJ2Vycm9yJykgdGhpcy5vbmNlKCdlcnJvcicsIHJlamVjdCk7XG4gICAgICB0aGlzLm9uY2UoZXZlbnQsIHJlc29sdmUgYXMgYW55KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGRvbmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy4jY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCA9IHRydWU7XG4gICAgYXdhaXQgdGhpcy4jZW5kUHJvbWlzZTtcbiAgfVxuXG4gIGdldCBjdXJyZW50TWVzc2FnZSgpOiBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2UgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90O1xuICB9XG5cbiAgI2dldEZpbmFsTWVzc2FnZSgpOiBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2Uge1xuICAgIGlmICh0aGlzLnJlY2VpdmVkTWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoXG4gICAgICAgICdzdHJlYW0gZW5kZWQgd2l0aG91dCBwcm9kdWNpbmcgYSBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2Ugd2l0aCByb2xlPWFzc2lzdGFudCcsXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmF0KC0xKSE7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgdGhlIGZpbmFsIGFzc2lzdGFudCBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2UgcmVzcG9uc2UsXG4gICAqIG9yIHJlamVjdHMgaWYgYW4gZXJyb3Igb2NjdXJyZWQgb3IgdGhlIHN0cmVhbSBlbmRlZCBwcmVtYXR1cmVseSB3aXRob3V0IHByb2R1Y2luZyBhIFByb21wdENhY2hpbmdCZXRhTWVzc2FnZS5cbiAgICovXG4gIGFzeW5jIGZpbmFsTWVzc2FnZSgpOiBQcm9taXNlPFByb21wdENhY2hpbmdCZXRhTWVzc2FnZT4ge1xuICAgIGF3YWl0IHRoaXMuZG9uZSgpO1xuICAgIHJldHVybiB0aGlzLiNnZXRGaW5hbE1lc3NhZ2UoKTtcbiAgfVxuXG4gICNnZXRGaW5hbFRleHQoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgICAnc3RyZWFtIGVuZGVkIHdpdGhvdXQgcHJvZHVjaW5nIGEgUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlIHdpdGggcm9sZT1hc3Npc3RhbnQnLFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgdGV4dEJsb2NrcyA9IHRoaXMucmVjZWl2ZWRNZXNzYWdlc1xuICAgICAgLmF0KC0xKSFcbiAgICAgIC5jb250ZW50LmZpbHRlcigoYmxvY2spOiBibG9jayBpcyBUZXh0QmxvY2sgPT4gYmxvY2sudHlwZSA9PT0gJ3RleHQnKVxuICAgICAgLm1hcCgoYmxvY2spID0+IGJsb2NrLnRleHQpO1xuICAgIGlmICh0ZXh0QmxvY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKCdzdHJlYW0gZW5kZWQgd2l0aG91dCBwcm9kdWNpbmcgYSBjb250ZW50IGJsb2NrIHdpdGggdHlwZT10ZXh0Jyk7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0QmxvY2tzLmpvaW4oJyAnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSB0aGUgZmluYWwgYXNzaXN0YW50IFByb21wdENhY2hpbmdCZXRhTWVzc2FnZSdzIHRleHQgcmVzcG9uc2UsIGNvbmNhdGVuYXRlZFxuICAgKiB0b2dldGhlciBpZiB0aGVyZSBhcmUgbW9yZSB0aGFuIG9uZSB0ZXh0IGJsb2Nrcy5cbiAgICogUmVqZWN0cyBpZiBhbiBlcnJvciBvY2N1cnJlZCBvciB0aGUgc3RyZWFtIGVuZGVkIHByZW1hdHVyZWx5IHdpdGhvdXQgcHJvZHVjaW5nIGEgUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlLlxuICAgKi9cbiAgYXN5bmMgZmluYWxUZXh0KCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgYXdhaXQgdGhpcy5kb25lKCk7XG4gICAgcmV0dXJuIHRoaXMuI2dldEZpbmFsVGV4dCgpO1xuICB9XG5cbiAgI2hhbmRsZUVycm9yID0gKGVycm9yOiB1bmtub3duKSA9PiB7XG4gICAgdGhpcy4jZXJyb3JlZCA9IHRydWU7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICBlcnJvciA9IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBBUElVc2VyQWJvcnRFcnJvcikge1xuICAgICAgdGhpcy4jYWJvcnRlZCA9IHRydWU7XG4gICAgICByZXR1cm4gdGhpcy5fZW1pdCgnYWJvcnQnLCBlcnJvcik7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEFudGhyb3BpY0Vycm9yKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZW1pdCgnZXJyb3InLCBlcnJvcik7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zdCBhbnRocm9waWNFcnJvcjogQW50aHJvcGljRXJyb3IgPSBuZXcgQW50aHJvcGljRXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBhbnRocm9waWNFcnJvci5jYXVzZSA9IGVycm9yO1xuICAgICAgcmV0dXJuIHRoaXMuX2VtaXQoJ2Vycm9yJywgYW50aHJvcGljRXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZW1pdCgnZXJyb3InLCBuZXcgQW50aHJvcGljRXJyb3IoU3RyaW5nKGVycm9yKSkpO1xuICB9O1xuXG4gIHByb3RlY3RlZCBfZW1pdDxFdmVudCBleHRlbmRzIGtleW9mIFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbUV2ZW50cz4oXG4gICAgZXZlbnQ6IEV2ZW50LFxuICAgIC4uLmFyZ3M6IFBhcmFtZXRlcnM8UHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XT5cbiAgKSB7XG4gICAgLy8gbWFrZSBzdXJlIHdlIGRvbid0IGVtaXQgYW55IFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbUV2ZW50cyBhZnRlciBlbmRcbiAgICBpZiAodGhpcy4jZW5kZWQpIHJldHVybjtcblxuICAgIGlmIChldmVudCA9PT0gJ2VuZCcpIHtcbiAgICAgIHRoaXMuI2VuZGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuI3Jlc29sdmVFbmRQcm9taXNlKCk7XG4gICAgfVxuXG4gICAgY29uc3QgbGlzdGVuZXJzOiBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gfCB1bmRlZmluZWQgPSB0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIHRoaXMuI2xpc3RlbmVyc1tldmVudF0gPSBsaXN0ZW5lcnMuZmlsdGVyKChsKSA9PiAhbC5vbmNlKSBhcyBhbnk7XG4gICAgICBsaXN0ZW5lcnMuZm9yRWFjaCgoeyBsaXN0ZW5lciB9OiBhbnkpID0+IGxpc3RlbmVyKC4uLmFyZ3MpKTtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQgPT09ICdhYm9ydCcpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gYXJnc1swXSBhcyBBUElVc2VyQWJvcnRFcnJvcjtcbiAgICAgIGlmICghdGhpcy4jY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCAmJiAhbGlzdGVuZXJzPy5sZW5ndGgpIHtcbiAgICAgICAgUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgICAgdGhpcy4jcmVqZWN0Q29ubmVjdGVkUHJvbWlzZShlcnJvcik7XG4gICAgICB0aGlzLiNyZWplY3RFbmRQcm9taXNlKGVycm9yKTtcbiAgICAgIHRoaXMuX2VtaXQoJ2VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldmVudCA9PT0gJ2Vycm9yJykge1xuICAgICAgLy8gTk9URTogX2VtaXQoJ2Vycm9yJywgZXJyb3IpIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBmcm9tICNoYW5kbGVFcnJvcigpLlxuXG4gICAgICBjb25zdCBlcnJvciA9IGFyZ3NbMF0gYXMgQW50aHJvcGljRXJyb3I7XG4gICAgICBpZiAoIXRoaXMuI2NhdGNoaW5nUHJvbWlzZUNyZWF0ZWQgJiYgIWxpc3RlbmVycz8ubGVuZ3RoKSB7XG4gICAgICAgIC8vIFRyaWdnZXIgYW4gdW5oYW5kbGVkIHJlamVjdGlvbiBpZiB0aGUgdXNlciBoYXNuJ3QgcmVnaXN0ZXJlZCBhbnkgZXJyb3IgaGFuZGxlcnMuXG4gICAgICAgIC8vIElmIHlvdSBhcmUgc2VlaW5nIHN0YWNrIHRyYWNlcyBoZXJlLCBtYWtlIHN1cmUgdG8gaGFuZGxlIGVycm9ycyB2aWEgZWl0aGVyOlxuICAgICAgICAvLyAtIHJ1bm5lci5vbignZXJyb3InLCAoKSA9PiAuLi4pXG4gICAgICAgIC8vIC0gYXdhaXQgcnVubmVyLmRvbmUoKVxuICAgICAgICAvLyAtIGF3YWl0IHJ1bm5lci5maW5hbC4uLigpXG4gICAgICAgIC8vIC0gZXRjLlxuICAgICAgICBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgICB0aGlzLiNyZWplY3RDb25uZWN0ZWRQcm9taXNlKGVycm9yKTtcbiAgICAgIHRoaXMuI3JlamVjdEVuZFByb21pc2UoZXJyb3IpO1xuICAgICAgdGhpcy5fZW1pdCgnZW5kJyk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIF9lbWl0RmluYWwoKSB7XG4gICAgY29uc3QgZmluYWxQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2UgPSB0aGlzLnJlY2VpdmVkTWVzc2FnZXMuYXQoLTEpO1xuICAgIGlmIChmaW5hbFByb21wdENhY2hpbmdCZXRhTWVzc2FnZSkge1xuICAgICAgdGhpcy5fZW1pdCgnZmluYWxQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2UnLCB0aGlzLiNnZXRGaW5hbE1lc3NhZ2UoKSk7XG4gICAgfVxuICB9XG5cbiAgI2JlZ2luUmVxdWVzdCgpIHtcbiAgICBpZiAodGhpcy5lbmRlZCkgcmV0dXJuO1xuICAgIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3QgPSB1bmRlZmluZWQ7XG4gIH1cbiAgI2FkZFN0cmVhbUV2ZW50KGV2ZW50OiBSYXdQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW1FdmVudCkge1xuICAgIGlmICh0aGlzLmVuZGVkKSByZXR1cm47XG4gICAgY29uc3QgbWVzc2FnZVNuYXBzaG90ID0gdGhpcy4jYWNjdW11bGF0ZU1lc3NhZ2UoZXZlbnQpO1xuICAgIHRoaXMuX2VtaXQoJ3N0cmVhbUV2ZW50JywgZXZlbnQsIG1lc3NhZ2VTbmFwc2hvdCk7XG5cbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfZGVsdGEnOiB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBtZXNzYWdlU25hcHNob3QuY29udGVudC5hdCgtMSkhO1xuICAgICAgICBpZiAoZXZlbnQuZGVsdGEudHlwZSA9PT0gJ3RleHRfZGVsdGEnICYmIGNvbnRlbnQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgdGhpcy5fZW1pdCgndGV4dCcsIGV2ZW50LmRlbHRhLnRleHQsIGNvbnRlbnQudGV4dCB8fCAnJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuZGVsdGEudHlwZSA9PT0gJ2lucHV0X2pzb25fZGVsdGEnICYmIGNvbnRlbnQudHlwZSA9PT0gJ3Rvb2xfdXNlJykge1xuICAgICAgICAgIGlmIChjb250ZW50LmlucHV0KSB7XG4gICAgICAgICAgICB0aGlzLl9lbWl0KCdpbnB1dEpzb24nLCBldmVudC5kZWx0YS5wYXJ0aWFsX2pzb24sIGNvbnRlbnQuaW5wdXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ21lc3NhZ2Vfc3RvcCc6IHtcbiAgICAgICAgdGhpcy5fYWRkUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlUGFyYW0obWVzc2FnZVNuYXBzaG90KTtcbiAgICAgICAgdGhpcy5fYWRkUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlKG1lc3NhZ2VTbmFwc2hvdCwgdHJ1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19zdG9wJzoge1xuICAgICAgICB0aGlzLl9lbWl0KCdjb250ZW50QmxvY2snLCBtZXNzYWdlU25hcHNob3QuY29udGVudC5hdCgtMSkhKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdtZXNzYWdlX3N0YXJ0Jzoge1xuICAgICAgICB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90ID0gbWVzc2FnZVNuYXBzaG90O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfc3RhcnQnOlxuICAgICAgY2FzZSAnbWVzc2FnZV9kZWx0YSc6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICAjZW5kUmVxdWVzdCgpOiBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2Uge1xuICAgIGlmICh0aGlzLmVuZGVkKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYHN0cmVhbSBoYXMgZW5kZWQsIHRoaXMgc2hvdWxkbid0IGhhcHBlbmApO1xuICAgIH1cbiAgICBjb25zdCBzbmFwc2hvdCA9IHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3Q7XG4gICAgaWYgKCFzbmFwc2hvdCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGByZXF1ZXN0IGVuZGVkIHdpdGhvdXQgc2VuZGluZyBhbnkgY2h1bmtzYCk7XG4gICAgfVxuICAgIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3QgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHNuYXBzaG90O1xuICB9XG5cbiAgcHJvdGVjdGVkIGFzeW5jIF9mcm9tUmVhZGFibGVTdHJlYW0oXG4gICAgcmVhZGFibGVTdHJlYW06IFJlYWRhYmxlU3RyZWFtLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzaWduYWwgPSBvcHRpb25zPy5zaWduYWw7XG4gICAgaWYgKHNpZ25hbCkge1xuICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpID0+IHRoaXMuY29udHJvbGxlci5hYm9ydCgpKTtcbiAgICB9XG4gICAgdGhpcy4jYmVnaW5SZXF1ZXN0KCk7XG4gICAgdGhpcy5fY29ubmVjdGVkKCk7XG4gICAgY29uc3Qgc3RyZWFtID0gU3RyZWFtLmZyb21SZWFkYWJsZVN0cmVhbTxSYXdQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW1FdmVudD4oXG4gICAgICByZWFkYWJsZVN0cmVhbSxcbiAgICAgIHRoaXMuY29udHJvbGxlcixcbiAgICApO1xuICAgIGZvciBhd2FpdCAoY29uc3QgZXZlbnQgb2Ygc3RyZWFtKSB7XG4gICAgICB0aGlzLiNhZGRTdHJlYW1FdmVudChldmVudCk7XG4gICAgfVxuICAgIGlmIChzdHJlYW0uY29udHJvbGxlci5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgIH1cbiAgICB0aGlzLiNlbmRSZXF1ZXN0KCk7XG4gIH1cblxuICAvKipcbiAgICogTXV0YXRlcyB0aGlzLiNjdXJyZW50UHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlIHdpdGggdGhlIGN1cnJlbnQgZXZlbnQuIEhhbmRsaW5nIHRoZSBhY2N1bXVsYXRpb24gb2YgbXVsdGlwbGUgbWVzc2FnZXNcbiAgICogd2lsbCBiZSBuZWVkZWQgdG8gYmUgaGFuZGxlZCBieSB0aGUgY2FsbGVyLCB0aGlzIG1ldGhvZCB3aWxsIHRocm93IGlmIHlvdSB0cnkgdG8gYWNjdW11bGF0ZSBmb3IgbXVsdGlwbGVcbiAgICogbWVzc2FnZXMuXG4gICAqL1xuICAjYWNjdW11bGF0ZU1lc3NhZ2UoZXZlbnQ6IFJhd1Byb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbUV2ZW50KTogUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlIHtcbiAgICBsZXQgc25hcHNob3QgPSB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90O1xuXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdtZXNzYWdlX3N0YXJ0Jykge1xuICAgICAgaWYgKHNuYXBzaG90KSB7XG4gICAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgVW5leHBlY3RlZCBldmVudCBvcmRlciwgZ290ICR7ZXZlbnQudHlwZX0gYmVmb3JlIHJlY2VpdmluZyBcIm1lc3NhZ2Vfc3RvcFwiYCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZXZlbnQubWVzc2FnZTtcbiAgICB9XG5cbiAgICBpZiAoIXNuYXBzaG90KSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYFVuZXhwZWN0ZWQgZXZlbnQgb3JkZXIsIGdvdCAke2V2ZW50LnR5cGV9IGJlZm9yZSBcIm1lc3NhZ2Vfc3RhcnRcImApO1xuICAgIH1cblxuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgY2FzZSAnbWVzc2FnZV9zdG9wJzpcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgICAgY2FzZSAnbWVzc2FnZV9kZWx0YSc6XG4gICAgICAgIHNuYXBzaG90LnN0b3BfcmVhc29uID0gZXZlbnQuZGVsdGEuc3RvcF9yZWFzb247XG4gICAgICAgIHNuYXBzaG90LnN0b3Bfc2VxdWVuY2UgPSBldmVudC5kZWx0YS5zdG9wX3NlcXVlbmNlO1xuICAgICAgICBzbmFwc2hvdC51c2FnZS5vdXRwdXRfdG9rZW5zID0gZXZlbnQudXNhZ2Uub3V0cHV0X3Rva2VucztcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19zdGFydCc6XG4gICAgICAgIHNuYXBzaG90LmNvbnRlbnQucHVzaChldmVudC5jb250ZW50X2Jsb2NrKTtcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19kZWx0YSc6IHtcbiAgICAgICAgY29uc3Qgc25hcHNob3RDb250ZW50ID0gc25hcHNob3QuY29udGVudC5hdChldmVudC5pbmRleCk7XG4gICAgICAgIGlmIChzbmFwc2hvdENvbnRlbnQ/LnR5cGUgPT09ICd0ZXh0JyAmJiBldmVudC5kZWx0YS50eXBlID09PSAndGV4dF9kZWx0YScpIHtcbiAgICAgICAgICBzbmFwc2hvdENvbnRlbnQudGV4dCArPSBldmVudC5kZWx0YS50ZXh0O1xuICAgICAgICB9IGVsc2UgaWYgKHNuYXBzaG90Q29udGVudD8udHlwZSA9PT0gJ3Rvb2xfdXNlJyAmJiBldmVudC5kZWx0YS50eXBlID09PSAnaW5wdXRfanNvbl9kZWx0YScpIHtcbiAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGtlZXAgdHJhY2sgb2YgdGhlIHJhdyBKU09OIHN0cmluZyBhcyB3ZWxsIHNvIHRoYXQgd2UgY2FuXG4gICAgICAgICAgLy8gcmUtcGFyc2UgaXQgZm9yIGVhY2ggZGVsdGEsIGZvciBub3cgd2UganVzdCBzdG9yZSBpdCBhcyBhbiB1bnR5cGVkXG4gICAgICAgICAgLy8gbm9uLWVudW1lcmFibGUgcHJvcGVydHkgb24gdGhlIHNuYXBzaG90XG4gICAgICAgICAgbGV0IGpzb25CdWYgPSAoc25hcHNob3RDb250ZW50IGFzIGFueSlbSlNPTl9CVUZfUFJPUEVSVFldIHx8ICcnO1xuICAgICAgICAgIGpzb25CdWYgKz0gZXZlbnQuZGVsdGEucGFydGlhbF9qc29uO1xuXG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNuYXBzaG90Q29udGVudCwgSlNPTl9CVUZfUFJPUEVSVFksIHtcbiAgICAgICAgICAgIHZhbHVlOiBqc29uQnVmLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChqc29uQnVmKSB7XG4gICAgICAgICAgICBzbmFwc2hvdENvbnRlbnQuaW5wdXQgPSBwYXJ0aWFsUGFyc2UoanNvbkJ1Zik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfc3RvcCc6XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICB9XG4gIH1cblxuICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk6IEFzeW5jSXRlcmF0b3I8UmF3UHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RyZWFtRXZlbnQ+IHtcbiAgICBjb25zdCBwdXNoUXVldWU6IFJhd1Byb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbUV2ZW50W10gPSBbXTtcbiAgICBjb25zdCByZWFkUXVldWU6IHtcbiAgICAgIHJlc29sdmU6IChjaHVuazogUmF3UHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RyZWFtRXZlbnQgfCB1bmRlZmluZWQpID0+IHZvaWQ7XG4gICAgICByZWplY3Q6IChlcnJvcjogdW5rbm93bikgPT4gdm9pZDtcbiAgICB9W10gPSBbXTtcbiAgICBsZXQgZG9uZSA9IGZhbHNlO1xuXG4gICAgdGhpcy5vbignc3RyZWFtRXZlbnQnLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHJlYWRlciA9IHJlYWRRdWV1ZS5zaGlmdCgpO1xuICAgICAgaWYgKHJlYWRlcikge1xuICAgICAgICByZWFkZXIucmVzb2x2ZShldmVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwdXNoUXVldWUucHVzaChldmVudCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICBkb25lID0gdHJ1ZTtcbiAgICAgIGZvciAoY29uc3QgcmVhZGVyIG9mIHJlYWRRdWV1ZSkge1xuICAgICAgICByZWFkZXIucmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgfVxuICAgICAgcmVhZFF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgfSk7XG5cbiAgICB0aGlzLm9uKCdhYm9ydCcsIChlcnIpID0+IHtcbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgZm9yIChjb25zdCByZWFkZXIgb2YgcmVhZFF1ZXVlKSB7XG4gICAgICAgIHJlYWRlci5yZWplY3QoZXJyKTtcbiAgICAgIH1cbiAgICAgIHJlYWRRdWV1ZS5sZW5ndGggPSAwO1xuICAgIH0pO1xuXG4gICAgdGhpcy5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICBkb25lID0gdHJ1ZTtcbiAgICAgIGZvciAoY29uc3QgcmVhZGVyIG9mIHJlYWRRdWV1ZSkge1xuICAgICAgICByZWFkZXIucmVqZWN0KGVycik7XG4gICAgICB9XG4gICAgICByZWFkUXVldWUubGVuZ3RoID0gMDtcbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBuZXh0OiBhc3luYyAoKTogUHJvbWlzZTxJdGVyYXRvclJlc3VsdDxSYXdQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW1FdmVudD4+ID0+IHtcbiAgICAgICAgaWYgKCFwdXNoUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPFJhd1Byb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbUV2ZW50IHwgdW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PlxuICAgICAgICAgICAgcmVhZFF1ZXVlLnB1c2goeyByZXNvbHZlLCByZWplY3QgfSksXG4gICAgICAgICAgKS50aGVuKChjaHVuaykgPT4gKGNodW5rID8geyB2YWx1ZTogY2h1bmssIGRvbmU6IGZhbHNlIH0gOiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNodW5rID0gcHVzaFF1ZXVlLnNoaWZ0KCkhO1xuICAgICAgICByZXR1cm4geyB2YWx1ZTogY2h1bmssIGRvbmU6IGZhbHNlIH07XG4gICAgICB9LFxuICAgICAgcmV0dXJuOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRoaXMuYWJvcnQoKTtcbiAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgdG9SZWFkYWJsZVN0cmVhbSgpOiBSZWFkYWJsZVN0cmVhbSB7XG4gICAgY29uc3Qgc3RyZWFtID0gbmV3IFN0cmVhbSh0aGlzW1N5bWJvbC5hc3luY0l0ZXJhdG9yXS5iaW5kKHRoaXMpLCB0aGlzLmNvbnRyb2xsZXIpO1xuICAgIHJldHVybiBzdHJlYW0udG9SZWFkYWJsZVN0cmVhbSgpO1xuICB9XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tIFwiLi4vLi4vLi4vcmVzb3VyY2UuanNcIjtcbmltcG9ydCB7IEFQSVByb21pc2UgfSBmcm9tIFwiLi4vLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi4vLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgUHJvbXB0Q2FjaGluZ01lc3NhZ2VzQVBJIGZyb20gXCIuL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgKiBhcyBNZXNzYWdlc0FQSSBmcm9tIFwiLi4vLi4vbWVzc2FnZXMuanNcIjtcbmltcG9ydCAqIGFzIEJldGFBUEkgZnJvbSBcIi4uL2JldGEuanNcIjtcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gXCIuLi8uLi8uLi9zdHJlYW1pbmcuanNcIjtcbmltcG9ydCB7IFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbSB9IGZyb20gXCIuLi8uLi8uLi9saWIvUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RyZWFtLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBNZXNzYWdlcyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIFNlbmQgYSBzdHJ1Y3R1cmVkIGxpc3Qgb2YgaW5wdXQgbWVzc2FnZXMgd2l0aCB0ZXh0IGFuZC9vciBpbWFnZSBjb250ZW50LCBhbmQgdGhlXG4gICAqIG1vZGVsIHdpbGwgZ2VuZXJhdGUgdGhlIG5leHQgbWVzc2FnZSBpbiB0aGUgY29udmVyc2F0aW9uLlxuICAgKlxuICAgKiBUaGUgTWVzc2FnZXMgQVBJIGNhbiBiZSB1c2VkIGZvciBlaXRoZXIgc2luZ2xlIHF1ZXJpZXMgb3Igc3RhdGVsZXNzIG11bHRpLXR1cm5cbiAgICogY29udmVyc2F0aW9ucy5cbiAgICovXG4gIGNyZWF0ZShcbiAgICBwYXJhbXM6IE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8UHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlPjtcbiAgY3JlYXRlKFxuICAgIHBhcmFtczogTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08UmF3UHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RyZWFtRXZlbnQ+PjtcbiAgY3JlYXRlKFxuICAgIHBhcmFtczogTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2UsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPFJhd1Byb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbUV2ZW50PiB8IFByb21wdENhY2hpbmdCZXRhTWVzc2FnZT47XG4gIGNyZWF0ZShcbiAgICBwYXJhbXM6IE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8UHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlPiB8IEFQSVByb21pc2U8U3RyZWFtPFJhd1Byb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbUV2ZW50Pj4ge1xuICAgIGNvbnN0IHsgYmV0YXMsIC4uLmJvZHkgfSA9IHBhcmFtcztcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LnBvc3QoJy92MS9tZXNzYWdlcz9iZXRhPXByb21wdF9jYWNoaW5nJywge1xuICAgICAgYm9keSxcbiAgICAgIHRpbWVvdXQ6ICh0aGlzLl9jbGllbnQgYXMgYW55KS5fb3B0aW9ucy50aW1lb3V0ID8/IDYwMDAwMCxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhbnRocm9waWMtYmV0YSc6IFsuLi4oYmV0YXMgPz8gW10pLCAncHJvbXB0LWNhY2hpbmctMjAyNC0wNy0zMSddLnRvU3RyaW5nKCksXG4gICAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICB9LFxuICAgICAgc3RyZWFtOiBwYXJhbXMuc3RyZWFtID8/IGZhbHNlLFxuICAgIH0pIGFzIEFQSVByb21pc2U8UHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlPiB8IEFQSVByb21pc2U8U3RyZWFtPFJhd1Byb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbUV2ZW50Pj47XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgTWVzc2FnZSBzdHJlYW1cbiAgICovXG4gIHN0cmVhbShib2R5OiBNZXNzYWdlU3RyZWFtUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbSB7XG4gICAgcmV0dXJuIFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbS5jcmVhdGVNZXNzYWdlKHRoaXMsIGJvZHksIG9wdGlvbnMpO1xuICB9XG59XG5cbmV4cG9ydCB0eXBlIE1lc3NhZ2VTdHJlYW1QYXJhbXMgPSBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZTtcblxuZXhwb3J0IGludGVyZmFjZSBQcm9tcHRDYWNoaW5nQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB7XG4gIHR5cGU6ICdlcGhlbWVyYWwnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb21wdENhY2hpbmdCZXRhSW1hZ2VCbG9ja1BhcmFtIHtcbiAgc291cmNlOiBQcm9tcHRDYWNoaW5nQmV0YUltYWdlQmxvY2tQYXJhbS5Tb3VyY2U7XG5cbiAgdHlwZTogJ2ltYWdlJztcblxuICBjYWNoZV9jb250cm9sPzogUHJvbXB0Q2FjaGluZ0JldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIFByb21wdENhY2hpbmdCZXRhSW1hZ2VCbG9ja1BhcmFtIHtcbiAgZXhwb3J0IGludGVyZmFjZSBTb3VyY2Uge1xuICAgIGRhdGE6IHN0cmluZztcblxuICAgIG1lZGlhX3R5cGU6ICdpbWFnZS9qcGVnJyB8ICdpbWFnZS9wbmcnIHwgJ2ltYWdlL2dpZicgfCAnaW1hZ2Uvd2VicCc7XG5cbiAgICB0eXBlOiAnYmFzZTY0JztcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb21wdENhY2hpbmdCZXRhTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBVbmlxdWUgb2JqZWN0IGlkZW50aWZpZXIuXG4gICAqXG4gICAqIFRoZSBmb3JtYXQgYW5kIGxlbmd0aCBvZiBJRHMgbWF5IGNoYW5nZSBvdmVyIHRpbWUuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBDb250ZW50IGdlbmVyYXRlZCBieSB0aGUgbW9kZWwuXG4gICAqXG4gICAqIFRoaXMgaXMgYW4gYXJyYXkgb2YgY29udGVudCBibG9ja3MsIGVhY2ggb2Ygd2hpY2ggaGFzIGEgYHR5cGVgIHRoYXQgZGV0ZXJtaW5lc1xuICAgKiBpdHMgc2hhcGUuXG4gICAqXG4gICAqIEV4YW1wbGU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW3sgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJIaSwgSSdtIENsYXVkZS5cIiB9XVxuICAgKiBgYGBcbiAgICpcbiAgICogSWYgdGhlIHJlcXVlc3QgaW5wdXQgYG1lc3NhZ2VzYCBlbmRlZCB3aXRoIGFuIGBhc3Npc3RhbnRgIHR1cm4sIHRoZW4gdGhlXG4gICAqIHJlc3BvbnNlIGBjb250ZW50YCB3aWxsIGNvbnRpbnVlIGRpcmVjdGx5IGZyb20gdGhhdCBsYXN0IHR1cm4uIFlvdSBjYW4gdXNlIHRoaXNcbiAgICogdG8gY29uc3RyYWluIHRoZSBtb2RlbCdzIG91dHB1dC5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGlmIHRoZSBpbnB1dCBgbWVzc2FnZXNgIHdlcmU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIldoYXQncyB0aGUgR3JlZWsgbmFtZSBmb3IgU3VuPyAoQSkgU29sIChCKSBIZWxpb3MgKEMpIFN1blwiXG4gICAqICAgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJUaGUgYmVzdCBhbnN3ZXIgaXMgKFwiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogVGhlbiB0aGUgcmVzcG9uc2UgYGNvbnRlbnRgIG1pZ2h0IGJlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFt7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiQilcIiB9XVxuICAgKiBgYGBcbiAgICovXG4gIGNvbnRlbnQ6IEFycmF5PE1lc3NhZ2VzQVBJLkNvbnRlbnRCbG9jaz47XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB0aGF0IHdpbGwgY29tcGxldGUgeW91ciBwcm9tcHQuXFxuXFxuU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICAgKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICAgKi9cbiAgbW9kZWw6IE1lc3NhZ2VzQVBJLk1vZGVsO1xuXG4gIC8qKlxuICAgKiBDb252ZXJzYXRpb25hbCByb2xlIG9mIHRoZSBnZW5lcmF0ZWQgbWVzc2FnZS5cbiAgICpcbiAgICogVGhpcyB3aWxsIGFsd2F5cyBiZSBgXCJhc3Npc3RhbnRcImAuXG4gICAqL1xuICByb2xlOiAnYXNzaXN0YW50JztcblxuICAvKipcbiAgICogVGhlIHJlYXNvbiB0aGF0IHdlIHN0b3BwZWQuXG4gICAqXG4gICAqIFRoaXMgbWF5IGJlIG9uZSB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAgICpcbiAgICogLSBgXCJlbmRfdHVyblwiYDogdGhlIG1vZGVsIHJlYWNoZWQgYSBuYXR1cmFsIHN0b3BwaW5nIHBvaW50XG4gICAqIC0gYFwibWF4X3Rva2Vuc1wiYDogd2UgZXhjZWVkZWQgdGhlIHJlcXVlc3RlZCBgbWF4X3Rva2Vuc2Agb3IgdGhlIG1vZGVsJ3MgbWF4aW11bVxuICAgKiAtIGBcInN0b3Bfc2VxdWVuY2VcImA6IG9uZSBvZiB5b3VyIHByb3ZpZGVkIGN1c3RvbSBgc3RvcF9zZXF1ZW5jZXNgIHdhcyBnZW5lcmF0ZWRcbiAgICogLSBgXCJ0b29sX3VzZVwiYDogdGhlIG1vZGVsIGludm9rZWQgb25lIG9yIG1vcmUgdG9vbHNcbiAgICpcbiAgICogSW4gbm9uLXN0cmVhbWluZyBtb2RlIHRoaXMgdmFsdWUgaXMgYWx3YXlzIG5vbi1udWxsLiBJbiBzdHJlYW1pbmcgbW9kZSwgaXQgaXNcbiAgICogbnVsbCBpbiB0aGUgYG1lc3NhZ2Vfc3RhcnRgIGV2ZW50IGFuZCBub24tbnVsbCBvdGhlcndpc2UuXG4gICAqL1xuICBzdG9wX3JlYXNvbjogJ2VuZF90dXJuJyB8ICdtYXhfdG9rZW5zJyB8ICdzdG9wX3NlcXVlbmNlJyB8ICd0b29sX3VzZScgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBXaGljaCBjdXN0b20gc3RvcCBzZXF1ZW5jZSB3YXMgZ2VuZXJhdGVkLCBpZiBhbnkuXG4gICAqXG4gICAqIFRoaXMgdmFsdWUgd2lsbCBiZSBhIG5vbi1udWxsIHN0cmluZyBpZiBvbmUgb2YgeW91ciBjdXN0b20gc3RvcCBzZXF1ZW5jZXMgd2FzXG4gICAqIGdlbmVyYXRlZC5cbiAgICovXG4gIHN0b3Bfc2VxdWVuY2U6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIE9iamVjdCB0eXBlLlxuICAgKlxuICAgKiBGb3IgTWVzc2FnZXMsIHRoaXMgaXMgYWx3YXlzIGBcIm1lc3NhZ2VcImAuXG4gICAqL1xuICB0eXBlOiAnbWVzc2FnZSc7XG5cbiAgLyoqXG4gICAqIEJpbGxpbmcgYW5kIHJhdGUtbGltaXQgdXNhZ2UuXG4gICAqXG4gICAqIEFudGhyb3BpYydzIEFQSSBiaWxscyBhbmQgcmF0ZS1saW1pdHMgYnkgdG9rZW4gY291bnRzLCBhcyB0b2tlbnMgcmVwcmVzZW50IHRoZVxuICAgKiB1bmRlcmx5aW5nIGNvc3QgdG8gb3VyIHN5c3RlbXMuXG4gICAqXG4gICAqIFVuZGVyIHRoZSBob29kLCB0aGUgQVBJIHRyYW5zZm9ybXMgcmVxdWVzdHMgaW50byBhIGZvcm1hdCBzdWl0YWJsZSBmb3IgdGhlXG4gICAqIG1vZGVsLiBUaGUgbW9kZWwncyBvdXRwdXQgdGhlbiBnb2VzIHRocm91Z2ggYSBwYXJzaW5nIHN0YWdlIGJlZm9yZSBiZWNvbWluZyBhblxuICAgKiBBUEkgcmVzcG9uc2UuIEFzIGEgcmVzdWx0LCB0aGUgdG9rZW4gY291bnRzIGluIGB1c2FnZWAgd2lsbCBub3QgbWF0Y2ggb25lLXRvLW9uZVxuICAgKiB3aXRoIHRoZSBleGFjdCB2aXNpYmxlIGNvbnRlbnQgb2YgYW4gQVBJIHJlcXVlc3Qgb3IgcmVzcG9uc2UuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBgb3V0cHV0X3Rva2Vuc2Agd2lsbCBiZSBub24temVybywgZXZlbiBmb3IgYW4gZW1wdHkgc3RyaW5nIHJlc3BvbnNlXG4gICAqIGZyb20gQ2xhdWRlLlxuICAgKi9cbiAgdXNhZ2U6IFByb21wdENhY2hpbmdCZXRhVXNhZ2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlUGFyYW0ge1xuICBjb250ZW50OlxuICAgIHwgc3RyaW5nXG4gICAgfCBBcnJheTxcbiAgICAgICAgfCBQcm9tcHRDYWNoaW5nQmV0YVRleHRCbG9ja1BhcmFtXG4gICAgICAgIHwgUHJvbXB0Q2FjaGluZ0JldGFJbWFnZUJsb2NrUGFyYW1cbiAgICAgICAgfCBQcm9tcHRDYWNoaW5nQmV0YVRvb2xVc2VCbG9ja1BhcmFtXG4gICAgICAgIHwgUHJvbXB0Q2FjaGluZ0JldGFUb29sUmVzdWx0QmxvY2tQYXJhbVxuICAgICAgPjtcblxuICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9tcHRDYWNoaW5nQmV0YVRleHRCbG9ja1BhcmFtIHtcbiAgdGV4dDogc3RyaW5nO1xuXG4gIHR5cGU6ICd0ZXh0JztcblxuICBjYWNoZV9jb250cm9sPzogUHJvbXB0Q2FjaGluZ0JldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb21wdENhY2hpbmdCZXRhVG9vbCB7XG4gIC8qKlxuICAgKiBbSlNPTiBzY2hlbWFdKGh0dHBzOi8vanNvbi1zY2hlbWEub3JnLykgZm9yIHRoaXMgdG9vbCdzIGlucHV0LlxuICAgKlxuICAgKiBUaGlzIGRlZmluZXMgdGhlIHNoYXBlIG9mIHRoZSBgaW5wdXRgIHRoYXQgeW91ciB0b29sIGFjY2VwdHMgYW5kIHRoYXQgdGhlIG1vZGVsXG4gICAqIHdpbGwgcHJvZHVjZS5cbiAgICovXG4gIGlucHV0X3NjaGVtYTogUHJvbXB0Q2FjaGluZ0JldGFUb29sLklucHV0U2NoZW1hO1xuXG4gIC8qKlxuICAgKiBOYW1lIG9mIHRoZSB0b29sLlxuICAgKlxuICAgKiBUaGlzIGlzIGhvdyB0aGUgdG9vbCB3aWxsIGJlIGNhbGxlZCBieSB0aGUgbW9kZWwgYW5kIGluIHRvb2xfdXNlIGJsb2Nrcy5cbiAgICovXG4gIG5hbWU6IHN0cmluZztcblxuICBjYWNoZV9jb250cm9sPzogUHJvbXB0Q2FjaGluZ0JldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBEZXNjcmlwdGlvbiBvZiB3aGF0IHRoaXMgdG9vbCBkb2VzLlxuICAgKlxuICAgKiBUb29sIGRlc2NyaXB0aW9ucyBzaG91bGQgYmUgYXMgZGV0YWlsZWQgYXMgcG9zc2libGUuIFRoZSBtb3JlIGluZm9ybWF0aW9uIHRoYXRcbiAgICogdGhlIG1vZGVsIGhhcyBhYm91dCB3aGF0IHRoZSB0b29sIGlzIGFuZCBob3cgdG8gdXNlIGl0LCB0aGUgYmV0dGVyIGl0IHdpbGxcbiAgICogcGVyZm9ybS4gWW91IGNhbiB1c2UgbmF0dXJhbCBsYW5ndWFnZSBkZXNjcmlwdGlvbnMgdG8gcmVpbmZvcmNlIGltcG9ydGFudFxuICAgKiBhc3BlY3RzIG9mIHRoZSB0b29sIGlucHV0IEpTT04gc2NoZW1hLlxuICAgKi9cbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgUHJvbXB0Q2FjaGluZ0JldGFUb29sIHtcbiAgLyoqXG4gICAqIFtKU09OIHNjaGVtYV0oaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvKSBmb3IgdGhpcyB0b29sJ3MgaW5wdXQuXG4gICAqXG4gICAqIFRoaXMgZGVmaW5lcyB0aGUgc2hhcGUgb2YgdGhlIGBpbnB1dGAgdGhhdCB5b3VyIHRvb2wgYWNjZXB0cyBhbmQgdGhhdCB0aGUgbW9kZWxcbiAgICogd2lsbCBwcm9kdWNlLlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBJbnB1dFNjaGVtYSB7XG4gICAgdHlwZTogJ29iamVjdCc7XG5cbiAgICBwcm9wZXJ0aWVzPzogdW5rbm93biB8IG51bGw7XG4gICAgW2s6IHN0cmluZ106IHVua25vd247XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9tcHRDYWNoaW5nQmV0YVRvb2xSZXN1bHRCbG9ja1BhcmFtIHtcbiAgdG9vbF91c2VfaWQ6IHN0cmluZztcblxuICB0eXBlOiAndG9vbF9yZXN1bHQnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBQcm9tcHRDYWNoaW5nQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG5cbiAgY29udGVudD86IHN0cmluZyB8IEFycmF5PFByb21wdENhY2hpbmdCZXRhVGV4dEJsb2NrUGFyYW0gfCBQcm9tcHRDYWNoaW5nQmV0YUltYWdlQmxvY2tQYXJhbT47XG5cbiAgaXNfZXJyb3I/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb21wdENhY2hpbmdCZXRhVG9vbFVzZUJsb2NrUGFyYW0ge1xuICBpZDogc3RyaW5nO1xuXG4gIGlucHV0OiB1bmtub3duO1xuXG4gIG5hbWU6IHN0cmluZztcblxuICB0eXBlOiAndG9vbF91c2UnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBQcm9tcHRDYWNoaW5nQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvbXB0Q2FjaGluZ0JldGFVc2FnZSB7XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGlucHV0IHRva2VucyB1c2VkIHRvIGNyZWF0ZSB0aGUgY2FjaGUgZW50cnkuXG4gICAqL1xuICBjYWNoZV9jcmVhdGlvbl9pbnB1dF90b2tlbnM6IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHJlYWQgZnJvbSB0aGUgY2FjaGUuXG4gICAqL1xuICBjYWNoZV9yZWFkX2lucHV0X3Rva2VuczogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbnB1dCB0b2tlbnMgd2hpY2ggd2VyZSB1c2VkLlxuICAgKi9cbiAgaW5wdXRfdG9rZW5zOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2Ygb3V0cHV0IHRva2VucyB3aGljaCB3ZXJlIHVzZWQuXG4gICAqL1xuICBvdXRwdXRfdG9rZW5zOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmF3UHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RhcnRFdmVudCB7XG4gIG1lc3NhZ2U6IFByb21wdENhY2hpbmdCZXRhTWVzc2FnZTtcblxuICB0eXBlOiAnbWVzc2FnZV9zdGFydCc7XG59XG5cbmV4cG9ydCB0eXBlIFJhd1Byb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbUV2ZW50ID1cbiAgfCBSYXdQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdGFydEV2ZW50XG4gIHwgTWVzc2FnZXNBUEkuUmF3TWVzc2FnZURlbHRhRXZlbnRcbiAgfCBNZXNzYWdlc0FQSS5SYXdNZXNzYWdlU3RvcEV2ZW50XG4gIHwgTWVzc2FnZXNBUEkuUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudFxuICB8IE1lc3NhZ2VzQVBJLlJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnRcbiAgfCBNZXNzYWdlc0FQSS5SYXdDb250ZW50QmxvY2tTdG9wRXZlbnQ7XG5cbmV4cG9ydCB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXMgPSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIHwgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZztcblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIHRvIGdlbmVyYXRlIGJlZm9yZSBzdG9wcGluZy5cbiAgICpcbiAgICogTm90ZSB0aGF0IG91ciBtb2RlbHMgbWF5IHN0b3AgX2JlZm9yZV8gcmVhY2hpbmcgdGhpcyBtYXhpbXVtLiBUaGlzIHBhcmFtZXRlclxuICAgKiBvbmx5IHNwZWNpZmllcyB0aGUgYWJzb2x1dGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIHRvIGdlbmVyYXRlLlxuICAgKlxuICAgKiBEaWZmZXJlbnQgbW9kZWxzIGhhdmUgZGlmZmVyZW50IG1heGltdW0gdmFsdWVzIGZvciB0aGlzIHBhcmFtZXRlci4gU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgZGV0YWlscy5cbiAgICovXG4gIG1heF90b2tlbnM6IG51bWJlcjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogSW5wdXQgbWVzc2FnZXMuXG4gICAqXG4gICAqIE91ciBtb2RlbHMgYXJlIHRyYWluZWQgdG8gb3BlcmF0ZSBvbiBhbHRlcm5hdGluZyBgdXNlcmAgYW5kIGBhc3Npc3RhbnRgXG4gICAqIGNvbnZlcnNhdGlvbmFsIHR1cm5zLiBXaGVuIGNyZWF0aW5nIGEgbmV3IGBNZXNzYWdlYCwgeW91IHNwZWNpZnkgdGhlIHByaW9yXG4gICAqIGNvbnZlcnNhdGlvbmFsIHR1cm5zIHdpdGggdGhlIGBtZXNzYWdlc2AgcGFyYW1ldGVyLCBhbmQgdGhlIG1vZGVsIHRoZW4gZ2VuZXJhdGVzXG4gICAqIHRoZSBuZXh0IGBNZXNzYWdlYCBpbiB0aGUgY29udmVyc2F0aW9uLiBDb25zZWN1dGl2ZSBgdXNlcmAgb3IgYGFzc2lzdGFudGAgdHVybnNcbiAgICogaW4geW91ciByZXF1ZXN0IHdpbGwgYmUgY29tYmluZWQgaW50byBhIHNpbmdsZSB0dXJuLlxuICAgKlxuICAgKiBFYWNoIGlucHV0IG1lc3NhZ2UgbXVzdCBiZSBhbiBvYmplY3Qgd2l0aCBhIGByb2xlYCBhbmQgYGNvbnRlbnRgLiBZb3UgY2FuXG4gICAqIHNwZWNpZnkgYSBzaW5nbGUgYHVzZXJgLXJvbGUgbWVzc2FnZSwgb3IgeW91IGNhbiBpbmNsdWRlIG11bHRpcGxlIGB1c2VyYCBhbmRcbiAgICogYGFzc2lzdGFudGAgbWVzc2FnZXMuXG4gICAqXG4gICAqIElmIHRoZSBmaW5hbCBtZXNzYWdlIHVzZXMgdGhlIGBhc3Npc3RhbnRgIHJvbGUsIHRoZSByZXNwb25zZSBjb250ZW50IHdpbGxcbiAgICogY29udGludWUgaW1tZWRpYXRlbHkgZnJvbSB0aGUgY29udGVudCBpbiB0aGF0IG1lc3NhZ2UuIFRoaXMgY2FuIGJlIHVzZWQgdG9cbiAgICogY29uc3RyYWluIHBhcnQgb2YgdGhlIG1vZGVsJ3MgcmVzcG9uc2UuXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBhIHNpbmdsZSBgdXNlcmAgbWVzc2FnZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XVxuICAgKiBgYGBcbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIG11bHRpcGxlIGNvbnZlcnNhdGlvbmFsIHR1cm5zOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8gdGhlcmUuXCIgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJIaSwgSSdtIENsYXVkZS4gSG93IGNhbiBJIGhlbHAgeW91P1wiIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkNhbiB5b3UgZXhwbGFpbiBMTE1zIGluIHBsYWluIEVuZ2xpc2g/XCIgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggYSBwYXJ0aWFsbHktZmlsbGVkIHJlc3BvbnNlIGZyb20gQ2xhdWRlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCJXaGF0J3MgdGhlIEdyZWVrIG5hbWUgZm9yIFN1bj8gKEEpIFNvbCAoQikgSGVsaW9zIChDKSBTdW5cIlxuICAgKiAgIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJhc3Npc3RhbnRcIiwgXCJjb250ZW50XCI6IFwiVGhlIGJlc3QgYW5zd2VyIGlzIChcIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEVhY2ggaW5wdXQgbWVzc2FnZSBgY29udGVudGAgbWF5IGJlIGVpdGhlciBhIHNpbmdsZSBgc3RyaW5nYCBvciBhbiBhcnJheSBvZlxuICAgKiBjb250ZW50IGJsb2Nrcywgd2hlcmUgZWFjaCBibG9jayBoYXMgYSBzcGVjaWZpYyBgdHlwZWAuIFVzaW5nIGEgYHN0cmluZ2AgZm9yXG4gICAqIGBjb250ZW50YCBpcyBzaG9ydGhhbmQgZm9yIGFuIGFycmF5IG9mIG9uZSBjb250ZW50IGJsb2NrIG9mIHR5cGUgYFwidGV4dFwiYC4gVGhlXG4gICAqIGZvbGxvd2luZyBpbnB1dCBtZXNzYWdlcyBhcmUgZXF1aXZhbGVudDpcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1cbiAgICogYGBgXG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBbeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XSB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBTdGFydGluZyB3aXRoIENsYXVkZSAzIG1vZGVscywgeW91IGNhbiBhbHNvIHNlbmQgaW1hZ2UgY29udGVudCBibG9ja3M6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICoge1xuICAgKiAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICBcImNvbnRlbnRcIjogW1xuICAgKiAgICAge1xuICAgKiAgICAgICBcInR5cGVcIjogXCJpbWFnZVwiLFxuICAgKiAgICAgICBcInNvdXJjZVwiOiB7XG4gICAqICAgICAgICAgXCJ0eXBlXCI6IFwiYmFzZTY0XCIsXG4gICAqICAgICAgICAgXCJtZWRpYV90eXBlXCI6IFwiaW1hZ2UvanBlZ1wiLFxuICAgKiAgICAgICAgIFwiZGF0YVwiOiBcIi85ai80QUFRU2taSlJnLi4uXCJcbiAgICogICAgICAgfVxuICAgKiAgICAgfSxcbiAgICogICAgIHsgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJXaGF0IGlzIGluIHRoaXMgaW1hZ2U/XCIgfVxuICAgKiAgIF1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogV2UgY3VycmVudGx5IHN1cHBvcnQgdGhlIGBiYXNlNjRgIHNvdXJjZSB0eXBlIGZvciBpbWFnZXMsIGFuZCB0aGUgYGltYWdlL2pwZWdgLFxuICAgKiBgaW1hZ2UvcG5nYCwgYGltYWdlL2dpZmAsIGFuZCBgaW1hZ2Uvd2VicGAgbWVkaWEgdHlwZXMuXG4gICAqXG4gICAqIFNlZSBbZXhhbXBsZXNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1leGFtcGxlcyN2aXNpb24pIGZvclxuICAgKiBtb3JlIGlucHV0IGV4YW1wbGVzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgaWYgeW91IHdhbnQgdG8gaW5jbHVkZSBhXG4gICAqIFtzeXN0ZW0gcHJvbXB0XShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3N5c3RlbS1wcm9tcHRzKSwgeW91IGNhbiB1c2VcbiAgICogdGhlIHRvcC1sZXZlbCBgc3lzdGVtYCBwYXJhbWV0ZXIgXHUyMDE0IHRoZXJlIGlzIG5vIGBcInN5c3RlbVwiYCByb2xlIGZvciBpbnB1dFxuICAgKiBtZXNzYWdlcyBpbiB0aGUgTWVzc2FnZXMgQVBJLlxuICAgKi9cbiAgbWVzc2FnZXM6IEFycmF5PFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVBhcmFtPjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogVGhlIG1vZGVsIHRoYXQgd2lsbCBjb21wbGV0ZSB5b3VyIHByb21wdC5cXG5cXG5TZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBhZGRpdGlvbmFsXG4gICAqIGRldGFpbHMgYW5kIG9wdGlvbnMuXG4gICAqL1xuICBtb2RlbDogTWVzc2FnZXNBUEkuTW9kZWw7XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IEFuIG9iamVjdCBkZXNjcmliaW5nIG1ldGFkYXRhIGFib3V0IHRoZSByZXF1ZXN0LlxuICAgKi9cbiAgbWV0YWRhdGE/OiBNZXNzYWdlc0FQSS5NZXRhZGF0YTtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogQ3VzdG9tIHRleHQgc2VxdWVuY2VzIHRoYXQgd2lsbCBjYXVzZSB0aGUgbW9kZWwgdG8gc3RvcCBnZW5lcmF0aW5nLlxuICAgKlxuICAgKiBPdXIgbW9kZWxzIHdpbGwgbm9ybWFsbHkgc3RvcCB3aGVuIHRoZXkgaGF2ZSBuYXR1cmFsbHkgY29tcGxldGVkIHRoZWlyIHR1cm4sXG4gICAqIHdoaWNoIHdpbGwgcmVzdWx0IGluIGEgcmVzcG9uc2UgYHN0b3BfcmVhc29uYCBvZiBgXCJlbmRfdHVyblwiYC5cbiAgICpcbiAgICogSWYgeW91IHdhbnQgdGhlIG1vZGVsIHRvIHN0b3AgZ2VuZXJhdGluZyB3aGVuIGl0IGVuY291bnRlcnMgY3VzdG9tIHN0cmluZ3Mgb2ZcbiAgICogdGV4dCwgeW91IGNhbiB1c2UgdGhlIGBzdG9wX3NlcXVlbmNlc2AgcGFyYW1ldGVyLiBJZiB0aGUgbW9kZWwgZW5jb3VudGVycyBvbmUgb2ZcbiAgICogdGhlIGN1c3RvbSBzZXF1ZW5jZXMsIHRoZSByZXNwb25zZSBgc3RvcF9yZWFzb25gIHZhbHVlIHdpbGwgYmUgYFwic3RvcF9zZXF1ZW5jZVwiYFxuICAgKiBhbmQgdGhlIHJlc3BvbnNlIGBzdG9wX3NlcXVlbmNlYCB2YWx1ZSB3aWxsIGNvbnRhaW4gdGhlIG1hdGNoZWQgc3RvcCBzZXF1ZW5jZS5cbiAgICovXG4gIHN0b3Bfc2VxdWVuY2VzPzogQXJyYXk8c3RyaW5nPjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogV2hldGhlciB0byBpbmNyZW1lbnRhbGx5IHN0cmVhbSB0aGUgcmVzcG9uc2UgdXNpbmcgc2VydmVyLXNlbnRcbiAgICogZXZlbnRzLlxuICAgKlxuICAgKiBTZWUgW3N0cmVhbWluZ10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLXN0cmVhbWluZykgZm9yXG4gICAqIGRldGFpbHMuXG4gICAqL1xuICBzdHJlYW0/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBTeXN0ZW0gcHJvbXB0LlxuICAgKlxuICAgKiBBIHN5c3RlbSBwcm9tcHQgaXMgYSB3YXkgb2YgcHJvdmlkaW5nIGNvbnRleHQgYW5kIGluc3RydWN0aW9ucyB0byBDbGF1ZGUsIHN1Y2hcbiAgICogYXMgc3BlY2lmeWluZyBhIHBhcnRpY3VsYXIgZ29hbCBvciByb2xlLiBTZWUgb3VyXG4gICAqIFtndWlkZSB0byBzeXN0ZW0gcHJvbXB0c10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9zeXN0ZW0tcHJvbXB0cykuXG4gICAqL1xuICBzeXN0ZW0/OiBzdHJpbmcgfCBBcnJheTxQcm9tcHRDYWNoaW5nQmV0YVRleHRCbG9ja1BhcmFtPjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogQW1vdW50IG9mIHJhbmRvbW5lc3MgaW5qZWN0ZWQgaW50byB0aGUgcmVzcG9uc2UuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGAxLjBgLiBSYW5nZXMgZnJvbSBgMC4wYCB0byBgMS4wYC4gVXNlIGB0ZW1wZXJhdHVyZWAgY2xvc2VyIHRvIGAwLjBgXG4gICAqIGZvciBhbmFseXRpY2FsIC8gbXVsdGlwbGUgY2hvaWNlLCBhbmQgY2xvc2VyIHRvIGAxLjBgIGZvciBjcmVhdGl2ZSBhbmRcbiAgICogZ2VuZXJhdGl2ZSB0YXNrcy5cbiAgICpcbiAgICogTm90ZSB0aGF0IGV2ZW4gd2l0aCBgdGVtcGVyYXR1cmVgIG9mIGAwLjBgLCB0aGUgcmVzdWx0cyB3aWxsIG5vdCBiZSBmdWxseVxuICAgKiBkZXRlcm1pbmlzdGljLlxuICAgKi9cbiAgdGVtcGVyYXR1cmU/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IEhvdyB0aGUgbW9kZWwgc2hvdWxkIHVzZSB0aGUgcHJvdmlkZWQgdG9vbHMuIFRoZSBtb2RlbCBjYW4gdXNlIGFcbiAgICogc3BlY2lmaWMgdG9vbCwgYW55IGF2YWlsYWJsZSB0b29sLCBvciBkZWNpZGUgYnkgaXRzZWxmLlxuICAgKi9cbiAgdG9vbF9jaG9pY2U/OiBNZXNzYWdlc0FQSS5Ub29sQ2hvaWNlO1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBEZWZpbml0aW9ucyBvZiB0b29scyB0aGF0IHRoZSBtb2RlbCBtYXkgdXNlLlxuICAgKlxuICAgKiBJZiB5b3UgaW5jbHVkZSBgdG9vbHNgIGluIHlvdXIgQVBJIHJlcXVlc3QsIHRoZSBtb2RlbCBtYXkgcmV0dXJuIGB0b29sX3VzZWBcbiAgICogY29udGVudCBibG9ja3MgdGhhdCByZXByZXNlbnQgdGhlIG1vZGVsJ3MgdXNlIG9mIHRob3NlIHRvb2xzLiBZb3UgY2FuIHRoZW4gcnVuXG4gICAqIHRob3NlIHRvb2xzIHVzaW5nIHRoZSB0b29sIGlucHV0IGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgYW5kIHRoZW4gb3B0aW9uYWxseVxuICAgKiByZXR1cm4gcmVzdWx0cyBiYWNrIHRvIHRoZSBtb2RlbCB1c2luZyBgdG9vbF9yZXN1bHRgIGNvbnRlbnQgYmxvY2tzLlxuICAgKlxuICAgKiBFYWNoIHRvb2wgZGVmaW5pdGlvbiBpbmNsdWRlczpcbiAgICpcbiAgICogLSBgbmFtZWA6IE5hbWUgb2YgdGhlIHRvb2wuXG4gICAqIC0gYGRlc2NyaXB0aW9uYDogT3B0aW9uYWwsIGJ1dCBzdHJvbmdseS1yZWNvbW1lbmRlZCBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbC5cbiAgICogLSBgaW5wdXRfc2NoZW1hYDogW0pTT04gc2NoZW1hXShodHRwczovL2pzb24tc2NoZW1hLm9yZy8pIGZvciB0aGUgdG9vbCBgaW5wdXRgXG4gICAqICAgc2hhcGUgdGhhdCB0aGUgbW9kZWwgd2lsbCBwcm9kdWNlIGluIGB0b29sX3VzZWAgb3V0cHV0IGNvbnRlbnQgYmxvY2tzLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgaWYgeW91IGRlZmluZWQgYHRvb2xzYCBhczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJuYW1lXCI6IFwiZ2V0X3N0b2NrX3ByaWNlXCIsXG4gICAqICAgICBcImRlc2NyaXB0aW9uXCI6IFwiR2V0IHRoZSBjdXJyZW50IHN0b2NrIHByaWNlIGZvciBhIGdpdmVuIHRpY2tlciBzeW1ib2wuXCIsXG4gICAqICAgICBcImlucHV0X3NjaGVtYVwiOiB7XG4gICAqICAgICAgIFwidHlwZVwiOiBcIm9iamVjdFwiLFxuICAgKiAgICAgICBcInByb3BlcnRpZXNcIjoge1xuICAgKiAgICAgICAgIFwidGlja2VyXCI6IHtcbiAgICogICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxuICAgKiAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlRoZSBzdG9jayB0aWNrZXIgc3ltYm9sLCBlLmcuIEFBUEwgZm9yIEFwcGxlIEluYy5cIlxuICAgKiAgICAgICAgIH1cbiAgICogICAgICAgfSxcbiAgICogICAgICAgXCJyZXF1aXJlZFwiOiBbXCJ0aWNrZXJcIl1cbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEFuZCB0aGVuIGFza2VkIHRoZSBtb2RlbCBcIldoYXQncyB0aGUgUyZQIDUwMCBhdCB0b2RheT9cIiwgdGhlIG1vZGVsIG1pZ2h0IHByb2R1Y2VcbiAgICogYHRvb2xfdXNlYCBjb250ZW50IGJsb2NrcyBpbiB0aGUgcmVzcG9uc2UgbGlrZSB0aGlzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInR5cGVcIjogXCJ0b29sX3VzZVwiLFxuICAgKiAgICAgXCJpZFwiOiBcInRvb2x1XzAxRDdGTHJmaDRHWXE3eVQxVUxGZXlNVlwiLFxuICAgKiAgICAgXCJuYW1lXCI6IFwiZ2V0X3N0b2NrX3ByaWNlXCIsXG4gICAqICAgICBcImlucHV0XCI6IHsgXCJ0aWNrZXJcIjogXCJeR1NQQ1wiIH1cbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFlvdSBtaWdodCB0aGVuIHJ1biB5b3VyIGBnZXRfc3RvY2tfcHJpY2VgIHRvb2wgd2l0aCBge1widGlja2VyXCI6IFwiXkdTUENcIn1gIGFzIGFuXG4gICAqIGlucHV0LCBhbmQgcmV0dXJuIHRoZSBmb2xsb3dpbmcgYmFjayB0byB0aGUgbW9kZWwgaW4gYSBzdWJzZXF1ZW50IGB1c2VyYFxuICAgKiBtZXNzYWdlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInR5cGVcIjogXCJ0b29sX3Jlc3VsdFwiLFxuICAgKiAgICAgXCJ0b29sX3VzZV9pZFwiOiBcInRvb2x1XzAxRDdGTHJmaDRHWXE3eVQxVUxGZXlNVlwiLFxuICAgKiAgICAgXCJjb250ZW50XCI6IFwiMjU5Ljc1IFVTRFwiXG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBUb29scyBjYW4gYmUgdXNlZCBmb3Igd29ya2Zsb3dzIHRoYXQgaW5jbHVkZSBydW5uaW5nIGNsaWVudC1zaWRlIHRvb2xzIGFuZFxuICAgKiBmdW5jdGlvbnMsIG9yIG1vcmUgZ2VuZXJhbGx5IHdoZW5ldmVyIHlvdSB3YW50IHRoZSBtb2RlbCB0byBwcm9kdWNlIGEgcGFydGljdWxhclxuICAgKiBKU09OIHN0cnVjdHVyZSBvZiBvdXRwdXQuXG4gICAqXG4gICAqIFNlZSBvdXIgW2d1aWRlXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3Rvb2wtdXNlKSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKi9cbiAgdG9vbHM/OiBBcnJheTxQcm9tcHRDYWNoaW5nQmV0YVRvb2w+O1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBPbmx5IHNhbXBsZSBmcm9tIHRoZSB0b3AgSyBvcHRpb25zIGZvciBlYWNoIHN1YnNlcXVlbnQgdG9rZW4uXG4gICAqXG4gICAqIFVzZWQgdG8gcmVtb3ZlIFwibG9uZyB0YWlsXCIgbG93IHByb2JhYmlsaXR5IHJlc3BvbnNlcy5cbiAgICogW0xlYXJuIG1vcmUgdGVjaG5pY2FsIGRldGFpbHMgaGVyZV0oaHR0cHM6Ly90b3dhcmRzZGF0YXNjaWVuY2UuY29tL2hvdy10by1zYW1wbGUtZnJvbS1sYW5ndWFnZS1tb2RlbHMtNjgyYmNlYjk3Mjc3KS5cbiAgICpcbiAgICogUmVjb21tZW5kZWQgZm9yIGFkdmFuY2VkIHVzZSBjYXNlcyBvbmx5LiBZb3UgdXN1YWxseSBvbmx5IG5lZWQgdG8gdXNlXG4gICAqIGB0ZW1wZXJhdHVyZWAuXG4gICAqL1xuICB0b3Bfaz86IG51bWJlcjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogVXNlIG51Y2xldXMgc2FtcGxpbmcuXG4gICAqXG4gICAqIEluIG51Y2xldXMgc2FtcGxpbmcsIHdlIGNvbXB1dGUgdGhlIGN1bXVsYXRpdmUgZGlzdHJpYnV0aW9uIG92ZXIgYWxsIHRoZSBvcHRpb25zXG4gICAqIGZvciBlYWNoIHN1YnNlcXVlbnQgdG9rZW4gaW4gZGVjcmVhc2luZyBwcm9iYWJpbGl0eSBvcmRlciBhbmQgY3V0IGl0IG9mZiBvbmNlIGl0XG4gICAqIHJlYWNoZXMgYSBwYXJ0aWN1bGFyIHByb2JhYmlsaXR5IHNwZWNpZmllZCBieSBgdG9wX3BgLiBZb3Ugc2hvdWxkIGVpdGhlciBhbHRlclxuICAgKiBgdGVtcGVyYXR1cmVgIG9yIGB0b3BfcGAsIGJ1dCBub3QgYm90aC5cbiAgICpcbiAgICogUmVjb21tZW5kZWQgZm9yIGFkdmFuY2VkIHVzZSBjYXNlcyBvbmx5LiBZb3UgdXN1YWxseSBvbmx5IG5lZWQgdG8gdXNlXG4gICAqIGB0ZW1wZXJhdHVyZWAuXG4gICAqL1xuICB0b3BfcD86IG51bWJlcjtcblxuICAvKipcbiAgICogSGVhZGVyIHBhcmFtOiBPcHRpb25hbCBoZWFkZXIgdG8gc3BlY2lmeSB0aGUgYmV0YSB2ZXJzaW9uKHMpIHlvdSB3YW50IHRvIHVzZS5cbiAgICovXG4gIGJldGFzPzogQXJyYXk8QmV0YUFQSS5BbnRocm9waWNCZXRhPjtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBNZXNzYWdlQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZSBgQW50aHJvcGljLk1lc3NhZ2VzLk1ldGFkYXRhYCBpbnN0ZWFkXG4gICAqL1xuICBleHBvcnQgdHlwZSBNZXRhZGF0YSA9IE1lc3NhZ2VzQVBJLk1ldGFkYXRhO1xuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCB1c2UgYEFudGhyb3BpYy5NZXNzYWdlcy5Ub29sQ2hvaWNlQXV0b2AgaW5zdGVhZFxuICAgKi9cbiAgZXhwb3J0IHR5cGUgVG9vbENob2ljZUF1dG8gPSBNZXNzYWdlc0FQSS5Ub29sQ2hvaWNlQXV0bztcblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGBBbnRocm9waWMuTWVzc2FnZXMuVG9vbENob2ljZUFueWAgaW5zdGVhZFxuICAgKi9cbiAgZXhwb3J0IHR5cGUgVG9vbENob2ljZUFueSA9IE1lc3NhZ2VzQVBJLlRvb2xDaG9pY2VBbnk7XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZSBgQW50aHJvcGljLk1lc3NhZ2VzLlRvb2xDaG9pY2VUb29sYCBpbnN0ZWFkXG4gICAqL1xuICBleHBvcnQgdHlwZSBUb29sQ2hvaWNlVG9vbCA9IE1lc3NhZ2VzQVBJLlRvb2xDaG9pY2VUb29sO1xuXG4gIGV4cG9ydCB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBQcm9tcHRDYWNoaW5nTWVzc2FnZXNBUEkuTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IFByb21wdENhY2hpbmdNZXNzYWdlc0FQSS5NZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgZXh0ZW5kcyBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudFxuICAgKiBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtc3RyZWFtaW5nKSBmb3JcbiAgICogZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbT86IGZhbHNlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcgZXh0ZW5kcyBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudFxuICAgKiBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtc3RyZWFtaW5nKSBmb3JcbiAgICogZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbTogdHJ1ZTtcbn1cblxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIE1lc3NhZ2VzIHtcbiAgZXhwb3J0IHtcbiAgICB0eXBlIFByb21wdENhY2hpbmdCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIGFzIFByb21wdENhY2hpbmdCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsLFxuICAgIHR5cGUgUHJvbXB0Q2FjaGluZ0JldGFJbWFnZUJsb2NrUGFyYW0gYXMgUHJvbXB0Q2FjaGluZ0JldGFJbWFnZUJsb2NrUGFyYW0sXG4gICAgdHlwZSBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2UgYXMgUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlLFxuICAgIHR5cGUgUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlUGFyYW0gYXMgUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlUGFyYW0sXG4gICAgdHlwZSBQcm9tcHRDYWNoaW5nQmV0YVRleHRCbG9ja1BhcmFtIGFzIFByb21wdENhY2hpbmdCZXRhVGV4dEJsb2NrUGFyYW0sXG4gICAgdHlwZSBQcm9tcHRDYWNoaW5nQmV0YVRvb2wgYXMgUHJvbXB0Q2FjaGluZ0JldGFUb29sLFxuICAgIHR5cGUgUHJvbXB0Q2FjaGluZ0JldGFUb29sUmVzdWx0QmxvY2tQYXJhbSBhcyBQcm9tcHRDYWNoaW5nQmV0YVRvb2xSZXN1bHRCbG9ja1BhcmFtLFxuICAgIHR5cGUgUHJvbXB0Q2FjaGluZ0JldGFUb29sVXNlQmxvY2tQYXJhbSBhcyBQcm9tcHRDYWNoaW5nQmV0YVRvb2xVc2VCbG9ja1BhcmFtLFxuICAgIHR5cGUgUHJvbXB0Q2FjaGluZ0JldGFVc2FnZSBhcyBQcm9tcHRDYWNoaW5nQmV0YVVzYWdlLFxuICAgIHR5cGUgUmF3UHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RhcnRFdmVudCBhcyBSYXdQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdGFydEV2ZW50LFxuICAgIHR5cGUgUmF3UHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RyZWFtRXZlbnQgYXMgUmF3UHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RyZWFtRXZlbnQsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gIH07XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tIFwiLi4vLi4vLi4vcmVzb3VyY2UuanNcIjtcbmltcG9ydCAqIGFzIE1lc3NhZ2VzQVBJIGZyb20gXCIuL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQge1xuICBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICBNZXNzYWdlcyxcbiAgUHJvbXB0Q2FjaGluZ0JldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwsXG4gIFByb21wdENhY2hpbmdCZXRhSW1hZ2VCbG9ja1BhcmFtLFxuICBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2UsXG4gIFByb21wdENhY2hpbmdCZXRhTWVzc2FnZVBhcmFtLFxuICBQcm9tcHRDYWNoaW5nQmV0YVRleHRCbG9ja1BhcmFtLFxuICBQcm9tcHRDYWNoaW5nQmV0YVRvb2wsXG4gIFByb21wdENhY2hpbmdCZXRhVG9vbFJlc3VsdEJsb2NrUGFyYW0sXG4gIFByb21wdENhY2hpbmdCZXRhVG9vbFVzZUJsb2NrUGFyYW0sXG4gIFByb21wdENhY2hpbmdCZXRhVXNhZ2UsXG4gIFJhd1Byb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0YXJ0RXZlbnQsXG4gIFJhd1Byb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbUV2ZW50LFxufSBmcm9tIFwiLi9tZXNzYWdlcy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUHJvbXB0Q2FjaGluZyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgbWVzc2FnZXM6IE1lc3NhZ2VzQVBJLk1lc3NhZ2VzID0gbmV3IE1lc3NhZ2VzQVBJLk1lc3NhZ2VzKHRoaXMuX2NsaWVudCk7XG59XG5cblByb21wdENhY2hpbmcuTWVzc2FnZXMgPSBNZXNzYWdlcztcblxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIFByb21wdENhY2hpbmcge1xuICBleHBvcnQge1xuICAgIE1lc3NhZ2VzIGFzIE1lc3NhZ2VzLFxuICAgIHR5cGUgUHJvbXB0Q2FjaGluZ0JldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgYXMgUHJvbXB0Q2FjaGluZ0JldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwsXG4gICAgdHlwZSBQcm9tcHRDYWNoaW5nQmV0YUltYWdlQmxvY2tQYXJhbSBhcyBQcm9tcHRDYWNoaW5nQmV0YUltYWdlQmxvY2tQYXJhbSxcbiAgICB0eXBlIFByb21wdENhY2hpbmdCZXRhTWVzc2FnZSBhcyBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2UsXG4gICAgdHlwZSBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VQYXJhbSBhcyBQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VQYXJhbSxcbiAgICB0eXBlIFByb21wdENhY2hpbmdCZXRhVGV4dEJsb2NrUGFyYW0gYXMgUHJvbXB0Q2FjaGluZ0JldGFUZXh0QmxvY2tQYXJhbSxcbiAgICB0eXBlIFByb21wdENhY2hpbmdCZXRhVG9vbCBhcyBQcm9tcHRDYWNoaW5nQmV0YVRvb2wsXG4gICAgdHlwZSBQcm9tcHRDYWNoaW5nQmV0YVRvb2xSZXN1bHRCbG9ja1BhcmFtIGFzIFByb21wdENhY2hpbmdCZXRhVG9vbFJlc3VsdEJsb2NrUGFyYW0sXG4gICAgdHlwZSBQcm9tcHRDYWNoaW5nQmV0YVRvb2xVc2VCbG9ja1BhcmFtIGFzIFByb21wdENhY2hpbmdCZXRhVG9vbFVzZUJsb2NrUGFyYW0sXG4gICAgdHlwZSBQcm9tcHRDYWNoaW5nQmV0YVVzYWdlIGFzIFByb21wdENhY2hpbmdCZXRhVXNhZ2UsXG4gICAgdHlwZSBSYXdQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdGFydEV2ZW50IGFzIFJhd1Byb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0YXJ0RXZlbnQsXG4gICAgdHlwZSBSYXdQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW1FdmVudCBhcyBSYXdQcm9tcHRDYWNoaW5nQmV0YU1lc3NhZ2VTdHJlYW1FdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXMgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgfTtcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gXCIuLi8uLi9yZXNvdXJjZS5qc1wiO1xuaW1wb3J0ICogYXMgTWVzc2FnZXNBUEkgZnJvbSBcIi4vbWVzc2FnZXMvbWVzc2FnZXMuanNcIjtcbmltcG9ydCB7XG4gIEJldGFCYXNlNjRQREZCbG9jayxcbiAgQmV0YUJhc2U2NFBERlNvdXJjZSxcbiAgQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCxcbiAgQmV0YUNvbnRlbnRCbG9jayxcbiAgQmV0YUNvbnRlbnRCbG9ja1BhcmFtLFxuICBCZXRhSW1hZ2VCbG9ja1BhcmFtLFxuICBCZXRhSW5wdXRKU09ORGVsdGEsXG4gIEJldGFNZXNzYWdlLFxuICBCZXRhTWVzc2FnZURlbHRhVXNhZ2UsXG4gIEJldGFNZXNzYWdlUGFyYW0sXG4gIEJldGFNZXNzYWdlVG9rZW5zQ291bnQsXG4gIEJldGFNZXRhZGF0YSxcbiAgQmV0YVJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQsXG4gIEJldGFSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50LFxuICBCZXRhUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50LFxuICBCZXRhUmF3TWVzc2FnZURlbHRhRXZlbnQsXG4gIEJldGFSYXdNZXNzYWdlU3RhcnRFdmVudCxcbiAgQmV0YVJhd01lc3NhZ2VTdG9wRXZlbnQsXG4gIEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQsXG4gIEJldGFUZXh0QmxvY2ssXG4gIEJldGFUZXh0QmxvY2tQYXJhbSxcbiAgQmV0YVRleHREZWx0YSxcbiAgQmV0YVRvb2wsXG4gIEJldGFUb29sQmFzaDIwMjQxMDIyLFxuICBCZXRhVG9vbENob2ljZSxcbiAgQmV0YVRvb2xDaG9pY2VBbnksXG4gIEJldGFUb29sQ2hvaWNlQXV0byxcbiAgQmV0YVRvb2xDaG9pY2VUb29sLFxuICBCZXRhVG9vbENvbXB1dGVyVXNlMjAyNDEwMjIsXG4gIEJldGFUb29sUmVzdWx0QmxvY2tQYXJhbSxcbiAgQmV0YVRvb2xUZXh0RWRpdG9yMjAyNDEwMjIsXG4gIEJldGFUb29sVW5pb24sXG4gIEJldGFUb29sVXNlQmxvY2ssXG4gIEJldGFUb29sVXNlQmxvY2tQYXJhbSxcbiAgQmV0YVVzYWdlLFxuICBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMsXG4gIE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gIE1lc3NhZ2VzLFxufSBmcm9tIFwiLi9tZXNzYWdlcy9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0ICogYXMgUHJvbXB0Q2FjaGluZ0FQSSBmcm9tIFwiLi9wcm9tcHQtY2FjaGluZy9wcm9tcHQtY2FjaGluZy5qc1wiO1xuaW1wb3J0IHsgUHJvbXB0Q2FjaGluZyB9IGZyb20gXCIuL3Byb21wdC1jYWNoaW5nL3Byb21wdC1jYWNoaW5nLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBCZXRhIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICBtZXNzYWdlczogTWVzc2FnZXNBUEkuTWVzc2FnZXMgPSBuZXcgTWVzc2FnZXNBUEkuTWVzc2FnZXModGhpcy5fY2xpZW50KTtcbiAgcHJvbXB0Q2FjaGluZzogUHJvbXB0Q2FjaGluZ0FQSS5Qcm9tcHRDYWNoaW5nID0gbmV3IFByb21wdENhY2hpbmdBUEkuUHJvbXB0Q2FjaGluZyh0aGlzLl9jbGllbnQpO1xufVxuXG5leHBvcnQgdHlwZSBBbnRocm9waWNCZXRhID1cbiAgfCAoc3RyaW5nICYge30pXG4gIHwgJ21lc3NhZ2UtYmF0Y2hlcy0yMDI0LTA5LTI0J1xuICB8ICdwcm9tcHQtY2FjaGluZy0yMDI0LTA3LTMxJ1xuICB8ICdjb21wdXRlci11c2UtMjAyNC0xMC0yMidcbiAgfCAncGRmcy0yMDI0LTA5LTI1J1xuICB8ICd0b2tlbi1jb3VudGluZy0yMDI0LTExLTAxJztcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQVBJRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ2FwaV9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUF1dGhlbnRpY2F0aW9uRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ2F1dGhlbnRpY2F0aW9uX2Vycm9yJztcbn1cblxuZXhwb3J0IHR5cGUgQmV0YUVycm9yID1cbiAgfCBCZXRhSW52YWxpZFJlcXVlc3RFcnJvclxuICB8IEJldGFBdXRoZW50aWNhdGlvbkVycm9yXG4gIHwgQmV0YVBlcm1pc3Npb25FcnJvclxuICB8IEJldGFOb3RGb3VuZEVycm9yXG4gIHwgQmV0YVJhdGVMaW1pdEVycm9yXG4gIHwgQmV0YUFQSUVycm9yXG4gIHwgQmV0YU92ZXJsb2FkZWRFcnJvcjtcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhRXJyb3JSZXNwb25zZSB7XG4gIGVycm9yOiBCZXRhRXJyb3I7XG5cbiAgdHlwZTogJ2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhSW52YWxpZFJlcXVlc3RFcnJvciB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAnaW52YWxpZF9yZXF1ZXN0X2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTm90Rm91bmRFcnJvciB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAnbm90X2ZvdW5kX2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhT3ZlcmxvYWRlZEVycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdvdmVybG9hZGVkX2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhUGVybWlzc2lvbkVycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdwZXJtaXNzaW9uX2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhUmF0ZUxpbWl0RXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3JhdGVfbGltaXRfZXJyb3InO1xufVxuXG5CZXRhLk1lc3NhZ2VzID0gTWVzc2FnZXM7XG5CZXRhLlByb21wdENhY2hpbmcgPSBQcm9tcHRDYWNoaW5nO1xuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgQmV0YSB7XG4gIGV4cG9ydCB7XG4gICAgdHlwZSBBbnRocm9waWNCZXRhIGFzIEFudGhyb3BpY0JldGEsXG4gICAgdHlwZSBCZXRhQVBJRXJyb3IgYXMgQmV0YUFQSUVycm9yLFxuICAgIHR5cGUgQmV0YUF1dGhlbnRpY2F0aW9uRXJyb3IgYXMgQmV0YUF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gICAgdHlwZSBCZXRhRXJyb3IgYXMgQmV0YUVycm9yLFxuICAgIHR5cGUgQmV0YUVycm9yUmVzcG9uc2UgYXMgQmV0YUVycm9yUmVzcG9uc2UsXG4gICAgdHlwZSBCZXRhSW52YWxpZFJlcXVlc3RFcnJvciBhcyBCZXRhSW52YWxpZFJlcXVlc3RFcnJvcixcbiAgICB0eXBlIEJldGFOb3RGb3VuZEVycm9yIGFzIEJldGFOb3RGb3VuZEVycm9yLFxuICAgIHR5cGUgQmV0YU92ZXJsb2FkZWRFcnJvciBhcyBCZXRhT3ZlcmxvYWRlZEVycm9yLFxuICAgIHR5cGUgQmV0YVBlcm1pc3Npb25FcnJvciBhcyBCZXRhUGVybWlzc2lvbkVycm9yLFxuICAgIHR5cGUgQmV0YVJhdGVMaW1pdEVycm9yIGFzIEJldGFSYXRlTGltaXRFcnJvcixcbiAgfTtcblxuICBleHBvcnQge1xuICAgIE1lc3NhZ2VzIGFzIE1lc3NhZ2VzLFxuICAgIHR5cGUgQmV0YUJhc2U2NFBERkJsb2NrIGFzIEJldGFCYXNlNjRQREZCbG9jayxcbiAgICB0eXBlIEJldGFCYXNlNjRQREZTb3VyY2UgYXMgQmV0YUJhc2U2NFBERlNvdXJjZSxcbiAgICB0eXBlIEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgYXMgQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCxcbiAgICB0eXBlIEJldGFDb250ZW50QmxvY2sgYXMgQmV0YUNvbnRlbnRCbG9jayxcbiAgICB0eXBlIEJldGFDb250ZW50QmxvY2tQYXJhbSBhcyBCZXRhQ29udGVudEJsb2NrUGFyYW0sXG4gICAgdHlwZSBCZXRhSW1hZ2VCbG9ja1BhcmFtIGFzIEJldGFJbWFnZUJsb2NrUGFyYW0sXG4gICAgdHlwZSBCZXRhSW5wdXRKU09ORGVsdGEgYXMgQmV0YUlucHV0SlNPTkRlbHRhLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2UgYXMgQmV0YU1lc3NhZ2UsXG4gICAgdHlwZSBCZXRhTWVzc2FnZURlbHRhVXNhZ2UgYXMgQmV0YU1lc3NhZ2VEZWx0YVVzYWdlLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VQYXJhbSBhcyBCZXRhTWVzc2FnZVBhcmFtLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VUb2tlbnNDb3VudCBhcyBCZXRhTWVzc2FnZVRva2Vuc0NvdW50LFxuICAgIHR5cGUgQmV0YU1ldGFkYXRhIGFzIEJldGFNZXRhZGF0YSxcbiAgICB0eXBlIEJldGFSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50IGFzIEJldGFSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQgYXMgQmV0YVJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50IGFzIEJldGFSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3TWVzc2FnZURlbHRhRXZlbnQgYXMgQmV0YVJhd01lc3NhZ2VEZWx0YUV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd01lc3NhZ2VTdGFydEV2ZW50IGFzIEJldGFSYXdNZXNzYWdlU3RhcnRFdmVudCxcbiAgICB0eXBlIEJldGFSYXdNZXNzYWdlU3RvcEV2ZW50IGFzIEJldGFSYXdNZXNzYWdlU3RvcEV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd01lc3NhZ2VTdHJlYW1FdmVudCBhcyBCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50LFxuICAgIHR5cGUgQmV0YVRleHRCbG9jayBhcyBCZXRhVGV4dEJsb2NrLFxuICAgIHR5cGUgQmV0YVRleHRCbG9ja1BhcmFtIGFzIEJldGFUZXh0QmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFUZXh0RGVsdGEgYXMgQmV0YVRleHREZWx0YSxcbiAgICB0eXBlIEJldGFUb29sIGFzIEJldGFUb29sLFxuICAgIHR5cGUgQmV0YVRvb2xCYXNoMjAyNDEwMjIgYXMgQmV0YVRvb2xCYXNoMjAyNDEwMjIsXG4gICAgdHlwZSBCZXRhVG9vbENob2ljZSBhcyBCZXRhVG9vbENob2ljZSxcbiAgICB0eXBlIEJldGFUb29sQ2hvaWNlQW55IGFzIEJldGFUb29sQ2hvaWNlQW55LFxuICAgIHR5cGUgQmV0YVRvb2xDaG9pY2VBdXRvIGFzIEJldGFUb29sQ2hvaWNlQXV0byxcbiAgICB0eXBlIEJldGFUb29sQ2hvaWNlVG9vbCBhcyBCZXRhVG9vbENob2ljZVRvb2wsXG4gICAgdHlwZSBCZXRhVG9vbENvbXB1dGVyVXNlMjAyNDEwMjIgYXMgQmV0YVRvb2xDb21wdXRlclVzZTIwMjQxMDIyLFxuICAgIHR5cGUgQmV0YVRvb2xSZXN1bHRCbG9ja1BhcmFtIGFzIEJldGFUb29sUmVzdWx0QmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyIGFzIEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyLFxuICAgIHR5cGUgQmV0YVRvb2xVbmlvbiBhcyBCZXRhVG9vbFVuaW9uLFxuICAgIHR5cGUgQmV0YVRvb2xVc2VCbG9jayBhcyBCZXRhVG9vbFVzZUJsb2NrLFxuICAgIHR5cGUgQmV0YVRvb2xVc2VCbG9ja1BhcmFtIGFzIEJldGFUb29sVXNlQmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFVc2FnZSBhcyBCZXRhVXNhZ2UsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMgYXMgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zLFxuICB9O1xuXG4gIGV4cG9ydCB7IFByb21wdENhY2hpbmcgYXMgUHJvbXB0Q2FjaGluZyB9O1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSBcIi4uL3Jlc291cmNlLmpzXCI7XG5pbXBvcnQgeyBBUElQcm9taXNlIH0gZnJvbSBcIi4uL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4uL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIENvbXBsZXRpb25zQVBJIGZyb20gXCIuL2NvbXBsZXRpb25zLmpzXCI7XG5pbXBvcnQgKiBhcyBNZXNzYWdlc0FQSSBmcm9tIFwiLi9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0IHsgU3RyZWFtIH0gZnJvbSBcIi4uL3N0cmVhbWluZy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQ29tcGxldGlvbnMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBbTGVnYWN5XSBDcmVhdGUgYSBUZXh0IENvbXBsZXRpb24uXG4gICAqXG4gICAqIFRoZSBUZXh0IENvbXBsZXRpb25zIEFQSSBpcyBhIGxlZ2FjeSBBUEkuIFdlIHJlY29tbWVuZCB1c2luZyB0aGVcbiAgICogW01lc3NhZ2VzIEFQSV0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzKSBnb2luZyBmb3J3YXJkLlxuICAgKlxuICAgKiBGdXR1cmUgbW9kZWxzIGFuZCBmZWF0dXJlcyB3aWxsIG5vdCBiZSBjb21wYXRpYmxlIHdpdGggVGV4dCBDb21wbGV0aW9ucy4gU2VlIG91clxuICAgKiBbbWlncmF0aW9uIGd1aWRlXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWlncmF0aW5nLWZyb20tdGV4dC1jb21wbGV0aW9ucy10by1tZXNzYWdlcylcbiAgICogZm9yIGd1aWRhbmNlIGluIG1pZ3JhdGluZyBmcm9tIFRleHQgQ29tcGxldGlvbnMgdG8gTWVzc2FnZXMuXG4gICAqL1xuICBjcmVhdGUoYm9keTogQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBBUElQcm9taXNlPENvbXBsZXRpb24+O1xuICBjcmVhdGUoXG4gICAgYm9keTogQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08Q29tcGxldGlvbj4+O1xuICBjcmVhdGUoXG4gICAgYm9keTogQ29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2UsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPENvbXBsZXRpb24+IHwgQ29tcGxldGlvbj47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPENvbXBsZXRpb24+IHwgQVBJUHJvbWlzZTxTdHJlYW08Q29tcGxldGlvbj4+IHtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LnBvc3QoJy92MS9jb21wbGV0ZScsIHtcbiAgICAgIGJvZHksXG4gICAgICB0aW1lb3V0OiAodGhpcy5fY2xpZW50IGFzIGFueSkuX29wdGlvbnMudGltZW91dCA/PyA2MDAwMDAsXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgc3RyZWFtOiBib2R5LnN0cmVhbSA/PyBmYWxzZSxcbiAgICB9KSBhcyBBUElQcm9taXNlPENvbXBsZXRpb24+IHwgQVBJUHJvbWlzZTxTdHJlYW08Q29tcGxldGlvbj4+O1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbiB7XG4gIC8qKlxuICAgKiBVbmlxdWUgb2JqZWN0IGlkZW50aWZpZXIuXG4gICAqXG4gICAqIFRoZSBmb3JtYXQgYW5kIGxlbmd0aCBvZiBJRHMgbWF5IGNoYW5nZSBvdmVyIHRpbWUuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgcmVzdWx0aW5nIGNvbXBsZXRpb24gdXAgdG8gYW5kIGV4Y2x1ZGluZyB0aGUgc3RvcCBzZXF1ZW5jZXMuXG4gICAqL1xuICBjb21wbGV0aW9uOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB0aGF0IHdpbGwgY29tcGxldGUgeW91ciBwcm9tcHQuXFxuXFxuU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICAgKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICAgKi9cbiAgbW9kZWw6IE1lc3NhZ2VzQVBJLk1vZGVsO1xuXG4gIC8qKlxuICAgKiBUaGUgcmVhc29uIHRoYXQgd2Ugc3RvcHBlZC5cbiAgICpcbiAgICogVGhpcyBtYXkgYmUgb25lIHRoZSBmb2xsb3dpbmcgdmFsdWVzOlxuICAgKlxuICAgKiAtIGBcInN0b3Bfc2VxdWVuY2VcImA6IHdlIHJlYWNoZWQgYSBzdG9wIHNlcXVlbmNlIFx1MjAxNCBlaXRoZXIgcHJvdmlkZWQgYnkgeW91IHZpYSB0aGVcbiAgICogICBgc3RvcF9zZXF1ZW5jZXNgIHBhcmFtZXRlciwgb3IgYSBzdG9wIHNlcXVlbmNlIGJ1aWx0IGludG8gdGhlIG1vZGVsXG4gICAqIC0gYFwibWF4X3Rva2Vuc1wiYDogd2UgZXhjZWVkZWQgYG1heF90b2tlbnNfdG9fc2FtcGxlYCBvciB0aGUgbW9kZWwncyBtYXhpbXVtXG4gICAqL1xuICBzdG9wX3JlYXNvbjogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogT2JqZWN0IHR5cGUuXG4gICAqXG4gICAqIEZvciBUZXh0IENvbXBsZXRpb25zLCB0aGlzIGlzIGFsd2F5cyBgXCJjb21wbGV0aW9uXCJgLlxuICAgKi9cbiAgdHlwZTogJ2NvbXBsZXRpb24nO1xufVxuXG5leHBvcnQgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zID0gQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyB8IENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHRva2VucyB0byBnZW5lcmF0ZSBiZWZvcmUgc3RvcHBpbmcuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBvdXIgbW9kZWxzIG1heSBzdG9wIF9iZWZvcmVfIHJlYWNoaW5nIHRoaXMgbWF4aW11bS4gVGhpcyBwYXJhbWV0ZXJcbiAgICogb25seSBzcGVjaWZpZXMgdGhlIGFic29sdXRlIG1heGltdW0gbnVtYmVyIG9mIHRva2VucyB0byBnZW5lcmF0ZS5cbiAgICovXG4gIG1heF90b2tlbnNfdG9fc2FtcGxlOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB0aGF0IHdpbGwgY29tcGxldGUgeW91ciBwcm9tcHQuXFxuXFxuU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICAgKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICAgKi9cbiAgbW9kZWw6IE1lc3NhZ2VzQVBJLk1vZGVsO1xuXG4gIC8qKlxuICAgKiBUaGUgcHJvbXB0IHRoYXQgeW91IHdhbnQgQ2xhdWRlIHRvIGNvbXBsZXRlLlxuICAgKlxuICAgKiBGb3IgcHJvcGVyIHJlc3BvbnNlIGdlbmVyYXRpb24geW91IHdpbGwgbmVlZCB0byBmb3JtYXQgeW91ciBwcm9tcHQgdXNpbmdcbiAgICogYWx0ZXJuYXRpbmcgYFxcblxcbkh1bWFuOmAgYW5kIGBcXG5cXG5Bc3Npc3RhbnQ6YCBjb252ZXJzYXRpb25hbCB0dXJucy4gRm9yIGV4YW1wbGU6XG4gICAqXG4gICAqIGBgYFxuICAgKiBcIlxcblxcbkh1bWFuOiB7dXNlclF1ZXN0aW9ufVxcblxcbkFzc2lzdGFudDpcIlxuICAgKiBgYGBcbiAgICpcbiAgICogU2VlIFtwcm9tcHQgdmFsaWRhdGlvbl0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL3Byb21wdC12YWxpZGF0aW9uKSBhbmRcbiAgICogb3VyIGd1aWRlIHRvXG4gICAqIFtwcm9tcHQgZGVzaWduXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL2ludHJvLXRvLXByb21wdGluZykgZm9yIG1vcmVcbiAgICogZGV0YWlscy5cbiAgICovXG4gIHByb21wdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgZGVzY3JpYmluZyBtZXRhZGF0YSBhYm91dCB0aGUgcmVxdWVzdC5cbiAgICovXG4gIG1ldGFkYXRhPzogTWVzc2FnZXNBUEkuTWV0YWRhdGE7XG5cbiAgLyoqXG4gICAqIFNlcXVlbmNlcyB0aGF0IHdpbGwgY2F1c2UgdGhlIG1vZGVsIHRvIHN0b3AgZ2VuZXJhdGluZy5cbiAgICpcbiAgICogT3VyIG1vZGVscyBzdG9wIG9uIGBcIlxcblxcbkh1bWFuOlwiYCwgYW5kIG1heSBpbmNsdWRlIGFkZGl0aW9uYWwgYnVpbHQtaW4gc3RvcFxuICAgKiBzZXF1ZW5jZXMgaW4gdGhlIGZ1dHVyZS4gQnkgcHJvdmlkaW5nIHRoZSBzdG9wX3NlcXVlbmNlcyBwYXJhbWV0ZXIsIHlvdSBtYXlcbiAgICogaW5jbHVkZSBhZGRpdGlvbmFsIHN0cmluZ3MgdGhhdCB3aWxsIGNhdXNlIHRoZSBtb2RlbCB0byBzdG9wIGdlbmVyYXRpbmcuXG4gICAqL1xuICBzdG9wX3NlcXVlbmNlcz86IEFycmF5PHN0cmluZz47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gaW5jcmVtZW50YWxseSBzdHJlYW0gdGhlIHJlc3BvbnNlIHVzaW5nIHNlcnZlci1zZW50IGV2ZW50cy5cbiAgICpcbiAgICogU2VlIFtzdHJlYW1pbmddKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9zdHJlYW1pbmcpIGZvciBkZXRhaWxzLlxuICAgKi9cbiAgc3RyZWFtPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogQW1vdW50IG9mIHJhbmRvbW5lc3MgaW5qZWN0ZWQgaW50byB0aGUgcmVzcG9uc2UuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGAxLjBgLiBSYW5nZXMgZnJvbSBgMC4wYCB0byBgMS4wYC4gVXNlIGB0ZW1wZXJhdHVyZWAgY2xvc2VyIHRvIGAwLjBgXG4gICAqIGZvciBhbmFseXRpY2FsIC8gbXVsdGlwbGUgY2hvaWNlLCBhbmQgY2xvc2VyIHRvIGAxLjBgIGZvciBjcmVhdGl2ZSBhbmRcbiAgICogZ2VuZXJhdGl2ZSB0YXNrcy5cbiAgICpcbiAgICogTm90ZSB0aGF0IGV2ZW4gd2l0aCBgdGVtcGVyYXR1cmVgIG9mIGAwLjBgLCB0aGUgcmVzdWx0cyB3aWxsIG5vdCBiZSBmdWxseVxuICAgKiBkZXRlcm1pbmlzdGljLlxuICAgKi9cbiAgdGVtcGVyYXR1cmU/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE9ubHkgc2FtcGxlIGZyb20gdGhlIHRvcCBLIG9wdGlvbnMgZm9yIGVhY2ggc3Vic2VxdWVudCB0b2tlbi5cbiAgICpcbiAgICogVXNlZCB0byByZW1vdmUgXCJsb25nIHRhaWxcIiBsb3cgcHJvYmFiaWxpdHkgcmVzcG9uc2VzLlxuICAgKiBbTGVhcm4gbW9yZSB0ZWNobmljYWwgZGV0YWlscyBoZXJlXShodHRwczovL3Rvd2FyZHNkYXRhc2NpZW5jZS5jb20vaG93LXRvLXNhbXBsZS1mcm9tLWxhbmd1YWdlLW1vZGVscy02ODJiY2ViOTcyNzcpLlxuICAgKlxuICAgKiBSZWNvbW1lbmRlZCBmb3IgYWR2YW5jZWQgdXNlIGNhc2VzIG9ubHkuIFlvdSB1c3VhbGx5IG9ubHkgbmVlZCB0byB1c2VcbiAgICogYHRlbXBlcmF0dXJlYC5cbiAgICovXG4gIHRvcF9rPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBVc2UgbnVjbGV1cyBzYW1wbGluZy5cbiAgICpcbiAgICogSW4gbnVjbGV1cyBzYW1wbGluZywgd2UgY29tcHV0ZSB0aGUgY3VtdWxhdGl2ZSBkaXN0cmlidXRpb24gb3ZlciBhbGwgdGhlIG9wdGlvbnNcbiAgICogZm9yIGVhY2ggc3Vic2VxdWVudCB0b2tlbiBpbiBkZWNyZWFzaW5nIHByb2JhYmlsaXR5IG9yZGVyIGFuZCBjdXQgaXQgb2ZmIG9uY2UgaXRcbiAgICogcmVhY2hlcyBhIHBhcnRpY3VsYXIgcHJvYmFiaWxpdHkgc3BlY2lmaWVkIGJ5IGB0b3BfcGAuIFlvdSBzaG91bGQgZWl0aGVyIGFsdGVyXG4gICAqIGB0ZW1wZXJhdHVyZWAgb3IgYHRvcF9wYCwgYnV0IG5vdCBib3RoLlxuICAgKlxuICAgKiBSZWNvbW1lbmRlZCBmb3IgYWR2YW5jZWQgdXNlIGNhc2VzIG9ubHkuIFlvdSB1c3VhbGx5IG9ubHkgbmVlZCB0byB1c2VcbiAgICogYHRlbXBlcmF0dXJlYC5cbiAgICovXG4gIHRvcF9wPzogbnVtYmVyO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIENvbXBsZXRpb25DcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGBBbnRocm9waWMuTWVzc2FnZXMuTWV0YWRhdGFgIGluc3RlYWRcbiAgICovXG4gIGV4cG9ydCB0eXBlIE1ldGFkYXRhID0gTWVzc2FnZXNBUEkuTWV0YWRhdGE7XG5cbiAgZXhwb3J0IHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyA9IENvbXBsZXRpb25zQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBDb21wbGV0aW9uc0FQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgZXh0ZW5kcyBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudCBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvc3RyZWFtaW5nKSBmb3IgZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbT86IGZhbHNlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgZXh0ZW5kcyBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudCBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvc3RyZWFtaW5nKSBmb3IgZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbTogdHJ1ZTtcbn1cblxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIENvbXBsZXRpb25zIHtcbiAgZXhwb3J0IHtcbiAgICB0eXBlIENvbXBsZXRpb24gYXMgQ29tcGxldGlvbixcbiAgICB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXMgYXMgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyxcbiAgICB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgYXMgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgICB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgYXMgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgfTtcbn1cbiIsICJpbXBvcnQgKiBhcyBDb3JlIGZyb20gXCIuLi9jb3JlLmpzXCI7XG5pbXBvcnQgeyBBbnRocm9waWNFcnJvciwgQVBJVXNlckFib3J0RXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IuanNcIjtcbmltcG9ydCB7XG4gIHR5cGUgQ29udGVudEJsb2NrLFxuICBNZXNzYWdlcyxcbiAgdHlwZSBNZXNzYWdlLFxuICB0eXBlIE1lc3NhZ2VTdHJlYW1FdmVudCxcbiAgdHlwZSBNZXNzYWdlUGFyYW0sXG4gIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSxcbiAgdHlwZSBUZXh0QmxvY2ssXG59IGZyb20gXCIuLi9yZXNvdXJjZXMvbWVzc2FnZXMuanNcIjtcbmltcG9ydCB7IHR5cGUgUmVhZGFibGVTdHJlYW0gfSBmcm9tIFwiLi4vX3NoaW1zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tIFwiLi4vc3RyZWFtaW5nLmpzXCI7XG5pbXBvcnQgeyBwYXJ0aWFsUGFyc2UgfSBmcm9tIFwiLi4vX3ZlbmRvci9wYXJ0aWFsLWpzb24tcGFyc2VyL3BhcnNlci5qc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VTdHJlYW1FdmVudHMge1xuICBjb25uZWN0OiAoKSA9PiB2b2lkO1xuICBzdHJlYW1FdmVudDogKGV2ZW50OiBNZXNzYWdlU3RyZWFtRXZlbnQsIHNuYXBzaG90OiBNZXNzYWdlKSA9PiB2b2lkO1xuICB0ZXh0OiAodGV4dERlbHRhOiBzdHJpbmcsIHRleHRTbmFwc2hvdDogc3RyaW5nKSA9PiB2b2lkO1xuICBpbnB1dEpzb246IChwYXJ0aWFsSnNvbjogc3RyaW5nLCBqc29uU25hcHNob3Q6IHVua25vd24pID0+IHZvaWQ7XG4gIG1lc3NhZ2U6IChtZXNzYWdlOiBNZXNzYWdlKSA9PiB2b2lkO1xuICBjb250ZW50QmxvY2s6IChjb250ZW50OiBDb250ZW50QmxvY2spID0+IHZvaWQ7XG4gIGZpbmFsTWVzc2FnZTogKG1lc3NhZ2U6IE1lc3NhZ2UpID0+IHZvaWQ7XG4gIGVycm9yOiAoZXJyb3I6IEFudGhyb3BpY0Vycm9yKSA9PiB2b2lkO1xuICBhYm9ydDogKGVycm9yOiBBUElVc2VyQWJvcnRFcnJvcikgPT4gdm9pZDtcbiAgZW5kOiAoKSA9PiB2b2lkO1xufVxuXG50eXBlIE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+ID0ge1xuICBsaXN0ZW5lcjogTWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF07XG4gIG9uY2U/OiBib29sZWFuO1xufVtdO1xuXG5jb25zdCBKU09OX0JVRl9QUk9QRVJUWSA9ICdfX2pzb25fYnVmJztcblxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VTdHJlYW0gaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlPE1lc3NhZ2VTdHJlYW1FdmVudD4ge1xuICBtZXNzYWdlczogTWVzc2FnZVBhcmFtW10gPSBbXTtcbiAgcmVjZWl2ZWRNZXNzYWdlczogTWVzc2FnZVtdID0gW107XG4gICNjdXJyZW50TWVzc2FnZVNuYXBzaG90OiBNZXNzYWdlIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblxuICAjY29ubmVjdGVkUHJvbWlzZTogUHJvbWlzZTx2b2lkPjtcbiAgI3Jlc29sdmVDb25uZWN0ZWRQcm9taXNlOiAoKSA9PiB2b2lkID0gKCkgPT4ge307XG4gICNyZWplY3RDb25uZWN0ZWRQcm9taXNlOiAoZXJyb3I6IEFudGhyb3BpY0Vycm9yKSA9PiB2b2lkID0gKCkgPT4ge307XG5cbiAgI2VuZFByb21pc2U6IFByb21pc2U8dm9pZD47XG4gICNyZXNvbHZlRW5kUHJvbWlzZTogKCkgPT4gdm9pZCA9ICgpID0+IHt9O1xuICAjcmVqZWN0RW5kUHJvbWlzZTogKGVycm9yOiBBbnRocm9waWNFcnJvcikgPT4gdm9pZCA9ICgpID0+IHt9O1xuXG4gICNsaXN0ZW5lcnM6IHsgW0V2ZW50IGluIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHNdPzogTWVzc2FnZVN0cmVhbUV2ZW50TGlzdGVuZXJzPEV2ZW50PiB9ID0ge307XG5cbiAgI2VuZGVkID0gZmFsc2U7XG4gICNlcnJvcmVkID0gZmFsc2U7XG4gICNhYm9ydGVkID0gZmFsc2U7XG4gICNjYXRjaGluZ1Byb21pc2VDcmVhdGVkID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy4jY29ubmVjdGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuI3Jlc29sdmVDb25uZWN0ZWRQcm9taXNlID0gcmVzb2x2ZTtcbiAgICAgIHRoaXMuI3JlamVjdENvbm5lY3RlZFByb21pc2UgPSByZWplY3Q7XG4gICAgfSk7XG5cbiAgICB0aGlzLiNlbmRQcm9taXNlID0gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy4jcmVzb2x2ZUVuZFByb21pc2UgPSByZXNvbHZlO1xuICAgICAgdGhpcy4jcmVqZWN0RW5kUHJvbWlzZSA9IHJlamVjdDtcbiAgICB9KTtcblxuICAgIC8vIERvbid0IGxldCB0aGVzZSBwcm9taXNlcyBjYXVzZSB1bmhhbmRsZWQgcmVqZWN0aW9uIGVycm9ycy5cbiAgICAvLyB3ZSB3aWxsIG1hbnVhbGx5IGNhdXNlIGFuIHVuaGFuZGxlZCByZWplY3Rpb24gZXJyb3IgbGF0ZXJcbiAgICAvLyBpZiB0aGUgdXNlciBoYXNuJ3QgcmVnaXN0ZXJlZCBhbnkgZXJyb3IgbGlzdGVuZXIgb3IgY2FsbGVkXG4gICAgLy8gYW55IHByb21pc2UtcmV0dXJuaW5nIG1ldGhvZC5cbiAgICB0aGlzLiNjb25uZWN0ZWRQcm9taXNlLmNhdGNoKCgpID0+IHt9KTtcbiAgICB0aGlzLiNlbmRQcm9taXNlLmNhdGNoKCgpID0+IHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnRlbmRlZCBmb3IgdXNlIG9uIHRoZSBmcm9udGVuZCwgY29uc3VtaW5nIGEgc3RyZWFtIHByb2R1Y2VkIHdpdGhcbiAgICogYC50b1JlYWRhYmxlU3RyZWFtKClgIG9uIHRoZSBiYWNrZW5kLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgbWVzc2FnZXMgc2VudCB0byB0aGUgbW9kZWwgZG8gbm90IGFwcGVhciBpbiBgLm9uKCdtZXNzYWdlJylgXG4gICAqIGluIHRoaXMgY29udGV4dC5cbiAgICovXG4gIHN0YXRpYyBmcm9tUmVhZGFibGVTdHJlYW0oc3RyZWFtOiBSZWFkYWJsZVN0cmVhbSk6IE1lc3NhZ2VTdHJlYW0ge1xuICAgIGNvbnN0IHJ1bm5lciA9IG5ldyBNZXNzYWdlU3RyZWFtKCk7XG4gICAgcnVubmVyLl9ydW4oKCkgPT4gcnVubmVyLl9mcm9tUmVhZGFibGVTdHJlYW0oc3RyZWFtKSk7XG4gICAgcmV0dXJuIHJ1bm5lcjtcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVNZXNzYWdlKFxuICAgIG1lc3NhZ2VzOiBNZXNzYWdlcyxcbiAgICBwYXJhbXM6IE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBNZXNzYWdlU3RyZWFtIHtcbiAgICBjb25zdCBydW5uZXIgPSBuZXcgTWVzc2FnZVN0cmVhbSgpO1xuICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBwYXJhbXMubWVzc2FnZXMpIHtcbiAgICAgIHJ1bm5lci5fYWRkTWVzc2FnZVBhcmFtKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBydW5uZXIuX3J1bigoKSA9PlxuICAgICAgcnVubmVyLl9jcmVhdGVNZXNzYWdlKFxuICAgICAgICBtZXNzYWdlcyxcbiAgICAgICAgeyAuLi5wYXJhbXMsIHN0cmVhbTogdHJ1ZSB9LFxuICAgICAgICB7IC4uLm9wdGlvbnMsIGhlYWRlcnM6IHsgLi4ub3B0aW9ucz8uaGVhZGVycywgJ1gtU3RhaW5sZXNzLUhlbHBlci1NZXRob2QnOiAnc3RyZWFtJyB9IH0sXG4gICAgICApLFxuICAgICk7XG4gICAgcmV0dXJuIHJ1bm5lcjtcbiAgfVxuXG4gIHByb3RlY3RlZCBfcnVuKGV4ZWN1dG9yOiAoKSA9PiBQcm9taXNlPGFueT4pIHtcbiAgICBleGVjdXRvcigpLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5fZW1pdEZpbmFsKCk7XG4gICAgICB0aGlzLl9lbWl0KCdlbmQnKTtcbiAgICB9LCB0aGlzLiNoYW5kbGVFcnJvcik7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2FkZE1lc3NhZ2VQYXJhbShtZXNzYWdlOiBNZXNzYWdlUGFyYW0pIHtcbiAgICB0aGlzLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2FkZE1lc3NhZ2UobWVzc2FnZTogTWVzc2FnZSwgZW1pdCA9IHRydWUpIHtcbiAgICB0aGlzLnJlY2VpdmVkTWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgICBpZiAoZW1pdCkge1xuICAgICAgdGhpcy5fZW1pdCgnbWVzc2FnZScsIG1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBfY3JlYXRlTWVzc2FnZShcbiAgICBtZXNzYWdlczogTWVzc2FnZXMsXG4gICAgcGFyYW1zOiBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzaWduYWwgPSBvcHRpb25zPy5zaWduYWw7XG4gICAgaWYgKHNpZ25hbCkge1xuICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpID0+IHRoaXMuY29udHJvbGxlci5hYm9ydCgpKTtcbiAgICB9XG4gICAgdGhpcy4jYmVnaW5SZXF1ZXN0KCk7XG4gICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgbWVzc2FnZXMuY3JlYXRlKFxuICAgICAgeyAuLi5wYXJhbXMsIHN0cmVhbTogdHJ1ZSB9LFxuICAgICAgeyAuLi5vcHRpb25zLCBzaWduYWw6IHRoaXMuY29udHJvbGxlci5zaWduYWwgfSxcbiAgICApO1xuICAgIHRoaXMuX2Nvbm5lY3RlZCgpO1xuICAgIGZvciBhd2FpdCAoY29uc3QgZXZlbnQgb2Ygc3RyZWFtKSB7XG4gICAgICB0aGlzLiNhZGRTdHJlYW1FdmVudChldmVudCk7XG4gICAgfVxuICAgIGlmIChzdHJlYW0uY29udHJvbGxlci5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgIH1cbiAgICB0aGlzLiNlbmRSZXF1ZXN0KCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2Nvbm5lY3RlZCgpIHtcbiAgICBpZiAodGhpcy5lbmRlZCkgcmV0dXJuO1xuICAgIHRoaXMuI3Jlc29sdmVDb25uZWN0ZWRQcm9taXNlKCk7XG4gICAgdGhpcy5fZW1pdCgnY29ubmVjdCcpO1xuICB9XG5cbiAgZ2V0IGVuZGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLiNlbmRlZDtcbiAgfVxuXG4gIGdldCBlcnJvcmVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLiNlcnJvcmVkO1xuICB9XG5cbiAgZ2V0IGFib3J0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuI2Fib3J0ZWQ7XG4gIH1cblxuICBhYm9ydCgpIHtcbiAgICB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHRoZSBsaXN0ZW5lciBmdW5jdGlvbiB0byB0aGUgZW5kIG9mIHRoZSBsaXN0ZW5lcnMgYXJyYXkgZm9yIHRoZSBldmVudC5cbiAgICogTm8gY2hlY2tzIGFyZSBtYWRlIHRvIHNlZSBpZiB0aGUgbGlzdGVuZXIgaGFzIGFscmVhZHkgYmVlbiBhZGRlZC4gTXVsdGlwbGUgY2FsbHMgcGFzc2luZ1xuICAgKiB0aGUgc2FtZSBjb21iaW5hdGlvbiBvZiBldmVudCBhbmQgbGlzdGVuZXIgd2lsbCByZXN1bHQgaW4gdGhlIGxpc3RlbmVyIGJlaW5nIGFkZGVkLCBhbmRcbiAgICogY2FsbGVkLCBtdWx0aXBsZSB0aW1lcy5cbiAgICogQHJldHVybnMgdGhpcyBNZXNzYWdlU3RyZWFtLCBzbyB0aGF0IGNhbGxzIGNhbiBiZSBjaGFpbmVkXG4gICAqL1xuICBvbjxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+KGV2ZW50OiBFdmVudCwgbGlzdGVuZXI6IE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdKTogdGhpcyB7XG4gICAgY29uc3QgbGlzdGVuZXJzOiBNZXNzYWdlU3RyZWFtRXZlbnRMaXN0ZW5lcnM8RXZlbnQ+ID1cbiAgICAgIHRoaXMuI2xpc3RlbmVyc1tldmVudF0gfHwgKHRoaXMuI2xpc3RlbmVyc1tldmVudF0gPSBbXSk7XG4gICAgbGlzdGVuZXJzLnB1c2goeyBsaXN0ZW5lciB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgbGlzdGVuZXIgZnJvbSB0aGUgbGlzdGVuZXIgYXJyYXkgZm9yIHRoZSBldmVudC5cbiAgICogb2ZmKCkgd2lsbCByZW1vdmUsIGF0IG1vc3QsIG9uZSBpbnN0YW5jZSBvZiBhIGxpc3RlbmVyIGZyb20gdGhlIGxpc3RlbmVyIGFycmF5LiBJZiBhbnkgc2luZ2xlXG4gICAqIGxpc3RlbmVyIGhhcyBiZWVuIGFkZGVkIG11bHRpcGxlIHRpbWVzIHRvIHRoZSBsaXN0ZW5lciBhcnJheSBmb3IgdGhlIHNwZWNpZmllZCBldmVudCwgdGhlblxuICAgKiBvZmYoKSBtdXN0IGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyB0byByZW1vdmUgZWFjaCBpbnN0YW5jZS5cbiAgICogQHJldHVybnMgdGhpcyBNZXNzYWdlU3RyZWFtLCBzbyB0aGF0IGNhbGxzIGNhbiBiZSBjaGFpbmVkXG4gICAqL1xuICBvZmY8RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPihldmVudDogRXZlbnQsIGxpc3RlbmVyOiBNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XSk6IHRoaXMge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuI2xpc3RlbmVyc1tldmVudF07XG4gICAgaWYgKCFsaXN0ZW5lcnMpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmZpbmRJbmRleCgobCkgPT4gbC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpO1xuICAgIGlmIChpbmRleCA+PSAwKSBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgb25lLXRpbWUgbGlzdGVuZXIgZnVuY3Rpb24gZm9yIHRoZSBldmVudC4gVGhlIG5leHQgdGltZSB0aGUgZXZlbnQgaXMgdHJpZ2dlcmVkLFxuICAgKiB0aGlzIGxpc3RlbmVyIGlzIHJlbW92ZWQgYW5kIHRoZW4gaW52b2tlZC5cbiAgICogQHJldHVybnMgdGhpcyBNZXNzYWdlU3RyZWFtLCBzbyB0aGF0IGNhbGxzIGNhbiBiZSBjaGFpbmVkXG4gICAqL1xuICBvbmNlPEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4oZXZlbnQ6IEV2ZW50LCBsaXN0ZW5lcjogTWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0pOiB0aGlzIHtcbiAgICBjb25zdCBsaXN0ZW5lcnM6IE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gPVxuICAgICAgdGhpcy4jbGlzdGVuZXJzW2V2ZW50XSB8fCAodGhpcy4jbGlzdGVuZXJzW2V2ZW50XSA9IFtdKTtcbiAgICBsaXN0ZW5lcnMucHVzaCh7IGxpc3RlbmVyLCBvbmNlOiB0cnVlIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgc2ltaWxhciB0byBgLm9uY2UoKWAsIGJ1dCByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRoZSBuZXh0IHRpbWVcbiAgICogdGhlIGV2ZW50IGlzIHRyaWdnZXJlZCwgaW5zdGVhZCBvZiBjYWxsaW5nIGEgbGlzdGVuZXIgY2FsbGJhY2suXG4gICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRoZSBuZXh0IHRpbWUgZ2l2ZW4gZXZlbnQgaXMgdHJpZ2dlcmVkLFxuICAgKiBvciByZWplY3RzIGlmIGFuIGVycm9yIGlzIGVtaXR0ZWQuICAoSWYgeW91IHJlcXVlc3QgdGhlICdlcnJvcicgZXZlbnQsXG4gICAqIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZXJyb3IpLlxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKlxuICAgKiAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBzdHJlYW0uZW1pdHRlZCgnbWVzc2FnZScpIC8vIHJlamVjdHMgaWYgdGhlIHN0cmVhbSBlcnJvcnNcbiAgICovXG4gIGVtaXR0ZWQ8RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPihcbiAgICBldmVudDogRXZlbnQsXG4gICk6IFByb21pc2U8XG4gICAgUGFyYW1ldGVyczxNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XT4gZXh0ZW5kcyBbaW5mZXIgUGFyYW1dID8gUGFyYW1cbiAgICA6IFBhcmFtZXRlcnM8TWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+IGV4dGVuZHMgW10gPyB2b2lkXG4gICAgOiBQYXJhbWV0ZXJzPE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdPlxuICA+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy4jY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCA9IHRydWU7XG4gICAgICBpZiAoZXZlbnQgIT09ICdlcnJvcicpIHRoaXMub25jZSgnZXJyb3InLCByZWplY3QpO1xuICAgICAgdGhpcy5vbmNlKGV2ZW50LCByZXNvbHZlIGFzIGFueSk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBkb25lKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuI2NhdGNoaW5nUHJvbWlzZUNyZWF0ZWQgPSB0cnVlO1xuICAgIGF3YWl0IHRoaXMuI2VuZFByb21pc2U7XG4gIH1cblxuICBnZXQgY3VycmVudE1lc3NhZ2UoKTogTWVzc2FnZSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3Q7XG4gIH1cblxuICAjZ2V0RmluYWxNZXNzYWdlKCk6IE1lc3NhZ2Uge1xuICAgIGlmICh0aGlzLnJlY2VpdmVkTWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoJ3N0cmVhbSBlbmRlZCB3aXRob3V0IHByb2R1Y2luZyBhIE1lc3NhZ2Ugd2l0aCByb2xlPWFzc2lzdGFudCcpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmF0KC0xKSE7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgdGhlIGZpbmFsIGFzc2lzdGFudCBNZXNzYWdlIHJlc3BvbnNlLFxuICAgKiBvciByZWplY3RzIGlmIGFuIGVycm9yIG9jY3VycmVkIG9yIHRoZSBzdHJlYW0gZW5kZWQgcHJlbWF0dXJlbHkgd2l0aG91dCBwcm9kdWNpbmcgYSBNZXNzYWdlLlxuICAgKi9cbiAgYXN5bmMgZmluYWxNZXNzYWdlKCk6IFByb21pc2U8TWVzc2FnZT4ge1xuICAgIGF3YWl0IHRoaXMuZG9uZSgpO1xuICAgIHJldHVybiB0aGlzLiNnZXRGaW5hbE1lc3NhZ2UoKTtcbiAgfVxuXG4gICNnZXRGaW5hbFRleHQoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKCdzdHJlYW0gZW5kZWQgd2l0aG91dCBwcm9kdWNpbmcgYSBNZXNzYWdlIHdpdGggcm9sZT1hc3Npc3RhbnQnKTtcbiAgICB9XG4gICAgY29uc3QgdGV4dEJsb2NrcyA9IHRoaXMucmVjZWl2ZWRNZXNzYWdlc1xuICAgICAgLmF0KC0xKSFcbiAgICAgIC5jb250ZW50LmZpbHRlcigoYmxvY2spOiBibG9jayBpcyBUZXh0QmxvY2sgPT4gYmxvY2sudHlwZSA9PT0gJ3RleHQnKVxuICAgICAgLm1hcCgoYmxvY2spID0+IGJsb2NrLnRleHQpO1xuICAgIGlmICh0ZXh0QmxvY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKCdzdHJlYW0gZW5kZWQgd2l0aG91dCBwcm9kdWNpbmcgYSBjb250ZW50IGJsb2NrIHdpdGggdHlwZT10ZXh0Jyk7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0QmxvY2tzLmpvaW4oJyAnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSB0aGUgZmluYWwgYXNzaXN0YW50IE1lc3NhZ2UncyB0ZXh0IHJlc3BvbnNlLCBjb25jYXRlbmF0ZWRcbiAgICogdG9nZXRoZXIgaWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgdGV4dCBibG9ja3MuXG4gICAqIFJlamVjdHMgaWYgYW4gZXJyb3Igb2NjdXJyZWQgb3IgdGhlIHN0cmVhbSBlbmRlZCBwcmVtYXR1cmVseSB3aXRob3V0IHByb2R1Y2luZyBhIE1lc3NhZ2UuXG4gICAqL1xuICBhc3luYyBmaW5hbFRleHQoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBhd2FpdCB0aGlzLmRvbmUoKTtcbiAgICByZXR1cm4gdGhpcy4jZ2V0RmluYWxUZXh0KCk7XG4gIH1cblxuICAjaGFuZGxlRXJyb3IgPSAoZXJyb3I6IHVua25vd24pID0+IHtcbiAgICB0aGlzLiNlcnJvcmVkID0gdHJ1ZTtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgIGVycm9yID0gbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEFQSVVzZXJBYm9ydEVycm9yKSB7XG4gICAgICB0aGlzLiNhYm9ydGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiB0aGlzLl9lbWl0KCdhYm9ydCcsIGVycm9yKTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQW50aHJvcGljRXJyb3IpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNvbnN0IGFudGhyb3BpY0Vycm9yOiBBbnRocm9waWNFcnJvciA9IG5ldyBBbnRocm9waWNFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGFudGhyb3BpY0Vycm9yLmNhdXNlID0gZXJyb3I7XG4gICAgICByZXR1cm4gdGhpcy5fZW1pdCgnZXJyb3InLCBhbnRocm9waWNFcnJvcik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9lbWl0KCdlcnJvcicsIG5ldyBBbnRocm9waWNFcnJvcihTdHJpbmcoZXJyb3IpKSk7XG4gIH07XG5cbiAgcHJvdGVjdGVkIF9lbWl0PEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4oXG4gICAgZXZlbnQ6IEV2ZW50LFxuICAgIC4uLmFyZ3M6IFBhcmFtZXRlcnM8TWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+XG4gICkge1xuICAgIC8vIG1ha2Ugc3VyZSB3ZSBkb24ndCBlbWl0IGFueSBNZXNzYWdlU3RyZWFtRXZlbnRzIGFmdGVyIGVuZFxuICAgIGlmICh0aGlzLiNlbmRlZCkgcmV0dXJuO1xuXG4gICAgaWYgKGV2ZW50ID09PSAnZW5kJykge1xuICAgICAgdGhpcy4jZW5kZWQgPSB0cnVlO1xuICAgICAgdGhpcy4jcmVzb2x2ZUVuZFByb21pc2UoKTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnM6IE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gfCB1bmRlZmluZWQgPSB0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIHRoaXMuI2xpc3RlbmVyc1tldmVudF0gPSBsaXN0ZW5lcnMuZmlsdGVyKChsKSA9PiAhbC5vbmNlKSBhcyBhbnk7XG4gICAgICBsaXN0ZW5lcnMuZm9yRWFjaCgoeyBsaXN0ZW5lciB9OiBhbnkpID0+IGxpc3RlbmVyKC4uLmFyZ3MpKTtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQgPT09ICdhYm9ydCcpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gYXJnc1swXSBhcyBBUElVc2VyQWJvcnRFcnJvcjtcbiAgICAgIGlmICghdGhpcy4jY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCAmJiAhbGlzdGVuZXJzPy5sZW5ndGgpIHtcbiAgICAgICAgUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgICAgdGhpcy4jcmVqZWN0Q29ubmVjdGVkUHJvbWlzZShlcnJvcik7XG4gICAgICB0aGlzLiNyZWplY3RFbmRQcm9taXNlKGVycm9yKTtcbiAgICAgIHRoaXMuX2VtaXQoJ2VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldmVudCA9PT0gJ2Vycm9yJykge1xuICAgICAgLy8gTk9URTogX2VtaXQoJ2Vycm9yJywgZXJyb3IpIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBmcm9tICNoYW5kbGVFcnJvcigpLlxuXG4gICAgICBjb25zdCBlcnJvciA9IGFyZ3NbMF0gYXMgQW50aHJvcGljRXJyb3I7XG4gICAgICBpZiAoIXRoaXMuI2NhdGNoaW5nUHJvbWlzZUNyZWF0ZWQgJiYgIWxpc3RlbmVycz8ubGVuZ3RoKSB7XG4gICAgICAgIC8vIFRyaWdnZXIgYW4gdW5oYW5kbGVkIHJlamVjdGlvbiBpZiB0aGUgdXNlciBoYXNuJ3QgcmVnaXN0ZXJlZCBhbnkgZXJyb3IgaGFuZGxlcnMuXG4gICAgICAgIC8vIElmIHlvdSBhcmUgc2VlaW5nIHN0YWNrIHRyYWNlcyBoZXJlLCBtYWtlIHN1cmUgdG8gaGFuZGxlIGVycm9ycyB2aWEgZWl0aGVyOlxuICAgICAgICAvLyAtIHJ1bm5lci5vbignZXJyb3InLCAoKSA9PiAuLi4pXG4gICAgICAgIC8vIC0gYXdhaXQgcnVubmVyLmRvbmUoKVxuICAgICAgICAvLyAtIGF3YWl0IHJ1bm5lci5maW5hbC4uLigpXG4gICAgICAgIC8vIC0gZXRjLlxuICAgICAgICBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgICB0aGlzLiNyZWplY3RDb25uZWN0ZWRQcm9taXNlKGVycm9yKTtcbiAgICAgIHRoaXMuI3JlamVjdEVuZFByb21pc2UoZXJyb3IpO1xuICAgICAgdGhpcy5fZW1pdCgnZW5kJyk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIF9lbWl0RmluYWwoKSB7XG4gICAgY29uc3QgZmluYWxNZXNzYWdlID0gdGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmF0KC0xKTtcbiAgICBpZiAoZmluYWxNZXNzYWdlKSB7XG4gICAgICB0aGlzLl9lbWl0KCdmaW5hbE1lc3NhZ2UnLCB0aGlzLiNnZXRGaW5hbE1lc3NhZ2UoKSk7XG4gICAgfVxuICB9XG5cbiAgI2JlZ2luUmVxdWVzdCgpIHtcbiAgICBpZiAodGhpcy5lbmRlZCkgcmV0dXJuO1xuICAgIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3QgPSB1bmRlZmluZWQ7XG4gIH1cbiAgI2FkZFN0cmVhbUV2ZW50KGV2ZW50OiBNZXNzYWdlU3RyZWFtRXZlbnQpIHtcbiAgICBpZiAodGhpcy5lbmRlZCkgcmV0dXJuO1xuICAgIGNvbnN0IG1lc3NhZ2VTbmFwc2hvdCA9IHRoaXMuI2FjY3VtdWxhdGVNZXNzYWdlKGV2ZW50KTtcbiAgICB0aGlzLl9lbWl0KCdzdHJlYW1FdmVudCcsIGV2ZW50LCBtZXNzYWdlU25hcHNob3QpO1xuXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX2RlbHRhJzoge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gbWVzc2FnZVNuYXBzaG90LmNvbnRlbnQuYXQoLTEpITtcbiAgICAgICAgaWYgKGV2ZW50LmRlbHRhLnR5cGUgPT09ICd0ZXh0X2RlbHRhJyAmJiBjb250ZW50LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgIHRoaXMuX2VtaXQoJ3RleHQnLCBldmVudC5kZWx0YS50ZXh0LCBjb250ZW50LnRleHQgfHwgJycpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmRlbHRhLnR5cGUgPT09ICdpbnB1dF9qc29uX2RlbHRhJyAmJiBjb250ZW50LnR5cGUgPT09ICd0b29sX3VzZScpIHtcbiAgICAgICAgICBpZiAoY29udGVudC5pbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5fZW1pdCgnaW5wdXRKc29uJywgZXZlbnQuZGVsdGEucGFydGlhbF9qc29uLCBjb250ZW50LmlucHV0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdtZXNzYWdlX3N0b3AnOiB7XG4gICAgICAgIHRoaXMuX2FkZE1lc3NhZ2VQYXJhbShtZXNzYWdlU25hcHNob3QpO1xuICAgICAgICB0aGlzLl9hZGRNZXNzYWdlKG1lc3NhZ2VTbmFwc2hvdCwgdHJ1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19zdG9wJzoge1xuICAgICAgICB0aGlzLl9lbWl0KCdjb250ZW50QmxvY2snLCBtZXNzYWdlU25hcHNob3QuY29udGVudC5hdCgtMSkhKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdtZXNzYWdlX3N0YXJ0Jzoge1xuICAgICAgICB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90ID0gbWVzc2FnZVNuYXBzaG90O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfc3RhcnQnOlxuICAgICAgY2FzZSAnbWVzc2FnZV9kZWx0YSc6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICAjZW5kUmVxdWVzdCgpOiBNZXNzYWdlIHtcbiAgICBpZiAodGhpcy5lbmRlZCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBzdHJlYW0gaGFzIGVuZGVkLCB0aGlzIHNob3VsZG4ndCBoYXBwZW5gKTtcbiAgICB9XG4gICAgY29uc3Qgc25hcHNob3QgPSB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90O1xuICAgIGlmICghc25hcHNob3QpIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgcmVxdWVzdCBlbmRlZCB3aXRob3V0IHNlbmRpbmcgYW55IGNodW5rc2ApO1xuICAgIH1cbiAgICB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90ID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiBzbmFwc2hvdDtcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBfZnJvbVJlYWRhYmxlU3RyZWFtKFxuICAgIHJlYWRhYmxlU3RyZWFtOiBSZWFkYWJsZVN0cmVhbSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc2lnbmFsID0gb3B0aW9ucz8uc2lnbmFsO1xuICAgIGlmIChzaWduYWwpIHtcbiAgICAgIGlmIChzaWduYWwuYWJvcnRlZCkgdGhpcy5jb250cm9sbGVyLmFib3J0KCk7XG4gICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKSk7XG4gICAgfVxuICAgIHRoaXMuI2JlZ2luUmVxdWVzdCgpO1xuICAgIHRoaXMuX2Nvbm5lY3RlZCgpO1xuICAgIGNvbnN0IHN0cmVhbSA9IFN0cmVhbS5mcm9tUmVhZGFibGVTdHJlYW08TWVzc2FnZVN0cmVhbUV2ZW50PihyZWFkYWJsZVN0cmVhbSwgdGhpcy5jb250cm9sbGVyKTtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIHN0cmVhbSkge1xuICAgICAgdGhpcy4jYWRkU3RyZWFtRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICBpZiAoc3RyZWFtLmNvbnRyb2xsZXIuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJVXNlckFib3J0RXJyb3IoKTtcbiAgICB9XG4gICAgdGhpcy4jZW5kUmVxdWVzdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIE11dGF0ZXMgdGhpcy4jY3VycmVudE1lc3NhZ2Ugd2l0aCB0aGUgY3VycmVudCBldmVudC4gSGFuZGxpbmcgdGhlIGFjY3VtdWxhdGlvbiBvZiBtdWx0aXBsZSBtZXNzYWdlc1xuICAgKiB3aWxsIGJlIG5lZWRlZCB0byBiZSBoYW5kbGVkIGJ5IHRoZSBjYWxsZXIsIHRoaXMgbWV0aG9kIHdpbGwgdGhyb3cgaWYgeW91IHRyeSB0byBhY2N1bXVsYXRlIGZvciBtdWx0aXBsZVxuICAgKiBtZXNzYWdlcy5cbiAgICovXG4gICNhY2N1bXVsYXRlTWVzc2FnZShldmVudDogTWVzc2FnZVN0cmVhbUV2ZW50KTogTWVzc2FnZSB7XG4gICAgbGV0IHNuYXBzaG90ID0gdGhpcy4jY3VycmVudE1lc3NhZ2VTbmFwc2hvdDtcblxuICAgIGlmIChldmVudC50eXBlID09PSAnbWVzc2FnZV9zdGFydCcpIHtcbiAgICAgIGlmIChzbmFwc2hvdCkge1xuICAgICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYFVuZXhwZWN0ZWQgZXZlbnQgb3JkZXIsIGdvdCAke2V2ZW50LnR5cGV9IGJlZm9yZSByZWNlaXZpbmcgXCJtZXNzYWdlX3N0b3BcImApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGV2ZW50Lm1lc3NhZ2U7XG4gICAgfVxuXG4gICAgaWYgKCFzbmFwc2hvdCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBVbmV4cGVjdGVkIGV2ZW50IG9yZGVyLCBnb3QgJHtldmVudC50eXBlfSBiZWZvcmUgXCJtZXNzYWdlX3N0YXJ0XCJgKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgJ21lc3NhZ2Vfc3RvcCc6XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICAgIGNhc2UgJ21lc3NhZ2VfZGVsdGEnOlxuICAgICAgICBzbmFwc2hvdC5zdG9wX3JlYXNvbiA9IGV2ZW50LmRlbHRhLnN0b3BfcmVhc29uO1xuICAgICAgICBzbmFwc2hvdC5zdG9wX3NlcXVlbmNlID0gZXZlbnQuZGVsdGEuc3RvcF9zZXF1ZW5jZTtcbiAgICAgICAgc25hcHNob3QudXNhZ2Uub3V0cHV0X3Rva2VucyA9IGV2ZW50LnVzYWdlLm91dHB1dF90b2tlbnM7XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfc3RhcnQnOlxuICAgICAgICBzbmFwc2hvdC5jb250ZW50LnB1c2goZXZlbnQuY29udGVudF9ibG9jayk7XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfZGVsdGEnOiB7XG4gICAgICAgIGNvbnN0IHNuYXBzaG90Q29udGVudCA9IHNuYXBzaG90LmNvbnRlbnQuYXQoZXZlbnQuaW5kZXgpO1xuICAgICAgICBpZiAoc25hcHNob3RDb250ZW50Py50eXBlID09PSAndGV4dCcgJiYgZXZlbnQuZGVsdGEudHlwZSA9PT0gJ3RleHRfZGVsdGEnKSB7XG4gICAgICAgICAgc25hcHNob3RDb250ZW50LnRleHQgKz0gZXZlbnQuZGVsdGEudGV4dDtcbiAgICAgICAgfSBlbHNlIGlmIChzbmFwc2hvdENvbnRlbnQ/LnR5cGUgPT09ICd0b29sX3VzZScgJiYgZXZlbnQuZGVsdGEudHlwZSA9PT0gJ2lucHV0X2pzb25fZGVsdGEnKSB7XG4gICAgICAgICAgLy8gd2UgbmVlZCB0byBrZWVwIHRyYWNrIG9mIHRoZSByYXcgSlNPTiBzdHJpbmcgYXMgd2VsbCBzbyB0aGF0IHdlIGNhblxuICAgICAgICAgIC8vIHJlLXBhcnNlIGl0IGZvciBlYWNoIGRlbHRhLCBmb3Igbm93IHdlIGp1c3Qgc3RvcmUgaXQgYXMgYW4gdW50eXBlZFxuICAgICAgICAgIC8vIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5IG9uIHRoZSBzbmFwc2hvdFxuICAgICAgICAgIGxldCBqc29uQnVmID0gKHNuYXBzaG90Q29udGVudCBhcyBhbnkpW0pTT05fQlVGX1BST1BFUlRZXSB8fCAnJztcbiAgICAgICAgICBqc29uQnVmICs9IGV2ZW50LmRlbHRhLnBhcnRpYWxfanNvbjtcblxuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzbmFwc2hvdENvbnRlbnQsIEpTT05fQlVGX1BST1BFUlRZLCB7XG4gICAgICAgICAgICB2YWx1ZToganNvbkJ1ZixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoanNvbkJ1Zikge1xuICAgICAgICAgICAgc25hcHNob3RDb250ZW50LmlucHV0ID0gcGFydGlhbFBhcnNlKGpzb25CdWYpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc25hcHNob3Q7XG4gICAgICB9XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX3N0b3AnOlxuICAgICAgICByZXR1cm4gc25hcHNob3Q7XG4gICAgfVxuICB9XG5cbiAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0l0ZXJhdG9yPE1lc3NhZ2VTdHJlYW1FdmVudD4ge1xuICAgIGNvbnN0IHB1c2hRdWV1ZTogTWVzc2FnZVN0cmVhbUV2ZW50W10gPSBbXTtcbiAgICBjb25zdCByZWFkUXVldWU6IHtcbiAgICAgIHJlc29sdmU6IChjaHVuazogTWVzc2FnZVN0cmVhbUV2ZW50IHwgdW5kZWZpbmVkKSA9PiB2b2lkO1xuICAgICAgcmVqZWN0OiAoZXJyb3I6IHVua25vd24pID0+IHZvaWQ7XG4gICAgfVtdID0gW107XG4gICAgbGV0IGRvbmUgPSBmYWxzZTtcblxuICAgIHRoaXMub24oJ3N0cmVhbUV2ZW50JywgKGV2ZW50KSA9PiB7XG4gICAgICBjb25zdCByZWFkZXIgPSByZWFkUXVldWUuc2hpZnQoKTtcbiAgICAgIGlmIChyZWFkZXIpIHtcbiAgICAgICAgcmVhZGVyLnJlc29sdmUoZXZlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHVzaFF1ZXVlLnB1c2goZXZlbnQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5vbignZW5kJywgKCkgPT4ge1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICBmb3IgKGNvbnN0IHJlYWRlciBvZiByZWFkUXVldWUpIHtcbiAgICAgICAgcmVhZGVyLnJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgIH1cbiAgICAgIHJlYWRRdWV1ZS5sZW5ndGggPSAwO1xuICAgIH0pO1xuXG4gICAgdGhpcy5vbignYWJvcnQnLCAoZXJyKSA9PiB7XG4gICAgICBkb25lID0gdHJ1ZTtcbiAgICAgIGZvciAoY29uc3QgcmVhZGVyIG9mIHJlYWRRdWV1ZSkge1xuICAgICAgICByZWFkZXIucmVqZWN0KGVycik7XG4gICAgICB9XG4gICAgICByZWFkUXVldWUubGVuZ3RoID0gMDtcbiAgICB9KTtcblxuICAgIHRoaXMub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICBmb3IgKGNvbnN0IHJlYWRlciBvZiByZWFkUXVldWUpIHtcbiAgICAgICAgcmVhZGVyLnJlamVjdChlcnIpO1xuICAgICAgfVxuICAgICAgcmVhZFF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbmV4dDogYXN5bmMgKCk6IFByb21pc2U8SXRlcmF0b3JSZXN1bHQ8TWVzc2FnZVN0cmVhbUV2ZW50Pj4gPT4ge1xuICAgICAgICBpZiAoIXB1c2hRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8TWVzc2FnZVN0cmVhbUV2ZW50IHwgdW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PlxuICAgICAgICAgICAgcmVhZFF1ZXVlLnB1c2goeyByZXNvbHZlLCByZWplY3QgfSksXG4gICAgICAgICAgKS50aGVuKChjaHVuaykgPT4gKGNodW5rID8geyB2YWx1ZTogY2h1bmssIGRvbmU6IGZhbHNlIH0gOiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNodW5rID0gcHVzaFF1ZXVlLnNoaWZ0KCkhO1xuICAgICAgICByZXR1cm4geyB2YWx1ZTogY2h1bmssIGRvbmU6IGZhbHNlIH07XG4gICAgICB9LFxuICAgICAgcmV0dXJuOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRoaXMuYWJvcnQoKTtcbiAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgdG9SZWFkYWJsZVN0cmVhbSgpOiBSZWFkYWJsZVN0cmVhbSB7XG4gICAgY29uc3Qgc3RyZWFtID0gbmV3IFN0cmVhbSh0aGlzW1N5bWJvbC5hc3luY0l0ZXJhdG9yXS5iaW5kKHRoaXMpLCB0aGlzLmNvbnRyb2xsZXIpO1xuICAgIHJldHVybiBzdHJlYW0udG9SZWFkYWJsZVN0cmVhbSgpO1xuICB9XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tIFwiLi4vcmVzb3VyY2UuanNcIjtcbmltcG9ydCB7IEFQSVByb21pc2UgfSBmcm9tIFwiLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgTWVzc2FnZXNBUEkgZnJvbSBcIi4vbWVzc2FnZXMuanNcIjtcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gXCIuLi9zdHJlYW1pbmcuanNcIjtcbmltcG9ydCB7IE1lc3NhZ2VTdHJlYW0gfSBmcm9tIFwiLi4vbGliL01lc3NhZ2VTdHJlYW0uanNcIjtcblxuZXhwb3J0IHsgTWVzc2FnZVN0cmVhbSB9IGZyb20gXCIuLi9saWIvTWVzc2FnZVN0cmVhbS5qc1wiO1xuXG5leHBvcnQgY2xhc3MgTWVzc2FnZXMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBTZW5kIGEgc3RydWN0dXJlZCBsaXN0IG9mIGlucHV0IG1lc3NhZ2VzIHdpdGggdGV4dCBhbmQvb3IgaW1hZ2UgY29udGVudCwgYW5kIHRoZVxuICAgKiBtb2RlbCB3aWxsIGdlbmVyYXRlIHRoZSBuZXh0IG1lc3NhZ2UgaW4gdGhlIGNvbnZlcnNhdGlvbi5cbiAgICpcbiAgICogVGhlIE1lc3NhZ2VzIEFQSSBjYW4gYmUgdXNlZCBmb3IgZWl0aGVyIHNpbmdsZSBxdWVyaWVzIG9yIHN0YXRlbGVzcyBtdWx0aS10dXJuXG4gICAqIGNvbnZlcnNhdGlvbnMuXG4gICAqL1xuICBjcmVhdGUoYm9keTogTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBBUElQcm9taXNlPE1lc3NhZ2U+O1xuICBjcmVhdGUoXG4gICAgYm9keTogTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08UmF3TWVzc2FnZVN0cmVhbUV2ZW50Pj47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08UmF3TWVzc2FnZVN0cmVhbUV2ZW50PiB8IE1lc3NhZ2U+O1xuICBjcmVhdGUoXG4gICAgYm9keTogTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxNZXNzYWdlPiB8IEFQSVByb21pc2U8U3RyZWFtPFJhd01lc3NhZ2VTdHJlYW1FdmVudD4+IHtcbiAgICBpZiAoYm9keS5tb2RlbCBpbiBERVBSRUNBVEVEX01PREVMUykge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgVGhlIG1vZGVsICcke2JvZHkubW9kZWx9JyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIHJlYWNoIGVuZC1vZi1saWZlIG9uICR7XG4gICAgICAgICAgREVQUkVDQVRFRF9NT0RFTFNbYm9keS5tb2RlbF1cbiAgICAgICAgfVxcblBsZWFzZSBtaWdyYXRlIHRvIGEgbmV3ZXIgbW9kZWwuIFZpc2l0IGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvcmVzb3VyY2VzL21vZGVsLWRlcHJlY2F0aW9ucyBmb3IgbW9yZSBpbmZvcm1hdGlvbi5gLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5wb3N0KCcvdjEvbWVzc2FnZXMnLCB7XG4gICAgICBib2R5LFxuICAgICAgdGltZW91dDogKHRoaXMuX2NsaWVudCBhcyBhbnkpLl9vcHRpb25zLnRpbWVvdXQgPz8gNjAwMDAwLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIHN0cmVhbTogYm9keS5zdHJlYW0gPz8gZmFsc2UsXG4gICAgfSkgYXMgQVBJUHJvbWlzZTxNZXNzYWdlPiB8IEFQSVByb21pc2U8U3RyZWFtPFJhd01lc3NhZ2VTdHJlYW1FdmVudD4+O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIE1lc3NhZ2Ugc3RyZWFtXG4gICAqL1xuICBzdHJlYW0oYm9keTogTWVzc2FnZVN0cmVhbVBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBNZXNzYWdlU3RyZWFtIHtcbiAgICByZXR1cm4gTWVzc2FnZVN0cmVhbS5jcmVhdGVNZXNzYWdlKHRoaXMsIGJvZHksIG9wdGlvbnMpO1xuICB9XG59XG5cbmV4cG9ydCB0eXBlIENvbnRlbnRCbG9jayA9IFRleHRCbG9jayB8IFRvb2xVc2VCbG9jaztcblxuZXhwb3J0IHR5cGUgQ29udGVudEJsb2NrRGVsdGFFdmVudCA9IFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQ7XG5cbmV4cG9ydCB0eXBlIENvbnRlbnRCbG9ja1N0YXJ0RXZlbnQgPSBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50O1xuXG5leHBvcnQgdHlwZSBDb250ZW50QmxvY2tTdG9wRXZlbnQgPSBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2VCbG9ja1BhcmFtIHtcbiAgc291cmNlOiBJbWFnZUJsb2NrUGFyYW0uU291cmNlO1xuXG4gIHR5cGU6ICdpbWFnZSc7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgSW1hZ2VCbG9ja1BhcmFtIHtcbiAgZXhwb3J0IGludGVyZmFjZSBTb3VyY2Uge1xuICAgIGRhdGE6IHN0cmluZztcblxuICAgIG1lZGlhX3R5cGU6ICdpbWFnZS9qcGVnJyB8ICdpbWFnZS9wbmcnIHwgJ2ltYWdlL2dpZicgfCAnaW1hZ2Uvd2VicCc7XG5cbiAgICB0eXBlOiAnYmFzZTY0JztcbiAgfVxufVxuXG5leHBvcnQgdHlwZSBJbnB1dEpzb25EZWx0YSA9IElucHV0SlNPTkRlbHRhO1xuXG5leHBvcnQgaW50ZXJmYWNlIElucHV0SlNPTkRlbHRhIHtcbiAgcGFydGlhbF9qc29uOiBzdHJpbmc7XG5cbiAgdHlwZTogJ2lucHV0X2pzb25fZGVsdGEnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2Uge1xuICAvKipcbiAgICogVW5pcXVlIG9iamVjdCBpZGVudGlmaWVyLlxuICAgKlxuICAgKiBUaGUgZm9ybWF0IGFuZCBsZW5ndGggb2YgSURzIG1heSBjaGFuZ2Ugb3ZlciB0aW1lLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogQ29udGVudCBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsLlxuICAgKlxuICAgKiBUaGlzIGlzIGFuIGFycmF5IG9mIGNvbnRlbnQgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGhhcyBhIGB0eXBlYCB0aGF0IGRldGVybWluZXNcbiAgICogaXRzIHNoYXBlLlxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFt7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiSGksIEknbSBDbGF1ZGUuXCIgfV1cbiAgICogYGBgXG4gICAqXG4gICAqIElmIHRoZSByZXF1ZXN0IGlucHV0IGBtZXNzYWdlc2AgZW5kZWQgd2l0aCBhbiBgYXNzaXN0YW50YCB0dXJuLCB0aGVuIHRoZVxuICAgKiByZXNwb25zZSBgY29udGVudGAgd2lsbCBjb250aW51ZSBkaXJlY3RseSBmcm9tIHRoYXQgbGFzdCB0dXJuLiBZb3UgY2FuIHVzZSB0aGlzXG4gICAqIHRvIGNvbnN0cmFpbiB0aGUgbW9kZWwncyBvdXRwdXQuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBpZiB0aGUgaW5wdXQgYG1lc3NhZ2VzYCB3ZXJlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCJXaGF0J3MgdGhlIEdyZWVrIG5hbWUgZm9yIFN1bj8gKEEpIFNvbCAoQikgSGVsaW9zIChDKSBTdW5cIlxuICAgKiAgIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJhc3Npc3RhbnRcIiwgXCJjb250ZW50XCI6IFwiVGhlIGJlc3QgYW5zd2VyIGlzIChcIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFRoZW4gdGhlIHJlc3BvbnNlIGBjb250ZW50YCBtaWdodCBiZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIkIpXCIgfV1cbiAgICogYGBgXG4gICAqL1xuICBjb250ZW50OiBBcnJheTxDb250ZW50QmxvY2s+O1xuXG4gIC8qKlxuICAgKiBUaGUgbW9kZWwgdGhhdCB3aWxsIGNvbXBsZXRlIHlvdXIgcHJvbXB0LlxcblxcblNlZVxuICAgKiBbbW9kZWxzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL21vZGVscy1vdmVydmlldykgZm9yIGFkZGl0aW9uYWxcbiAgICogZGV0YWlscyBhbmQgb3B0aW9ucy5cbiAgICovXG4gIG1vZGVsOiBNb2RlbDtcblxuICAvKipcbiAgICogQ29udmVyc2F0aW9uYWwgcm9sZSBvZiB0aGUgZ2VuZXJhdGVkIG1lc3NhZ2UuXG4gICAqXG4gICAqIFRoaXMgd2lsbCBhbHdheXMgYmUgYFwiYXNzaXN0YW50XCJgLlxuICAgKi9cbiAgcm9sZTogJ2Fzc2lzdGFudCc7XG5cbiAgLyoqXG4gICAqIFRoZSByZWFzb24gdGhhdCB3ZSBzdG9wcGVkLlxuICAgKlxuICAgKiBUaGlzIG1heSBiZSBvbmUgdGhlIGZvbGxvd2luZyB2YWx1ZXM6XG4gICAqXG4gICAqIC0gYFwiZW5kX3R1cm5cImA6IHRoZSBtb2RlbCByZWFjaGVkIGEgbmF0dXJhbCBzdG9wcGluZyBwb2ludFxuICAgKiAtIGBcIm1heF90b2tlbnNcImA6IHdlIGV4Y2VlZGVkIHRoZSByZXF1ZXN0ZWQgYG1heF90b2tlbnNgIG9yIHRoZSBtb2RlbCdzIG1heGltdW1cbiAgICogLSBgXCJzdG9wX3NlcXVlbmNlXCJgOiBvbmUgb2YgeW91ciBwcm92aWRlZCBjdXN0b20gYHN0b3Bfc2VxdWVuY2VzYCB3YXMgZ2VuZXJhdGVkXG4gICAqIC0gYFwidG9vbF91c2VcImA6IHRoZSBtb2RlbCBpbnZva2VkIG9uZSBvciBtb3JlIHRvb2xzXG4gICAqXG4gICAqIEluIG5vbi1zdHJlYW1pbmcgbW9kZSB0aGlzIHZhbHVlIGlzIGFsd2F5cyBub24tbnVsbC4gSW4gc3RyZWFtaW5nIG1vZGUsIGl0IGlzXG4gICAqIG51bGwgaW4gdGhlIGBtZXNzYWdlX3N0YXJ0YCBldmVudCBhbmQgbm9uLW51bGwgb3RoZXJ3aXNlLlxuICAgKi9cbiAgc3RvcF9yZWFzb246ICdlbmRfdHVybicgfCAnbWF4X3Rva2VucycgfCAnc3RvcF9zZXF1ZW5jZScgfCAndG9vbF91c2UnIHwgbnVsbDtcblxuICAvKipcbiAgICogV2hpY2ggY3VzdG9tIHN0b3Agc2VxdWVuY2Ugd2FzIGdlbmVyYXRlZCwgaWYgYW55LlxuICAgKlxuICAgKiBUaGlzIHZhbHVlIHdpbGwgYmUgYSBub24tbnVsbCBzdHJpbmcgaWYgb25lIG9mIHlvdXIgY3VzdG9tIHN0b3Agc2VxdWVuY2VzIHdhc1xuICAgKiBnZW5lcmF0ZWQuXG4gICAqL1xuICBzdG9wX3NlcXVlbmNlOiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBPYmplY3QgdHlwZS5cbiAgICpcbiAgICogRm9yIE1lc3NhZ2VzLCB0aGlzIGlzIGFsd2F5cyBgXCJtZXNzYWdlXCJgLlxuICAgKi9cbiAgdHlwZTogJ21lc3NhZ2UnO1xuXG4gIC8qKlxuICAgKiBCaWxsaW5nIGFuZCByYXRlLWxpbWl0IHVzYWdlLlxuICAgKlxuICAgKiBBbnRocm9waWMncyBBUEkgYmlsbHMgYW5kIHJhdGUtbGltaXRzIGJ5IHRva2VuIGNvdW50cywgYXMgdG9rZW5zIHJlcHJlc2VudCB0aGVcbiAgICogdW5kZXJseWluZyBjb3N0IHRvIG91ciBzeXN0ZW1zLlxuICAgKlxuICAgKiBVbmRlciB0aGUgaG9vZCwgdGhlIEFQSSB0cmFuc2Zvcm1zIHJlcXVlc3RzIGludG8gYSBmb3JtYXQgc3VpdGFibGUgZm9yIHRoZVxuICAgKiBtb2RlbC4gVGhlIG1vZGVsJ3Mgb3V0cHV0IHRoZW4gZ29lcyB0aHJvdWdoIGEgcGFyc2luZyBzdGFnZSBiZWZvcmUgYmVjb21pbmcgYW5cbiAgICogQVBJIHJlc3BvbnNlLiBBcyBhIHJlc3VsdCwgdGhlIHRva2VuIGNvdW50cyBpbiBgdXNhZ2VgIHdpbGwgbm90IG1hdGNoIG9uZS10by1vbmVcbiAgICogd2l0aCB0aGUgZXhhY3QgdmlzaWJsZSBjb250ZW50IG9mIGFuIEFQSSByZXF1ZXN0IG9yIHJlc3BvbnNlLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgYG91dHB1dF90b2tlbnNgIHdpbGwgYmUgbm9uLXplcm8sIGV2ZW4gZm9yIGFuIGVtcHR5IHN0cmluZyByZXNwb25zZVxuICAgKiBmcm9tIENsYXVkZS5cbiAgICovXG4gIHVzYWdlOiBVc2FnZTtcbn1cblxuZXhwb3J0IHR5cGUgTWVzc2FnZURlbHRhRXZlbnQgPSBSYXdNZXNzYWdlRGVsdGFFdmVudDtcblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlRGVsdGFVc2FnZSB7XG4gIC8qKlxuICAgKiBUaGUgY3VtdWxhdGl2ZSBudW1iZXIgb2Ygb3V0cHV0IHRva2VucyB3aGljaCB3ZXJlIHVzZWQuXG4gICAqL1xuICBvdXRwdXRfdG9rZW5zOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZVBhcmFtIHtcbiAgY29udGVudDogc3RyaW5nIHwgQXJyYXk8VGV4dEJsb2NrUGFyYW0gfCBJbWFnZUJsb2NrUGFyYW0gfCBUb29sVXNlQmxvY2tQYXJhbSB8IFRvb2xSZXN1bHRCbG9ja1BhcmFtPjtcblxuICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50Jztcbn1cblxuZXhwb3J0IHR5cGUgTWVzc2FnZVN0YXJ0RXZlbnQgPSBSYXdNZXNzYWdlU3RhcnRFdmVudDtcblxuZXhwb3J0IHR5cGUgTWVzc2FnZVN0b3BFdmVudCA9IFJhd01lc3NhZ2VTdG9wRXZlbnQ7XG5cbmV4cG9ydCB0eXBlIE1lc3NhZ2VTdHJlYW1FdmVudCA9IFJhd01lc3NhZ2VTdHJlYW1FdmVudDtcblxuZXhwb3J0IGludGVyZmFjZSBNZXRhZGF0YSB7XG4gIC8qKlxuICAgKiBBbiBleHRlcm5hbCBpZGVudGlmaWVyIGZvciB0aGUgdXNlciB3aG8gaXMgYXNzb2NpYXRlZCB3aXRoIHRoZSByZXF1ZXN0LlxuICAgKlxuICAgKiBUaGlzIHNob3VsZCBiZSBhIHV1aWQsIGhhc2ggdmFsdWUsIG9yIG90aGVyIG9wYXF1ZSBpZGVudGlmaWVyLiBBbnRocm9waWMgbWF5IHVzZVxuICAgKiB0aGlzIGlkIHRvIGhlbHAgZGV0ZWN0IGFidXNlLiBEbyBub3QgaW5jbHVkZSBhbnkgaWRlbnRpZnlpbmcgaW5mb3JtYXRpb24gc3VjaCBhc1xuICAgKiBuYW1lLCBlbWFpbCBhZGRyZXNzLCBvciBwaG9uZSBudW1iZXIuXG4gICAqL1xuICB1c2VyX2lkPzogc3RyaW5nIHwgbnVsbDtcbn1cblxuLyoqXG4gKiBUaGUgbW9kZWwgdGhhdCB3aWxsIGNvbXBsZXRlIHlvdXIgcHJvbXB0LlxcblxcblNlZVxuICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBhZGRpdGlvbmFsXG4gKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICovXG5leHBvcnQgdHlwZSBNb2RlbCA9XG4gIHwgKHN0cmluZyAmIHt9KVxuICB8ICdjbGF1ZGUtMy01LXNvbm5ldC1sYXRlc3QnXG4gIHwgJ2NsYXVkZS0zLTUtc29ubmV0LTIwMjQxMDIyJ1xuICB8ICdjbGF1ZGUtMy01LXNvbm5ldC0yMDI0MDYyMCdcbiAgfCAnY2xhdWRlLTMtb3B1cy1sYXRlc3QnXG4gIHwgJ2NsYXVkZS0zLW9wdXMtMjAyNDAyMjknXG4gIHwgJ2NsYXVkZS0zLXNvbm5ldC0yMDI0MDIyOSdcbiAgfCAnY2xhdWRlLTMtaGFpa3UtMjAyNDAzMDcnXG4gIHwgJ2NsYXVkZS0yLjEnXG4gIHwgJ2NsYXVkZS0yLjAnXG4gIHwgJ2NsYXVkZS1pbnN0YW50LTEuMic7XG5cbnR5cGUgRGVwcmVjYXRlZE1vZGVsc1R5cGUgPSB7XG4gIFtLIGluIE1vZGVsXT86IHN0cmluZztcbn07XG5cbmNvbnN0IERFUFJFQ0FURURfTU9ERUxTOiBEZXByZWNhdGVkTW9kZWxzVHlwZSA9IHtcbiAgJ2NsYXVkZS0xLjMnOiAnTm92ZW1iZXIgNnRoLCAyMDI0JyxcbiAgJ2NsYXVkZS0xLjMtMTAwayc6ICdOb3ZlbWJlciA2dGgsIDIwMjQnLFxuICAnY2xhdWRlLWluc3RhbnQtMS4xJzogJ05vdmVtYmVyIDZ0aCwgMjAyNCcsXG4gICdjbGF1ZGUtaW5zdGFudC0xLjEtMTAwayc6ICdOb3ZlbWJlciA2dGgsIDIwMjQnLFxuICAnY2xhdWRlLWluc3RhbnQtMS4yJzogJ05vdmVtYmVyIDZ0aCwgMjAyNCcsXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQge1xuICBkZWx0YTogVGV4dERlbHRhIHwgSW5wdXRKU09ORGVsdGE7XG5cbiAgaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19kZWx0YSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCB7XG4gIGNvbnRlbnRfYmxvY2s6IFRleHRCbG9jayB8IFRvb2xVc2VCbG9jaztcblxuICBpbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjb250ZW50X2Jsb2NrX3N0YXJ0Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQge1xuICBpbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjb250ZW50X2Jsb2NrX3N0b3AnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhd01lc3NhZ2VEZWx0YUV2ZW50IHtcbiAgZGVsdGE6IFJhd01lc3NhZ2VEZWx0YUV2ZW50LkRlbHRhO1xuXG4gIHR5cGU6ICdtZXNzYWdlX2RlbHRhJztcblxuICAvKipcbiAgICogQmlsbGluZyBhbmQgcmF0ZS1saW1pdCB1c2FnZS5cbiAgICpcbiAgICogQW50aHJvcGljJ3MgQVBJIGJpbGxzIGFuZCByYXRlLWxpbWl0cyBieSB0b2tlbiBjb3VudHMsIGFzIHRva2VucyByZXByZXNlbnQgdGhlXG4gICAqIHVuZGVybHlpbmcgY29zdCB0byBvdXIgc3lzdGVtcy5cbiAgICpcbiAgICogVW5kZXIgdGhlIGhvb2QsIHRoZSBBUEkgdHJhbnNmb3JtcyByZXF1ZXN0cyBpbnRvIGEgZm9ybWF0IHN1aXRhYmxlIGZvciB0aGVcbiAgICogbW9kZWwuIFRoZSBtb2RlbCdzIG91dHB1dCB0aGVuIGdvZXMgdGhyb3VnaCBhIHBhcnNpbmcgc3RhZ2UgYmVmb3JlIGJlY29taW5nIGFuXG4gICAqIEFQSSByZXNwb25zZS4gQXMgYSByZXN1bHQsIHRoZSB0b2tlbiBjb3VudHMgaW4gYHVzYWdlYCB3aWxsIG5vdCBtYXRjaCBvbmUtdG8tb25lXG4gICAqIHdpdGggdGhlIGV4YWN0IHZpc2libGUgY29udGVudCBvZiBhbiBBUEkgcmVxdWVzdCBvciByZXNwb25zZS5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGBvdXRwdXRfdG9rZW5zYCB3aWxsIGJlIG5vbi16ZXJvLCBldmVuIGZvciBhbiBlbXB0eSBzdHJpbmcgcmVzcG9uc2VcbiAgICogZnJvbSBDbGF1ZGUuXG4gICAqL1xuICB1c2FnZTogTWVzc2FnZURlbHRhVXNhZ2U7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgUmF3TWVzc2FnZURlbHRhRXZlbnQge1xuICBleHBvcnQgaW50ZXJmYWNlIERlbHRhIHtcbiAgICBzdG9wX3JlYXNvbjogJ2VuZF90dXJuJyB8ICdtYXhfdG9rZW5zJyB8ICdzdG9wX3NlcXVlbmNlJyB8ICd0b29sX3VzZScgfCBudWxsO1xuXG4gICAgc3RvcF9zZXF1ZW5jZTogc3RyaW5nIHwgbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhd01lc3NhZ2VTdGFydEV2ZW50IHtcbiAgbWVzc2FnZTogTWVzc2FnZTtcblxuICB0eXBlOiAnbWVzc2FnZV9zdGFydCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmF3TWVzc2FnZVN0b3BFdmVudCB7XG4gIHR5cGU6ICdtZXNzYWdlX3N0b3AnO1xufVxuXG5leHBvcnQgdHlwZSBSYXdNZXNzYWdlU3RyZWFtRXZlbnQgPVxuICB8IFJhd01lc3NhZ2VTdGFydEV2ZW50XG4gIHwgUmF3TWVzc2FnZURlbHRhRXZlbnRcbiAgfCBSYXdNZXNzYWdlU3RvcEV2ZW50XG4gIHwgUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudFxuICB8IFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnRcbiAgfCBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dEJsb2NrIHtcbiAgdGV4dDogc3RyaW5nO1xuXG4gIHR5cGU6ICd0ZXh0Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUZXh0QmxvY2tQYXJhbSB7XG4gIHRleHQ6IHN0cmluZztcblxuICB0eXBlOiAndGV4dCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dERlbHRhIHtcbiAgdGV4dDogc3RyaW5nO1xuXG4gIHR5cGU6ICd0ZXh0X2RlbHRhJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUb29sIHtcbiAgLyoqXG4gICAqIFtKU09OIHNjaGVtYV0oaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvKSBmb3IgdGhpcyB0b29sJ3MgaW5wdXQuXG4gICAqXG4gICAqIFRoaXMgZGVmaW5lcyB0aGUgc2hhcGUgb2YgdGhlIGBpbnB1dGAgdGhhdCB5b3VyIHRvb2wgYWNjZXB0cyBhbmQgdGhhdCB0aGUgbW9kZWxcbiAgICogd2lsbCBwcm9kdWNlLlxuICAgKi9cbiAgaW5wdXRfc2NoZW1hOiBUb29sLklucHV0U2NoZW1hO1xuXG4gIC8qKlxuICAgKiBOYW1lIG9mIHRoZSB0b29sLlxuICAgKlxuICAgKiBUaGlzIGlzIGhvdyB0aGUgdG9vbCB3aWxsIGJlIGNhbGxlZCBieSB0aGUgbW9kZWwgYW5kIGluIHRvb2xfdXNlIGJsb2Nrcy5cbiAgICovXG4gIG5hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogRGVzY3JpcHRpb24gb2Ygd2hhdCB0aGlzIHRvb2wgZG9lcy5cbiAgICpcbiAgICogVG9vbCBkZXNjcmlwdGlvbnMgc2hvdWxkIGJlIGFzIGRldGFpbGVkIGFzIHBvc3NpYmxlLiBUaGUgbW9yZSBpbmZvcm1hdGlvbiB0aGF0XG4gICAqIHRoZSBtb2RlbCBoYXMgYWJvdXQgd2hhdCB0aGUgdG9vbCBpcyBhbmQgaG93IHRvIHVzZSBpdCwgdGhlIGJldHRlciBpdCB3aWxsXG4gICAqIHBlcmZvcm0uIFlvdSBjYW4gdXNlIG5hdHVyYWwgbGFuZ3VhZ2UgZGVzY3JpcHRpb25zIHRvIHJlaW5mb3JjZSBpbXBvcnRhbnRcbiAgICogYXNwZWN0cyBvZiB0aGUgdG9vbCBpbnB1dCBKU09OIHNjaGVtYS5cbiAgICovXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIFRvb2wge1xuICAvKipcbiAgICogW0pTT04gc2NoZW1hXShodHRwczovL2pzb24tc2NoZW1hLm9yZy8pIGZvciB0aGlzIHRvb2wncyBpbnB1dC5cbiAgICpcbiAgICogVGhpcyBkZWZpbmVzIHRoZSBzaGFwZSBvZiB0aGUgYGlucHV0YCB0aGF0IHlvdXIgdG9vbCBhY2NlcHRzIGFuZCB0aGF0IHRoZSBtb2RlbFxuICAgKiB3aWxsIHByb2R1Y2UuXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIElucHV0U2NoZW1hIHtcbiAgICB0eXBlOiAnb2JqZWN0JztcblxuICAgIHByb3BlcnRpZXM/OiB1bmtub3duIHwgbnVsbDtcbiAgICBbazogc3RyaW5nXTogdW5rbm93bjtcbiAgfVxufVxuXG4vKipcbiAqIEhvdyB0aGUgbW9kZWwgc2hvdWxkIHVzZSB0aGUgcHJvdmlkZWQgdG9vbHMuIFRoZSBtb2RlbCBjYW4gdXNlIGEgc3BlY2lmaWMgdG9vbCxcbiAqIGFueSBhdmFpbGFibGUgdG9vbCwgb3IgZGVjaWRlIGJ5IGl0c2VsZi5cbiAqL1xuZXhwb3J0IHR5cGUgVG9vbENob2ljZSA9IFRvb2xDaG9pY2VBdXRvIHwgVG9vbENob2ljZUFueSB8IFRvb2xDaG9pY2VUb29sO1xuXG4vKipcbiAqIFRoZSBtb2RlbCB3aWxsIHVzZSBhbnkgYXZhaWxhYmxlIHRvb2xzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xDaG9pY2VBbnkge1xuICB0eXBlOiAnYW55JztcblxuICAvKipcbiAgICogV2hldGhlciB0byBkaXNhYmxlIHBhcmFsbGVsIHRvb2wgdXNlLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgZmFsc2VgLiBJZiBzZXQgdG8gYHRydWVgLCB0aGUgbW9kZWwgd2lsbCBvdXRwdXQgZXhhY3RseSBvbmUgdG9vbFxuICAgKiB1c2UuXG4gICAqL1xuICBkaXNhYmxlX3BhcmFsbGVsX3Rvb2xfdXNlPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBUaGUgbW9kZWwgd2lsbCBhdXRvbWF0aWNhbGx5IGRlY2lkZSB3aGV0aGVyIHRvIHVzZSB0b29scy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUb29sQ2hvaWNlQXV0byB7XG4gIHR5cGU6ICdhdXRvJztcblxuICAvKipcbiAgICogV2hldGhlciB0byBkaXNhYmxlIHBhcmFsbGVsIHRvb2wgdXNlLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgZmFsc2VgLiBJZiBzZXQgdG8gYHRydWVgLCB0aGUgbW9kZWwgd2lsbCBvdXRwdXQgYXQgbW9zdCBvbmUgdG9vbFxuICAgKiB1c2UuXG4gICAqL1xuICBkaXNhYmxlX3BhcmFsbGVsX3Rvb2xfdXNlPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBUaGUgbW9kZWwgd2lsbCB1c2UgdGhlIHNwZWNpZmllZCB0b29sIHdpdGggYHRvb2xfY2hvaWNlLm5hbWVgLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xDaG9pY2VUb29sIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSB0b29sIHRvIHVzZS5cbiAgICovXG4gIG5hbWU6IHN0cmluZztcblxuICB0eXBlOiAndG9vbCc7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZGlzYWJsZSBwYXJhbGxlbCB0b29sIHVzZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYGZhbHNlYC4gSWYgc2V0IHRvIGB0cnVlYCwgdGhlIG1vZGVsIHdpbGwgb3V0cHV0IGV4YWN0bHkgb25lIHRvb2xcbiAgICogdXNlLlxuICAgKi9cbiAgZGlzYWJsZV9wYXJhbGxlbF90b29sX3VzZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbFJlc3VsdEJsb2NrUGFyYW0ge1xuICB0b29sX3VzZV9pZDogc3RyaW5nO1xuXG4gIHR5cGU6ICd0b29sX3Jlc3VsdCc7XG5cbiAgY29udGVudD86IHN0cmluZyB8IEFycmF5PFRleHRCbG9ja1BhcmFtIHwgSW1hZ2VCbG9ja1BhcmFtPjtcblxuICBpc19lcnJvcj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbFVzZUJsb2NrIHtcbiAgaWQ6IHN0cmluZztcblxuICBpbnB1dDogdW5rbm93bjtcblxuICBuYW1lOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3Rvb2xfdXNlJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUb29sVXNlQmxvY2tQYXJhbSB7XG4gIGlkOiBzdHJpbmc7XG5cbiAgaW5wdXQ6IHVua25vd247XG5cbiAgbmFtZTogc3RyaW5nO1xuXG4gIHR5cGU6ICd0b29sX3VzZSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNhZ2Uge1xuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbnB1dCB0b2tlbnMgd2hpY2ggd2VyZSB1c2VkLlxuICAgKi9cbiAgaW5wdXRfdG9rZW5zOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2Ygb3V0cHV0IHRva2VucyB3aGljaCB3ZXJlIHVzZWQuXG4gICAqL1xuICBvdXRwdXRfdG9rZW5zOiBudW1iZXI7XG59XG5cbmV4cG9ydCB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXMgPSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIHwgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZztcblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIHRvIGdlbmVyYXRlIGJlZm9yZSBzdG9wcGluZy5cbiAgICpcbiAgICogTm90ZSB0aGF0IG91ciBtb2RlbHMgbWF5IHN0b3AgX2JlZm9yZV8gcmVhY2hpbmcgdGhpcyBtYXhpbXVtLiBUaGlzIHBhcmFtZXRlclxuICAgKiBvbmx5IHNwZWNpZmllcyB0aGUgYWJzb2x1dGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIHRvIGdlbmVyYXRlLlxuICAgKlxuICAgKiBEaWZmZXJlbnQgbW9kZWxzIGhhdmUgZGlmZmVyZW50IG1heGltdW0gdmFsdWVzIGZvciB0aGlzIHBhcmFtZXRlci4gU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgZGV0YWlscy5cbiAgICovXG4gIG1heF90b2tlbnM6IG51bWJlcjtcblxuICAvKipcbiAgICogSW5wdXQgbWVzc2FnZXMuXG4gICAqXG4gICAqIE91ciBtb2RlbHMgYXJlIHRyYWluZWQgdG8gb3BlcmF0ZSBvbiBhbHRlcm5hdGluZyBgdXNlcmAgYW5kIGBhc3Npc3RhbnRgXG4gICAqIGNvbnZlcnNhdGlvbmFsIHR1cm5zLiBXaGVuIGNyZWF0aW5nIGEgbmV3IGBNZXNzYWdlYCwgeW91IHNwZWNpZnkgdGhlIHByaW9yXG4gICAqIGNvbnZlcnNhdGlvbmFsIHR1cm5zIHdpdGggdGhlIGBtZXNzYWdlc2AgcGFyYW1ldGVyLCBhbmQgdGhlIG1vZGVsIHRoZW4gZ2VuZXJhdGVzXG4gICAqIHRoZSBuZXh0IGBNZXNzYWdlYCBpbiB0aGUgY29udmVyc2F0aW9uLiBDb25zZWN1dGl2ZSBgdXNlcmAgb3IgYGFzc2lzdGFudGAgdHVybnNcbiAgICogaW4geW91ciByZXF1ZXN0IHdpbGwgYmUgY29tYmluZWQgaW50byBhIHNpbmdsZSB0dXJuLlxuICAgKlxuICAgKiBFYWNoIGlucHV0IG1lc3NhZ2UgbXVzdCBiZSBhbiBvYmplY3Qgd2l0aCBhIGByb2xlYCBhbmQgYGNvbnRlbnRgLiBZb3UgY2FuXG4gICAqIHNwZWNpZnkgYSBzaW5nbGUgYHVzZXJgLXJvbGUgbWVzc2FnZSwgb3IgeW91IGNhbiBpbmNsdWRlIG11bHRpcGxlIGB1c2VyYCBhbmRcbiAgICogYGFzc2lzdGFudGAgbWVzc2FnZXMuXG4gICAqXG4gICAqIElmIHRoZSBmaW5hbCBtZXNzYWdlIHVzZXMgdGhlIGBhc3Npc3RhbnRgIHJvbGUsIHRoZSByZXNwb25zZSBjb250ZW50IHdpbGxcbiAgICogY29udGludWUgaW1tZWRpYXRlbHkgZnJvbSB0aGUgY29udGVudCBpbiB0aGF0IG1lc3NhZ2UuIFRoaXMgY2FuIGJlIHVzZWQgdG9cbiAgICogY29uc3RyYWluIHBhcnQgb2YgdGhlIG1vZGVsJ3MgcmVzcG9uc2UuXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBhIHNpbmdsZSBgdXNlcmAgbWVzc2FnZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XVxuICAgKiBgYGBcbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIG11bHRpcGxlIGNvbnZlcnNhdGlvbmFsIHR1cm5zOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8gdGhlcmUuXCIgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJIaSwgSSdtIENsYXVkZS4gSG93IGNhbiBJIGhlbHAgeW91P1wiIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkNhbiB5b3UgZXhwbGFpbiBMTE1zIGluIHBsYWluIEVuZ2xpc2g/XCIgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggYSBwYXJ0aWFsbHktZmlsbGVkIHJlc3BvbnNlIGZyb20gQ2xhdWRlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCJXaGF0J3MgdGhlIEdyZWVrIG5hbWUgZm9yIFN1bj8gKEEpIFNvbCAoQikgSGVsaW9zIChDKSBTdW5cIlxuICAgKiAgIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJhc3Npc3RhbnRcIiwgXCJjb250ZW50XCI6IFwiVGhlIGJlc3QgYW5zd2VyIGlzIChcIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEVhY2ggaW5wdXQgbWVzc2FnZSBgY29udGVudGAgbWF5IGJlIGVpdGhlciBhIHNpbmdsZSBgc3RyaW5nYCBvciBhbiBhcnJheSBvZlxuICAgKiBjb250ZW50IGJsb2Nrcywgd2hlcmUgZWFjaCBibG9jayBoYXMgYSBzcGVjaWZpYyBgdHlwZWAuIFVzaW5nIGEgYHN0cmluZ2AgZm9yXG4gICAqIGBjb250ZW50YCBpcyBzaG9ydGhhbmQgZm9yIGFuIGFycmF5IG9mIG9uZSBjb250ZW50IGJsb2NrIG9mIHR5cGUgYFwidGV4dFwiYC4gVGhlXG4gICAqIGZvbGxvd2luZyBpbnB1dCBtZXNzYWdlcyBhcmUgZXF1aXZhbGVudDpcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1cbiAgICogYGBgXG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBbeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XSB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBTdGFydGluZyB3aXRoIENsYXVkZSAzIG1vZGVscywgeW91IGNhbiBhbHNvIHNlbmQgaW1hZ2UgY29udGVudCBibG9ja3M6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICoge1xuICAgKiAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICBcImNvbnRlbnRcIjogW1xuICAgKiAgICAge1xuICAgKiAgICAgICBcInR5cGVcIjogXCJpbWFnZVwiLFxuICAgKiAgICAgICBcInNvdXJjZVwiOiB7XG4gICAqICAgICAgICAgXCJ0eXBlXCI6IFwiYmFzZTY0XCIsXG4gICAqICAgICAgICAgXCJtZWRpYV90eXBlXCI6IFwiaW1hZ2UvanBlZ1wiLFxuICAgKiAgICAgICAgIFwiZGF0YVwiOiBcIi85ai80QUFRU2taSlJnLi4uXCJcbiAgICogICAgICAgfVxuICAgKiAgICAgfSxcbiAgICogICAgIHsgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJXaGF0IGlzIGluIHRoaXMgaW1hZ2U/XCIgfVxuICAgKiAgIF1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogV2UgY3VycmVudGx5IHN1cHBvcnQgdGhlIGBiYXNlNjRgIHNvdXJjZSB0eXBlIGZvciBpbWFnZXMsIGFuZCB0aGUgYGltYWdlL2pwZWdgLFxuICAgKiBgaW1hZ2UvcG5nYCwgYGltYWdlL2dpZmAsIGFuZCBgaW1hZ2Uvd2VicGAgbWVkaWEgdHlwZXMuXG4gICAqXG4gICAqIFNlZSBbZXhhbXBsZXNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1leGFtcGxlcyN2aXNpb24pIGZvclxuICAgKiBtb3JlIGlucHV0IGV4YW1wbGVzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgaWYgeW91IHdhbnQgdG8gaW5jbHVkZSBhXG4gICAqIFtzeXN0ZW0gcHJvbXB0XShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3N5c3RlbS1wcm9tcHRzKSwgeW91IGNhbiB1c2VcbiAgICogdGhlIHRvcC1sZXZlbCBgc3lzdGVtYCBwYXJhbWV0ZXIgXHUyMDE0IHRoZXJlIGlzIG5vIGBcInN5c3RlbVwiYCByb2xlIGZvciBpbnB1dFxuICAgKiBtZXNzYWdlcyBpbiB0aGUgTWVzc2FnZXMgQVBJLlxuICAgKi9cbiAgbWVzc2FnZXM6IEFycmF5PE1lc3NhZ2VQYXJhbT47XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB0aGF0IHdpbGwgY29tcGxldGUgeW91ciBwcm9tcHQuXFxuXFxuU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICAgKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICAgKi9cbiAgbW9kZWw6IE1vZGVsO1xuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgZGVzY3JpYmluZyBtZXRhZGF0YSBhYm91dCB0aGUgcmVxdWVzdC5cbiAgICovXG4gIG1ldGFkYXRhPzogTWV0YWRhdGE7XG5cbiAgLyoqXG4gICAqIEN1c3RvbSB0ZXh0IHNlcXVlbmNlcyB0aGF0IHdpbGwgY2F1c2UgdGhlIG1vZGVsIHRvIHN0b3AgZ2VuZXJhdGluZy5cbiAgICpcbiAgICogT3VyIG1vZGVscyB3aWxsIG5vcm1hbGx5IHN0b3Agd2hlbiB0aGV5IGhhdmUgbmF0dXJhbGx5IGNvbXBsZXRlZCB0aGVpciB0dXJuLFxuICAgKiB3aGljaCB3aWxsIHJlc3VsdCBpbiBhIHJlc3BvbnNlIGBzdG9wX3JlYXNvbmAgb2YgYFwiZW5kX3R1cm5cImAuXG4gICAqXG4gICAqIElmIHlvdSB3YW50IHRoZSBtb2RlbCB0byBzdG9wIGdlbmVyYXRpbmcgd2hlbiBpdCBlbmNvdW50ZXJzIGN1c3RvbSBzdHJpbmdzIG9mXG4gICAqIHRleHQsIHlvdSBjYW4gdXNlIHRoZSBgc3RvcF9zZXF1ZW5jZXNgIHBhcmFtZXRlci4gSWYgdGhlIG1vZGVsIGVuY291bnRlcnMgb25lIG9mXG4gICAqIHRoZSBjdXN0b20gc2VxdWVuY2VzLCB0aGUgcmVzcG9uc2UgYHN0b3BfcmVhc29uYCB2YWx1ZSB3aWxsIGJlIGBcInN0b3Bfc2VxdWVuY2VcImBcbiAgICogYW5kIHRoZSByZXNwb25zZSBgc3RvcF9zZXF1ZW5jZWAgdmFsdWUgd2lsbCBjb250YWluIHRoZSBtYXRjaGVkIHN0b3Agc2VxdWVuY2UuXG4gICAqL1xuICBzdG9wX3NlcXVlbmNlcz86IEFycmF5PHN0cmluZz47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gaW5jcmVtZW50YWxseSBzdHJlYW0gdGhlIHJlc3BvbnNlIHVzaW5nIHNlcnZlci1zZW50IGV2ZW50cy5cbiAgICpcbiAgICogU2VlIFtzdHJlYW1pbmddKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1zdHJlYW1pbmcpIGZvclxuICAgKiBkZXRhaWxzLlxuICAgKi9cbiAgc3RyZWFtPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogU3lzdGVtIHByb21wdC5cbiAgICpcbiAgICogQSBzeXN0ZW0gcHJvbXB0IGlzIGEgd2F5IG9mIHByb3ZpZGluZyBjb250ZXh0IGFuZCBpbnN0cnVjdGlvbnMgdG8gQ2xhdWRlLCBzdWNoXG4gICAqIGFzIHNwZWNpZnlpbmcgYSBwYXJ0aWN1bGFyIGdvYWwgb3Igcm9sZS4gU2VlIG91clxuICAgKiBbZ3VpZGUgdG8gc3lzdGVtIHByb21wdHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3Mvc3lzdGVtLXByb21wdHMpLlxuICAgKi9cbiAgc3lzdGVtPzogc3RyaW5nIHwgQXJyYXk8VGV4dEJsb2NrUGFyYW0+O1xuXG4gIC8qKlxuICAgKiBBbW91bnQgb2YgcmFuZG9tbmVzcyBpbmplY3RlZCBpbnRvIHRoZSByZXNwb25zZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYDEuMGAuIFJhbmdlcyBmcm9tIGAwLjBgIHRvIGAxLjBgLiBVc2UgYHRlbXBlcmF0dXJlYCBjbG9zZXIgdG8gYDAuMGBcbiAgICogZm9yIGFuYWx5dGljYWwgLyBtdWx0aXBsZSBjaG9pY2UsIGFuZCBjbG9zZXIgdG8gYDEuMGAgZm9yIGNyZWF0aXZlIGFuZFxuICAgKiBnZW5lcmF0aXZlIHRhc2tzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgZXZlbiB3aXRoIGB0ZW1wZXJhdHVyZWAgb2YgYDAuMGAsIHRoZSByZXN1bHRzIHdpbGwgbm90IGJlIGZ1bGx5XG4gICAqIGRldGVybWluaXN0aWMuXG4gICAqL1xuICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcblxuICAvKipcbiAgICogSG93IHRoZSBtb2RlbCBzaG91bGQgdXNlIHRoZSBwcm92aWRlZCB0b29scy4gVGhlIG1vZGVsIGNhbiB1c2UgYSBzcGVjaWZpYyB0b29sLFxuICAgKiBhbnkgYXZhaWxhYmxlIHRvb2wsIG9yIGRlY2lkZSBieSBpdHNlbGYuXG4gICAqL1xuICB0b29sX2Nob2ljZT86IFRvb2xDaG9pY2U7XG5cbiAgLyoqXG4gICAqIERlZmluaXRpb25zIG9mIHRvb2xzIHRoYXQgdGhlIG1vZGVsIG1heSB1c2UuXG4gICAqXG4gICAqIElmIHlvdSBpbmNsdWRlIGB0b29sc2AgaW4geW91ciBBUEkgcmVxdWVzdCwgdGhlIG1vZGVsIG1heSByZXR1cm4gYHRvb2xfdXNlYFxuICAgKiBjb250ZW50IGJsb2NrcyB0aGF0IHJlcHJlc2VudCB0aGUgbW9kZWwncyB1c2Ugb2YgdGhvc2UgdG9vbHMuIFlvdSBjYW4gdGhlbiBydW5cbiAgICogdGhvc2UgdG9vbHMgdXNpbmcgdGhlIHRvb2wgaW5wdXQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBhbmQgdGhlbiBvcHRpb25hbGx5XG4gICAqIHJldHVybiByZXN1bHRzIGJhY2sgdG8gdGhlIG1vZGVsIHVzaW5nIGB0b29sX3Jlc3VsdGAgY29udGVudCBibG9ja3MuXG4gICAqXG4gICAqIEVhY2ggdG9vbCBkZWZpbml0aW9uIGluY2x1ZGVzOlxuICAgKlxuICAgKiAtIGBuYW1lYDogTmFtZSBvZiB0aGUgdG9vbC5cbiAgICogLSBgZGVzY3JpcHRpb25gOiBPcHRpb25hbCwgYnV0IHN0cm9uZ2x5LXJlY29tbWVuZGVkIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sLlxuICAgKiAtIGBpbnB1dF9zY2hlbWFgOiBbSlNPTiBzY2hlbWFdKGh0dHBzOi8vanNvbi1zY2hlbWEub3JnLykgZm9yIHRoZSB0b29sIGBpbnB1dGBcbiAgICogICBzaGFwZSB0aGF0IHRoZSBtb2RlbCB3aWxsIHByb2R1Y2UgaW4gYHRvb2xfdXNlYCBvdXRwdXQgY29udGVudCBibG9ja3MuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBpZiB5b3UgZGVmaW5lZCBgdG9vbHNgIGFzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcIm5hbWVcIjogXCJnZXRfc3RvY2tfcHJpY2VcIixcbiAgICogICAgIFwiZGVzY3JpcHRpb25cIjogXCJHZXQgdGhlIGN1cnJlbnQgc3RvY2sgcHJpY2UgZm9yIGEgZ2l2ZW4gdGlja2VyIHN5bWJvbC5cIixcbiAgICogICAgIFwiaW5wdXRfc2NoZW1hXCI6IHtcbiAgICogICAgICAgXCJ0eXBlXCI6IFwib2JqZWN0XCIsXG4gICAqICAgICAgIFwicHJvcGVydGllc1wiOiB7XG4gICAqICAgICAgICAgXCJ0aWNrZXJcIjoge1xuICAgKiAgICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXG4gICAqICAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIHN0b2NrIHRpY2tlciBzeW1ib2wsIGUuZy4gQUFQTCBmb3IgQXBwbGUgSW5jLlwiXG4gICAqICAgICAgICAgfVxuICAgKiAgICAgICB9LFxuICAgKiAgICAgICBcInJlcXVpcmVkXCI6IFtcInRpY2tlclwiXVxuICAgKiAgICAgfVxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogQW5kIHRoZW4gYXNrZWQgdGhlIG1vZGVsIFwiV2hhdCdzIHRoZSBTJlAgNTAwIGF0IHRvZGF5P1wiLCB0aGUgbW9kZWwgbWlnaHQgcHJvZHVjZVxuICAgKiBgdG9vbF91c2VgIGNvbnRlbnQgYmxvY2tzIGluIHRoZSByZXNwb25zZSBsaWtlIHRoaXM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwidHlwZVwiOiBcInRvb2xfdXNlXCIsXG4gICAqICAgICBcImlkXCI6IFwidG9vbHVfMDFEN0ZMcmZoNEdZcTd5VDFVTEZleU1WXCIsXG4gICAqICAgICBcIm5hbWVcIjogXCJnZXRfc3RvY2tfcHJpY2VcIixcbiAgICogICAgIFwiaW5wdXRcIjogeyBcInRpY2tlclwiOiBcIl5HU1BDXCIgfVxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogWW91IG1pZ2h0IHRoZW4gcnVuIHlvdXIgYGdldF9zdG9ja19wcmljZWAgdG9vbCB3aXRoIGB7XCJ0aWNrZXJcIjogXCJeR1NQQ1wifWAgYXMgYW5cbiAgICogaW5wdXQsIGFuZCByZXR1cm4gdGhlIGZvbGxvd2luZyBiYWNrIHRvIHRoZSBtb2RlbCBpbiBhIHN1YnNlcXVlbnQgYHVzZXJgXG4gICAqIG1lc3NhZ2U6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwidHlwZVwiOiBcInRvb2xfcmVzdWx0XCIsXG4gICAqICAgICBcInRvb2xfdXNlX2lkXCI6IFwidG9vbHVfMDFEN0ZMcmZoNEdZcTd5VDFVTEZleU1WXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCIyNTkuNzUgVVNEXCJcbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFRvb2xzIGNhbiBiZSB1c2VkIGZvciB3b3JrZmxvd3MgdGhhdCBpbmNsdWRlIHJ1bm5pbmcgY2xpZW50LXNpZGUgdG9vbHMgYW5kXG4gICAqIGZ1bmN0aW9ucywgb3IgbW9yZSBnZW5lcmFsbHkgd2hlbmV2ZXIgeW91IHdhbnQgdGhlIG1vZGVsIHRvIHByb2R1Y2UgYSBwYXJ0aWN1bGFyXG4gICAqIEpTT04gc3RydWN0dXJlIG9mIG91dHB1dC5cbiAgICpcbiAgICogU2VlIG91ciBbZ3VpZGVdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvdG9vbC11c2UpIGZvciBtb3JlIGRldGFpbHMuXG4gICAqL1xuICB0b29scz86IEFycmF5PFRvb2w+O1xuXG4gIC8qKlxuICAgKiBPbmx5IHNhbXBsZSBmcm9tIHRoZSB0b3AgSyBvcHRpb25zIGZvciBlYWNoIHN1YnNlcXVlbnQgdG9rZW4uXG4gICAqXG4gICAqIFVzZWQgdG8gcmVtb3ZlIFwibG9uZyB0YWlsXCIgbG93IHByb2JhYmlsaXR5IHJlc3BvbnNlcy5cbiAgICogW0xlYXJuIG1vcmUgdGVjaG5pY2FsIGRldGFpbHMgaGVyZV0oaHR0cHM6Ly90b3dhcmRzZGF0YXNjaWVuY2UuY29tL2hvdy10by1zYW1wbGUtZnJvbS1sYW5ndWFnZS1tb2RlbHMtNjgyYmNlYjk3Mjc3KS5cbiAgICpcbiAgICogUmVjb21tZW5kZWQgZm9yIGFkdmFuY2VkIHVzZSBjYXNlcyBvbmx5LiBZb3UgdXN1YWxseSBvbmx5IG5lZWQgdG8gdXNlXG4gICAqIGB0ZW1wZXJhdHVyZWAuXG4gICAqL1xuICB0b3Bfaz86IG51bWJlcjtcblxuICAvKipcbiAgICogVXNlIG51Y2xldXMgc2FtcGxpbmcuXG4gICAqXG4gICAqIEluIG51Y2xldXMgc2FtcGxpbmcsIHdlIGNvbXB1dGUgdGhlIGN1bXVsYXRpdmUgZGlzdHJpYnV0aW9uIG92ZXIgYWxsIHRoZSBvcHRpb25zXG4gICAqIGZvciBlYWNoIHN1YnNlcXVlbnQgdG9rZW4gaW4gZGVjcmVhc2luZyBwcm9iYWJpbGl0eSBvcmRlciBhbmQgY3V0IGl0IG9mZiBvbmNlIGl0XG4gICAqIHJlYWNoZXMgYSBwYXJ0aWN1bGFyIHByb2JhYmlsaXR5IHNwZWNpZmllZCBieSBgdG9wX3BgLiBZb3Ugc2hvdWxkIGVpdGhlciBhbHRlclxuICAgKiBgdGVtcGVyYXR1cmVgIG9yIGB0b3BfcGAsIGJ1dCBub3QgYm90aC5cbiAgICpcbiAgICogUmVjb21tZW5kZWQgZm9yIGFkdmFuY2VkIHVzZSBjYXNlcyBvbmx5LiBZb3UgdXN1YWxseSBvbmx5IG5lZWQgdG8gdXNlXG4gICAqIGB0ZW1wZXJhdHVyZWAuXG4gICAqL1xuICB0b3BfcD86IG51bWJlcjtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBNZXNzYWdlQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZSBgQW50aHJvcGljLk1lc3NhZ2VzLlRvb2xDaG9pY2VBdXRvYCBpbnN0ZWFkXG4gICAqL1xuICBleHBvcnQgdHlwZSBNZXRhZGF0YSA9IE1lc3NhZ2VzQVBJLk1ldGFkYXRhO1xuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCB1c2UgYEFudGhyb3BpYy5NZXNzYWdlcy5Ub29sQ2hvaWNlQXV0b2AgaW5zdGVhZFxuICAgKi9cbiAgZXhwb3J0IHR5cGUgVG9vbENob2ljZUF1dG8gPSBNZXNzYWdlc0FQSS5Ub29sQ2hvaWNlQXV0bztcblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGBBbnRocm9waWMuTWVzc2FnZXMuVG9vbENob2ljZUFueWAgaW5zdGVhZFxuICAgKi9cbiAgZXhwb3J0IHR5cGUgVG9vbENob2ljZUFueSA9IE1lc3NhZ2VzQVBJLlRvb2xDaG9pY2VBbnk7XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZSBgQW50aHJvcGljLk1lc3NhZ2VzLlRvb2xDaG9pY2VUb29sYCBpbnN0ZWFkXG4gICAqL1xuICBleHBvcnQgdHlwZSBUb29sQ2hvaWNlVG9vbCA9IE1lc3NhZ2VzQVBJLlRvb2xDaG9pY2VUb29sO1xuXG4gIGV4cG9ydCB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBNZXNzYWdlc0FQSS5NZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gTWVzc2FnZXNBUEkuTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGV4dGVuZHMgTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogV2hldGhlciB0byBpbmNyZW1lbnRhbGx5IHN0cmVhbSB0aGUgcmVzcG9uc2UgdXNpbmcgc2VydmVyLXNlbnQgZXZlbnRzLlxuICAgKlxuICAgKiBTZWUgW3N0cmVhbWluZ10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLXN0cmVhbWluZykgZm9yXG4gICAqIGRldGFpbHMuXG4gICAqL1xuICBzdHJlYW0/OiBmYWxzZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGV4dGVuZHMgTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogV2hldGhlciB0byBpbmNyZW1lbnRhbGx5IHN0cmVhbSB0aGUgcmVzcG9uc2UgdXNpbmcgc2VydmVyLXNlbnQgZXZlbnRzLlxuICAgKlxuICAgKiBTZWUgW3N0cmVhbWluZ10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLXN0cmVhbWluZykgZm9yXG4gICAqIGRldGFpbHMuXG4gICAqL1xuICBzdHJlYW06IHRydWU7XG59XG5cbmV4cG9ydCB0eXBlIE1lc3NhZ2VTdHJlYW1QYXJhbXMgPSBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZTtcblxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIE1lc3NhZ2VzIHtcbiAgZXhwb3J0IHtcbiAgICB0eXBlIENvbnRlbnRCbG9jayBhcyBDb250ZW50QmxvY2ssXG4gICAgdHlwZSBDb250ZW50QmxvY2tEZWx0YUV2ZW50IGFzIENvbnRlbnRCbG9ja0RlbHRhRXZlbnQsXG4gICAgdHlwZSBDb250ZW50QmxvY2tTdGFydEV2ZW50IGFzIENvbnRlbnRCbG9ja1N0YXJ0RXZlbnQsXG4gICAgdHlwZSBDb250ZW50QmxvY2tTdG9wRXZlbnQgYXMgQ29udGVudEJsb2NrU3RvcEV2ZW50LFxuICAgIHR5cGUgSW1hZ2VCbG9ja1BhcmFtIGFzIEltYWdlQmxvY2tQYXJhbSxcbiAgICB0eXBlIElucHV0SnNvbkRlbHRhIGFzIElucHV0SnNvbkRlbHRhLFxuICAgIHR5cGUgSW5wdXRKU09ORGVsdGEgYXMgSW5wdXRKU09ORGVsdGEsXG4gICAgdHlwZSBNZXNzYWdlIGFzIE1lc3NhZ2UsXG4gICAgdHlwZSBNZXNzYWdlRGVsdGFFdmVudCBhcyBNZXNzYWdlRGVsdGFFdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VEZWx0YVVzYWdlIGFzIE1lc3NhZ2VEZWx0YVVzYWdlLFxuICAgIHR5cGUgTWVzc2FnZVBhcmFtIGFzIE1lc3NhZ2VQYXJhbSxcbiAgICB0eXBlIE1lc3NhZ2VTdGFydEV2ZW50IGFzIE1lc3NhZ2VTdGFydEV2ZW50LFxuICAgIHR5cGUgTWVzc2FnZVN0b3BFdmVudCBhcyBNZXNzYWdlU3RvcEV2ZW50LFxuICAgIHR5cGUgTWVzc2FnZVN0cmVhbUV2ZW50IGFzIE1lc3NhZ2VTdHJlYW1FdmVudCxcbiAgICB0eXBlIE1ldGFkYXRhIGFzIE1ldGFkYXRhLFxuICAgIHR5cGUgTW9kZWwgYXMgTW9kZWwsXG4gICAgdHlwZSBSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50IGFzIFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQsXG4gICAgdHlwZSBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50IGFzIFJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQsXG4gICAgdHlwZSBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQgYXMgUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50LFxuICAgIHR5cGUgUmF3TWVzc2FnZURlbHRhRXZlbnQgYXMgUmF3TWVzc2FnZURlbHRhRXZlbnQsXG4gICAgdHlwZSBSYXdNZXNzYWdlU3RhcnRFdmVudCBhcyBSYXdNZXNzYWdlU3RhcnRFdmVudCxcbiAgICB0eXBlIFJhd01lc3NhZ2VTdG9wRXZlbnQgYXMgUmF3TWVzc2FnZVN0b3BFdmVudCxcbiAgICB0eXBlIFJhd01lc3NhZ2VTdHJlYW1FdmVudCBhcyBSYXdNZXNzYWdlU3RyZWFtRXZlbnQsXG4gICAgdHlwZSBUZXh0QmxvY2sgYXMgVGV4dEJsb2NrLFxuICAgIHR5cGUgVGV4dEJsb2NrUGFyYW0gYXMgVGV4dEJsb2NrUGFyYW0sXG4gICAgdHlwZSBUZXh0RGVsdGEgYXMgVGV4dERlbHRhLFxuICAgIHR5cGUgVG9vbCBhcyBUb29sLFxuICAgIHR5cGUgVG9vbENob2ljZSBhcyBUb29sQ2hvaWNlLFxuICAgIHR5cGUgVG9vbENob2ljZUFueSBhcyBUb29sQ2hvaWNlQW55LFxuICAgIHR5cGUgVG9vbENob2ljZUF1dG8gYXMgVG9vbENob2ljZUF1dG8sXG4gICAgdHlwZSBUb29sQ2hvaWNlVG9vbCBhcyBUb29sQ2hvaWNlVG9vbCxcbiAgICB0eXBlIFRvb2xSZXN1bHRCbG9ja1BhcmFtIGFzIFRvb2xSZXN1bHRCbG9ja1BhcmFtLFxuICAgIHR5cGUgVG9vbFVzZUJsb2NrIGFzIFRvb2xVc2VCbG9jayxcbiAgICB0eXBlIFRvb2xVc2VCbG9ja1BhcmFtIGFzIFRvb2xVc2VCbG9ja1BhcmFtLFxuICAgIHR5cGUgVXNhZ2UgYXMgVXNhZ2UsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlU3RyZWFtUGFyYW1zIGFzIE1lc3NhZ2VTdHJlYW1QYXJhbXMsXG4gIH07XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgdHlwZSBBZ2VudCB9IGZyb20gXCIuL19zaGltcy9pbmRleC5qc1wiO1xuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBFcnJvcnMgZnJvbSBcIi4vZXJyb3IuanNcIjtcbmltcG9ydCAqIGFzIFBhZ2luYXRpb24gZnJvbSBcIi4vcGFnaW5hdGlvbi5qc1wiO1xuaW1wb3J0IHsgdHlwZSBQYWdlUGFyYW1zLCBQYWdlUmVzcG9uc2UgfSBmcm9tIFwiLi9wYWdpbmF0aW9uLmpzXCI7XG5pbXBvcnQgKiBhcyBVcGxvYWRzIGZyb20gXCIuL3VwbG9hZHMuanNcIjtcbmltcG9ydCAqIGFzIEFQSSBmcm9tIFwiLi9yZXNvdXJjZXMvaW5kZXguanNcIjtcbmltcG9ydCB7XG4gIENvbXBsZXRpb24sXG4gIENvbXBsZXRpb25DcmVhdGVQYXJhbXMsXG4gIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gIENvbXBsZXRpb25zLFxufSBmcm9tIFwiLi9yZXNvdXJjZXMvY29tcGxldGlvbnMuanNcIjtcbmltcG9ydCB7XG4gIENvbnRlbnRCbG9jayxcbiAgQ29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgQ29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgQ29udGVudEJsb2NrU3RvcEV2ZW50LFxuICBJbWFnZUJsb2NrUGFyYW0sXG4gIElucHV0SlNPTkRlbHRhLFxuICBNZXNzYWdlLFxuICBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICBNZXNzYWdlRGVsdGFFdmVudCxcbiAgTWVzc2FnZURlbHRhVXNhZ2UsXG4gIE1lc3NhZ2VQYXJhbSxcbiAgTWVzc2FnZVN0YXJ0RXZlbnQsXG4gIE1lc3NhZ2VTdG9wRXZlbnQsXG4gIE1lc3NhZ2VTdHJlYW1FdmVudCxcbiAgTWVzc2FnZVN0cmVhbVBhcmFtcyxcbiAgTWVzc2FnZXMsXG4gIE1ldGFkYXRhLFxuICBNb2RlbCxcbiAgUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50LFxuICBSYXdNZXNzYWdlRGVsdGFFdmVudCxcbiAgUmF3TWVzc2FnZVN0YXJ0RXZlbnQsXG4gIFJhd01lc3NhZ2VTdG9wRXZlbnQsXG4gIFJhd01lc3NhZ2VTdHJlYW1FdmVudCxcbiAgVGV4dEJsb2NrLFxuICBUZXh0QmxvY2tQYXJhbSxcbiAgVGV4dERlbHRhLFxuICBUb29sLFxuICBUb29sQ2hvaWNlLFxuICBUb29sQ2hvaWNlQW55LFxuICBUb29sQ2hvaWNlQXV0byxcbiAgVG9vbENob2ljZVRvb2wsXG4gIFRvb2xSZXN1bHRCbG9ja1BhcmFtLFxuICBUb29sVXNlQmxvY2ssXG4gIFRvb2xVc2VCbG9ja1BhcmFtLFxuICBVc2FnZSxcbn0gZnJvbSBcIi4vcmVzb3VyY2VzL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQge1xuICBBbnRocm9waWNCZXRhLFxuICBCZXRhLFxuICBCZXRhQVBJRXJyb3IsXG4gIEJldGFBdXRoZW50aWNhdGlvbkVycm9yLFxuICBCZXRhRXJyb3IsXG4gIEJldGFFcnJvclJlc3BvbnNlLFxuICBCZXRhSW52YWxpZFJlcXVlc3RFcnJvcixcbiAgQmV0YU5vdEZvdW5kRXJyb3IsXG4gIEJldGFPdmVybG9hZGVkRXJyb3IsXG4gIEJldGFQZXJtaXNzaW9uRXJyb3IsXG4gIEJldGFSYXRlTGltaXRFcnJvcixcbn0gZnJvbSBcIi4vcmVzb3VyY2VzL2JldGEvYmV0YS5qc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIENsaWVudE9wdGlvbnMge1xuICAvKipcbiAgICogRGVmYXVsdHMgdG8gcHJvY2Vzcy5lbnZbJ0FOVEhST1BJQ19BUElfS0VZJ10uXG4gICAqL1xuICBhcGlLZXk/OiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBEZWZhdWx0cyB0byBwcm9jZXNzLmVudlsnQU5USFJPUElDX0FVVEhfVE9LRU4nXS5cbiAgICovXG4gIGF1dGhUb2tlbj86IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBkZWZhdWx0IGJhc2UgVVJMIGZvciB0aGUgQVBJLCBlLmcuLCBcImh0dHBzOi8vYXBpLmV4YW1wbGUuY29tL3YyL1wiXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIHByb2Nlc3MuZW52WydBTlRIUk9QSUNfQkFTRV9VUkwnXS5cbiAgICovXG4gIGJhc2VVUkw/OiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSAoaW4gbWlsbGlzZWNvbmRzKSB0aGF0IHRoZSBjbGllbnQgc2hvdWxkIHdhaXQgZm9yIGEgcmVzcG9uc2VcbiAgICogZnJvbSB0aGUgc2VydmVyIGJlZm9yZSB0aW1pbmcgb3V0IGEgc2luZ2xlIHJlcXVlc3QuXG4gICAqXG4gICAqIE5vdGUgdGhhdCByZXF1ZXN0IHRpbWVvdXRzIGFyZSByZXRyaWVkIGJ5IGRlZmF1bHQsIHNvIGluIGEgd29yc3QtY2FzZSBzY2VuYXJpbyB5b3UgbWF5IHdhaXRcbiAgICogbXVjaCBsb25nZXIgdGhhbiB0aGlzIHRpbWVvdXQgYmVmb3JlIHRoZSBwcm9taXNlIHN1Y2NlZWRzIG9yIGZhaWxzLlxuICAgKi9cbiAgdGltZW91dD86IG51bWJlcjtcblxuICAvKipcbiAgICogQW4gSFRUUCBhZ2VudCB1c2VkIHRvIG1hbmFnZSBIVFRQKFMpIGNvbm5lY3Rpb25zLlxuICAgKlxuICAgKiBJZiBub3QgcHJvdmlkZWQsIGFuIGFnZW50IHdpbGwgYmUgY29uc3RydWN0ZWQgYnkgZGVmYXVsdCBpbiB0aGUgTm9kZS5qcyBlbnZpcm9ubWVudCxcbiAgICogb3RoZXJ3aXNlIG5vIGFnZW50IGlzIHVzZWQuXG4gICAqL1xuICBodHRwQWdlbnQ/OiBBZ2VudDtcblxuICAvKipcbiAgICogU3BlY2lmeSBhIGN1c3RvbSBgZmV0Y2hgIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgKlxuICAgKiBJZiBub3QgcHJvdmlkZWQsIHdlIHVzZSBgbm9kZS1mZXRjaGAgb24gTm9kZS5qcyBhbmQgb3RoZXJ3aXNlIGV4cGVjdCB0aGF0IGBmZXRjaGAgaXNcbiAgICogZGVmaW5lZCBnbG9iYWxseS5cbiAgICovXG4gIGZldGNoPzogQ29yZS5GZXRjaCB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHRpbWVzIHRoYXQgdGhlIGNsaWVudCB3aWxsIHJldHJ5IGEgcmVxdWVzdCBpbiBjYXNlIG9mIGFcbiAgICogdGVtcG9yYXJ5IGZhaWx1cmUsIGxpa2UgYSBuZXR3b3JrIGVycm9yIG9yIGEgNVhYIGVycm9yIGZyb20gdGhlIHNlcnZlci5cbiAgICpcbiAgICogQGRlZmF1bHQgMlxuICAgKi9cbiAgbWF4UmV0cmllcz86IG51bWJlcjtcblxuICAvKipcbiAgICogRGVmYXVsdCBoZWFkZXJzIHRvIGluY2x1ZGUgd2l0aCBldmVyeSByZXF1ZXN0IHRvIHRoZSBBUEkuXG4gICAqXG4gICAqIFRoZXNlIGNhbiBiZSByZW1vdmVkIGluIGluZGl2aWR1YWwgcmVxdWVzdHMgYnkgZXhwbGljaXRseSBzZXR0aW5nIHRoZVxuICAgKiBoZWFkZXIgdG8gYHVuZGVmaW5lZGAgb3IgYG51bGxgIGluIHJlcXVlc3Qgb3B0aW9ucy5cbiAgICovXG4gIGRlZmF1bHRIZWFkZXJzPzogQ29yZS5IZWFkZXJzO1xuXG4gIC8qKlxuICAgKiBEZWZhdWx0IHF1ZXJ5IHBhcmFtZXRlcnMgdG8gaW5jbHVkZSB3aXRoIGV2ZXJ5IHJlcXVlc3QgdG8gdGhlIEFQSS5cbiAgICpcbiAgICogVGhlc2UgY2FuIGJlIHJlbW92ZWQgaW4gaW5kaXZpZHVhbCByZXF1ZXN0cyBieSBleHBsaWNpdGx5IHNldHRpbmcgdGhlXG4gICAqIHBhcmFtIHRvIGB1bmRlZmluZWRgIGluIHJlcXVlc3Qgb3B0aW9ucy5cbiAgICovXG4gIGRlZmF1bHRRdWVyeT86IENvcmUuRGVmYXVsdFF1ZXJ5O1xuXG4gIC8qKlxuICAgKiBCeSBkZWZhdWx0LCBjbGllbnQtc2lkZSB1c2Ugb2YgdGhpcyBsaWJyYXJ5IGlzIG5vdCBhbGxvd2VkLCBhcyBpdCByaXNrcyBleHBvc2luZyB5b3VyIHNlY3JldCBBUEkgY3JlZGVudGlhbHMgdG8gYXR0YWNrZXJzLlxuICAgKiBPbmx5IHNldCB0aGlzIG9wdGlvbiB0byBgdHJ1ZWAgaWYgeW91IHVuZGVyc3RhbmQgdGhlIHJpc2tzIGFuZCBoYXZlIGFwcHJvcHJpYXRlIG1pdGlnYXRpb25zIGluIHBsYWNlLlxuICAgKi9cbiAgZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXI/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIEFQSSBDbGllbnQgZm9yIGludGVyZmFjaW5nIHdpdGggdGhlIEFudGhyb3BpYyBBUEkuXG4gKi9cbmV4cG9ydCBjbGFzcyBBbnRocm9waWMgZXh0ZW5kcyBDb3JlLkFQSUNsaWVudCB7XG4gIGFwaUtleTogc3RyaW5nIHwgbnVsbDtcbiAgYXV0aFRva2VuOiBzdHJpbmcgfCBudWxsO1xuXG4gIHByaXZhdGUgX29wdGlvbnM6IENsaWVudE9wdGlvbnM7XG5cbiAgLyoqXG4gICAqIEFQSSBDbGllbnQgZm9yIGludGVyZmFjaW5nIHdpdGggdGhlIEFudGhyb3BpYyBBUEkuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZH0gW29wdHMuYXBpS2V5PXByb2Nlc3MuZW52WydBTlRIUk9QSUNfQVBJX0tFWSddID8/IG51bGxdXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZH0gW29wdHMuYXV0aFRva2VuPXByb2Nlc3MuZW52WydBTlRIUk9QSUNfQVVUSF9UT0tFTiddID8/IG51bGxdXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5iYXNlVVJMPXByb2Nlc3MuZW52WydBTlRIUk9QSUNfQkFTRV9VUkwnXSA/PyBodHRwczovL2FwaS5hbnRocm9waWMuY29tXSAtIE92ZXJyaWRlIHRoZSBkZWZhdWx0IGJhc2UgVVJMIGZvciB0aGUgQVBJLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMudGltZW91dD0xMCBtaW51dGVzXSAtIFRoZSBtYXhpbXVtIGFtb3VudCBvZiB0aW1lIChpbiBtaWxsaXNlY29uZHMpIHRoZSBjbGllbnQgd2lsbCB3YWl0IGZvciBhIHJlc3BvbnNlIGJlZm9yZSB0aW1pbmcgb3V0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMuaHR0cEFnZW50XSAtIEFuIEhUVFAgYWdlbnQgdXNlZCB0byBtYW5hZ2UgSFRUUChzKSBjb25uZWN0aW9ucy5cbiAgICogQHBhcmFtIHtDb3JlLkZldGNofSBbb3B0cy5mZXRjaF0gLSBTcGVjaWZ5IGEgY3VzdG9tIGBmZXRjaGAgZnVuY3Rpb24gaW1wbGVtZW50YXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5tYXhSZXRyaWVzPTJdIC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIHRpbWVzIHRoZSBjbGllbnQgd2lsbCByZXRyeSBhIHJlcXVlc3QuXG4gICAqIEBwYXJhbSB7Q29yZS5IZWFkZXJzfSBvcHRzLmRlZmF1bHRIZWFkZXJzIC0gRGVmYXVsdCBoZWFkZXJzIHRvIGluY2x1ZGUgd2l0aCBldmVyeSByZXF1ZXN0IHRvIHRoZSBBUEkuXG4gICAqIEBwYXJhbSB7Q29yZS5EZWZhdWx0UXVlcnl9IG9wdHMuZGVmYXVsdFF1ZXJ5IC0gRGVmYXVsdCBxdWVyeSBwYXJhbWV0ZXJzIHRvIGluY2x1ZGUgd2l0aCBldmVyeSByZXF1ZXN0IHRvIHRoZSBBUEkuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXI9ZmFsc2VdIC0gQnkgZGVmYXVsdCwgY2xpZW50LXNpZGUgdXNlIG9mIHRoaXMgbGlicmFyeSBpcyBub3QgYWxsb3dlZCwgYXMgaXQgcmlza3MgZXhwb3NpbmcgeW91ciBzZWNyZXQgQVBJIGNyZWRlbnRpYWxzIHRvIGF0dGFja2Vycy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBiYXNlVVJMID0gQ29yZS5yZWFkRW52KCdBTlRIUk9QSUNfQkFTRV9VUkwnKSxcbiAgICBhcGlLZXkgPSBDb3JlLnJlYWRFbnYoJ0FOVEhST1BJQ19BUElfS0VZJykgPz8gbnVsbCxcbiAgICBhdXRoVG9rZW4gPSBDb3JlLnJlYWRFbnYoJ0FOVEhST1BJQ19BVVRIX1RPS0VOJykgPz8gbnVsbCxcbiAgICAuLi5vcHRzXG4gIH06IENsaWVudE9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IG9wdGlvbnM6IENsaWVudE9wdGlvbnMgPSB7XG4gICAgICBhcGlLZXksXG4gICAgICBhdXRoVG9rZW4sXG4gICAgICAuLi5vcHRzLFxuICAgICAgYmFzZVVSTDogYmFzZVVSTCB8fCBgaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbWAsXG4gICAgfTtcblxuICAgIGlmICghb3B0aW9ucy5kYW5nZXJvdXNseUFsbG93QnJvd3NlciAmJiBDb3JlLmlzUnVubmluZ0luQnJvd3NlcigpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3JzLkFudGhyb3BpY0Vycm9yKFxuICAgICAgICBcIkl0IGxvb2tzIGxpa2UgeW91J3JlIHJ1bm5pbmcgaW4gYSBicm93c2VyLWxpa2UgZW52aXJvbm1lbnQuXFxuXFxuVGhpcyBpcyBkaXNhYmxlZCBieSBkZWZhdWx0LCBhcyBpdCByaXNrcyBleHBvc2luZyB5b3VyIHNlY3JldCBBUEkgY3JlZGVudGlhbHMgdG8gYXR0YWNrZXJzLlxcbklmIHlvdSB1bmRlcnN0YW5kIHRoZSByaXNrcyBhbmQgaGF2ZSBhcHByb3ByaWF0ZSBtaXRpZ2F0aW9ucyBpbiBwbGFjZSxcXG55b3UgY2FuIHNldCB0aGUgYGRhbmdlcm91c2x5QWxsb3dCcm93c2VyYCBvcHRpb24gdG8gYHRydWVgLCBlLmcuLFxcblxcbm5ldyBBbnRocm9waWMoeyBhcGlLZXksIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyOiB0cnVlIH0pO1xcblxcblRPRE86IGxpbmshXFxuXCIsXG4gICAgICApO1xuICAgIH1cblxuICAgIHN1cGVyKHtcbiAgICAgIGJhc2VVUkw6IG9wdGlvbnMuYmFzZVVSTCEsXG4gICAgICB0aW1lb3V0OiBvcHRpb25zLnRpbWVvdXQgPz8gNjAwMDAwIC8qIDEwIG1pbnV0ZXMgKi8sXG4gICAgICBodHRwQWdlbnQ6IG9wdGlvbnMuaHR0cEFnZW50LFxuICAgICAgbWF4UmV0cmllczogb3B0aW9ucy5tYXhSZXRyaWVzLFxuICAgICAgZmV0Y2g6IG9wdGlvbnMuZmV0Y2gsXG4gICAgfSk7XG5cbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcblxuICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICAgIHRoaXMuYXV0aFRva2VuID0gYXV0aFRva2VuO1xuICB9XG5cbiAgY29tcGxldGlvbnM6IEFQSS5Db21wbGV0aW9ucyA9IG5ldyBBUEkuQ29tcGxldGlvbnModGhpcyk7XG4gIG1lc3NhZ2VzOiBBUEkuTWVzc2FnZXMgPSBuZXcgQVBJLk1lc3NhZ2VzKHRoaXMpO1xuICBiZXRhOiBBUEkuQmV0YSA9IG5ldyBBUEkuQmV0YSh0aGlzKTtcblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgZGVmYXVsdFF1ZXJ5KCk6IENvcmUuRGVmYXVsdFF1ZXJ5IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5kZWZhdWx0UXVlcnk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgZGVmYXVsdEhlYWRlcnMob3B0czogQ29yZS5GaW5hbFJlcXVlc3RPcHRpb25zKTogQ29yZS5IZWFkZXJzIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3VwZXIuZGVmYXVsdEhlYWRlcnMob3B0cyksXG4gICAgICAuLi4odGhpcy5fb3B0aW9ucy5kYW5nZXJvdXNseUFsbG93QnJvd3NlciA/XG4gICAgICAgIHsgJ2FudGhyb3BpYy1kYW5nZXJvdXMtZGlyZWN0LWJyb3dzZXItYWNjZXNzJzogJ3RydWUnIH1cbiAgICAgIDogdW5kZWZpbmVkKSxcbiAgICAgICdhbnRocm9waWMtdmVyc2lvbic6ICcyMDIzLTA2LTAxJyxcbiAgICAgIC4uLnRoaXMuX29wdGlvbnMuZGVmYXVsdEhlYWRlcnMsXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvdmVycmlkZSB2YWxpZGF0ZUhlYWRlcnMoaGVhZGVyczogQ29yZS5IZWFkZXJzLCBjdXN0b21IZWFkZXJzOiBDb3JlLkhlYWRlcnMpIHtcbiAgICBpZiAodGhpcy5hcGlLZXkgJiYgaGVhZGVyc1sneC1hcGkta2V5J10pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGN1c3RvbUhlYWRlcnNbJ3gtYXBpLWtleSddID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYXV0aFRva2VuICYmIGhlYWRlcnNbJ2F1dGhvcml6YXRpb24nXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY3VzdG9tSGVhZGVyc1snYXV0aG9yaXphdGlvbiddID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ0NvdWxkIG5vdCByZXNvbHZlIGF1dGhlbnRpY2F0aW9uIG1ldGhvZC4gRXhwZWN0ZWQgZWl0aGVyIGFwaUtleSBvciBhdXRoVG9rZW4gdG8gYmUgc2V0LiBPciBmb3Igb25lIG9mIHRoZSBcIlgtQXBpLUtleVwiIG9yIFwiQXV0aG9yaXphdGlvblwiIGhlYWRlcnMgdG8gYmUgZXhwbGljaXRseSBvbWl0dGVkJyxcbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIGF1dGhIZWFkZXJzKG9wdHM6IENvcmUuRmluYWxSZXF1ZXN0T3B0aW9ucyk6IENvcmUuSGVhZGVycyB7XG4gICAgY29uc3QgYXBpS2V5QXV0aCA9IHRoaXMuYXBpS2V5QXV0aChvcHRzKTtcbiAgICBjb25zdCBiZWFyZXJBdXRoID0gdGhpcy5iZWFyZXJBdXRoKG9wdHMpO1xuXG4gICAgaWYgKGFwaUtleUF1dGggIT0gbnVsbCAmJiAhQ29yZS5pc0VtcHR5T2JqKGFwaUtleUF1dGgpKSB7XG4gICAgICByZXR1cm4gYXBpS2V5QXV0aDtcbiAgICB9XG5cbiAgICBpZiAoYmVhcmVyQXV0aCAhPSBudWxsICYmICFDb3JlLmlzRW1wdHlPYmooYmVhcmVyQXV0aCkpIHtcbiAgICAgIHJldHVybiBiZWFyZXJBdXRoO1xuICAgIH1cbiAgICByZXR1cm4ge307XG4gIH1cblxuICBwcm90ZWN0ZWQgYXBpS2V5QXV0aChvcHRzOiBDb3JlLkZpbmFsUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkhlYWRlcnMge1xuICAgIGlmICh0aGlzLmFwaUtleSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHJldHVybiB7ICdYLUFwaS1LZXknOiB0aGlzLmFwaUtleSB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIGJlYXJlckF1dGgob3B0czogQ29yZS5GaW5hbFJlcXVlc3RPcHRpb25zKTogQ29yZS5IZWFkZXJzIHtcbiAgICBpZiAodGhpcy5hdXRoVG9rZW4gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICByZXR1cm4geyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5hdXRoVG9rZW59YCB9O1xuICB9XG5cbiAgc3RhdGljIEFudGhyb3BpYyA9IHRoaXM7XG4gIHN0YXRpYyBIVU1BTl9QUk9NUFQgPSAnXFxuXFxuSHVtYW46JztcbiAgc3RhdGljIEFJX1BST01QVCA9ICdcXG5cXG5Bc3Npc3RhbnQ6JztcbiAgc3RhdGljIERFRkFVTFRfVElNRU9VVCA9IDYwMDAwMDsgLy8gMTAgbWludXRlc1xuXG4gIHN0YXRpYyBBbnRocm9waWNFcnJvciA9IEVycm9ycy5BbnRocm9waWNFcnJvcjtcbiAgc3RhdGljIEFQSUVycm9yID0gRXJyb3JzLkFQSUVycm9yO1xuICBzdGF0aWMgQVBJQ29ubmVjdGlvbkVycm9yID0gRXJyb3JzLkFQSUNvbm5lY3Rpb25FcnJvcjtcbiAgc3RhdGljIEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IgPSBFcnJvcnMuQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvcjtcbiAgc3RhdGljIEFQSVVzZXJBYm9ydEVycm9yID0gRXJyb3JzLkFQSVVzZXJBYm9ydEVycm9yO1xuICBzdGF0aWMgTm90Rm91bmRFcnJvciA9IEVycm9ycy5Ob3RGb3VuZEVycm9yO1xuICBzdGF0aWMgQ29uZmxpY3RFcnJvciA9IEVycm9ycy5Db25mbGljdEVycm9yO1xuICBzdGF0aWMgUmF0ZUxpbWl0RXJyb3IgPSBFcnJvcnMuUmF0ZUxpbWl0RXJyb3I7XG4gIHN0YXRpYyBCYWRSZXF1ZXN0RXJyb3IgPSBFcnJvcnMuQmFkUmVxdWVzdEVycm9yO1xuICBzdGF0aWMgQXV0aGVudGljYXRpb25FcnJvciA9IEVycm9ycy5BdXRoZW50aWNhdGlvbkVycm9yO1xuICBzdGF0aWMgSW50ZXJuYWxTZXJ2ZXJFcnJvciA9IEVycm9ycy5JbnRlcm5hbFNlcnZlckVycm9yO1xuICBzdGF0aWMgUGVybWlzc2lvbkRlbmllZEVycm9yID0gRXJyb3JzLlBlcm1pc3Npb25EZW5pZWRFcnJvcjtcbiAgc3RhdGljIFVucHJvY2Vzc2FibGVFbnRpdHlFcnJvciA9IEVycm9ycy5VbnByb2Nlc3NhYmxlRW50aXR5RXJyb3I7XG5cbiAgc3RhdGljIHRvRmlsZSA9IFVwbG9hZHMudG9GaWxlO1xuICBzdGF0aWMgZmlsZUZyb21QYXRoID0gVXBsb2Fkcy5maWxlRnJvbVBhdGg7XG59XG5cbmV4cG9ydCBjb25zdCB7IEhVTUFOX1BST01QVCwgQUlfUFJPTVBUIH0gPSBBbnRocm9waWM7XG5cbmV4cG9ydCBjb25zdCBBbnRocm9waWNFcnJvciA9IEVycm9ycy5BbnRocm9waWNFcnJvcjtcbmV4cG9ydCBjb25zdCBBUElFcnJvciA9IEVycm9ycy5BUElFcnJvcjtcbmV4cG9ydCBjb25zdCBBUElDb25uZWN0aW9uRXJyb3IgPSBFcnJvcnMuQVBJQ29ubmVjdGlvbkVycm9yO1xuZXhwb3J0IGNvbnN0IEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IgPSBFcnJvcnMuQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvcjtcbmV4cG9ydCBjb25zdCBBUElVc2VyQWJvcnRFcnJvciA9IEVycm9ycy5BUElVc2VyQWJvcnRFcnJvcjtcbmV4cG9ydCBjb25zdCBOb3RGb3VuZEVycm9yID0gRXJyb3JzLk5vdEZvdW5kRXJyb3I7XG5leHBvcnQgY29uc3QgQ29uZmxpY3RFcnJvciA9IEVycm9ycy5Db25mbGljdEVycm9yO1xuZXhwb3J0IGNvbnN0IFJhdGVMaW1pdEVycm9yID0gRXJyb3JzLlJhdGVMaW1pdEVycm9yO1xuZXhwb3J0IGNvbnN0IEJhZFJlcXVlc3RFcnJvciA9IEVycm9ycy5CYWRSZXF1ZXN0RXJyb3I7XG5leHBvcnQgY29uc3QgQXV0aGVudGljYXRpb25FcnJvciA9IEVycm9ycy5BdXRoZW50aWNhdGlvbkVycm9yO1xuZXhwb3J0IGNvbnN0IEludGVybmFsU2VydmVyRXJyb3IgPSBFcnJvcnMuSW50ZXJuYWxTZXJ2ZXJFcnJvcjtcbmV4cG9ydCBjb25zdCBQZXJtaXNzaW9uRGVuaWVkRXJyb3IgPSBFcnJvcnMuUGVybWlzc2lvbkRlbmllZEVycm9yO1xuZXhwb3J0IGNvbnN0IFVucHJvY2Vzc2FibGVFbnRpdHlFcnJvciA9IEVycm9ycy5VbnByb2Nlc3NhYmxlRW50aXR5RXJyb3I7XG5cbmV4cG9ydCBpbXBvcnQgdG9GaWxlID0gVXBsb2Fkcy50b0ZpbGU7XG5leHBvcnQgaW1wb3J0IGZpbGVGcm9tUGF0aCA9IFVwbG9hZHMuZmlsZUZyb21QYXRoO1xuXG5BbnRocm9waWMuQ29tcGxldGlvbnMgPSBDb21wbGV0aW9ucztcbkFudGhyb3BpYy5NZXNzYWdlcyA9IE1lc3NhZ2VzO1xuQW50aHJvcGljLkJldGEgPSBCZXRhO1xuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgQW50aHJvcGljIHtcbiAgZXhwb3J0IHR5cGUgUmVxdWVzdE9wdGlvbnMgPSBDb3JlLlJlcXVlc3RPcHRpb25zO1xuXG4gIGV4cG9ydCBpbXBvcnQgUGFnZSA9IFBhZ2luYXRpb24uUGFnZTtcbiAgZXhwb3J0IHsgdHlwZSBQYWdlUGFyYW1zIGFzIFBhZ2VQYXJhbXMsIHR5cGUgUGFnZVJlc3BvbnNlIGFzIFBhZ2VSZXNwb25zZSB9O1xuXG4gIGV4cG9ydCB7XG4gICAgQ29tcGxldGlvbnMgYXMgQ29tcGxldGlvbnMsXG4gICAgdHlwZSBDb21wbGV0aW9uIGFzIENvbXBsZXRpb24sXG4gICAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zIGFzIENvbXBsZXRpb25DcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGFzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGFzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gIH07XG5cbiAgZXhwb3J0IHtcbiAgICBNZXNzYWdlcyBhcyBNZXNzYWdlcyxcbiAgICB0eXBlIENvbnRlbnRCbG9jayBhcyBDb250ZW50QmxvY2ssXG4gICAgdHlwZSBDb250ZW50QmxvY2tEZWx0YUV2ZW50IGFzIENvbnRlbnRCbG9ja0RlbHRhRXZlbnQsXG4gICAgdHlwZSBDb250ZW50QmxvY2tTdGFydEV2ZW50IGFzIENvbnRlbnRCbG9ja1N0YXJ0RXZlbnQsXG4gICAgdHlwZSBDb250ZW50QmxvY2tTdG9wRXZlbnQgYXMgQ29udGVudEJsb2NrU3RvcEV2ZW50LFxuICAgIHR5cGUgSW1hZ2VCbG9ja1BhcmFtIGFzIEltYWdlQmxvY2tQYXJhbSxcbiAgICB0eXBlIElucHV0SlNPTkRlbHRhIGFzIElucHV0SlNPTkRlbHRhLFxuICAgIHR5cGUgTWVzc2FnZSBhcyBNZXNzYWdlLFxuICAgIHR5cGUgTWVzc2FnZURlbHRhRXZlbnQgYXMgTWVzc2FnZURlbHRhRXZlbnQsXG4gICAgdHlwZSBNZXNzYWdlRGVsdGFVc2FnZSBhcyBNZXNzYWdlRGVsdGFVc2FnZSxcbiAgICB0eXBlIE1lc3NhZ2VQYXJhbSBhcyBNZXNzYWdlUGFyYW0sXG4gICAgdHlwZSBNZXNzYWdlU3RhcnRFdmVudCBhcyBNZXNzYWdlU3RhcnRFdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VTdG9wRXZlbnQgYXMgTWVzc2FnZVN0b3BFdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VTdHJlYW1FdmVudCBhcyBNZXNzYWdlU3RyZWFtRXZlbnQsXG4gICAgdHlwZSBNZXRhZGF0YSBhcyBNZXRhZGF0YSxcbiAgICB0eXBlIE1vZGVsIGFzIE1vZGVsLFxuICAgIHR5cGUgUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCBhcyBSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50LFxuICAgIHR5cGUgUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCBhcyBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50LFxuICAgIHR5cGUgUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50IGFzIFJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCxcbiAgICB0eXBlIFJhd01lc3NhZ2VEZWx0YUV2ZW50IGFzIFJhd01lc3NhZ2VEZWx0YUV2ZW50LFxuICAgIHR5cGUgUmF3TWVzc2FnZVN0YXJ0RXZlbnQgYXMgUmF3TWVzc2FnZVN0YXJ0RXZlbnQsXG4gICAgdHlwZSBSYXdNZXNzYWdlU3RvcEV2ZW50IGFzIFJhd01lc3NhZ2VTdG9wRXZlbnQsXG4gICAgdHlwZSBSYXdNZXNzYWdlU3RyZWFtRXZlbnQgYXMgUmF3TWVzc2FnZVN0cmVhbUV2ZW50LFxuICAgIHR5cGUgVGV4dEJsb2NrIGFzIFRleHRCbG9jayxcbiAgICB0eXBlIFRleHRCbG9ja1BhcmFtIGFzIFRleHRCbG9ja1BhcmFtLFxuICAgIHR5cGUgVGV4dERlbHRhIGFzIFRleHREZWx0YSxcbiAgICB0eXBlIFRvb2wgYXMgVG9vbCxcbiAgICB0eXBlIFRvb2xDaG9pY2UgYXMgVG9vbENob2ljZSxcbiAgICB0eXBlIFRvb2xDaG9pY2VBbnkgYXMgVG9vbENob2ljZUFueSxcbiAgICB0eXBlIFRvb2xDaG9pY2VBdXRvIGFzIFRvb2xDaG9pY2VBdXRvLFxuICAgIHR5cGUgVG9vbENob2ljZVRvb2wgYXMgVG9vbENob2ljZVRvb2wsXG4gICAgdHlwZSBUb29sUmVzdWx0QmxvY2tQYXJhbSBhcyBUb29sUmVzdWx0QmxvY2tQYXJhbSxcbiAgICB0eXBlIFRvb2xVc2VCbG9jayBhcyBUb29sVXNlQmxvY2ssXG4gICAgdHlwZSBUb29sVXNlQmxvY2tQYXJhbSBhcyBUb29sVXNlQmxvY2tQYXJhbSxcbiAgICB0eXBlIFVzYWdlIGFzIFVzYWdlLFxuICAgIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtcyBhcyBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICAgIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBhcyBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICAgIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyBhcyBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICAgIHR5cGUgTWVzc2FnZVN0cmVhbVBhcmFtcyBhcyBNZXNzYWdlU3RyZWFtUGFyYW1zLFxuICB9O1xuXG4gIGV4cG9ydCB7XG4gICAgQmV0YSBhcyBCZXRhLFxuICAgIHR5cGUgQW50aHJvcGljQmV0YSBhcyBBbnRocm9waWNCZXRhLFxuICAgIHR5cGUgQmV0YUFQSUVycm9yIGFzIEJldGFBUElFcnJvcixcbiAgICB0eXBlIEJldGFBdXRoZW50aWNhdGlvbkVycm9yIGFzIEJldGFBdXRoZW50aWNhdGlvbkVycm9yLFxuICAgIHR5cGUgQmV0YUVycm9yIGFzIEJldGFFcnJvcixcbiAgICB0eXBlIEJldGFFcnJvclJlc3BvbnNlIGFzIEJldGFFcnJvclJlc3BvbnNlLFxuICAgIHR5cGUgQmV0YUludmFsaWRSZXF1ZXN0RXJyb3IgYXMgQmV0YUludmFsaWRSZXF1ZXN0RXJyb3IsXG4gICAgdHlwZSBCZXRhTm90Rm91bmRFcnJvciBhcyBCZXRhTm90Rm91bmRFcnJvcixcbiAgICB0eXBlIEJldGFPdmVybG9hZGVkRXJyb3IgYXMgQmV0YU92ZXJsb2FkZWRFcnJvcixcbiAgICB0eXBlIEJldGFQZXJtaXNzaW9uRXJyb3IgYXMgQmV0YVBlcm1pc3Npb25FcnJvcixcbiAgICB0eXBlIEJldGFSYXRlTGltaXRFcnJvciBhcyBCZXRhUmF0ZUxpbWl0RXJyb3IsXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFudGhyb3BpYztcbiIsICJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgTWFya2Rvd25SZW5kZXJlciwgTm90aWNlLCBURmlsZSwgVEFic3RyYWN0RmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBUZXNzZXJhUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgUmV0cnlCdXR0b24gfSBmcm9tICcuLi9jb21wb25lbnRzL1JldHJ5QnV0dG9uJztcblxuaW50ZXJmYWNlIENoYXRNZXNzYWdlIHtcbiAgICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JztcbiAgICBjb250ZW50OiBzdHJpbmc7XG4gICAgdGltZXN0YW1wOiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBDb250ZXh0VXBkYXRlIHtcbiAgICBmaWxlbmFtZTogc3RyaW5nO1xuICAgIHBhdGg6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvblZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gICAgcHJpdmF0ZSBtZXNzYWdlczogQ2hhdE1lc3NhZ2VbXSA9IFtdO1xuICAgIHByaXZhdGUgbWVzc2FnZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBpbnB1dENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBjaGF0TmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBsYXN0RmFpbGVkTWVzc2FnZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgbGVhZjogV29ya3NwYWNlTGVhZixcbiAgICAgICAgcHJpdmF0ZSBwbHVnaW46IFRlc3NlcmFQbHVnaW5cbiAgICApIHtcbiAgICAgICAgc3VwZXIobGVhZik7XG4gICAgfVxuXG4gICAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuICd0ZXNzZXJhLWNoYXQnO1xuICAgIH1cblxuICAgIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiAnVGVzc2VyYSBDaGF0JztcbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG4gICAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gTWFpbiBjaGF0IGNvbnRhaW5lclxuICAgICAgICBjb25zdCBjaGF0Q29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdigndGVzc2VyYS1jaGF0LWNvbnRhaW5lcicpO1xuICAgICAgICBcbiAgICAgICAgLy8gSGVhZGVyIHdpdGggYnV0dG9uc1xuICAgICAgICBjb25zdCBoZWFkZXIgPSBjaGF0Q29udGFpbmVyLmNyZWF0ZURpdigndGVzc2VyYS1jaGF0LWhlYWRlcicpO1xuICAgICAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gaGVhZGVyLmNyZWF0ZURpdigndGVzc2VyYS1oZWFkZXItYnV0dG9ucycpO1xuXG4gICAgICAgIC8vIE5ldyBjaGF0IGJ1dHRvblxuICAgICAgICBjb25zdCBuZXdDaGF0QnV0dG9uID0gaGVhZGVyQnV0dG9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgY2xzOiAndGVzc2VyYS1oZWFkZXItYnV0dG9uJyxcbiAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICAnYXJpYS1sYWJlbCc6ICdOZXcgY2hhdCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG5ld0NoYXRCdXR0b24uaW5uZXJIVE1MID0gYDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIHdpZHRoPVwiMTZcIiBoZWlnaHQ9XCIxNlwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBmaWxsPVwibm9uZVwiPlxuICAgICAgICAgICAgPHBhdGggZD1cIk0xMiA1djE0TTUgMTJoMTRcIi8+XG4gICAgICAgIDwvc3ZnPmA7XG5cbiAgICAgICAgLy8gQ29weSBhbGwgYnV0dG9uXG4gICAgICAgIGNvbnN0IGNvcHlBbGxCdXR0b24gPSBoZWFkZXJCdXR0b25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICBjbHM6ICd0ZXNzZXJhLWhlYWRlci1idXR0b24nLFxuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogJ0NvcHkgY29udmVyc2F0aW9uJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29weUFsbEJ1dHRvbi5pbm5lckhUTUwgPSBgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgd2lkdGg9XCIxNlwiIGhlaWdodD1cIjE2XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIGZpbGw9XCJub25lXCI+XG4gICAgICAgICAgICA8cmVjdCB4PVwiOVwiIHk9XCI5XCIgd2lkdGg9XCIxM1wiIGhlaWdodD1cIjEzXCIgcng9XCIyXCIgcnk9XCIyXCI+PC9yZWN0PlxuICAgICAgICAgICAgPHBhdGggZD1cIk01IDE1SDRhMiAyIDAgMCAxLTItMlY0YTIgMiAwIDAgMSAyLTJoOWEyIDIgMCAwIDEgMiAydjFcIj48L3BhdGg+XG4gICAgICAgIDwvc3ZnPmA7XG5cbiAgICAgICAgLy8gU2F2ZSBidXR0b25cbiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGhlYWRlckJ1dHRvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIGNsczogJ3Rlc3NlcmEtaGVhZGVyLWJ1dHRvbicsXG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiAnU2F2ZSBjb252ZXJzYXRpb24nXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzYXZlQnV0dG9uLmlubmVySFRNTCA9IGA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB3aWR0aD1cIjE2XCIgaGVpZ2h0PVwiMTZcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgZmlsbD1cIm5vbmVcIj5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTkgMjFINWEyIDIgMCAwIDEtMi0yVjVhMiAyIDAgMCAxIDItMmgxMWw1IDV2MTFhMiAyIDAgMCAxLTIgMnpcIj48L3BhdGg+XG4gICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiMTcgMjEgMTcgMTMgNyAxMyA3IDIxXCI+PC9wb2x5bGluZT5cbiAgICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCI3IDMgNyA4IDE1IDhcIj48L3BvbHlsaW5lPlxuICAgICAgICA8L3N2Zz5gO1xuXG4gICAgICAgIC8vIEFkZCBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAgbmV3Q2hhdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVDb252ZXJzYXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3RhcnROZXdDaGF0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvcHlBbGxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNvcHlDb252ZXJzYXRpb24oKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBzYXZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zYXZlQ29udmVyc2F0aW9uKCkpO1xuXG4gICAgICAgIC8vIE1lc3NhZ2VzIGFyZWFcbiAgICAgICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyID0gY2hhdENvbnRhaW5lci5jcmVhdGVEaXYoJ3Rlc3NlcmEtbWVzc2FnZXMnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIElucHV0IGFyZWFcbiAgICAgICAgdGhpcy5pbnB1dENvbnRhaW5lciA9IGNoYXRDb250YWluZXIuY3JlYXRlRGl2KCd0ZXNzZXJhLWlucHV0LWNvbnRhaW5lcicpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdGV4dGFyZWEgPSB0aGlzLmlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1R5cGUgeW91ciBtZXNzYWdlLi4uJyxcbiAgICAgICAgICAgICAgICByb3dzOiAnMydcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gdGhpcy5pbnB1dENvbnRhaW5lci5jcmVhdGVEaXYoJ3Rlc3NlcmEtYnV0dG9uLWNvbnRhaW5lcicpO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2VuZEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgY2xzOiAndGVzc2VyYS1zZW5kLWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbmRCdXR0b24uaW5uZXJIVE1MID0gYDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBmaWxsPVwibm9uZVwiPlxuICAgICAgICAgICAgPGxpbmUgeDE9XCIyMlwiIHkxPVwiMlwiIHgyPVwiMTFcIiB5Mj1cIjEzXCI+PC9saW5lPlxuICAgICAgICAgICAgPHBvbHlnb24gcG9pbnRzPVwiMjIgMiAxNSAyMiAxMSAxMyAyIDkgMjIgMlwiPjwvcG9seWdvbj5cbiAgICAgICAgPC9zdmc+YDtcblxuICAgICAgICAvLyBFdmVudCBsaXN0ZW5lcnNcbiAgICAgICAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB8fCBcbiAgICAgICAgICAgICAgICAoZS5rZXkgPT09ICdFbnRlcicgJiYgKGUubWV0YUtleSB8fCBlLmN0cmxLZXkpKSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHRleHRhcmVhLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBzZW5kQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSh0ZXh0YXJlYS52YWx1ZSk7XG4gICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9ICcnO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZGQgc3R5bGVzXG4gICAgICAgIHRoaXMuYWRkU3R5bGVzKCk7XG5cbiAgICAgICAgLy8gU2hvdyB3ZWxjb21lIG1lc3NhZ2UgdXNpbmcgdGhlIEFQSVxuICAgICAgICBhd2FpdCB0aGlzLnNlbmRJbml0aWFsTWVzc2FnZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgc2VuZEluaXRpYWxNZXNzYWdlKCkge1xuICAgICAgICBjb25zdCBsb2FkaW5nRWwgPSB0aGlzLnNob3dMb2FkaW5nSW5kaWNhdG9yKCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uc2VuZE1lc3NhZ2UoXG4gICAgICAgICAgICAgICAgXCJTVEFSVF9DT05WRVJTQVRJT05cIiwgLy8gU3BlY2lhbCB0cmlnZ2VyIGZvciBpbml0aWFsIG1lc3NhZ2VcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RlZE1vZGVsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBsb2FkaW5nRWwucGFyZW50RWxlbWVudD8ucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IHJlc3BvbnNlLmNvbnRlbnRbMF0udHlwZSA9PT0gJ3RleHQnIFxuICAgICAgICAgICAgICAgID8gcmVzcG9uc2UuY29udGVudFswXS50ZXh0IFxuICAgICAgICAgICAgICAgIDogJ0ZhaWxlZCB0byBzdGFydCBjb252ZXJzYXRpb24nO1xuXG4gICAgICAgICAgICBjb25zdCB3ZWxjb21lTWVzc2FnZTogQ2hhdE1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXG4gICAgICAgICAgICAgICAgY29udGVudDogcmVzcG9uc2VUZXh0LFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKHdlbGNvbWVNZXNzYWdlKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyTWVzc2FnZSh3ZWxjb21lTWVzc2FnZSk7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzdGFydCBjb252ZXJzYXRpb246JywgZXJyb3IpO1xuICAgICAgICAgICAgbG9hZGluZ0VsLnBhcmVudEVsZW1lbnQ/LnJlbW92ZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBlcnJvcldyYXBwZXIgPSB0aGlzLm1lc3NhZ2VDb250YWluZXIuY3JlYXRlRGl2KCd0ZXNzZXJhLW1lc3NhZ2Utd3JhcHBlciBhc3Npc3RhbnQnKTtcbiAgICAgICAgICAgIGVycm9yV3JhcHBlci5jcmVhdGVEaXYoJ3Rlc3NlcmEtbWVzc2FnZSBlcnJvcicpXG4gICAgICAgICAgICAgICAgLnNldFRleHQoJ0ZhaWxlZCB0byBzdGFydCBjb252ZXJzYXRpb24nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHNlbmRNZXNzYWdlKGNvbnRlbnQ6IHN0cmluZykge1xuICAgICAgICBpZiAoIWNvbnRlbnQudHJpbSgpKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgdXNlck1lc3NhZ2U6IENoYXRNZXNzYWdlID0ge1xuICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgY29udGVudDogY29udGVudC50cmltKCksXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMubWVzc2FnZXMucHVzaCh1c2VyTWVzc2FnZSk7XG4gICAgICAgIGF3YWl0IHRoaXMucmVuZGVyTWVzc2FnZSh1c2VyTWVzc2FnZSk7XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgY2hhdCBuYW1lIGFmdGVyIGZpcnN0IHVzZXIgbWVzc2FnZVxuICAgICAgICBpZiAoIXRoaXMuY2hhdE5hbWUgJiYgdGhpcy5tZXNzYWdlcy5maWx0ZXIobSA9PiBtLnJvbGUgPT09ICd1c2VyJykubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uZ2VuZXJhdGVDaGF0TmFtZShjb250ZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXROYW1lID0gcmVzcG9uc2UucmVwbGFjZSgvWzw+OlwiL1xcXFx8PypdL2csICctJykudHJpbSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2VuZXJhdGUgY2hhdCBuYW1lOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXROYW1lID0gJ1VudGl0bGVkIENoYXQnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbG9hZGluZ0VsID0gdGhpcy5zaG93TG9hZGluZ0luZGljYXRvcigpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLnNlbmRNZXNzYWdlKGNvbnRlbnQpO1xuICAgICAgICAgICAgbG9hZGluZ0VsLnBhcmVudEVsZW1lbnQ/LnJlbW92ZSgpO1xuXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZVRleHQgPSByZXNwb25zZS5jb250ZW50WzBdLnR5cGUgPT09ICd0ZXh0JyBcbiAgICAgICAgICAgICAgICA/IHJlc3BvbnNlLmNvbnRlbnRbMF0udGV4dCBcbiAgICAgICAgICAgICAgICA6ICdSZWNlaXZlZCBub24tdGV4dCByZXNwb25zZSc7XG5cbiAgICAgICAgICAgIGNvbnN0IGFzc2lzdGFudE1lc3NhZ2U6IENoYXRNZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHJlc3BvbnNlVGV4dCxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXMucHVzaChhc3Npc3RhbnRNZXNzYWdlKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyTWVzc2FnZShhc3Npc3RhbnRNZXNzYWdlKTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBBSSByZXNwb25zZTonLCBlcnJvcik7XG4gICAgICAgICAgICBsb2FkaW5nRWwucGFyZW50RWxlbWVudD8ucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLmxhc3RGYWlsZWRNZXNzYWdlID0gY29udGVudDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlOiBDaGF0TWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgICAgICAgICBjb250ZW50OiAnRmFpbGVkIHRvIGdldCByZXNwb25zZSBmcm9tIEFJJyxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXMucHVzaChlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJNZXNzYWdlKGVycm9yTWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHJlbmRlck1lc3NhZ2UobWVzc2FnZTogQ2hhdE1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IHRoaXMubWVzc2FnZUNvbnRhaW5lci5jcmVhdGVEaXYoYHRlc3NlcmEtbWVzc2FnZS13cmFwcGVyICR7bWVzc2FnZS5yb2xlfWApO1xuICAgICAgICBjb25zdCBtZXNzYWdlRWwgPSB3cmFwcGVyLmNyZWF0ZURpdihgdGVzc2VyYS1tZXNzYWdlICR7bWVzc2FnZS5yb2xlfWApO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIG1lc3NhZ2UgY29udGVudFxuICAgICAgICBpZiAobWVzc2FnZS5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICAgICAgYXdhaXQgTWFya2Rvd25SZW5kZXJlci5yZW5kZXJNYXJrZG93bihcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgbWVzc2FnZUVsLFxuICAgICAgICAgICAgICAgICcudGVzc2VyYS1jaGF0JyxcbiAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZUVsLnNldFRleHQobWVzc2FnZS5jb250ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBib3R0b20gYmFyIHdpdGggdGltZXN0YW1wIGFuZCBjb3B5IGJ1dHRvblxuICAgICAgICBjb25zdCBib3R0b21CYXIgPSB3cmFwcGVyLmNyZWF0ZURpdigndGVzc2VyYS1tZXNzYWdlLWJvdHRvbS1iYXInKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCB0aW1lc3RhbXBcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gYm90dG9tQmFyLmNyZWF0ZURpdigndGVzc2VyYS10aW1lc3RhbXAnKTtcbiAgICAgICAgdGltZXN0YW1wLnNldFRleHQodGhpcy5mb3JtYXRUaW1lc3RhbXAobWVzc2FnZS50aW1lc3RhbXApKTtcblxuICAgICAgICAvLyBBZGQgY29weSBidXR0b25cbiAgICAgICAgY29uc3QgY29weUJ1dHRvbiA9IGJvdHRvbUJhci5jcmVhdGVEaXYoJ3Rlc3NlcmEtY29weS1idXR0b24nKTtcbiAgICAgICAgY29weUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnQ29weSBtZXNzYWdlJyk7XG4gICAgICAgIGNvcHlCdXR0b24uaW5uZXJIVE1MID0gYDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIHdpZHRoPVwiMTZcIiBoZWlnaHQ9XCIxNlwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBmaWxsPVwibm9uZVwiPlxuICAgICAgICAgICAgPHJlY3QgeD1cIjlcIiB5PVwiOVwiIHdpZHRoPVwiMTNcIiBoZWlnaHQ9XCIxM1wiIHJ4PVwiMlwiIHJ5PVwiMlwiPjwvcmVjdD5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNNSAxNUg0YTIgMiAwIDAgMS0yLTJWNGEyIDIgMCAwIDEgMi0yaDlhMiAyIDAgMCAxIDIgMnYxXCI+PC9wYXRoPlxuICAgICAgICA8L3N2Zz5gO1xuXG4gICAgICAgIGNvcHlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KG1lc3NhZ2UuY29udGVudCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNob3cgZmVlZGJhY2tcbiAgICAgICAgICAgIGNvcHlCdXR0b24uYWRkQ2xhc3MoJ2NvcGllZCcpO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjb3B5QnV0dG9uLnJlbW92ZUNsYXNzKCdjb3BpZWQnKSwgMTAwMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5zY3JvbGxUbyh7XG4gICAgICAgICAgICB0b3A6IHRoaXMubWVzc2FnZUNvbnRhaW5lci5zY3JvbGxIZWlnaHQsXG4gICAgICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCdcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmb3JtYXRUaW1lc3RhbXAodGltZXN0YW1wOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGltZXN0YW1wKTtcbiAgICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKFtdLCB7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93TG9hZGluZ0luZGljYXRvcigpIHtcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IHRoaXMubWVzc2FnZUNvbnRhaW5lci5jcmVhdGVEaXYoJ3Rlc3NlcmEtbWVzc2FnZS13cmFwcGVyIGFzc2lzdGFudCcpO1xuICAgICAgICBjb25zdCBsb2FkaW5nRWwgPSB3cmFwcGVyLmNyZWF0ZURpdigndGVzc2VyYS1tZXNzYWdlIGxvYWRpbmcnKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGluZGljYXRvciA9IGxvYWRpbmdFbC5jcmVhdGVEaXYoJ3R5cGluZy1pbmRpY2F0b3InKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgIGluZGljYXRvci5jcmVhdGVTcGFuKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNjcm9sbCB0byBib3R0b20gaW1tZWRpYXRlbHkgYWZ0ZXIgYWRkaW5nIHRoZSBsb2FkaW5nIGluZGljYXRvclxuICAgICAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuc2Nyb2xsVG8oe1xuICAgICAgICAgICAgdG9wOiB0aGlzLm1lc3NhZ2VDb250YWluZXIuc2Nyb2xsSGVpZ2h0LFxuICAgICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGxvYWRpbmdFbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHNhdmVDb252ZXJzYXRpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLm1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gbWVzc2FnZXMgdG8gc2F2ZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIGJhc2UgU2F2ZWQgQ2hhdHMgZm9sZGVyIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgY29uc3QgYmFzZVBhdGggPSAnU2F2ZWQgQ2hhdHMnO1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhiYXNlUGF0aCkpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoYmFzZVBhdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIGRhdGUtYmFzZWQgZm9sZGVyIChmb3JtYXQ6IFlZWVktTU0tREQpXG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbiAgICAgICAgY29uc3QgZGF0ZVBhdGggPSBgJHtiYXNlUGF0aH0vJHt0b2RheX1gO1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhkYXRlUGF0aCkpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZGF0ZVBhdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBgJHtkYXRlUGF0aH0vJHt0aGlzLmNoYXROYW1lIHx8ICdVbnRpdGxlZCBDaGF0J30ubWRgO1xuXG4gICAgICAgIC8vIEFkZCBudW1lcmljIHN1ZmZpeCBpZiBmaWxlIGFscmVhZHkgZXhpc3RzXG4gICAgICAgIGxldCBmaW5hbEZpbGVuYW1lID0gZmlsZW5hbWU7XG4gICAgICAgIGxldCBjb3VudGVyID0gMTtcbiAgICAgICAgd2hpbGUgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZpbmFsRmlsZW5hbWUpKSB7XG4gICAgICAgICAgICBmaW5hbEZpbGVuYW1lID0gYCR7ZGF0ZVBhdGh9LyR7dGhpcy5jaGF0TmFtZSB8fCAnVW50aXRsZWQgQ2hhdCd9ICgke2NvdW50ZXJ9KS5tZGA7XG4gICAgICAgICAgICBjb3VudGVyKys7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtYXJrZG93biA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVDb252ZXJzYXRpb25NYXJrZG93bigpO1xuXG4gICAgICAgIC8vIFNhdmUgdGhlIGZpbGVcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaW5hbEZpbGVuYW1lLCBtYXJrZG93bik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdDb252ZXJzYXRpb24gc2F2ZWQnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gT3BlbiB0aGUgZmlsZSBpbiBhIG5ldyBsZWFmXG4gICAgICAgICAgICBjb25zdCBhYnN0cmFjdEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmluYWxGaWxlbmFtZSk7XG4gICAgICAgICAgICBpZiAoYWJzdHJhY3RGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSkub3BlbkZpbGUoYWJzdHJhY3RGaWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGNvbnZlcnNhdGlvbjonLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gc2F2ZSBjb252ZXJzYXRpb24nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgc3RhcnROZXdDaGF0KCkge1xuICAgICAgICAvLyBDbGVhciBleGlzdGluZyBtZXNzYWdlc1xuICAgICAgICB0aGlzLm1lc3NhZ2VzID0gW107XG4gICAgICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xlYXIgY2hhdCBuYW1lXG4gICAgICAgIHRoaXMuY2hhdE5hbWUgPSBudWxsO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xlYXIgY29udmVyc2F0aW9uIGhpc3RvcnkgaW4gcGx1Z2luXG4gICAgICAgIHRoaXMucGx1Z2luLmNsZWFyQ29udmVyc2F0aW9uSGlzdG9yeSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2hvdyB3ZWxjb21lIG1lc3NhZ2VcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kSW5pdGlhbE1lc3NhZ2UoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgICAgIC50ZXNzZXJhLWNoYXQtY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAudGVzc2VyYS1tZXNzYWdlcyB7XG4gICAgICAgICAgICAgICAgZmxleC1ncm93OiAxO1xuICAgICAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMXJlbTtcbiAgICAgICAgICAgICAgICBzY3JvbGwtYmVoYXZpb3I6IHNtb290aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnRlc3NlcmEtbWVzc2FnZS13cmFwcGVyIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC44cmVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogODUlO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnRlc3NlcmEtbWVzc2FnZS13cmFwcGVyLnVzZXIge1xuICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAudGVzc2VyYS1tZXNzYWdlLXdyYXBwZXIuYXNzaXN0YW50IHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC50ZXNzZXJhLW1lc3NhZ2Uge1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbSAwLjhyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBPdmVycmlkZSBkZWZhdWx0IHBhcmFncmFwaCBtYXJnaW5zICovXG4gICAgICAgICAgICAudGVzc2VyYS1tZXNzYWdlIHAge1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBBZGQgc3BhY2luZyBiZXR3ZWVuIHBhcmFncmFwaHMgb25seSBpZiB0aGV5J3JlIG5vdCB0aGUgbGFzdCBvbmUgKi9cbiAgICAgICAgICAgIC50ZXNzZXJhLW1lc3NhZ2UgcDpub3QoOmxhc3QtY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnRlc3NlcmEtbWVzc2FnZS51c2VyIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDtcbiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC50ZXNzZXJhLW1lc3NhZ2UuYXNzaXN0YW50IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAzcHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC50ZXNzZXJhLXRpbWVzdGFtcCB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjdlbTtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMC4zcmVtO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMC41cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAudGVzc2VyYS1tZXNzYWdlLXdyYXBwZXIudXNlciAudGVzc2VyYS10aW1lc3RhbXAge1xuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAudGVzc2VyYS1tZXNzYWdlLmxvYWRpbmcge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogNHB4O1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBnYXA6IDAuM3JlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnR5cGluZy1pbmRpY2F0b3Ige1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZ2FwOiAwLjNyZW07XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC4ycmVtIDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC50eXBpbmctaW5kaWNhdG9yIHNwYW4ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAwLjVyZW07XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAwLjVyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogYm91bmNlIDEuNHMgaW5maW5pdGUgZWFzZS1pbi1vdXQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC50eXBpbmctaW5kaWNhdG9yIHNwYW46bnRoLWNoaWxkKDEpIHsgYW5pbWF0aW9uLWRlbGF5OiAtMC4zMnM7IH1cbiAgICAgICAgICAgIC50eXBpbmctaW5kaWNhdG9yIHNwYW46bnRoLWNoaWxkKDIpIHsgYW5pbWF0aW9uLWRlbGF5OiAtMC4xNnM7IH1cblxuICAgICAgICAgICAgQGtleWZyYW1lcyBib3VuY2Uge1xuICAgICAgICAgICAgICAgIDAlLCA4MCUsIDEwMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH1cbiAgICAgICAgICAgICAgICA0MCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTAuNXJlbSk7IH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnRlc3NlcmEtaW5wdXQtY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgei1pbmRleDogMjtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGdhcDogMC41cmVtO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuOHJlbTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAgMC41cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAudGVzc2VyYS1pbnB1dC1jb250YWluZXIgdGV4dGFyZWEge1xuICAgICAgICAgICAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgICAgICAgICAgICByZXNpemU6IG5vbmU7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuOTVlbTtcbiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS40O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAudGVzc2VyYS1pbnB1dC1jb250YWluZXIgdGV4dGFyZWE6Zm9jdXMge1xuICAgICAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnRlc3NlcmEtc2VuZC1idXR0b24ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnRlc3NlcmEtc2VuZC1idXR0b246aG92ZXIge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAudGVzc2VyYS1tZXNzYWdlLWJvdHRvbS1iYXIge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMCAwLjVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMC4zcmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAudGVzc2VyYS10aW1lc3RhbXAge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43ZW07XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAudGVzc2VyYS1jb3B5LWJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC4ycmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC50ZXNzZXJhLW1lc3NhZ2Utd3JhcHBlcjpob3ZlciAudGVzc2VyYS1jb3B5LWJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAudGVzc2VyYS1jb3B5LWJ1dHRvbjpob3ZlciB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAudGVzc2VyYS1jb3B5LWJ1dHRvbi5jb3BpZWQge1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIEVuc3VyZSBtYXJrZG93biBjb250ZW50IGlzIHNlbGVjdGFibGUgKi9cbiAgICAgICAgICAgIC50ZXNzZXJhLW1lc3NhZ2UgKiB7XG4gICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IHRleHQ7XG4gICAgICAgICAgICAgICAgY3Vyc29yOiB0ZXh0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBLZWVwIGNvZGUgYmxvY2tzIHNlbGVjdGFibGUgYnV0IHdpdGggY29kZSBjdXJzb3IgKi9cbiAgICAgICAgICAgIC50ZXNzZXJhLW1lc3NhZ2UgcHJlLFxuICAgICAgICAgICAgLnRlc3NlcmEtbWVzc2FnZSBjb2RlIHtcbiAgICAgICAgICAgICAgICBjdXJzb3I6IHRleHQ7XG4gICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IHRleHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC50ZXNzZXJhLWNoYXQtaGVhZGVyIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAudGVzc2VyYS1zYXZlLWJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtO1xuICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAudGVzc2VyYS1zYXZlLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnRlc3NlcmEtaGVhZGVyLWJ1dHRvbnMge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZ2FwOiAwLjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC50ZXNzZXJhLWhlYWRlci1idXR0b24ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnRlc3NlcmEtaGVhZGVyLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnRlc3NlcmEtY29udGV4dC1ub3RpZmljYXRpb24ge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBnYXA6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjVyZW0gMC44cmVtO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDAuOHJlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnRlc3NlcmEtY29udGV4dC1pY29uIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IHNwaW4gMnMgbGluZWFyIGluZmluaXRlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBAa2V5ZnJhbWVzIHNwaW4ge1xuICAgICAgICAgICAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC50ZXNzZXJhLWNvbnRleHQtYmFkZ2Uge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC4ycmVtIDAuNXJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjhlbTtcbiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC50ZXNzZXJhLWNvbnRleHQtYmFkZ2U6aG92ZXIge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmQoc3R5bGUpO1xuICAgIH1cblxuICAgIC8vIEFkZCBuZXcgbWV0aG9kIHRvIGdlbmVyYXRlIG1hcmtkb3duIGNvbnRlbnRcbiAgICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlQ29udmVyc2F0aW9uTWFya2Rvd24oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgLy8gR2VuZXJhdGUgY2hhdCBuYW1lIGlmIG5lZWRlZFxuICAgICAgICBpZiAoIXRoaXMuY2hhdE5hbWUgJiYgdGhpcy5tZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBmaXJzdFVzZXJNZXNzYWdlID0gdGhpcy5tZXNzYWdlcy5maW5kKG0gPT4gbS5yb2xlID09PSAndXNlcicpPy5jb250ZW50O1xuICAgICAgICAgICAgaWYgKGZpcnN0VXNlck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmdlbmVyYXRlQ2hhdE5hbWUoZmlyc3RVc2VyTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhdE5hbWUgPSByZXNwb25zZS5yZXBsYWNlKC9bPD46XCIvXFxcXHw/Kl0vZywgJy0nKS50cmltKCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdlbmVyYXRlIGNoYXQgbmFtZTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhdE5hbWUgPSAnVW50aXRsZWQgQ2hhdCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG1hcmtkb3duID0gYCMgJHt0aGlzLmNoYXROYW1lIHx8ICdDaGF0IEhpc3RvcnknfVxcblxcbmA7XG4gICAgICAgIG1hcmtkb3duICs9IGAqJHtuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCl9KlxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IG1zZyBvZiB0aGlzLm1lc3NhZ2VzKSB7XG4gICAgICAgICAgICBjb25zdCBpY29uID0gbXNnLnJvbGUgPT09ICdhc3Npc3RhbnQnID8gJ1x1RDgzRFx1REQzOScgOiAnXHVEODNEXHVERkUwJztcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBtc2cucm9sZSA9PT0gJ2Fzc2lzdGFudCcgPyAnVGVzc2VyYScgOiAnWW91JztcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gbXNnLmNvbnRlbnQuc3BsaXQoJ1xcbicpLm1hcChsaW5lID0+IGA+ICR7bGluZX1gKS5qb2luKCdcXG4nKTtcbiAgICAgICAgICAgIG1hcmtkb3duICs9IGAke2ljb259ICoqJHtuYW1lfSoqXFxuJHtsaW5lc31cXG5cXG5gO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1hcmtkb3duO1xuICAgIH1cblxuICAgIC8vIEFkZCBuZXcgbWV0aG9kIHRvIGNvcHkgY29udmVyc2F0aW9uXG4gICAgcHJpdmF0ZSBhc3luYyBjb3B5Q29udmVyc2F0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5tZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIG1lc3NhZ2VzIHRvIGNvcHknKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1hcmtkb3duID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUNvbnZlcnNhdGlvbk1hcmtkb3duKCk7XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQobWFya2Rvd24pO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnQ29udmVyc2F0aW9uIGNvcGllZCB0byBjbGlwYm9hcmQnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjb3B5IGNvbnZlcnNhdGlvbjonLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gY29weSBjb252ZXJzYXRpb24nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlTWVzc2FnZUVsZW1lbnQobWVzc2FnZTogeyByb2xlOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyB9LCBjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiBgbWVzc2FnZSAke21lc3NhZ2Uucm9sZSA9PT0gJ3VzZXInID8gJ3VzZXItbWVzc2FnZScgOiAnYWktbWVzc2FnZSd9YFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjb250ZW50RWwgPSBtZXNzYWdlRWwuY3JlYXRlRGl2KHsgY2xzOiAnbWVzc2FnZS1jb250ZW50JyB9KTtcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiBtZXNzYWdlLmNvbnRlbnQgfSk7XG5cbiAgICAgICAgaWYgKG1lc3NhZ2UuY29udGVudCA9PT0gJ0ZhaWxlZCB0byBnZXQgcmVzcG9uc2UgZnJvbSBBSScpIHtcbiAgICAgICAgICAgIGNvbnN0IHJldHJ5Q29udGFpbmVyID0gbWVzc2FnZUVsLmNyZWF0ZURpdih7IGNsczogJ3JldHJ5LWNvbnRhaW5lcicgfSk7XG4gICAgICAgICAgICBuZXcgUmV0cnlCdXR0b24ocmV0cnlDb250YWluZXIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sYXN0RmFpbGVkTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlRWwucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZE1lc3NhZ2UodGhpcy5sYXN0RmFpbGVkTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdEZhaWxlZE1lc3NhZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBhcHBlbmRNZXNzYWdlKG1lc3NhZ2U6IFBhcnRpYWw8Q2hhdE1lc3NhZ2U+KSB7XG4gICAgICAgIGNvbnN0IGZ1bGxNZXNzYWdlOiBDaGF0TWVzc2FnZSA9IHtcbiAgICAgICAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSBhcyBDaGF0TWVzc2FnZTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMubWVzc2FnZXMucHVzaChmdWxsTWVzc2FnZSk7XG4gICAgICAgIGF3YWl0IHRoaXMucmVuZGVyTWVzc2FnZShmdWxsTWVzc2FnZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNob3dDb250ZXh0VXBkYXRlTm90aWZpY2F0aW9uKHVwZGF0ZTogQ29udGV4dFVwZGF0ZSkge1xuICAgICAgICBjb25zdCB3cmFwcGVyID0gdGhpcy5tZXNzYWdlQ29udGFpbmVyLmNyZWF0ZURpdigndGVzc2VyYS1tZXNzYWdlLXdyYXBwZXIgYXNzaXN0YW50Jyk7XG4gICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbkVsID0gd3JhcHBlci5jcmVhdGVEaXYoJ3Rlc3NlcmEtY29udGV4dC1ub3RpZmljYXRpb24nKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGljb24gPSBub3RpZmljYXRpb25FbC5jcmVhdGVTcGFuKCd0ZXNzZXJhLWNvbnRleHQtaWNvbicpO1xuICAgICAgICBpY29uLmlubmVySFRNTCA9IGA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB3aWR0aD1cIjE2XCIgaGVpZ2h0PVwiMTZcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgZmlsbD1cIm5vbmVcIj5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTIgMnY0TTEyIDE4djRNNC45MyA0LjkzbDIuODMgMi44M00xNi4yNCAxNi4yNGwyLjgzIDIuODNNMiAxMmg0TTE4IDEyaDRNNC45MyAxOS4wN2wyLjgzLTIuODNNMTYuMjQgNy43NmwyLjgzLTIuODNcIi8+XG4gICAgICAgIDwvc3ZnPmA7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0ZXh0ID0gbm90aWZpY2F0aW9uRWwuY3JlYXRlU3BhbigpO1xuICAgICAgICB0ZXh0LnNldFRleHQoJ1VwZGF0aW5nIGNvbnRleHQ6ICcpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYmFkZ2UgPSBub3RpZmljYXRpb25FbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgY2xzOiAndGVzc2VyYS1jb250ZXh0LWJhZGdlJyxcbiAgICAgICAgICAgIHRleHQ6IHVwZGF0ZS5maWxlbmFtZVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBsb2FkaW5nIGluZGljYXRvclxuICAgICAgICBjb25zdCBsb2FkaW5nRWwgPSBub3RpZmljYXRpb25FbC5jcmVhdGVTcGFuKCd0ZXNzZXJhLWxvYWRpbmcnKTtcbiAgICAgICAgbG9hZGluZ0VsLmlubmVySFRNTCA9ICdcdTIzRjMnO1xuICAgICAgICBcbiAgICAgICAgYmFkZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHVwZGF0ZS5wYXRoKTtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSkub3BlbkZpbGUoZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgbm90aWZpY2F0aW9uIGFmdGVyIGEgZGVsYXkgdG8gc2hvdyBjb21wbGV0aW9uXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgbG9hZGluZ0VsLmlubmVySFRNTCA9ICdcdTI3MDUnO1xuICAgICAgICAgICAgdGV4dC5zZXRUZXh0KCdDb250ZXh0IHVwZGF0ZWQ6ICcpO1xuICAgICAgICB9LCAxMDAwKTtcbiAgICB9XG59ICIsICJpbXBvcnQgeyBCdXR0b25Db21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBSZXRyeUJ1dHRvbiBleHRlbmRzIEJ1dHRvbkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBvbkNsaWNrOiAoKSA9PiB2b2lkKSB7XG4gICAgICAgIHN1cGVyKGNvbnRhaW5lckVsKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0QnV0dG9uVGV4dChcIlJldHJ5XCIpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoXCJyZXRyeS1idXR0b25cIilcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcImJ1dHRvbi1wcmltYXJ5XCIpXG4gICAgICAgICAgICAub25DbGljayhvbkNsaWNrKTtcbiAgICB9XG59ICIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE5vdGljZSwgRHJvcGRvd25Db21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgVGVzc2VyYVBsdWdpbiBmcm9tICcuL21haW4nO1xuXG4vLyBJbXBvcnQgQU5USFJPUElDX01PREVMUyBmcm9tIG1haW5cbmltcG9ydCB7IEFOVEhST1BJQ19NT0RFTFMgfSBmcm9tICcuL21vZGVscyc7XG5cbmV4cG9ydCBjbGFzcyBUZXNzZXJhU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHByaXZhdGUgdGVtcEFwaUtleTogc3RyaW5nO1xuICAgIHByaXZhdGUgc2hvd0FwaUtleTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHByaXZhdGUgcGx1Z2luOiBUZXNzZXJhUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy50ZW1wQXBpS2V5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5O1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgLy8gUHJvdmlkZXIgU2VsZWN0aW9uXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0FJIFByb3ZpZGVyJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdTZWxlY3QgeW91ciBBSSBwcm92aWRlcicpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2FudGhyb3BpYycsICdBbnRocm9waWMgKENsYXVkZSknKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvdmlkZXIpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6ICdhbnRocm9waWMnKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTsgLy8gUmVmcmVzaCB0byB1cGRhdGUgbW9kZWwgb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE1vZGVsIFNlbGVjdGlvblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdNb2RlbCBTZWxlY3Rpb24nKVxuICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSBiZXR3ZWVuIGRlZmF1bHQgbW9kZWxzIG9yIHNwZWNpZnkgYSBjdXN0b20gb25lJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZGVmYXVsdCcsICdVc2UgRGVmYXVsdCBNb2RlbHMnKVxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdjdXN0b20nLCAnQ3VzdG9tIE1vZGVsJylcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsVHlwZSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogJ2RlZmF1bHQnIHwgJ2N1c3RvbScpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsVHlwZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBTaG93IGFwcHJvcHJpYXRlIG1vZGVsIHNlbGVjdGlvbiBiYXNlZCBvbiB0eXBlXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFR5cGUgPT09ICdkZWZhdWx0Jykge1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ01vZGVsJylcbiAgICAgICAgICAgICAgICAuc2V0RGVzYygnU2VsZWN0IHRoZSBDbGF1ZGUgbW9kZWwgdG8gdXNlJylcbiAgICAgICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhBTlRIUk9QSUNfTU9ERUxTKS5mb3JFYWNoKG1vZGVsSWQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKG1vZGVsSWQsIG1vZGVsSWQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWx3YXlzIGRlZmF1bHQgdG8gYSBrbm93biBnb29kIG1vZGVsIGlmIG5vbmUgaXMgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudE1vZGVsID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbCB8fCAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5JztcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUoY3VycmVudE1vZGVsKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RlZE1vZGVsID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ3VzdG9tIE1vZGVsJylcbiAgICAgICAgICAgICAgICAuc2V0RGVzYygnRW50ZXIgYSBjdXN0b20gbW9kZWwgaWRlbnRpZmllcicpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignZS5nLiwgY2xhdWRlLTMtY3VzdG9tLTIwMjQwMzA3JylcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbU1vZGVsIHx8ICcnKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21Nb2RlbCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFQSSBLZXkgU2V0dGluZ1xuICAgICAgICBjb25zdCBhcGlLZXlTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQVBJIEtleScpXG4gICAgICAgICAgICAuc2V0RGVzYygnWW91ciBBUEkga2V5IGZyb20gdGhlIHNlbGVjdGVkIHByb3ZpZGVyJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIEFQSSBrZXknKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy50ZW1wQXBpS2V5KVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wQXBpS2V5ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC50eXBlID0gJ3Bhc3N3b3JkJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYWRkRXh0cmFCdXR0b24oYnV0dG9uID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24odGhpcy5zaG93QXBpS2V5ID8gJ2V5ZS1vZmYnIDogJ2V5ZScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKHRoaXMuc2hvd0FwaUtleSA/ICdIaWRlIEFQSSBrZXknIDogJ1Nob3cgQVBJIGtleScpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0FwaUtleSA9ICF0aGlzLnNob3dBcGlLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dCA9IGNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJwYXNzd29yZFwiXSwgaW5wdXRbdHlwZT1cInRleHRcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQudHlwZSA9IHRoaXMuc2hvd0FwaUtleSA/ICd0ZXh0JyA6ICdwYXNzd29yZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0SWNvbih0aGlzLnNob3dBcGlLZXkgPyAnZXllLW9mZicgOiAnZXllJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1NhdmUnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RlbFRvVGVzdCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsVHlwZSA9PT0gJ2N1c3RvbScgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tTW9kZWwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4udGVzdEFwaUtleSh0aGlzLnRlbXBBcGlLZXksIG1vZGVsVG9UZXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlLZXkgPSB0aGlzLnRlbXBBcGlLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQVBJIGtleSBzYXZlZCBhbmQgdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdTYXZlZCBcdTI3MTMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1NhdmUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldERpc2FibGVkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIHZlcmlmeSBBUEkga2V5LiBQbGVhc2UgY2hlY2sgdGhlIGtleSBhbmQgbW9kZWwgc2VsZWN0aW9uLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBrZXkgdmVyaWZpY2F0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnUHJvamVjdCBEZWJ1ZyBQYXRoJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdQYXRoIHRvIHNhdmUgZGVidWcgbG9ncyBpbiB5b3VyIHByb2plY3QgZGlyZWN0b3J5IChlLmcuLCBkZWJ1Zy9kZWJ1Zy5tZCknKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdkZWJ1Zy9kZWJ1Zy5tZCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb2plY3REZWJ1Z1BhdGggfHwgJycpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9qZWN0RGVidWdQYXRoID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICB9XG59ICIsICJleHBvcnQgY29uc3QgQU5USFJPUElDX01PREVMUzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5JzogJ2NsYXVkZS0zLXNvbm5ldC0yMDI0MDIyOScsXG4gICAgJ2NsYXVkZS0zLW9wdXMtMjAyNDAyMjknOiAnY2xhdWRlLTMtb3B1cy0yMDI0MDIyOScsXG4gICAgJ2NsYXVkZS0zLWhhaWt1LTIwMjQwMzA3JzogJ2NsYXVkZS0zLWhhaWt1LTIwMjQwMzA3J1xufSBhcyBjb25zdDsgIiwgImltcG9ydCB7IFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgVGVzc2VyYVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcbmltcG9ydCB7IGV4aXN0c1N5bmMsIG1rZGlyU3luYywgYXBwZW5kRmlsZVN5bmMgfSBmcm9tICdmcyc7XG5cbmV4cG9ydCBjbGFzcyBDb250ZXh0TWFuYWdlciB7XG4gICAgcHVibGljIGJhc2VQYXRoID0gJ0NvbnRleHQnO1xuICAgIHByaXZhdGUgYWN0aXZlQ29udGV4dEZpbGVzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgICBwcml2YXRlIGRlYnVnTG9nOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IFRlc3NlcmFQbHVnaW4pIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2dUb0ZpbGUoJ0luaXRpYWxpemluZyBjb250ZXh0IG1hbmFnZXIuLi4nLCAnSU5GTycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFbnN1cmUgYmFzZSBkaXJlY3RvcnkgZXhpc3RzXG4gICAgICAgICAgICBpZiAoIShhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModGhpcy5iYXNlUGF0aCkpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2dUb0ZpbGUoYENyZWF0aW5nIGJhc2UgZGlyZWN0b3J5OiAke3RoaXMuYmFzZVBhdGh9YCwgJ0lORk8nKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKHRoaXMuYmFzZVBhdGgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDcmVhdGUgZW1wdHkgUHJvZmlsZS5tZCBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICAgICAgICBjb25zdCBwcm9maWxlUGF0aCA9IGAke3RoaXMuYmFzZVBhdGh9L1Byb2ZpbGUubWRgO1xuICAgICAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHByb2ZpbGVQYXRoKSkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY3JlYXRlKHByb2ZpbGVQYXRoLCAnJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVDb250ZXh0RmlsZXMuYWRkKHByb2ZpbGVQYXRoKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvZ1RvRmlsZShgQ3JlYXRlZCBuZXcgUHJvZmlsZS5tZCBhdDogJHtwcm9maWxlUGF0aH1gLCAnSU5GTycpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUNvbnRleHRGaWxlcy5hZGQocHJvZmlsZVBhdGgpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubG9nVG9GaWxlKGBBZGRlZCBleGlzdGluZyBQcm9maWxlLm1kIHRvIGFjdGl2ZSBmaWxlczogJHtwcm9maWxlUGF0aH1gLCAnSU5GTycpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvZ1RvRmlsZShgQWN0aXZlIGNvbnRleHQgZmlsZXMgYWZ0ZXIgaW5pdDogJHtKU09OLnN0cmluZ2lmeShBcnJheS5mcm9tKHRoaXMuYWN0aXZlQ29udGV4dEZpbGVzKSl9YCwgJ0RFQlVHJyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvZ1RvRmlsZShgRmFpbGVkIHRvIGluaXRpYWxpemUgY29udGV4dDogJHtlcnJvci5tZXNzYWdlfWAsICdFUlJPUicpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBjcmVhdGVDb250ZXh0RmlsZShuYW1lOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy5iYXNlUGF0aH0vJHtuYW1lfWA7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jcmVhdGUocGF0aCwgY29udGVudCk7XG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZUNvbnRleHRGaWxlKHBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0Q29udGV4dENvbnRlbnQoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgbGV0IGNvbnRleHQgPSAnJztcbiAgICAgICAgZm9yIChjb25zdCBwYXRoIG9mIHRoaXMuYWN0aXZlQ29udGV4dEZpbGVzKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgY29udGV4dCArPSBgIyAke2ZpbGUuYmFzZW5hbWV9XFxuJHtjb250ZW50fVxcblxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRleHQ7XG4gICAgfVxuXG4gICAgYWRkVG9Db250ZXh0KHBhdGg6IHN0cmluZykge1xuICAgICAgICB0aGlzLmFjdGl2ZUNvbnRleHRGaWxlcy5hZGQocGF0aCk7XG4gICAgfVxuXG4gICAgcmVtb3ZlRnJvbUNvbnRleHQocGF0aDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlQ29udGV4dEZpbGVzLmRlbGV0ZShwYXRoKTtcbiAgICB9XG5cbiAgICBjbGVhckNvbnRleHQoKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlQ29udGV4dEZpbGVzLmNsZWFyKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGxvZ1RvRmlsZShtZXNzYWdlOiBzdHJpbmcsIGxldmVsOiAnSU5GTycgfCAnRVJST1InIHwgJ0RFQlVHJyA9ICdJTkZPJywgY29udGVudD86IHN0cmluZykge1xuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCk7XG4gICAgICAgIGxldCBsb2dFbnRyeSA9IGBbJHt0aW1lc3RhbXB9XSBbJHtsZXZlbH1dICR7bWVzc2FnZX1gO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIGNvbnRlbnQgZGV0YWlscyBpZiBwcm92aWRlZFxuICAgICAgICBpZiAoY29udGVudCkge1xuICAgICAgICAgICAgbG9nRW50cnkgKz0gYFxcbkNvbnRlbnQ6IFwiJHtjb250ZW50fVwiYDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbG9nRW50cnkgKz0gJ1xcbic7XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gT25seSBsb2cgdG8gcHJvamVjdCBkaXJlY3RvcnkgaWYgcGF0aCBpcyBjb25maWd1cmVkXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3M/LnByb2plY3REZWJ1Z1BhdGgpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9qZWN0UGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnByb2plY3REZWJ1Z1BhdGg7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpclBhdGggPSBwcm9qZWN0UGF0aC5zcGxpdCgnLycpLnNsaWNlKDAsIC0xKS5qb2luKCcvJyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgZGlyZWN0b3J5IGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFleGlzdHNTeW5jKGRpclBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBta2RpclN5bmMoZGlyUGF0aCwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEFwcGVuZCB0byBmaWxlXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZEZpbGVTeW5jKHByb2plY3RQYXRoLCBsb2dFbnRyeSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHdyaXRlIHRvIHByb2plY3QgZGVidWcgZmlsZTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ05vIHByb2plY3QgZGVidWcgcGF0aCBjb25maWd1cmVkIC0gbG9ncyB3aWxsIG5vdCBiZSBzYXZlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHdyaXRlIHRvIGRlYnVnIGxvZzonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBhcHBlbmRUb1VzZXJDb250ZXh0KGNvbnRlbnQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBwcm9maWxlUGF0aCA9IGAke3RoaXMuYmFzZVBhdGh9L1Byb2ZpbGUubWRgO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9nVG9GaWxlKGBBdHRlbXB0aW5nIHRvIHVwZGF0ZSBwcm9maWxlIGF0OiAke3Byb2ZpbGVQYXRofWApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFbnN1cmUgQ29udGV4dCBkaXJlY3RvcnkgZXhpc3RzXG4gICAgICAgICAgICBpZiAoIShhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModGhpcy5iYXNlUGF0aCkpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2dUb0ZpbGUoJ0NyZWF0aW5nIENvbnRleHQgZGlyZWN0b3J5Li4uJyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih0aGlzLmJhc2VQYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gR2V0IG9yIGNyZWF0ZSBQcm9maWxlLm1kXG4gICAgICAgICAgICBsZXQgZmlsZSA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocHJvZmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKCFmaWxlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2dUb0ZpbGUoJ1Byb2ZpbGUubWQgbm90IGZvdW5kLCBjcmVhdGluZyBuZXcgZmlsZS4uLicpO1xuICAgICAgICAgICAgICAgIGZpbGUgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY3JlYXRlKHByb2ZpbGVQYXRoLCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Q29udGVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkQ29udGVudCA9IGN1cnJlbnRDb250ZW50LnRyaW0oKSArIFxuICAgICAgICAgICAgICAgICAgICAoY3VycmVudENvbnRlbnQudHJpbSgpID8gJ1xcblxcbicgOiAnJykgKyAvLyBPbmx5IGFkZCBuZXdsaW5lcyBpZiB0aGVyZSdzIGV4aXN0aW5nIGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgYCMjIyBVcGRhdGUgJHt0aW1lc3RhbXB9XFxuJHtjb250ZW50fWA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCB1cGRhdGVkQ29udGVudCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2dUb0ZpbGUoJ0NvbnRlbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3MDUgUHJvZmlsZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQ29udGV4dEZpbGVzLmFkZChwcm9maWxlUGF0aCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGFjY2VzcyBQcm9maWxlLm1kIGFzIGEgZmlsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2dUb0ZpbGUoYEVycm9yIGluIGFwcGVuZFRvVXNlckNvbnRleHQ6ICR7ZXJyb3IubWVzc2FnZX1gLCAnRVJST1InKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1Mjc0QyBGYWlsZWQgdG8gdXBkYXRlIHByb2ZpbGU6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgY3JlYXRlTmV3Q29udGV4dEZpbGUobmFtZTogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKCFuYW1lLmVuZHNXaXRoKCcubWQnKSkge1xuICAgICAgICAgICAgbmFtZSA9IGAke25hbWV9Lm1kYDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXRoID0gYXdhaXQgdGhpcy5jcmVhdGVDb250ZXh0RmlsZShuYW1lLCBjb250ZW50KTtcbiAgICAgICAgdGhpcy5hY3RpdmVDb250ZXh0RmlsZXMuYWRkKHBhdGgpO1xuICAgICAgICByZXR1cm4gcGF0aDtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdGhlIG9wZW5EZWJ1Z0xvZyBtZXRob2QgdG8gdXNlIC5tZCBleHRlbnNpb25cbiAgICBhc3luYyBvcGVuRGVidWdMb2coKSB7XG4gICAgICAgIGNvbnN0IGxvZ1BhdGggPSAnZGVidWcubWQnO1xuICAgICAgICBpZiAoYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGxvZ1BhdGgpKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChsb2dQYXRoKTtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRGVidWcgbG9nIGZpbGUgZG9lcyBub3QgZXhpc3QgeWV0Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgbWV0aG9kIHRvIGNoZWNrIGlmIFByb2ZpbGUubWQgZXhpc3RzIGFuZCBpcyB3cml0YWJsZVxuICAgIGFzeW5jIGNoZWNrUHJvZmlsZUZpbGUoKSB7XG4gICAgICAgIGNvbnN0IHByb2ZpbGVQYXRoID0gYCR7dGhpcy5iYXNlUGF0aH0vUHJvZmlsZS5tZGA7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMocHJvZmlsZVBhdGgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Byb2ZpbGUubWQgZXhpc3RzOicsIGV4aXN0cyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChleGlzdHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwcm9maWxlUGF0aCk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQcm9maWxlLm1kIGlzIHJlYWRhYmxlLCBjdXJyZW50IHNpemU6JywgZmlsZS5zdGF0LnNpemUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBQcm9maWxlLm1kOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgZ2V0RGVidWdMb2cgbWV0aG9kIHRvIHVzZSAubWQgZXh0ZW5zaW9uXG4gICAgYXN5bmMgZ2V0RGVidWdMb2coKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbG9nUGF0aCA9ICdkZWJ1Zy5tZCc7XG4gICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGxvZ1BhdGgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQobG9nUGF0aCk7XG4gICAgICAgICAgICAgICAgLy8gU3RyaXAgbWFya2Rvd24gZm9ybWF0dGluZyB3aGVuIHJldHVybmluZyBsb2cgbGluZXNcbiAgICAgICAgICAgICAgICBjb25zdCBsb2dDb250ZW50ID0gY29udGVudC5yZXBsYWNlKC9eIyBEZWJ1ZyBMb2dcXG5cXG5gYGBsb2dcXG58XFxuYGBgJC9nLCAnJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvZ0NvbnRlbnQuc3BsaXQoJ1xcbicpLmZpbHRlcihsaW5lID0+IGxpbmUudHJpbSgpICE9PSAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWydObyBkZWJ1ZyBsb2cgZm91bmQnXTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlYWRpbmcgZGVidWcgbG9nOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBbJ0Vycm9yIHJlYWRpbmcgZGVidWcgbG9nOiAnICsgZXJyb3IubWVzc2FnZV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgZ2V0dGVyIGZvciBhY3RpdmUgZmlsZXNcbiAgICBnZXRBY3RpdmVDb250ZXh0RmlsZXMoKTogU2V0PHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmVDb250ZXh0RmlsZXM7XG4gICAgfVxufSAiXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQXFEOzs7QUNBOUMsSUFBTSxVQUFVOzs7QUMwQmhCLElBQUksT0FBTztBQUNYLElBQUksT0FBa0M7QUFDdEMsSUFBSUMsU0FBb0M7QUFDeEMsSUFBSUMsV0FBd0M7QUFDNUMsSUFBSUMsWUFBMEM7QUFDOUMsSUFBSUMsV0FBd0M7QUFDNUMsSUFBSUMsWUFBMEM7QUFDOUMsSUFBSUMsUUFBa0M7QUFDdEMsSUFBSUMsUUFBa0M7QUFDdEMsSUFBSUMsa0JBQXNEO0FBQzFELElBQUksNkJBQThFO0FBQ2xGLElBQUksa0JBQXdEO0FBQzVELElBQUksZUFBa0Q7QUFDdEQsSUFBSSxpQkFBc0Q7QUFFM0QsU0FBVSxTQUFTLE9BQWMsVUFBNkIsRUFBRSxNQUFNLE1BQUssR0FBRTtBQUNqRixNQUFJLE1BQU07QUFDUixVQUFNLElBQUksTUFDUiw4Q0FBOEMsTUFBTSwrREFBK0Q7O0FBR3ZILE1BQUksTUFBTTtBQUNSLFVBQU0sSUFBSSxNQUNSLDJDQUEyQyxNQUFNLG1EQUFtRCxTQUFTOztBQUdqSCxTQUFPLFFBQVE7QUFDZixTQUFPLE1BQU07QUFDYixFQUFBUCxTQUFRLE1BQU07QUFDZCxFQUFBQyxXQUFVLE1BQU07QUFDaEIsRUFBQUMsWUFBVyxNQUFNO0FBQ2pCLEVBQUFDLFdBQVUsTUFBTTtBQUNoQixFQUFBQyxZQUFXLE1BQU07QUFDakIsRUFBQUMsUUFBTyxNQUFNO0FBQ2IsRUFBQUMsUUFBTyxNQUFNO0FBQ2IsRUFBQUMsa0JBQWlCLE1BQU07QUFDdkIsK0JBQTZCLE1BQU07QUFDbkMsb0JBQWtCLE1BQU07QUFDeEIs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QUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FB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QUFVO0FBQUEsVUFDZCxDQUFDO0FBQUEsUUFDTDtBQUFBLE1BQ0o7QUFBQSxJQUNKLENBQUM7QUFBQSxFQUNMO0FBQUE7QUFBQSxFQUdRLGdCQUFnQixnQkFBZ0M7QUFDcEQsV0FBTztBQUFBO0FBQUE7QUFBQSxFQUdiO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBMENFO0FBQ0o7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJmZXRjaCIsICJSZXF1ZXN0IiwgIlJlc3BvbnNlIiwgIkhlYWRlcnMiLCAiRm9ybURhdGEiLCAiQmxvYiIsICJGaWxlIiwgIlJlYWRhYmxlU3RyZWFtIiwgIl9hIiwgIlJlYWRhYmxlU3RyZWFtIiwgIl9hIiwgIl9hIiwgIkZpbGUiLCAiZmV0Y2giLCAib3B0cyIsICJQYWdlIiwgIl9hIiwgInJldHJ5TWVzc2FnZSIsICJfYSIsICJfYSIsICJfYSIsICJfYSIsICJfYSIsICJfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0IiwgIl9fY2xhc3NQcml2YXRlRmllbGRHZXQiLCAiX2EiLCAiX1Byb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbV9nZXRGaW5hbE1lc3NhZ2UiLCAiX1Byb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbV9nZXRGaW5hbFRleHQiLCAiX1Byb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbV9iZWdpblJlcXVlc3QiLCAiX1Byb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbV9hZGRTdHJlYW1FdmVudCIsICJfUHJvbXB0Q2FjaGluZ0JldGFNZXNzYWdlU3RyZWFtX2VuZFJlcXVlc3QiLCAiX1Byb21wdENhY2hpbmdCZXRhTWVzc2FnZVN0cmVhbV9hY2N1bXVsYXRlTWVzc2FnZSIsICJjaHVuayIsICJNZXNzYWdlcyIsICJfYSIsICJNZXNzYWdlcyIsICJfYSIsICJKU09OX0JVRl9QUk9QRVJUWSIsICJfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0IiwgIl9fY2xhc3NQcml2YXRlRmllbGRHZXQiLCAiX2EiLCAiX01lc3NhZ2VTdHJlYW1fZ2V0RmluYWxNZXNzYWdlIiwgIl9NZXNzYWdlU3RyZWFtX2dldEZpbmFsVGV4dCIsICJfTWVzc2FnZVN0cmVhbV9iZWdpblJlcXVlc3QiLCAiX01lc3NhZ2VTdHJlYW1fYWRkU3RyZWFtRXZlbnQiLCAiX01lc3NhZ2VTdHJlYW1fZW5kUmVxdWVzdCIsICJfTWVzc2FnZVN0cmVhbV9hY2N1bXVsYXRlTWVzc2FnZSIsICJjaHVuayIsICJNZXNzYWdlcyIsICJfYSIsICJfYSIsICJNZXNzYWdlcyIsICJNZXNzYWdlcyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSJdCn0K
